sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.141474410891533,-0.014129878021777,0.076608255505562,-0.162930935621262,0.099553659558296,-0.005437616258860,-0.044695738703012,-0.105910360813141,0.033314917236567,0.017454100772738,-0.014459744095802,0.036471776664257,0.051927272230387,-0.131649985909462,-0.175308525562286,-0.144886985421181));
res += mul(Get(s0,-dx,0), float4x4(-0.178097784519196,-0.102688170969486,0.042477473616600,0.081426061689854,0.119177579879761,-0.024278050288558,0.128306299448013,-0.001482123625465,0.046358823776245,0.152043461799622,0.201128646731377,-0.075540482997894,-0.042810335755348,-0.053826589137316,-0.136859849095345,0.156923413276672));
res += mul(Get(s0,-dx,dy), float4x4(0.083538524806499,-0.018993146717548,0.007803961634636,-0.016819119453430,-0.161904618144035,-0.065585248172283,-0.012568617239594,0.077283412218094,0.085306100547314,0.027184283360839,-0.013354628346860,0.080566652119160,-0.049324896186590,0.096951812505722,-0.258420348167419,0.077966757118702));
res += mul(Get(s0,0,-dy), float4x4(0.028388531878591,0.054185938090086,0.016779784113169,0.200343891978264,-0.022419935092330,0.194206342101097,0.193023324012756,-0.132295325398445,0.196689531207085,-0.231669455766678,0.046027552336454,0.069788634777069,-0.018320346251130,0.058070078492165,0.162533164024353,0.016533294692636));
res += mul(Get(s0,0,0), float4x4(0.008331404067576,0.024530157446861,0.265199989080429,-0.181688621640205,0.095914520323277,-0.113089241087437,0.090152926743031,-0.161494791507721,0.053591251373291,0.117341771721840,0.062982790172100,0.232155457139015,-0.050567667931318,-0.117142431437969,0.184552401304245,0.111219443380833));
res += mul(Get(s0,0,dy), float4x4(0.003869652282447,-0.039401687681675,-0.077008508145809,-0.074110642075539,-0.017463924363256,-0.044597145169973,-0.039511088281870,0.190683200955391,-0.033940892666578,0.026115857064724,-0.011566837318242,-0.074762664735317,-0.099936030805111,0.056907925754786,-0.250855147838593,0.142848417162895));
res += mul(Get(s0,dx,-dy), float4x4(0.097337849438190,-0.188823521137238,-0.137680858373642,-0.093815140426159,-0.135134741663933,0.206919878721237,-0.044294029474258,-0.014570664614439,0.040147211402655,0.122499361634254,0.191095039248466,0.231612354516983,0.020118273794651,-0.027570495381951,0.142211586236954,-0.007577486336231));
res += mul(Get(s0,dx,0), float4x4(-0.003250228939578,-0.129728510975838,-0.050773404538631,0.046498864889145,-0.160060077905655,0.073209933936596,0.049654651433229,-0.224364310503006,0.028478780761361,0.018627801910043,-0.055480144917965,-0.110102191567421,0.119902938604355,-0.075399592518806,0.086219616234303,-0.069180421531200));
res += mul(Get(s0,dx,dy), float4x4(0.093348927795887,0.010452659800649,0.010277058929205,-0.016033699735999,-0.192061886191368,-0.019328823313117,-0.046836223453283,-0.085797503590584,-0.147852137684822,0.077512115240097,0.063267469406128,-0.122834816575050,-0.173231467604637,0.039860825985670,0.150164604187012,-0.128350272774696));
res += mul(Get(s1,-dx,-dy), float4x4(0.008418086916208,0.009718185290694,-0.035767447203398,-0.023941695690155,0.210931450128555,0.101576372981071,0.180045664310455,-0.032293155789375,0.143117785453796,-0.093945637345314,0.032912008464336,-0.032050948590040,0.077756762504578,-0.015914350748062,0.107508793473244,-0.016196975484490));
res += mul(Get(s1,-dx,0), float4x4(-0.085823066532612,-0.015277097932994,-0.232142329216003,0.000792736595031,0.175908327102661,0.062374383211136,-0.057225070893764,-0.082282520830631,-0.002108696848154,0.115099079906940,0.015339346602559,-0.015081803314388,0.020623009651899,0.021744642406702,0.064020812511444,-0.008009666576982));
res += mul(Get(s1,-dx,dy), float4x4(-0.019006326794624,0.015271577052772,0.047167658805847,-0.096526697278023,0.047904882580042,-0.008880466222763,-0.160152837634087,0.059171341359615,-0.058514155447483,-0.028897611424327,-0.107416324317455,-0.049737524241209,-0.008126189000905,-0.111228458583355,-0.165544688701630,-0.052481137216091));
res += mul(Get(s1,0,-dy), float4x4(0.063752539455891,-0.004516777582467,0.026800852268934,0.005182113964111,-0.012006635777652,-0.089927531778812,-0.037384543567896,0.091604679822922,-0.011944405734539,-0.095866635441780,0.032664664089680,-0.012219825759530,-0.056088902056217,-0.099064938724041,0.022070370614529,-0.060245439410210));
res += mul(Get(s1,0,0), float4x4(0.069485582411289,-0.009009814821184,0.092545837163925,-0.034657899290323,0.019041664898396,-0.097774215042591,-0.067254550755024,-0.047375995665789,-0.072473719716072,-0.022064775228500,-0.005974122788757,0.131912827491760,0.034451283514500,0.082395121455193,-0.051891356706619,0.051360704004765));
res += mul(Get(s1,0,dy), float4x4(0.018434541299939,0.016561815515161,0.033616513013840,0.082738354802132,0.151569649577141,0.089991562068462,-0.168936893343925,-0.101748019456863,0.080572657287121,-0.055264521390200,0.052439026534557,0.221022188663483,0.002283581532538,0.036236017942429,-0.104278258979321,0.091833487153053));
res += mul(Get(s1,dx,-dy), float4x4(0.238167211413383,0.054706424474716,-0.135292127728462,-0.342296749353409,0.022542634978890,-0.056889172643423,0.090716838836670,0.044397208839655,-0.038393098860979,-0.028172245249152,0.065759107470512,0.185029312968254,0.018973601981997,-0.180020436644554,-0.147426113486290,-0.105367310345173));
res += mul(Get(s1,dx,0), float4x4(0.099551230669022,-0.158811941742897,0.090232372283936,0.073600202798843,-0.074315272271633,-0.018578913062811,0.125358223915100,-0.066117003560066,0.081396684050560,-0.005072185769677,0.177848368883133,0.121200248599052,0.056509803980589,-0.036850180476904,-0.054209977388382,-0.192777171730995));
res += mul(Get(s1,dx,dy), float4x4(-0.015038923360407,0.067050270736217,-0.037796065211296,0.044061474502087,0.131269305944443,0.055618125945330,0.134709715843201,-0.100997440516949,-0.012784366495907,-0.120738081634045,-0.130280911922455,0.056721277534962,0.083972394466400,0.142356947064400,-0.261426448822021,-0.029949026182294));
res += mul(Get(s2,-dx,-dy), float4x4(-0.077710412442684,0.206065610051155,-0.102522701025009,-0.064904667437077,-0.045989647507668,0.061483338475227,0.043054256588221,-0.059820931404829,0.141815111041069,0.152500554919243,-0.006660588085651,0.054500196129084,0.130557745695114,0.053218510001898,0.052573166787624,0.015405414626002));
res += mul(Get(s2,-dx,0), float4x4(-0.038180809468031,0.093134731054306,-0.108321160078049,0.014990839175880,0.079579316079617,0.068016365170479,-0.067353658378124,0.001465257955715,-0.040630057454109,-0.116215869784355,-0.055115155875683,0.054061036556959,0.086122579872608,0.024076001718640,0.005059082061052,-0.063742078840733));
res += mul(Get(s2,-dx,dy), float4x4(0.038133546710014,0.087348207831383,0.091354653239250,0.019080879166722,0.096696719527245,0.247299969196320,0.042993891984224,-0.161739170551300,-0.048728294670582,-0.100428521633148,0.026039600372314,-0.041890323162079,-0.126505717635155,0.106651425361633,0.031827498227358,0.064207278192043));
res += mul(Get(s2,0,-dy), float4x4(0.007793476339430,-0.063012406229973,0.072283498942852,0.198202952742577,0.080223865807056,0.038053113967180,0.079239971935749,0.022035544738173,0.019260017201304,-0.071279548108578,-0.047504488378763,0.019166670739651,0.035072777420282,0.087015837430954,0.336644589900970,0.092709444463253));
res += mul(Get(s2,0,0), float4x4(-0.080625005066395,0.029455348849297,0.002388535067439,0.021448001265526,-0.041462637484074,0.076312653720379,-0.002530271420255,-0.265282392501831,-0.034013006836176,-0.099537722766399,-0.058134395629168,0.089963048696518,-0.056598205119371,0.025485450401902,0.075214587152004,-0.017314542084932));
res += mul(Get(s2,0,dy), float4x4(-0.076196618378162,0.009812424890697,0.088188484311104,0.039161819964647,-0.126602113246918,0.087349556386471,0.019993877038360,-0.049122057855129,-0.070403113961220,0.009634260088205,-0.037497133016586,-0.268006354570389,-0.153492525219917,0.225037038326263,-0.042404714971781,-0.081396088004112));
res += mul(Get(s2,dx,-dy), float4x4(0.138185039162636,0.107378743588924,0.056838110089302,-0.024488884955645,-0.001104298164137,-0.091297991573811,-0.061859659850597,-0.035177510231733,-0.002498313086107,0.009646127931774,-0.096392244100571,0.129349634051323,0.002244409639388,-0.039040435105562,0.007781185675412,0.050075806677341));
res += mul(Get(s2,dx,0), float4x4(0.033057000488043,-0.135844096541405,0.144263446331024,0.091209746897221,-0.033840447664261,-0.124990247189999,-0.089950434863567,0.014787804335356,-0.035792812705040,-0.066529907286167,-0.079587712883949,0.106920748949051,0.131412789225578,-0.054647654294968,-0.102562569081783,0.284847289323807));
res += mul(Get(s2,dx,dy), float4x4(0.082155965268612,-0.098582223057747,-0.088527925312519,0.153895050287247,-0.032083351165056,-0.049006190150976,-0.065756805241108,0.066706694662571,0.150277733802795,-0.215053692460060,0.107200503349304,0.009206773713231,-0.091766402125359,0.019265500828624,-0.129180416464806,-0.125810742378235));
res += mul(Get(s3,-dx,-dy), float4x4(-0.021394556388259,-0.132521703839302,-0.000925058091525,0.127646476030350,0.105212621390820,0.080300502479076,0.025693535804749,0.086247742176056,0.168530762195587,0.024804705753922,0.078428782522678,0.121106229722500,0.018870014697313,-0.074495866894722,-0.191806122660637,-0.076846882700920));
res += mul(Get(s3,-dx,0), float4x4(0.092315882444382,0.126080855727196,-0.134061679244041,-0.225183799862862,0.043059047311544,0.113937750458717,0.020907578989863,-0.306688398122787,0.160389721393585,-0.010350378230214,-0.206668227910995,0.016727432608604,0.032872855663300,0.048815324902534,-0.034694198518991,0.030355060473084));
res += mul(Get(s3,-dx,dy), float4x4(-0.027289986610413,-0.184154301881790,-0.017501167953014,-0.002555523766205,0.212328001856804,-0.226259425282478,0.034121274948120,-0.099414244294167,-0.037515193223953,-0.145524904131889,0.159864321351051,-0.062164928764105,0.063471712172031,0.083993636071682,0.091957449913025,-0.140117406845093));
res += mul(Get(s3,0,-dy), float4x4(0.249856844544411,0.013478989712894,-0.065232969820499,0.177034869790077,-0.089780122041702,-0.008718275465071,0.020082216709852,0.001403436297551,0.159889891743660,0.166596099734306,0.189947918057442,0.139910146594048,0.152078032493591,0.044206988066435,-0.064112588763237,0.024161234498024));
res += mul(Get(s3,0,0), float4x4(0.016726637259126,-0.057324029505253,0.021989693865180,0.004005275201052,0.161784231662750,0.041037481278181,-0.115151703357697,-0.103479467332363,0.009349043481052,-0.001128149451688,0.002429345156997,0.102579377591610,-0.026207687333226,0.016903191804886,0.004976694937795,-0.129067957401276));
res += mul(Get(s3,0,dy), float4x4(0.125352039933205,0.081981167197227,0.015324519947171,0.150527805089951,0.001744599314407,-0.087730422616005,-0.042690675705671,-0.119899198412895,0.041705969721079,0.055714372545481,0.030764602124691,-0.113511584699154,0.121503219008446,0.121027469635010,0.139531642198563,-0.017799943685532));
res += mul(Get(s3,dx,-dy), float4x4(0.033767845481634,0.159531533718109,0.017621664330363,-0.086636438965797,-0.029268110170960,0.078325234353542,0.074058122932911,-0.056623335927725,0.083340033888817,-0.097531028091908,-0.040400855243206,-0.015392457135022,0.191754430532455,0.002689100801945,0.171136513352394,-0.050511077046394));
res += mul(Get(s3,dx,0), float4x4(0.018689824268222,-0.141281858086586,-0.057030547410250,0.117031976580620,0.032264444977045,-0.072114184498787,-0.059639997780323,-0.252192974090576,0.043936040252447,-0.147587612271309,-0.013678688555956,0.128691062331200,-0.019753016531467,-0.025306342169642,0.034871499985456,0.072116874158382));
res += mul(Get(s3,dx,dy), float4x4(0.016630290076137,0.049287624657154,-0.251145809888840,-0.072730258107185,0.057508129626513,-0.082936443388462,-0.057590734213591,-0.058692056685686,0.023761158809066,-0.052658826112747,0.189056128263474,0.003073906060308,0.023724993690848,0.191309139132500,-0.092917904257774,-0.070430368185043));
return max(float4(0,0,0,0), res);
}
