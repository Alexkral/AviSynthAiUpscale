sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.154559448361397,0.072804838418961,-0.064067371189594,0.245855540037155,0.104404032230377,-0.006577217485756,-0.125134646892548,-0.014621566981077,0.079720743000507,0.251780599355698,-0.193912133574486,-0.030435796827078,0.245037436485291,-0.042195290327072,0.090496003627777,0.174986883997917));
res += mul(Get(s0,-dx,0), float4x4(-0.107138857245445,-0.136585354804993,0.006661117542535,-0.094928972423077,-0.140044912695885,0.016212450340390,-0.289394080638885,0.152766630053520,-0.126002371311188,-0.011256386525929,0.002130712149665,-0.247585847973824,-0.255305916070938,-0.071117214858532,-0.160993963479996,0.016379784792662));
res += mul(Get(s0,-dx,dy), float4x4(0.266093194484711,-0.197518095374107,-0.243588536977768,0.006108071189374,-0.074824541807175,-0.145991176366806,0.051659099757671,0.288953870534897,0.142807826399803,0.028759136795998,0.032078977674246,-0.122734442353249,-0.111328385770321,0.081968545913696,-0.055097877979279,-0.032950617372990));
res += mul(Get(s0,0,-dy), float4x4(-0.153564020991325,-0.114601813256741,-0.098662652075291,0.091628715395927,-0.119293861091137,-0.201781347393990,-0.097690597176552,0.131205022335052,-0.067167215049267,0.351033180952072,-0.107203625142574,-0.064975179731846,-0.004306276328862,0.017694661393762,-0.085723482072353,-0.117107674479485));
res += mul(Get(s0,0,0), float4x4(0.132988467812538,-0.167952269315720,-0.107080385088921,0.004757720045745,0.074661687016487,-0.071122266352177,-0.088740736246109,-0.107957080006599,0.105682455003262,-0.027987923473120,0.099528178572655,0.224903464317322,0.074033088982105,0.068071253597736,-0.076724611222744,-0.026675935834646));
res += mul(Get(s0,0,dy), float4x4(0.287494242191315,0.174800887703896,-0.004968176595867,-0.093494087457657,-0.263366907835007,0.186958938837051,-0.020485559478402,-0.181732282042503,0.035945989191532,-0.004976847674698,-0.033810693770647,0.104628212749958,0.113569945096970,-0.073074720799923,0.105149246752262,0.039625141769648));
res += mul(Get(s0,dx,-dy), float4x4(0.030556580051780,-0.019077112898231,0.372514039278030,-0.186509639024734,0.015905536711216,-0.087725937366486,-0.002980873454362,-0.118929646909237,-0.073226280510426,-0.148146256804466,-0.225741758942604,0.034148920327425,0.028767632320523,0.075174883008003,-0.065109349787235,-0.051237743347883));
res += mul(Get(s0,dx,0), float4x4(-0.241839617490768,-0.037119038403034,0.061842720955610,-0.115534149110317,-0.080119073390961,0.222251519560814,0.111853785812855,-0.071452125906944,0.169805482029915,-0.051732391119003,-0.041923508048058,0.098463997244835,-0.032302446663380,-0.283765822649002,0.065178140997887,0.106130681931973));
res += mul(Get(s0,dx,dy), float4x4(-0.141366481781006,-0.011080803349614,0.002118968870491,-0.123336836695671,-0.230043917894363,-0.115660533308983,-0.165030732750893,-0.260210275650024,-0.093151949346066,0.026138644665480,0.055267710238695,-0.080545276403427,0.044434960931540,-0.020437087863684,0.182235404849052,0.074273146688938));
res += mul(Get(s1,-dx,-dy), float4x4(0.077886871993542,-0.125410959124565,-0.036735165864229,0.093502148985863,-0.187540650367737,0.029002230614424,-0.023745946586132,-0.130625173449516,-0.102356955409050,0.024632677435875,0.026094175875187,0.079656451940536,0.212815642356873,-0.024016171693802,-0.033723875880241,-0.066569276154041));
res += mul(Get(s1,-dx,0), float4x4(-0.102625384926796,-0.078121617436409,-0.013448686338961,0.094741560518742,-0.022147003561258,0.159399867057800,-0.101873524487019,0.016240984201431,-0.103882603347301,-0.134279727935791,-0.084667250514030,0.027401713654399,0.014873038977385,-0.020830357447267,-0.043780017644167,-0.034008968621492));
res += mul(Get(s1,-dx,dy), float4x4(0.089174762368202,0.012869196943939,0.096513234078884,-0.162252902984619,-0.009319403208792,0.142805293202400,-0.086037278175354,0.146498069167137,0.070548914372921,0.028553597629070,-0.030586255714297,0.135214388370514,0.034208111464977,-0.070837222039700,-0.068181045353413,0.022193487733603));
res += mul(Get(s1,0,-dy), float4x4(-0.273903280496597,-0.048470489680767,0.029667377471924,-0.050196249037981,-0.078859984874725,-0.024790897965431,-0.027062835171819,-0.105076178908348,-0.106740333139896,-0.184148445725441,-0.526516973972321,0.094211645424366,0.229425355792046,0.087640672922134,-0.047327931970358,0.098941713571548));
res += mul(Get(s1,0,0), float4x4(-0.029750715941191,-0.070542804896832,-0.053214799612761,0.114168755710125,0.179843008518219,0.025252899155021,0.235709160566330,0.003557975869626,0.133863493800163,-0.052615944296122,0.111336067318916,0.170602664351463,-0.280508875846863,0.022641086950898,0.079007267951965,0.080794997513294));
res += mul(Get(s1,0,dy), float4x4(-0.058838650584221,0.020726827904582,0.002725714584813,0.112338915467262,-0.092112250626087,0.162947669625282,0.046480987221003,0.005100359208882,0.049189787358046,0.097052201628685,0.012197371572256,0.046153325587511,-0.255357921123505,-0.125119283795357,0.018437545746565,0.100934050977230));
res += mul(Get(s1,dx,-dy), float4x4(0.153725117444992,0.248785033822060,-0.023680174723268,-0.055348284542561,-0.052261017262936,-0.007272773422301,0.131050616502762,-0.017519846558571,-0.010925650596619,-0.066520072519779,0.070114061236382,0.147141665220261,-0.137522459030151,-0.000864436442498,0.061463393270969,-0.053479664027691));
res += mul(Get(s1,dx,0), float4x4(0.203941375017166,0.122236445546150,0.153318554162979,0.047771468758583,-0.042788073420525,-0.006565710064024,-0.025746554136276,-0.125849589705467,0.069259583950043,0.057657200843096,-0.045957129448652,0.007821209728718,0.011703745462000,-0.008393923752010,-0.161483362317085,-0.075741119682789));
res += mul(Get(s1,dx,dy), float4x4(0.112138316035271,-0.054023288190365,-0.127119243144989,0.064293786883354,0.004475944209844,0.031854353845119,0.048276532441378,0.049945618957281,0.154879823327065,-0.013252615928650,-0.051809556782246,-0.013960300013423,-0.001424235873856,-0.078766345977783,-0.013193446211517,0.159055128693581));
res += mul(Get(s2,-dx,-dy), float4x4(0.088929727673531,-0.093635618686676,-0.173935443162918,0.032642651349306,-0.018962128087878,0.091976664960384,0.024306315928698,0.026432914659381,0.053424410521984,0.074276693165302,-0.116259753704071,0.166851997375488,0.050977323204279,0.053254313766956,0.049390602856874,0.058814603835344));
res += mul(Get(s2,-dx,0), float4x4(-0.103382050991058,-0.128206863999367,-0.007513352204114,0.186226233839989,0.059762191027403,-0.017650483176112,0.168315127491951,-0.086266912519932,-0.167319580912590,-0.081503555178642,-0.308588922023773,0.273977309465408,0.160951405763626,-0.051492255181074,-0.096365489065647,-0.123055770993233));
res += mul(Get(s2,-dx,dy), float4x4(-0.135551586747169,0.016350295394659,0.261147022247314,-0.061302825808525,-0.241733208298683,0.064750783145428,-0.116614513099194,0.108020998537540,-0.029518995434046,0.054686550050974,-0.041694808751345,-0.002727127401158,-0.013338453136384,-0.081002771854401,0.063778117299080,-0.142882034182549));
res += mul(Get(s2,0,-dy), float4x4(0.097985491156578,-0.036142781376839,-0.105170018970966,0.029185909777880,-0.012331587262452,-0.055683236569166,0.056659515947104,-0.162935733795166,-0.083153314888477,-0.087796516716480,0.057268485426903,-0.133514851331711,0.091326802968979,-0.207121104001999,0.078015156090260,-0.049430467188358));
res += mul(Get(s2,0,0), float4x4(0.144006550312042,0.056785807013512,0.212177440524101,0.018481461331248,-0.073577836155891,0.033583506941795,-0.071185193955898,0.060865376144648,0.024358471855521,0.094372898340225,-0.149720788002014,0.077772922813892,0.173311606049538,0.053332105278969,0.073596648871899,-0.156215280294418));
res += mul(Get(s2,0,dy), float4x4(0.036402311176062,0.117627143859863,0.172531589865685,-0.057472620159388,-0.093672566115856,0.100683771073818,0.107751421630383,-0.021723126992583,0.025326959788799,-0.337790995836258,0.305032372474670,0.048885434865952,-0.114663936197758,0.015182567760348,-0.172178745269775,0.148237138986588));
res += mul(Get(s2,dx,-dy), float4x4(-0.030801098793745,-0.103400304913521,-0.109976291656494,-0.063592121005058,-0.112499132752419,-0.126984357833862,0.110501125454903,0.159694120287895,-0.213491499423981,0.087174877524376,0.123450919985771,-0.024470765143633,-0.175787910819054,0.006275650113821,0.002540333429351,0.220209300518036));
res += mul(Get(s2,dx,0), float4x4(-0.173435628414154,-0.100266061723232,-0.034462276846170,0.002123066689819,-0.051913600414991,0.152296349406242,0.223673835396767,-0.049801275134087,-0.098599947988987,0.040791392326355,0.092273190617561,0.187404036521912,-0.142069488763809,0.237409710884094,-0.211648568511009,-0.143670588731766));
res += mul(Get(s2,dx,dy), float4x4(-0.031517665833235,-0.013504294678569,0.165930330753326,-0.176500782370567,0.184489920735359,0.075807631015778,-0.195282742381096,-0.021265635266900,0.090920120477676,-0.024243026971817,0.121648095548153,0.007558989804238,-0.107744514942169,0.040920604020357,-0.092478647828102,-0.067030496895313));
res += mul(Get(s3,-dx,-dy), float4x4(-0.240350022912025,-0.066210545599461,-0.038563173264265,0.110082082450390,-0.069127082824707,0.226237207651138,0.193110078573227,-0.100306086242199,0.132394194602966,-0.061668917536736,0.178468644618988,0.052501089870930,-0.053715333342552,-0.083526462316513,0.052420951426029,0.212908670306206));
res += mul(Get(s3,-dx,0), float4x4(0.070036284625530,-0.127987220883369,0.087594673037529,0.088295303285122,0.112016320228577,-0.016802927479148,-0.192267596721649,0.028154322877526,-0.009520111605525,-0.042671486735344,-0.044559702277184,-0.107724800705910,-0.072755597531796,-0.297583818435669,-0.146143034100533,0.020442334935069));
res += mul(Get(s3,-dx,dy), float4x4(0.110796891152859,0.085722424089909,0.221981614828110,-0.163407519459724,-0.089633174240589,0.104294680058956,-0.038933638483286,-0.049366094172001,0.080953866243362,0.001766699366271,0.029914481565356,0.033553253859282,-0.044186301529408,-0.160350367426872,-0.177793726325035,-0.078701928257942));
res += mul(Get(s3,0,-dy), float4x4(0.032605331391096,0.107617631554604,-0.142017945647240,-0.038257151842117,-0.077830135822296,0.090073019266129,0.089496783912182,0.074873045086861,0.037314269691706,-0.018093787133694,0.118806168437004,0.088668294250965,0.075046099722385,0.060796219855547,0.119695477187634,0.040464386343956));
res += mul(Get(s3,0,0), float4x4(-0.067781731486320,-0.241003543138504,-0.035884957760572,-0.191736832261086,0.181060820817947,-0.110404737293720,0.034750591963530,0.048881947994232,-0.063002519309521,-0.191393226385117,0.024305341765285,-0.004397791344672,-0.056850165128708,-0.087989911437035,0.067785255610943,-0.082140043377876));
res += mul(Get(s3,0,dy), float4x4(-0.041086986660957,0.091557927429676,0.036761265248060,-0.102680511772633,0.041906397789717,-0.041677124798298,-0.039416071027517,-0.229041308164597,-0.104361727833748,-0.119111947715282,0.113103978335857,0.140484929084778,0.234418272972107,0.040150955319405,0.041907008737326,0.099044479429722));
res += mul(Get(s3,dx,-dy), float4x4(-0.197519600391388,-0.186625406146049,-0.130448311567307,-0.105361633002758,0.000403873098549,0.157681256532669,-0.023801865056157,-0.043425410985947,0.039271946996450,-0.019997796043754,0.127867951989174,0.067888483405113,0.028072455897927,-0.016256380826235,0.093736790120602,-0.073407612740993));
res += mul(Get(s3,dx,0), float4x4(-0.056321419775486,0.077737525105476,0.049454398453236,-0.235704511404037,0.137976780533791,-0.022678917273879,0.250895768404007,0.177148193120956,0.043566543608904,-0.105477765202522,0.083427280187607,-0.086906418204308,-0.050060536712408,0.110928952693939,-0.028137531131506,0.102408751845360));
res += mul(Get(s3,dx,dy), float4x4(-0.115197345614433,-0.084341213107109,-0.006638241466135,0.036421135067940,-0.104599259793758,0.017533047124743,-0.091478087007999,0.067067198455334,-0.085101559758186,-0.077403791248798,-0.018919311463833,0.230116158723831,-0.088793024420738,0.016630446538329,-0.076509855687618,0.024177255108953));
return max(float4(0,0,0,0), res);
}
