sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.046270698308945,-0.044047519564629,-0.139279335737228,-0.111202351748943,-0.028000487014651,0.035600680857897,-0.071780964732170,0.037322781980038,-0.140749812126160,0.124898463487625,0.224137216806412,-0.133091777563095,-0.102512381970882,-0.009677871130407,0.127647414803505,-0.105022020637989));
res += mul(Get(s0,-dx,0), float4x4(0.034165333956480,-0.135469019412994,0.043549370020628,0.102572046220303,0.280761957168579,-0.041647467762232,0.132399559020996,-0.022033970803022,0.122985638678074,0.115195393562317,0.246312245726585,-0.042083386331797,-0.043497096747160,0.023630063980818,-0.081425502896309,-0.093451187014580));
res += mul(Get(s0,-dx,dy), float4x4(0.078103423118591,0.045094847679138,0.107211083173752,0.065588034689426,0.127652570605278,0.101332657039165,-0.051509734243155,0.064100250601768,0.006757359486073,-0.006061316002160,-0.023248653858900,-0.002919690916315,0.133960932493210,-0.201317459344864,-0.044390149414539,-0.135465905070305));
res += mul(Get(s0,0,-dy), float4x4(-0.073126986622810,-0.181469768285751,-0.021402021870017,0.040958736091852,0.028647111728787,0.121722213923931,0.037814330309629,0.061741486191750,-0.005944969598204,0.027771972119808,0.084186814725399,-0.096392340958118,-0.022433508187532,-0.027162473648787,-0.004698134493083,0.039478641003370));
res += mul(Get(s0,0,0), float4x4(-0.001847214647569,0.137450560927391,-0.089851379394531,-0.152379900217056,-0.041167989373207,0.031847033649683,0.092748388648033,0.104563683271408,0.110336959362030,0.184639424085617,0.096690557897091,-0.052052002400160,-0.022531360387802,0.074260212481022,0.128141060471535,0.099657155573368));
res += mul(Get(s0,0,dy), float4x4(0.244140014052391,-0.040517579764128,-0.101021386682987,0.002424532547593,0.093729250133038,-0.001180120045319,-0.085901252925396,-0.117516078054905,0.222141742706299,-0.026334356516600,0.140728309750557,0.193294733762741,0.100519873201847,0.167762398719788,0.085043743252754,0.011327744461596));
res += mul(Get(s0,dx,-dy), float4x4(-0.071070685982704,0.012968170456588,0.137687325477600,-0.100119940936565,0.153594881296158,0.198452442884445,0.116843111813068,0.131195217370987,-0.223662495613098,-0.091477066278458,0.052572324872017,0.043693833053112,0.105945572257042,-0.005524727515876,0.051487620919943,0.058029618114233));
res += mul(Get(s0,dx,0), float4x4(-0.084339499473572,-0.022177897393703,0.161152914166451,0.057623486965895,0.099240645766258,0.028602698817849,0.063520304858685,-0.050118230283260,-0.028605069965124,0.113793097436428,0.094326019287109,-0.058799084275961,0.066920474171638,0.151333123445511,0.003817088436335,0.214197725057602));
res += mul(Get(s0,dx,dy), float4x4(-0.133159816265106,0.139420717954636,0.085510179400444,-0.064406737685204,0.093334354460239,-0.107813052833080,0.051569540053606,-0.072103455662727,-0.133513569831848,-0.009487158618867,-0.090018242597580,-0.160047963261604,-0.117804482579231,0.006882803980261,0.002247146330774,-0.042505610734224));
res += mul(Get(s1,-dx,-dy), float4x4(0.268210023641586,0.097794748842716,0.116283066570759,-0.193776682019234,0.120114959776402,0.089247621595860,-0.074384979903698,-0.026767976582050,-0.052866626530886,0.038740720599890,0.096423625946045,-0.144242718815804,0.064851880073547,0.004990909248590,0.017309332266450,0.007832786999643));
res += mul(Get(s1,-dx,0), float4x4(0.267399281263351,0.133236825466156,0.033822145313025,0.104231588542461,-0.017667610198259,-0.189436808228493,0.023353850468993,-0.118479147553444,0.173031285405159,0.034690294414759,0.053697861731052,-0.112504154443741,0.357282966375351,0.076023615896702,-0.059346854686737,-0.034029431641102));
res += mul(Get(s1,-dx,dy), float4x4(0.121208973228931,-0.142855107784271,0.035837087780237,-0.087335318326950,0.066939584910870,-0.046693403273821,0.091865994036198,-0.085111983120441,-0.055470675230026,0.149935483932495,-0.138925060629845,-0.270365834236145,-0.087591879069805,0.066845521330833,0.063839375972748,-0.026806527748704));
res += mul(Get(s1,0,-dy), float4x4(-0.021218068897724,0.045981593430042,-0.157878547906876,-0.017153907567263,-0.146455466747284,0.010478461161256,-0.046837877482176,0.040393501520157,-0.108107715845108,-0.030791761353612,0.114040754735470,-0.184970229864120,0.258460909128189,-0.201592534780502,0.142744824290276,0.070504017174244));
res += mul(Get(s1,0,0), float4x4(0.084783107042313,-0.036362968385220,-0.079466581344604,-0.083350069820881,0.018327938392758,0.073391400277615,0.090898476541042,-0.028268504887819,-0.080830156803131,0.374966144561768,0.214871302247047,0.028892127797008,0.064957022666931,-0.249242439866066,-0.111723251640797,-0.063877463340759));
res += mul(Get(s1,0,dy), float4x4(-0.071347415447235,-0.240657910704613,0.009464635513723,0.125674560666084,-0.142128795385361,0.061732180416584,-0.146664217114449,-0.051671065390110,0.080992266535759,0.146319970488548,0.024215491488576,-0.121658749878407,0.087553933262825,0.111204579472542,0.073454931378365,-0.167390540242195));
res += mul(Get(s1,dx,-dy), float4x4(0.040756236761808,-0.268922239542007,-0.074065841734409,-0.179329171776772,0.003264295635745,-0.056969277560711,0.232578486204147,0.194270342588425,-0.081921152770519,-0.248873069882393,0.057982992380857,-0.014221431687474,0.074737787246704,-0.049399685114622,-0.214020684361458,-0.126126050949097));
res += mul(Get(s1,dx,0), float4x4(-0.108955651521683,-0.121364802122116,-0.170586898922920,0.180344000458717,-0.070629753172398,0.131590202450752,-0.045596748590469,0.263381332159042,-0.119045414030552,0.034320056438446,0.037678446620703,0.091655999422073,0.003390542929992,-0.045042861253023,-0.125424668192863,-0.188263118267059));
res += mul(Get(s1,dx,dy), float4x4(-0.034454151988029,0.069261848926544,-0.077136017382145,0.073684595525265,0.069221578538418,0.035487625747919,0.062232114374638,-0.002753102220595,0.165406987071037,0.059983503073454,-0.054872300475836,0.031587451696396,0.044717192649841,0.088570460677147,-0.037036150693893,0.000833887723275));
res += mul(Get(s2,-dx,-dy), float4x4(-0.124372974038124,0.012938801199198,-0.181234076619148,-0.024649150669575,-0.021117821335793,-0.057831984013319,0.053832083940506,-0.018808953464031,0.198731660842896,-0.079748317599297,0.021548874676228,0.138750553131104,-0.017529824748635,-0.218356221914291,0.248939931392670,0.079649552702904));
res += mul(Get(s2,-dx,0), float4x4(-0.185984864830971,0.079588122665882,0.047027394175529,-0.008977875113487,-0.034733820706606,-0.024930572137237,-0.130001395940781,0.011274946853518,0.017171490937471,-0.010577186010778,-0.004597890656441,-0.063262097537518,0.023106217384338,0.058348134160042,-0.004163311328739,0.074715234339237));
res += mul(Get(s2,-dx,dy), float4x4(0.090349406003952,-0.012670362368226,0.058778453618288,0.021968914195895,0.214425310492516,0.151901513338089,0.014085432514548,0.165594294667244,-0.084478586912155,-0.123395517468452,-0.092853873968124,-0.189037114381790,-0.227271944284439,0.097347356379032,0.016864279285073,0.152659103274345));
res += mul(Get(s2,0,-dy), float4x4(0.128803253173828,0.217265754938126,-0.196114480495453,0.176375433802605,0.150992751121521,-0.171467080712318,0.159714296460152,-0.077051036059856,-0.054956719279289,0.092505060136318,0.059159860014915,0.082245498895645,0.008950030431151,-0.071172684431076,0.076460920274258,0.125142812728882));
res += mul(Get(s2,0,0), float4x4(-0.042767699807882,0.135166764259338,-0.170202001929283,-0.019930450245738,0.123315982520580,0.081662371754646,-0.036349482834339,0.043994307518005,0.182138130068779,-0.146930694580078,0.036121349781752,0.053492195904255,-0.053729508072138,0.099770493805408,-0.061953201889992,0.044674061238766));
res += mul(Get(s2,0,dy), float4x4(-0.209028676152229,-0.369985610246658,-0.020348211750388,0.110738508403301,0.056203849613667,0.005016050767154,-0.059631951153278,0.104634217917919,-0.025116732344031,-0.256877243518829,-0.011905332095921,-0.036654416471720,-0.160335361957550,-0.007189929019660,-0.014502559788525,-0.176165610551834));
res += mul(Get(s2,dx,-dy), float4x4(0.021337505429983,-0.120474696159363,-0.101135797798634,0.221520677208900,0.012120133265853,-0.076273567974567,-0.128217831254005,-0.100686311721802,0.290460854768753,0.016928240656853,0.088161692023277,0.184710323810577,-0.089358881115913,0.104333773255348,0.092335976660252,-0.009962702170014));
res += mul(Get(s2,dx,0), float4x4(0.063870377838612,0.188338220119476,0.047055467963219,-0.187944993376732,0.151993751525879,-0.026095230132341,0.085728138685226,-0.019721217453480,-0.118611112236977,-0.194014385342598,0.065096288919449,0.105471000075340,0.235838547348976,-0.012214394286275,0.028956212103367,-0.056083410978317));
res += mul(Get(s2,dx,dy), float4x4(0.038055077195168,0.013423920609057,-0.137481227517128,-0.183010309934616,-0.142317950725555,-0.229043647646904,0.054172869771719,0.207219555974007,-0.022676780819893,-0.025989221408963,-0.143218606710434,0.019541624933481,-0.143161997199059,0.001763815758750,0.204010635614395,-0.177396148443222));
res += mul(Get(s3,-dx,-dy), float4x4(-0.012246620841324,0.101905576884747,0.014112935401499,-0.077439881861210,0.178956866264343,0.030445894226432,0.033267416059971,-0.248512923717499,0.066528715193272,0.092914372682571,-0.041219454258680,-0.101416155695915,0.119294688105583,-0.075133398175240,-0.094340875744820,-0.184894293546677));
res += mul(Get(s3,-dx,0), float4x4(0.157280236482620,0.107364363968372,-0.041083797812462,0.077613256871700,-0.149169340729713,-0.197758853435516,-0.081120416522026,-0.157992526888847,-0.159134685993195,-0.031252939254045,0.167848497629166,0.042199209332466,0.039328109472990,0.117272444069386,0.013429346494377,0.132454350590706));
res += mul(Get(s3,-dx,dy), float4x4(0.011205437593162,0.099059075117111,0.011644330807030,-0.164532959461212,0.034256752580404,-0.078005515038967,-0.049784295260906,0.134887650609016,0.009637915529311,-0.345173388719559,0.099985085427761,-0.033252384513617,0.007623989135027,0.164785265922546,0.043944008648396,0.134154990315437));
res += mul(Get(s3,0,-dy), float4x4(-0.065060332417488,0.051406268030405,-0.120709888637066,0.063012450933456,0.020565355196595,-0.016890233382583,0.134665861725807,0.016812356188893,-0.085971817374229,-0.025963041931391,-0.035643558949232,0.116009674966335,-0.200749188661575,-0.020101727917790,-0.257279008626938,0.018400864675641));
res += mul(Get(s3,0,0), float4x4(0.013048549182713,0.030677014961839,-0.035839177668095,-0.097172968089581,-0.131823435425758,-0.017894223332405,-0.167080953717232,0.069531328976154,-0.161496996879578,-0.006291652563959,-0.113020367920399,-0.028473911806941,0.144596576690674,0.031656537204981,-0.034412704408169,-0.233483657240868));
res += mul(Get(s3,0,dy), float4x4(0.070270888507366,-0.024189926683903,0.104607865214348,-0.188602298498154,0.138431265950203,-0.124680571258068,0.125964269042015,0.378022104501724,0.021850263699889,-0.009924453683197,0.098295368254185,-0.092163912951946,0.056260179728270,0.076240867376328,-0.038345482200384,0.069646574556828));
res += mul(Get(s3,dx,-dy), float4x4(-0.185238108038902,-0.082069404423237,-0.012957585975528,0.000672801688779,0.007092383224517,-0.251053959131241,-0.123233705759048,0.101915769279003,0.065900914371014,0.160031676292419,0.191649645566940,0.039137493818998,-0.133676171302795,-0.255832254886627,0.020130651071668,-0.057222276926041));
res += mul(Get(s3,dx,0), float4x4(-0.088048942387104,0.037344951182604,0.103549435734749,-0.008062419481575,-0.038588315248489,-0.040592040866613,0.104157969355583,0.032187998294830,-0.152284696698189,0.138906285166740,0.047853589057922,-0.123708404600620,0.003770815208554,0.041169319301844,0.031066350638866,-0.098170697689056));
res += mul(Get(s3,dx,dy), float4x4(-0.030481230467558,-0.228099301457405,0.141666576266289,-0.028728043660522,-0.174176126718521,-0.035746850073338,-0.003696686821058,-0.139324262738228,0.076456323266029,-0.073822371661663,0.036375701427460,-0.108591951429844,-0.016427971422672,0.117654651403427,-0.047982737421989,0.088374353945255));
return max(float4(0,0,0,0), res);
}
