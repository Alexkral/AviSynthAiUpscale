sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.031476207077503,-0.132890209555626,0.088479705154896,0.001905008684844,0.054357327520847,0.048535529524088,0.030186820775270,-0.029594980180264,-0.237003952264786,0.039406131953001,-0.073670595884323,-0.071148328483105,0.028137916699052,-0.174959838390350,-0.023467196151614,0.189234226942062));
res += mul(Get(s0,-dx,0), float4x4(-0.110578685998917,-0.039405960589647,-0.017323942855000,0.003617306705564,-0.162677198648453,-0.198020294308662,0.127454265952110,0.072433590888977,-0.075959071516991,0.060937542468309,-0.126316234469414,-0.055361304432154,-0.050649583339691,0.078688725829124,0.024187982082367,-0.070655718445778));
res += mul(Get(s0,-dx,dy), float4x4(-0.012033146806061,-0.128396302461624,0.063815228641033,0.147990256547928,0.105071373283863,-0.046724099665880,-0.087471790611744,-0.037049423903227,0.035890877246857,-0.050579771399498,-0.162340715527534,0.070552170276642,-0.038604591041803,-0.196204453706741,-0.055563174188137,-0.017877763137221));
res += mul(Get(s0,0,-dy), float4x4(0.027056090533733,-0.095707356929779,-0.123934283852577,0.064040705561638,-0.042397867888212,0.039516232907772,-0.018835831433535,0.001629285630770,0.073039434850216,-0.105221465229988,-0.138178989291191,-0.018324878066778,-0.116360880434513,-0.149297311902046,0.225272774696350,-0.096061140298843));
res += mul(Get(s0,0,0), float4x4(0.097693607211113,0.006174947600812,-0.110982358455658,-0.051600750535727,-0.043244056403637,0.095333844423294,0.098932877182961,0.120078898966312,0.054625749588013,0.151848271489143,-0.119944877922535,0.098086662590504,0.031546201556921,0.034831244498491,-0.105399407446384,-0.041041549295187));
res += mul(Get(s0,0,dy), float4x4(0.091727942228317,-0.033459480851889,-0.181515395641327,0.029456494376063,0.024080572649837,0.174794137477875,0.133397847414017,-0.026141937822104,0.079489491879940,-0.088163770735264,-0.226512849330902,0.029625456780195,-0.143076434731483,0.098418593406677,-0.221399933099747,0.135120242834091));
res += mul(Get(s0,dx,-dy), float4x4(-0.076649419963360,-0.107132337987423,0.170260041952133,-0.107065431773663,-0.104236893355846,0.067528136074543,0.051709253340960,-0.063784115016460,0.007210718933493,0.003764578839764,-0.109372742474079,0.158238887786865,0.099470570683479,-0.199466109275818,0.081601634621620,-0.104996964335442));
res += mul(Get(s0,dx,0), float4x4(-0.063450798392296,-0.133697286248207,0.129898935556412,0.018230086192489,0.041840899735689,0.059207066893578,-0.326517075300217,0.081917285919189,-0.075647428631783,-0.104439705610275,-0.230919778347015,-0.136371701955795,-0.001513139810413,0.059019509702921,0.013448170386255,-0.177296817302704));
res += mul(Get(s0,dx,dy), float4x4(0.029455555602908,0.132449448108673,-0.040302265435457,-0.138460502028465,0.054702427238226,0.223876312375069,-0.011737731285393,-0.066547438502312,0.058214601129293,-0.234752684831619,0.182675823569298,-0.021675972267985,-0.179273471236229,-0.131367325782776,-0.074911028146744,-0.049793146550655));
res += mul(Get(s1,-dx,-dy), float4x4(-0.032607153058052,0.040960188955069,0.049205675721169,-0.087515279650688,0.114759206771851,-0.023734098300338,-0.099113412201405,-0.055708874017000,-0.003975918050855,-0.058482170104980,0.133000463247299,0.201419949531555,0.018006507307291,-0.071471035480499,-0.283478170633316,0.227180361747742));
res += mul(Get(s1,-dx,0), float4x4(0.162475556135178,-0.073634520173073,0.049103140830994,0.012710875831544,-0.066100731492043,-0.017009424045682,-0.083966150879860,0.146059080958366,-0.017269015312195,-0.179893821477890,-0.173405125737190,0.210621550679207,0.076063692569733,-0.086604923009872,-0.078519560396671,-0.115803815424442));
res += mul(Get(s1,-dx,dy), float4x4(0.000059804191551,0.014011945575476,-0.066706500947475,-0.073849491775036,-0.038622435182333,0.057817660272121,-0.058557271957397,0.134480044245720,0.022588323801756,-0.019065802916884,0.098774582147598,0.131480097770691,0.030173737555742,-0.144989460706711,0.102340362966061,0.112293973565102));
res += mul(Get(s1,0,-dy), float4x4(-0.025774810463190,0.128595128655434,-0.004187112208456,0.039950199425220,0.057690948247910,-0.068493232131004,0.095874637365341,0.009301538579166,-0.039162863045931,-0.083585150539875,-0.016192706301808,0.012122807092965,0.017742535099387,-0.028100674971938,0.205650791525841,-0.016761291772127));
res += mul(Get(s1,0,0), float4x4(0.119005486369133,0.068715356290340,0.036112189292908,0.057482488453388,0.268367022275925,0.040936935693026,-0.037675745785236,0.057483647018671,0.068728581070900,0.095189817249775,-0.007141132373363,0.182883426547050,0.148365139961243,-0.040424697101116,-0.003303771838546,0.106625795364380));
res += mul(Get(s1,0,dy), float4x4(0.049283705651760,0.007085089571774,-0.037331633269787,-0.152955725789070,-0.007536850403994,0.014987853355706,0.051985818892717,0.201334595680237,0.036788653582335,-0.081298269331455,-0.052361506968737,0.197901919484138,-0.134672775864601,-0.074518725275993,0.040966100990772,0.043196253478527));
res += mul(Get(s1,dx,-dy), float4x4(-0.064141929149628,0.084874860942364,-0.071816630661488,0.127347692847252,-0.050543431192636,0.027732156217098,-0.060817230492830,0.104857705533504,-0.078864917159081,0.076044201850891,-0.101714402437210,-0.031937189400196,0.102168969810009,0.157560810446739,0.022670339792967,-0.103008516132832));
res += mul(Get(s1,dx,0), float4x4(-0.024834837764502,0.046836692839861,0.133565232157707,0.042107973247766,0.147247031331062,0.074418194591999,-0.112254247069359,0.011016324162483,-0.061348445713520,-0.051191307604313,0.002201537601650,-0.037795703858137,0.028185006231070,-0.049344010651112,0.048525013029575,-0.066896900534630));
res += mul(Get(s1,dx,dy), float4x4(-0.043857444077730,-0.031185608357191,-0.046433344483376,0.019767299294472,-0.014654766768217,-0.070789441466331,-0.059427820146084,0.007552081719041,0.127716943621635,0.160864651203156,0.040020111948252,0.141374483704567,-0.041518755257130,-0.018393481150270,0.041561692953110,-0.101965099573135));
res += mul(Get(s2,-dx,-dy), float4x4(-0.018049757927656,-0.162622049450874,0.027699422091246,0.025283398106694,-0.043718304485083,-0.024286627769470,-0.161324307322502,-0.042075004428625,0.033377114683390,-0.056263729929924,0.176590263843536,-0.008812755346298,-0.115636952221394,0.137745901942253,0.080359831452370,0.144053623080254));
res += mul(Get(s2,-dx,0), float4x4(0.096130020916462,0.017319412901998,0.015010314062238,-0.155840173363686,-0.082897856831551,0.049452096223831,-0.026583537459373,-0.124061338603497,0.045200664550066,0.207114592194557,0.087420344352722,0.037401691079140,-0.142681464552879,-0.143223971128464,0.084448970854282,-0.074283398687840));
res += mul(Get(s2,-dx,dy), float4x4(-0.008814238943160,0.031567730009556,0.063291043043137,0.012981160543859,0.130734682083130,0.046737164258957,0.047408428043127,0.068837001919746,0.115203857421875,0.139662042260170,0.034268062561750,0.198785021901131,0.032980356365442,-0.021538740023971,-0.051626544445753,-0.111457757651806));
res += mul(Get(s2,0,-dy), float4x4(0.031967755407095,0.090535804629326,0.015818748623133,0.017353201285005,0.004227662924677,0.103231735527515,-0.052938722074032,0.061266917735338,0.072202757000923,-0.108127228915691,-0.147545501589775,0.124131746590137,0.093180224299431,0.006347681395710,0.184357404708862,0.070015922188759));
res += mul(Get(s2,0,0), float4x4(0.105911523103714,0.124801263213158,-0.022045627236366,0.025244012475014,-0.167665719985962,0.019224751740694,0.035685691982508,-0.072848573327065,0.141274452209473,0.089714176952839,-0.097068421542645,-0.033211946487427,0.087112866342068,0.019387478008866,0.086009114980698,-0.115275345742702));
res += mul(Get(s2,0,dy), float4x4(0.017540164291859,0.027454597875476,-0.037854496389627,-0.043460734188557,0.125792607665062,0.050059158354998,0.037765141576529,-0.029736114665866,0.079340182244778,0.117231823503971,0.031077614054084,0.245120540261269,-0.166189759969711,0.002306404523551,-0.102002434432507,-0.012060177512467));
res += mul(Get(s2,dx,-dy), float4x4(-0.053141862154007,0.060829918831587,0.035893451422453,-0.004228745587170,0.120340973138809,-0.190380483865738,-0.106366202235222,-0.117828093469143,0.063316501677036,0.274230152368546,0.070827402174473,0.132238864898682,-0.063080973923206,-0.144775703549385,0.093172371387482,0.141258940100670));
res += mul(Get(s2,dx,0), float4x4(0.171437278389931,-0.006368017289788,-0.109290003776550,0.021383166313171,-0.114901788532734,-0.118482060730457,0.023168494924903,0.066481634974480,-0.086139105260372,0.034941606223583,0.056908126920462,0.086221925914288,0.111825272440910,-0.197256490588188,-0.035694964230061,-0.066224388778210));
res += mul(Get(s2,dx,dy), float4x4(-0.076412163674831,-0.040418732911348,-0.061485130339861,0.003791421884671,-0.032020766288042,0.005291342735291,-0.004597257822752,0.077163212001324,-0.016204014420509,0.193561628460884,0.124483183026314,0.079204946756363,-0.038153931498528,0.152243584394455,-0.117410339415073,0.010922089219093));
res += mul(Get(s3,-dx,-dy), float4x4(0.089448809623718,0.018922107294202,0.000820156477857,-0.167700961232185,-0.124860890209675,-0.010218393057585,0.033829621970654,0.180142790079117,-0.106223225593567,-0.154310762882233,-0.116904780268669,0.005460790358484,-0.039050482213497,-0.093399435281754,0.167020663619041,0.147014006972313));
res += mul(Get(s3,-dx,0), float4x4(-0.046532545238733,-0.114129044115543,0.111614167690277,0.004070712719113,0.003031790489331,-0.059243336319923,-0.004429071675986,0.226918831467628,0.009325928986073,-0.039426628500223,-0.097750961780548,-0.005091698840261,0.127037540078163,0.097434289753437,-0.065407432615757,-0.157787472009659));
res += mul(Get(s3,-dx,dy), float4x4(-0.074860833585262,-0.186355456709862,-0.015303395688534,-0.024274654686451,0.031170599162579,0.016429390758276,0.184895023703575,0.003026036079973,0.029941704124212,-0.031543195247650,0.033181745558977,-0.221111297607422,0.170187741518021,0.037768006324768,0.022212823852897,-0.280622631311417));
res += mul(Get(s3,0,-dy), float4x4(-0.020928906276822,0.049007751047611,0.159936577081680,0.028882149606943,0.016335092484951,0.163565039634705,0.139418393373489,0.090181790292263,-0.114103727042675,0.081272862851620,0.094341136515141,0.168341636657715,-0.066130638122559,-0.111643865704536,-0.023619269952178,0.082539819180965));
res += mul(Get(s3,0,0), float4x4(0.120715074241161,0.234908714890480,-0.078914627432823,-0.092357106506824,0.037787783890963,0.148051172494888,-0.025914218276739,0.102295912802219,-0.045737553387880,0.151568308472633,-0.040067009627819,0.196596205234528,-0.040133096277714,-0.083554007112980,0.065107539296150,0.180055215954781));
res += mul(Get(s3,0,dy), float4x4(0.104727096855640,0.104881964623928,-0.117485933005810,-0.073094740509987,0.074884690344334,0.069497548043728,-0.148520067334175,0.123624078929424,-0.085059054195881,-0.146779492497444,-0.123394228518009,-0.013826667331159,-0.136925265192986,0.101826876401901,0.036942768841982,0.027984425425529));
res += mul(Get(s3,dx,-dy), float4x4(-0.147614479064941,-0.042732093483210,-0.272417157888412,0.143188223242760,-0.145467340946198,0.116255305707455,-0.239482656121254,-0.049786578863859,-0.163969144225121,-0.091494895517826,-0.057151794433594,-0.061484720557928,-0.070087835192680,-0.022706385701895,0.038011323660612,0.007501520682126));
res += mul(Get(s3,dx,0), float4x4(0.031325727701187,0.019537935033441,0.028142368420959,0.091196611523628,-0.063458099961281,-0.021096868440509,-0.033038947731256,0.122329346835613,-0.000334896874847,0.130961731076241,-0.035258259624243,-0.062409952282906,-0.049010258167982,-0.051218874752522,-0.035518370568752,0.030661687254906));
res += mul(Get(s3,dx,dy), float4x4(0.034390471875668,-0.123701550066471,-0.145247206091881,-0.011813355609775,0.244737163186073,0.181255564093590,0.127413421869278,0.010658523067832,-0.010214457288384,-0.016771851107478,-0.133997470140457,-0.118377700448036,-0.121655546128750,0.097161129117012,0.038658924400806,0.094520226120949));
return max(float4(0,0,0,0), res);
}
