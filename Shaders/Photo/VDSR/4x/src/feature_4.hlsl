sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.281420767307281,-0.035425011068583,0.050848994404078,0.167220890522003) * Get(-dx,-dy);
res += float4(0.204790577292442,0.153460294008255,0.005059803836048,0.184643656015396) * Get(-dx,0);
res += float4(0.161857977509499,-0.152831539511681,-0.152443990111351,-0.195766746997833) * Get(-dx,dy);
res += float4(0.176542803645134,0.094653628766537,0.029156744480133,-0.185758963227272) * Get(0,-dy);
res += float4(-0.191704481840134,-0.035602547228336,-0.178699076175690,-0.277855664491653) * Get(0,0);
res += float4(-0.269969880580902,-0.105480901896954,0.107409663498402,0.157559707760811) * Get(0,dy);
res += float4(0.246632307767868,-0.022812787443399,0.003892035223544,-0.192534565925598) * Get(dx,-dy);
res += float4(-0.287010103464127,0.056089799851179,0.024631151929498,0.011699194088578) * Get(dx,0);
res += float4(-0.039133686572313,-0.083646327257156,-0.105440318584442,-0.053761113435030) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
