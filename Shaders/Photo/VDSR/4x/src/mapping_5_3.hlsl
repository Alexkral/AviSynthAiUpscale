sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.087545864284039,0.331724107265472,-0.133863180875778,0.001618559821509,-0.060963347554207,-0.054979655891657,-0.108394645154476,0.053316798061132,0.145172506570816,-0.034178622066975,0.053146332502365,0.049990557134151,0.046779874712229,-0.022330991923809,-0.179661259055138,0.074473232030869));
res += mul(Get(s0,-dx,0), float4x4(-0.039686705917120,0.067341700196266,-0.140237957239151,-0.065230667591095,0.001997192157432,0.075414381921291,0.108722262084484,-0.011204695329070,-0.021217333152890,0.106805272400379,0.042112465947866,0.053372446447611,0.194071575999260,0.055023580789566,-0.016334582120180,-0.093708530068398));
res += mul(Get(s0,-dx,dy), float4x4(-0.189868658781052,0.049920447170734,-0.062932617962360,-0.047838140279055,-0.173918142914772,-0.136290505528450,-0.109222106635571,0.099262297153473,-0.167471602559090,0.124402411282063,0.068431057035923,-0.009061260148883,0.007288835477084,0.076766632497311,-0.114021115005016,-0.309472054243088));
res += mul(Get(s0,0,-dy), float4x4(-0.047314215451479,-0.101261429488659,-0.057673897594213,-0.155146360397339,0.170927464962006,-0.186198964715004,-0.119147837162018,0.018811834976077,0.133120074868202,0.032517708837986,-0.066409111022949,0.112576000392437,-0.052475553005934,-0.143343687057495,-0.037662383168936,-0.015651658177376));
res += mul(Get(s0,0,0), float4x4(0.068519167602062,0.265533715486526,-0.066710829734802,-0.184620082378387,-0.126393094658852,0.024153919890523,-0.029445433989167,-0.162995532155037,0.066733278334141,-0.112526893615723,0.156386867165565,0.058256272226572,0.027205631136894,-0.283557534217834,0.106413871049881,0.034422375261784));
res += mul(Get(s0,0,dy), float4x4(-0.073440201580524,0.235939219594002,-0.157178208231926,-0.173176154494286,-0.169954776763916,-0.125710055232048,0.003266297047958,-0.233526498079300,0.150014296174049,0.276968806982040,0.040535166859627,-0.158195391297340,0.074659548699856,-0.068595774471760,-0.050364758819342,-0.106930486857891));
res += mul(Get(s0,dx,-dy), float4x4(-0.148978531360626,0.104183390736580,0.193274915218353,0.049692820757627,-0.061181552708149,-0.158399119973183,-0.065545372664928,0.131804615259171,0.129443034529686,0.029759688302875,-0.127566635608673,-0.093207091093063,0.104849934577942,0.050111144781113,0.055774975568056,-0.015559158287942));
res += mul(Get(s0,dx,0), float4x4(-0.024340867996216,-0.132640525698662,0.107438281178474,-0.049489803612232,-0.123489253222942,-0.288083225488663,-0.076776124536991,-0.012617657892406,0.048400774598122,-0.245225742459297,-0.077846169471741,0.159010350704193,-0.130501329898834,0.178277611732483,0.079089060425758,0.148321762681007));
res += mul(Get(s0,dx,dy), float4x4(-0.225579261779785,-0.169783040881157,-0.133564606308937,-0.143350526690483,-0.048138611018658,-0.080146327614784,0.082620598375797,-0.097379595041275,-0.131621882319450,0.176804602146149,-0.010656072758138,0.059282165020704,0.129881277680397,0.115167774260044,0.086553677916527,-0.162534534931183));
res += mul(Get(s1,-dx,-dy), float4x4(0.106244213879108,-0.347369700670242,-0.076040901243687,0.001782605191693,-0.059305965900421,-0.090700820088387,-0.085482656955719,0.066939137876034,0.013931677676737,-0.133154064416885,0.126479417085648,0.328570753335953,-0.020759725943208,-0.022967504337430,-0.079708255827427,0.129098445177078));
res += mul(Get(s1,-dx,0), float4x4(0.084625035524368,0.043914478272200,-0.003445281181484,-0.073321372270584,-0.102854572236538,-0.002286122646183,-0.106928549706936,-0.044538311660290,-0.005130990408361,0.064951233565807,0.042521242052317,0.033678233623505,0.070752322673798,-0.000180476723472,0.093071505427361,0.075066685676575));
res += mul(Get(s1,-dx,dy), float4x4(-0.250424176454544,-0.106678955256939,-0.055395338684320,-0.095434673130512,-0.150343030691147,-0.047164767980576,0.015944583341479,-0.041701901704073,0.103202596306801,0.027351850643754,0.095613338053226,-0.092161461710930,0.012537382543087,0.060550957918167,0.236158341169357,0.003628676990047));
res += mul(Get(s1,0,-dy), float4x4(0.010012299753726,0.129057377576828,0.040838181972504,-0.075580768287182,0.194359436631203,0.028864637017250,-0.003752924734727,-0.054790239781141,0.011380409821868,-0.063905015587807,0.062724955379963,0.009356427937746,-0.032371073961258,0.026667552068830,-0.014134597964585,-0.090401127934456));
res += mul(Get(s1,0,0), float4x4(-0.003580884775147,0.013081124052405,-0.156588077545166,0.062267433851957,-0.091057322919369,-0.121833629906178,0.181607171893120,0.058445751667023,0.121072478592396,0.025175960734487,0.117128811776638,0.080124683678150,-0.008105160668492,-0.172564238309860,0.008432861417532,-0.279480487108231));
res += mul(Get(s1,0,dy), float4x4(0.105972714722157,-0.132559314370155,-0.069484859704971,0.065502695739269,0.146967202425003,0.107181169092655,0.124037161469460,0.173527672886848,0.046752836555243,-0.019954916089773,-0.162988394498825,-0.093411080539227,0.076881162822247,0.117236167192459,0.034233048558235,-0.173250436782837));
res += mul(Get(s1,dx,-dy), float4x4(0.125111564993858,0.154207617044449,-0.032266948372126,-0.176593258976936,0.080836221575737,-0.085703723132610,0.065542504191399,-0.092611081898212,0.003680863650516,-0.126690462231636,0.032788332551718,0.017752658575773,-0.133318319916725,0.133397743105888,-0.147944405674934,-0.017601776868105));
res += mul(Get(s1,dx,0), float4x4(-0.123644053936005,-0.082130938768387,-0.205808475613594,0.115722000598907,0.158455997705460,0.154088988900185,-0.043430030345917,0.143724381923676,-0.228094533085823,0.143863588571548,0.210769906640053,-0.078450165688992,0.247160837054253,-0.158730641007423,-0.190850019454956,-0.114404231309891));
res += mul(Get(s1,dx,dy), float4x4(0.064778529107571,-0.151858255267143,-0.022162407636642,0.032338686287403,0.182794362306595,-0.057963024824858,0.025328539311886,0.233727380633354,0.013173441402614,-0.023358326405287,0.184032604098320,0.066007062792778,-0.114963568747044,0.093986436724663,-0.322527050971985,0.135085344314575));
res += mul(Get(s2,-dx,-dy), float4x4(-0.073291160166264,0.087261438369751,-0.139453902840614,-0.117150753736496,0.066621892154217,-0.022686986252666,-0.141435772180557,-0.080364644527435,-0.050328880548477,-0.044290211051702,0.179858833551407,-0.106199525296688,0.037581495940685,-0.084376923739910,-0.011326977983117,-0.166317403316498));
res += mul(Get(s2,-dx,0), float4x4(-0.079294897615910,-0.065960615873337,-0.080959327518940,-0.011021764948964,0.053770814090967,-0.068212360143661,0.201713219285011,0.011136571876705,-0.051479455083609,0.034006111323833,0.114086069166660,0.042911399155855,-0.009350011125207,-0.024450385943055,0.013201259076595,-0.084410466253757));
res += mul(Get(s2,-dx,dy), float4x4(0.207868546247482,0.021291879937053,-0.196399882435799,0.100610777735710,-0.128885805606842,-0.154856935143471,-0.026115521788597,-0.007849806919694,0.167338103055954,0.037793338298798,-0.152710214257240,0.150371938943863,-0.025780428200960,-0.058542780578136,-0.045117385685444,0.019964581355453));
res += mul(Get(s2,0,-dy), float4x4(-0.254964888095856,-0.115200780332088,-0.108688361942768,-0.054500319063663,0.171884030103683,-0.060157492756844,-0.020217670127749,0.139517471194267,0.002264081500471,0.003978241700679,-0.130430355668068,-0.018390379846096,0.157129168510437,-0.049840524792671,0.029154172167182,0.084920242428780));
res += mul(Get(s2,0,0), float4x4(-0.058791577816010,-0.085544757544994,-0.012800378724933,-0.039725597947836,0.041537802666426,-0.063631080091000,-0.127490505576134,-0.021482933312654,0.006458035204560,0.030401121824980,-0.130831226706505,-0.117557778954506,0.021269623190165,0.006766713690013,-0.085358858108521,0.074979618191719));
res += mul(Get(s2,0,dy), float4x4(-0.061164565384388,0.036567080765963,-0.043868809938431,0.146518051624298,-0.063638769090176,0.161821112036705,-0.015177364461124,-0.111131243407726,0.026661058887839,-0.004215775057673,0.153304949402809,-0.125622555613518,0.091679885983467,-0.021964760497212,-0.037973064929247,-0.126782715320587));
res += mul(Get(s2,dx,-dy), float4x4(-0.028856350108981,0.011015466414392,-0.012195347808301,0.079573854804039,-0.110840074717999,-0.194135382771492,-0.060595862567425,-0.199163779616356,-0.082656204700470,0.105994984507561,0.023990973830223,0.117070712149143,-0.011273833923042,-0.105808995664120,0.093135811388493,0.206094622612000));
res += mul(Get(s2,dx,0), float4x4(0.005015824921429,-0.108885683119297,-0.046654522418976,0.068204179406166,0.037025656551123,0.100835829973221,-0.001013237284496,0.006808641366661,-0.050961993634701,0.088455908000469,-0.030740654096007,-0.116399876773357,-0.118097066879272,-0.007874661125243,0.085097588598728,-0.048440709710121));
res += mul(Get(s2,dx,dy), float4x4(-0.112889654934406,-0.070814102888107,0.142672941088676,0.168333873152733,0.022731082513928,-0.028488289564848,0.008775672875345,0.069265156984329,0.064767204225063,-0.124090202152729,0.018643522635102,-0.015927318483591,-0.045061018317938,-0.112401604652405,-0.047445785254240,-0.073163680732250));
res += mul(Get(s3,-dx,-dy), float4x4(-0.155280157923698,0.175308853387833,0.097433358430862,0.133234962821007,0.029572881758213,0.007487254217267,-0.093897715210915,0.054981797933578,-0.145293340086937,-0.087304309010506,0.120601929724216,0.011755866929889,-0.007258606143296,-0.130361676216125,-0.202575474977493,0.009943181648850));
res += mul(Get(s3,-dx,0), float4x4(0.001235544797964,-0.043980259448290,0.068464666604996,-0.087412297725677,-0.171086430549622,0.157447591423988,-0.024438900873065,0.079987816512585,-0.088133245706558,0.000197480418137,0.058850556612015,-0.030825737863779,0.065326496958733,-0.198527693748474,-0.051136381924152,0.061320073902607));
res += mul(Get(s3,-dx,dy), float4x4(-0.119878508150578,0.032977484166622,-0.008694083429873,-0.058912295848131,0.065346717834473,0.088012382388115,0.126248046755791,0.020325925201178,0.004753767512739,0.147862598299980,0.063512340188026,-0.061378937214613,0.023859858512878,-0.071363337337971,-0.182754859328270,0.162977233529091));
res += mul(Get(s3,0,-dy), float4x4(-0.306440860033035,-0.107709638774395,-0.153704494237900,0.141775697469711,-0.030856696888804,-0.032486021518707,0.178008109331131,0.001777651137672,0.107529260218143,-0.120103754103184,-0.105863578617573,0.083961471915245,0.128704637289047,0.003628694452345,0.000488617748488,-0.066208057105541));
res += mul(Get(s3,0,0), float4x4(-0.058728128671646,0.084228843450546,0.048718672245741,-0.149334400892258,0.092991791665554,-0.117504253983498,-0.292217791080475,0.031621713191271,-0.011060998775065,0.009226583875716,-0.258349955081940,0.264052659273148,-0.151268228888512,0.100895278155804,-0.087917298078537,-0.116705380380154));
res += mul(Get(s3,0,dy), float4x4(0.128163680434227,0.158338963985443,-0.014405125752091,-0.187814593315125,-0.025164263322949,0.089463986456394,0.087746746838093,-0.040217310190201,0.085661470890045,-0.094999499619007,-0.089063793420792,0.001038691028953,-0.187674105167389,0.183687463402748,-0.065111599862576,-0.130896061658859));
res += mul(Get(s3,dx,-dy), float4x4(0.023763230070472,0.190591752529144,0.079370863735676,0.096926786005497,0.239673256874084,-0.076805874705315,-0.058396454900503,0.108713008463383,-0.110746048390865,-0.040231823921204,0.095718912780285,0.050877343863249,-0.177626371383667,-0.144613817334175,-0.063898906111717,-0.048208221793175));
res += mul(Get(s3,dx,0), float4x4(0.120533473789692,-0.171564921736717,-0.026799254119396,-0.304958462715149,0.123330011963844,0.085407972335815,0.046129744499922,-0.108611173927784,0.098309651017189,0.013764937408268,0.049646776169538,-0.104836739599705,-0.054071329534054,-0.001758038881235,-0.284201532602310,0.130466237664223));
res += mul(Get(s3,dx,dy), float4x4(0.011627849191427,0.028702862560749,-0.214617744088173,-0.151379346847534,0.003933371510357,0.017614813521504,-0.078380420804024,0.150530248880386,0.253445744514465,-0.036175359040499,-0.089003153145313,-0.037827566266060,-0.132798969745636,0.173518016934395,0.020176200196147,0.062453247606754));
return max(float4(0,0,0,0), res);
}
