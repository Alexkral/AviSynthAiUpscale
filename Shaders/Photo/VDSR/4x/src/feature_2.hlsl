sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(-0.127672210335732,0.183632895350456,-0.331606686115265,-0.024029029533267) * Get(-dx,-dy);
res += float4(-0.127886965870857,-0.099864006042480,-0.080860547721386,0.008985707536340) * Get(-dx,0);
res += float4(-0.069582469761372,-0.127574160695076,-0.188099503517151,-0.411386638879776) * Get(-dx,dy);
res += float4(0.107603259384632,-0.025638960301876,0.059486601501703,0.079432949423790) * Get(0,-dy);
res += float4(0.104977138340473,-0.194575682282448,-0.144189551472664,0.628057420253754) * Get(0,0);
res += float4(-0.196095809340477,0.459979176521301,-0.048887178301811,0.181891411542892) * Get(0,dy);
res += float4(-0.022769276052713,-0.150798246264458,-0.026034902781248,-0.199720636010170) * Get(dx,-dy);
res += float4(-0.076985917985439,-0.257021754980087,-0.046515461057425,-0.018747406080365) * Get(dx,0);
res += float4(-0.013356094248593,0.470151335000992,-0.145445957779884,0.056414056569338) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
