sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.084330961108208,-0.004518876317888,-0.012555254623294,-0.034436967223883,-0.107060864567757,0.054122913628817,0.016780415549874,0.035380456596613,0.117844454944134,0.071749106049538,0.124268509447575,-0.184027999639511,0.018686853349209,0.060880463570356,0.028976775705814,-0.021789148449898));
res += mul(Get(s0,-dx,0), float4x4(0.009774259291589,-0.025355020537972,0.109536543488503,-0.015406946651638,-0.010306607000530,0.037949804216623,-0.048425387591124,-0.063755862414837,0.077156722545624,0.020609278231859,0.045701414346695,-0.030414197593927,-0.016327461227775,0.035700287669897,-0.028148941695690,-0.020933751016855));
res += mul(Get(s0,-dx,dy), float4x4(-0.019544504582882,0.019736042246222,0.052070744335651,-0.072188965976238,0.043335568159819,0.036428432911634,0.107966899871826,0.073218956589699,-0.007938858121634,0.046782542020082,-0.044975053519011,-0.050316933542490,-0.039064209908247,0.053360991179943,0.053574614226818,0.026584900915623));
res += mul(Get(s0,0,-dy), float4x4(-0.017588187009096,0.035081237554550,-0.017846072092652,-0.017305606976151,0.028505897149444,0.011738094501197,-0.061409894376993,0.091462090611458,0.069664545357227,0.024951867759228,0.112289488315582,-0.154250353574753,0.042777653783560,0.037018686532974,0.031994190067053,-0.059599451720715));
res += mul(Get(s0,0,0), float4x4(-0.005930136423558,-0.012744789943099,0.073048539459705,0.031449522823095,-0.058119222521782,-0.053839575499296,0.045103285461664,-0.107560463249683,0.082722231745720,0.003263610415161,0.073935240507126,-0.043814610689878,0.071532703936100,0.015705518424511,0.031666740775108,0.095718652009964));
res += mul(Get(s0,0,dy), float4x4(0.055915053933859,0.028641123324633,0.038466934114695,-0.090842500329018,0.067152343690395,0.052113570272923,-0.057961847633123,0.008511177264154,0.060840472579002,0.031961958855391,0.000618274498265,-0.018509246408939,0.001287886640057,-0.002833793172613,-0.013101891614497,0.012883239425719));
res += mul(Get(s0,dx,-dy), float4x4(0.001054542721249,-0.002845810726285,-0.081892102956772,-0.034689523279667,-0.008023689500988,0.006020017433912,0.049200937151909,0.044921617954969,0.076406665146351,0.008607219904661,0.145288363099098,-0.114544555544853,0.069010667502880,0.061293944716454,0.009286919608712,0.023994028568268));
res += mul(Get(s0,dx,0), float4x4(0.025293674319983,0.000825497030746,-0.051541484892368,0.092114247381687,-0.017706161364913,0.031761273741722,0.096974313259125,0.029483484104276,0.126755073666573,-0.010707448236644,0.008493825793266,-0.101665601134300,-0.011394908651710,-0.034427937120199,0.005593670997769,-0.075706847012043));
res += mul(Get(s0,dx,dy), float4x4(0.059521351009607,0.014626298099756,-0.057944018393755,0.053676310926676,0.125181317329407,0.105238154530525,0.103956505656242,0.070282801985741,0.031420350074768,0.011810429394245,0.049414116889238,-0.047791089862585,-0.029994228854775,0.024265941232443,0.076108925044537,-0.032865218818188));
res += mul(Get(s1,-dx,-dy), float4x4(0.042290579527617,0.031534757465124,-0.036288224160671,-0.076242245733738,-0.063720293343067,-0.004859758075327,-0.043916456401348,-0.018035817891359,-0.176000967621803,0.013945325277746,0.017226057127118,-0.015982408076525,-0.075497254729271,-0.011590648442507,-0.073743492364883,-0.089082986116409));
res += mul(Get(s1,-dx,0), float4x4(0.048716504126787,0.045269314199686,-0.125822663307190,-0.053933776915073,0.087211921811104,-0.046586632728577,-0.019758537411690,0.005197831429541,0.018155384808779,0.053225535899401,0.003704155329615,0.060756806284189,-0.092036537826061,0.041644211858511,-0.068200640380383,-0.095429278910160));
res += mul(Get(s1,-dx,dy), float4x4(0.011589521542192,0.006435607094318,0.047855526208878,0.032431032508612,0.068720735609531,0.044249560683966,0.173333674669266,-0.006653807125986,0.001220230478793,-0.002905466128141,0.044921338558197,-0.006973611656576,-0.034562245011330,-0.016215818002820,-0.058448053896427,-0.058205340057611));
res += mul(Get(s1,0,-dy), float4x4(0.052026320248842,-0.048797030001879,-0.097126729786396,-0.223729789257050,0.151266098022461,0.000851281802170,-0.044212851673365,0.178412228822708,-0.201199606060982,0.001098056440242,0.002307787537575,-0.046269323676825,0.005754978861660,0.003935086540878,-0.006574744824320,0.041826400905848));
res += mul(Get(s1,0,0), float4x4(0.043066862970591,-0.045079331845045,-0.142896682024002,-0.162323608994484,-0.163971662521362,0.054650641977787,0.096646882593632,-0.070659942924976,0.013331615366042,0.069455735385418,0.001264711492695,0.171934559941292,-0.113738298416138,0.036324445158243,0.051164194941521,0.009073173627257));
res += mul(Get(s1,0,dy), float4x4(-0.043565865606070,0.062240410596132,0.190226703882217,0.129135653376579,0.263342410326004,0.102461047470570,0.051294568926096,-0.073778457939625,-0.069665588438511,-0.025481188669801,-0.068441338837147,0.189187511801720,0.009003502316773,-0.003564968006685,-0.077869482338428,0.004353821277618));
res += mul(Get(s1,dx,-dy), float4x4(0.055164359509945,0.030603289604187,0.007733558770269,-0.161309793591499,-0.007658503018320,-0.003972488921136,-0.066184177994728,0.010094767436385,-0.123942159116268,0.048405207693577,0.018531985580921,0.053908493369818,-0.043143443763256,-0.025140594691038,-0.027275688946247,-0.059282545000315));
res += mul(Get(s1,dx,0), float4x4(-0.014653320424259,0.009801097214222,-0.013703241012990,-0.075979784131050,-0.118748828768730,0.003238160163164,0.026255952194333,-0.058203920722008,0.025516552850604,0.042224351316690,0.047681324183941,0.115698732435703,-0.082639098167419,0.009271175600588,-0.036757595837116,-0.108127057552338));
res += mul(Get(s1,dx,dy), float4x4(0.003229480935261,0.024291215464473,-0.025735979899764,0.015935236588120,0.065108574926853,0.046891227364540,0.054873630404472,-0.047776095569134,-0.003873736131936,-0.039065115153790,0.134200766682625,0.008930020034313,0.062773153185844,0.039514742791653,-0.050157770514488,-0.025197446346283));
res += mul(Get(s2,-dx,-dy), float4x4(-0.015754265710711,-0.008796459995210,-0.038198638707399,0.056105118244886,-0.036137238144875,0.007867324166000,0.114528112113476,0.042832158505917,0.090304434299469,-0.045987021178007,0.001888487255201,0.065451771020889,-0.110367044806480,-0.085313707590103,-0.024151498451829,-0.074518881738186));
res += mul(Get(s2,-dx,0), float4x4(0.007417558226734,0.000658041099086,-0.010352690704167,0.040726222097874,0.032502725720406,-0.028940306976438,-0.068545550107956,0.013880628161132,0.027473477646708,-0.168364986777306,-0.020149705931544,-0.112729348242283,0.010132540948689,-0.063721217215061,-0.096993535757065,-0.033430889248848));
res += mul(Get(s2,-dx,dy), float4x4(0.029701821506023,0.002977689029649,-0.020512962713838,-0.093975745141506,0.064687401056290,-0.011761886999011,0.129751801490784,-0.045810472220182,-0.029512669891119,-0.135112613439560,0.042284183204174,-0.033034380525351,-0.035234905779362,-0.063503161072731,-0.028937237337232,0.002814901527017));
res += mul(Get(s2,0,-dy), float4x4(-0.038766320794821,0.023112580180168,0.015687784180045,0.057381108403206,-0.080785863101482,-0.053480368107557,0.138421073555946,-0.060082878917456,-0.031139153987169,-0.066087409853935,0.018587483093143,-0.175660207867622,-0.081379614770412,-0.005947283934802,0.033199731260538,-0.026039075106382));
res += mul(Get(s2,0,0), float4x4(0.067805089056492,0.006725621409714,-0.024612328037620,0.015538499690592,-0.004550546873361,-0.055894751101732,0.217156231403351,0.077182047069073,0.047324478626251,-0.135138303041458,0.116534210741520,0.048456691205502,0.013830514624715,-0.026679789647460,0.015163920819759,0.100572951138020));
res += mul(Get(s2,0,dy), float4x4(0.048801477998495,-0.027650665491819,-0.041437853127718,-0.065043926239014,0.027971494942904,0.013504181988537,0.042205806821585,0.036828771233559,-0.007935138419271,-0.150073871016502,-0.039332468062639,-0.028493029996753,-0.011174998246133,-0.084651678800583,-0.060268133878708,0.019363416358829));
res += mul(Get(s2,dx,-dy), float4x4(-0.073822185397148,0.039671435952187,0.076722346246243,0.036988172680140,0.000641582184471,0.027138102799654,-0.059525251388550,-0.080826871097088,0.018607800826430,-0.041843596845865,0.030913641676307,-0.103913724422455,-0.043842114508152,-0.084168612957001,-0.031879864633083,0.034338325262070));
res += mul(Get(s2,dx,0), float4x4(0.004968089051545,-0.048475027084351,-0.061515748500824,-0.130996733903885,-0.001134232617915,0.073112949728966,-0.131715416908264,-0.017829641699791,0.040601935237646,-0.124183334410191,0.009815487079322,0.051840033382177,-0.053818579763174,0.007965951226652,0.001823702943511,0.029166128486395));
res += mul(Get(s2,dx,dy), float4x4(0.069809876382351,-0.090745151042938,-0.114529654383659,-0.054178383201361,0.016981922090054,0.105263359844685,-0.091401346027851,-0.009473402984440,-0.029460361227393,-0.114886105060577,0.001534717739560,0.013920417986810,-0.016620274633169,-0.035645619034767,-0.029733674600720,-0.016541689634323));
res += mul(Get(s3,-dx,-dy), float4x4(0.004556008614600,-0.030815765261650,0.015412692911923,-0.083787247538567,-0.090473771095276,0.009317069314420,0.026790734380484,0.055366728454828,0.072503902018070,0.010358523577452,0.059865277260542,-0.132668167352676,-0.006936129182577,0.016521105542779,-0.095001615583897,0.010409714654088));
res += mul(Get(s3,-dx,0), float4x4(0.058764237910509,-0.030703641474247,0.144070878624916,0.012995458208025,-0.111202105879784,0.069416709244251,-0.041830863803625,-0.029780818149447,0.017183339223266,-0.075615674257278,0.105736665427685,0.014632795006037,-0.002300597727299,0.051039304584265,0.076467983424664,-0.012867294251919));
res += mul(Get(s3,-dx,dy), float4x4(-0.020685922354460,-0.020162401720881,0.121291749179363,0.082854025065899,0.073619358241558,0.040616501122713,-0.043561056256294,0.015170657075942,-0.008261350914836,0.059234064072371,0.112755708396435,0.016785647720098,-0.069393403828144,0.003711538156494,0.138638585805893,0.049300953745842));
res += mul(Get(s3,0,-dy), float4x4(-0.116502203047276,-0.000827585346997,0.064616158604622,-0.086075745522976,0.135744273662567,-0.033703185617924,-0.046861302107573,0.060613315552473,0.172834485769272,0.022681759670377,-0.038776777684689,0.077179148793221,0.004430388566107,0.007268271874636,-0.087855264544487,-0.021170377731323));
res += mul(Get(s3,0,0), float4x4(-0.038182090967894,-0.024216815829277,-0.001203228835948,-0.092827193439007,-0.190576910972595,0.058904457837343,0.198754087090492,0.131569162011147,-0.069658711552620,0.032119221985340,0.027864338830113,-0.133292108774185,0.061630278825760,0.028702696785331,0.168037220835686,0.088500954210758));
res += mul(Get(s3,0,dy), float4x4(-0.110838413238525,-0.060982201248407,0.190858274698257,0.090893335640430,0.018210709095001,0.052562050521374,0.177409395575523,0.082301683723927,-0.000685619073920,-0.042722348123789,0.011622874997556,0.035794068127871,-0.112998388707638,-0.032804347574711,-0.009393271058798,0.053209342062473));
res += mul(Get(s3,dx,-dy), float4x4(0.009017658419907,-0.009798600338399,-0.109789259731770,-0.110537290573120,0.003259812714532,0.021067567169666,0.017323836684227,-0.047750666737556,0.026994742453098,-0.003362963907421,0.011531352996826,0.124911151826382,-0.002084465930238,0.016493761911988,-0.108535468578339,-0.027270136401057));
res += mul(Get(s3,dx,0), float4x4(-0.039100829511881,-0.078417345881462,-0.025828471407294,-0.015047990716994,-0.167210966348648,0.054869636893272,-0.033630937337875,0.120655037462711,0.074004627764225,0.019652370363474,0.097959250211716,0.000578675593715,0.089894756674767,-0.032697994261980,0.055134907364845,0.030008956789970));
res += mul(Get(s3,dx,dy), float4x4(-0.067741692066193,-0.032570555806160,-0.066510438919067,0.054117556661367,0.028308410197496,0.040782261639833,0.015821214765310,0.054123036563396,0.051931373775005,-0.015680726617575,-0.042362354695797,-0.057669132947922,-0.085586026310921,0.001948834978975,0.111289449036121,0.058253102004528));
return max(float4(0,0,0,0), res);
}
