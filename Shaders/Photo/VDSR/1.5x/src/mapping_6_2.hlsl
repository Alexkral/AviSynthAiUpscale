sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.037285901606083,0.009100019931793,0.225232064723969,-0.160133332014084,0.089292727410793,-0.082916416227818,0.017885645851493,0.106881625950336,-0.034972805529833,0.031958535313606,-0.029853895306587,0.091774441301823,0.007881985977292,-0.033736061304808,-0.140957415103912,-0.141832813620567));
res += mul(Get(s0,-dx,0), float4x4(0.048324260860682,0.094577968120575,-0.094247072935104,0.138645023107529,-0.064496949315071,-0.027332253754139,0.143802151083946,-0.061283018440008,-0.051496207714081,-0.029520399868488,-0.020123884081841,0.054834228008986,-0.037882454693317,0.112860687077045,0.064203582704067,-0.086224704980850));
res += mul(Get(s0,-dx,dy), float4x4(0.045086950063705,-0.066728569567204,0.028625624254346,-0.006899614352733,0.030451701954007,0.084365613758564,-0.000702180608641,0.101472690701485,0.138412892818451,0.097540430724621,-0.036503266543150,0.036116968840361,-0.076123803853989,-0.076173044741154,0.032606318593025,0.123327337205410));
res += mul(Get(s0,0,-dy), float4x4(0.014784279279411,0.050288774073124,-0.050133489072323,0.086287327110767,0.130450248718262,0.018136972561479,-0.020366968587041,0.054139427840710,0.036018840968609,-0.072138771414757,-0.037669766694307,0.077038601040840,-0.046065788716078,-0.055919032543898,0.153461724519730,0.044045589864254));
res += mul(Get(s0,0,0), float4x4(0.188830181956291,-0.074604593217373,0.018337059766054,0.062193945050240,-0.058153443038464,-0.026768023148179,0.132001325488091,0.226618051528931,0.056963864713907,-0.039661921560764,0.124582447111607,0.212983399629593,0.026996048167348,-0.052069529891014,0.018614461645484,-0.061210371553898));
res += mul(Get(s0,0,dy), float4x4(0.127770438790321,-0.116861529648304,0.054420318454504,-0.184891998767853,0.025355326011777,0.003784554544836,0.049976073205471,-0.043133854866028,0.111274167895317,-0.120513617992401,-0.068364098668098,0.110748000442982,-0.068613037467003,-0.009736928157508,-0.002504125004634,-0.067958220839500));
res += mul(Get(s0,dx,-dy), float4x4(0.205695182085037,-0.067766740918159,-0.055092185735703,0.121754877269268,-0.055861849337816,0.083731822669506,-0.066647917032242,0.157731682062149,-0.052565678954124,0.067332968115807,0.074137136340141,0.069446384906769,0.051353950053453,-0.011544450186193,-0.132864922285080,-0.221046790480614));
res += mul(Get(s0,dx,0), float4x4(-0.274564713239670,-0.122694209218025,0.208244159817696,-0.015752682462335,0.043094292283058,0.014903316274285,0.169944345951080,0.081716924905777,0.062699094414711,-0.166051924228668,0.037783905863762,-0.116498768329620,0.044436346739531,-0.152926355600357,-0.121842399239540,0.040920529514551));
res += mul(Get(s0,dx,dy), float4x4(-0.195841446518898,-0.009801546111703,-0.070921659469604,-0.037125613540411,0.157254293560982,0.124189808964729,-0.034708596765995,0.014215214177966,0.051349453628063,0.082293927669525,0.089510224759579,0.008687242865562,-0.062083326280117,-0.009591169655323,-0.037728246301413,-0.144146338105202));
res += mul(Get(s1,-dx,-dy), float4x4(-0.137105762958527,0.117301151156425,0.037276584655046,0.039217188954353,0.075747646391392,-0.150291323661804,0.001852317014709,-0.042113825678825,-0.079404711723328,-0.025562793016434,-0.089678920805454,0.052537515759468,0.016705991700292,-0.095750808715820,0.079763755202293,0.148700356483459));
res += mul(Get(s1,-dx,0), float4x4(0.021571166813374,-0.042532477527857,-0.019100110977888,-0.084494642913342,-0.057406574487686,-0.045118495821953,0.111053690314293,0.151001885533333,-0.000819535460323,0.010639971122146,-0.063973434269428,0.109374850988388,-0.056410089135170,0.016646584495902,-0.121713876724243,0.030070945620537));
res += mul(Get(s1,-dx,dy), float4x4(-0.087544038891792,0.095033451914787,0.086331620812416,-0.096339151263237,-0.028491530567408,0.082647524774075,0.151999056339264,0.059216316789389,0.117432765662670,0.042541295289993,0.086385905742645,-0.026968853548169,-0.011285534128547,0.053725250065327,-0.055748347193003,-0.013235090300441));
res += mul(Get(s1,0,-dy), float4x4(-0.095560066401958,0.065548919141293,0.013885364867747,0.019431499764323,0.046371571719646,-0.065166272222996,0.068948060274124,0.186913907527924,-0.091877713799477,-0.054947938770056,0.065923295915127,-0.269617170095444,-0.182099029421806,0.026572747156024,-0.052012715488672,-0.102715514600277));
res += mul(Get(s1,0,0), float4x4(-0.029498532414436,0.015356976538897,-0.063427008688450,-0.047602564096451,-0.059267140924931,0.081669710576534,0.037051312625408,0.121533066034317,0.084892109036446,-0.181630879640579,-0.065379485487938,0.031597111374140,0.079287365078926,0.155606597661972,-0.138144090771675,0.031684186309576));
res += mul(Get(s1,0,dy), float4x4(0.010620976798236,0.218600988388062,-0.001486959983595,-0.148398190736771,0.066607885062695,0.276642739772797,-0.157485812902451,0.004498043097556,-0.062402416020632,0.059361923485994,-0.123231373727322,0.044767890125513,0.057431422173977,-0.064500249922276,-0.170580685138702,-0.145300373435020));
res += mul(Get(s1,dx,-dy), float4x4(0.099081404507160,-0.058191761374474,0.060931868851185,-0.109683826565742,-0.182638093829155,-0.041565060615540,0.012007713317871,0.019286124035716,-0.122343324124813,0.078801356256008,0.003610798390582,-0.021395433694124,-0.131228417158127,0.053785365074873,0.026881983503699,0.156099930405617));
res += mul(Get(s1,dx,0), float4x4(-0.062528520822525,0.058962300419807,-0.048783663660288,0.107893742620945,0.053333785384893,-0.018990436568856,0.068497426807880,0.124374844133854,-0.068334631621838,0.065756149590015,-0.031322252005339,0.052218645811081,0.087760254740715,-0.095025338232517,0.106229238212109,-0.179445207118988));
res += mul(Get(s1,dx,dy), float4x4(0.004013974219561,0.055132918059826,0.048646602779627,0.007231008727103,-0.083599023520947,-0.105154782533646,-0.006439660210162,-0.088559128344059,-0.057815171778202,0.105275914072990,-0.123816400766373,-0.020642073825002,-0.114591151475906,-0.018179077655077,-0.009076450020075,-0.015588840469718));
res += mul(Get(s2,-dx,-dy), float4x4(0.089281693100929,0.006852983962744,0.036503467708826,0.048525024205446,0.084009930491447,-0.018123624846339,-0.087965764105320,0.101611010730267,0.150583207607269,0.126261711120605,0.016937600448728,-0.038955759257078,-0.052616827189922,-0.001858771545812,0.052742861211300,0.107237994670868));
res += mul(Get(s2,-dx,0), float4x4(-0.011345334351063,-0.156918287277222,0.073065549135208,-0.057627428323030,-0.100588850677013,-0.022883772850037,-0.113666057586670,-0.066481679677963,-0.107024431228638,-0.067415900528431,-0.176870584487915,0.014832618646324,0.070692785084248,0.121967591345310,-0.195635706186295,0.056642599403858));
res += mul(Get(s2,-dx,dy), float4x4(0.067282721400261,0.005793671123683,0.054086390882730,-0.061927277594805,-0.018650222569704,0.069745719432831,-0.025807907804847,-0.126231998205185,0.046291712671518,-0.074842348694801,-0.090376302599907,-0.178373828530312,-0.082542754709721,-0.000038310361560,-0.053678218275309,-0.066124223172665));
res += mul(Get(s2,0,-dy), float4x4(0.106811150908470,0.142901718616486,-0.068826153874397,-0.133453905582428,-0.121545709669590,-0.154638677835464,-0.042111460119486,0.131865531206131,0.092556536197662,0.133362799882889,0.018330084159970,-0.153738662600517,0.113718047738075,-0.111765116453171,0.066302619874477,-0.068917110562325));
res += mul(Get(s2,0,0), float4x4(-0.122297614812851,0.096291631460190,-0.029460443183780,0.119886033236980,0.131679996848106,-0.003406331641600,-0.065576598048210,-0.089248768985271,-0.011351154185832,-0.017218902707100,0.043176420032978,-0.138340145349503,-0.126502111554146,0.020360117778182,-0.092590756714344,0.157242402434349));
res += mul(Get(s2,0,dy), float4x4(-0.042641531676054,0.126775652170181,0.048860788345337,0.142580240964890,0.061408113688231,-0.064464442431927,-0.013205504976213,0.015797283500433,0.001133517362177,0.204006105661392,-0.033799279481173,0.088275574147701,0.183587267994881,0.106002196669579,0.212771221995354,-0.027896091341972));
res += mul(Get(s2,dx,-dy), float4x4(0.115526050329208,0.030028412118554,0.057283032685518,0.104488447308540,0.009292004629970,0.051787916570902,-0.179317399859428,0.048901315778494,0.113847330212593,0.093307837843895,0.051761925220490,0.030769182369113,-0.070034928619862,-0.156799882650375,0.112194336950779,-0.110751383006573));
res += mul(Get(s2,dx,0), float4x4(0.074125394225121,-0.066135860979557,0.063488036394119,-0.182487517595291,0.049927681684494,-0.030942015349865,0.145961537957191,-0.082102581858635,-0.141781449317932,-0.105092167854309,-0.017434105277061,-0.025224123150110,0.063930213451385,0.186758294701576,-0.017515853047371,-0.173841744661331));
res += mul(Get(s2,dx,dy), float4x4(-0.020946901291609,-0.003511625807732,-0.098660774528980,-0.091781079769135,-0.127143010497093,0.129196777939796,0.102905437350273,-0.127642884850502,-0.034029651433229,0.052647788077593,0.014042267575860,-0.129210561513901,0.009226446039975,0.086554326117039,-0.103299044072628,-0.059391506016254));
res += mul(Get(s3,-dx,-dy), float4x4(-0.180819958448410,0.073442451655865,-0.067807063460350,0.220298320055008,0.059241373091936,0.036543447524309,-0.092968724668026,-0.098976954817772,0.152326196432114,0.070587538182735,0.003383028088138,-0.098193578422070,-0.093206554651260,-0.161783531308174,0.136169970035553,-0.115530453622341));
res += mul(Get(s3,-dx,0), float4x4(0.066899806261063,0.096674628555775,0.122402951121330,0.078670024871826,-0.064850740134716,-0.162611931562424,-0.012063493952155,0.043901763856411,0.085053510963917,0.228537082672119,0.141296043992043,-0.145840927958488,-0.153872117400169,0.210920110344887,0.098784968256950,0.199388682842255));
res += mul(Get(s3,-dx,dy), float4x4(-0.072395198047161,0.213618665933609,0.075010240077972,-0.092056706547737,0.193435281515121,0.042935736477375,-0.066718958318233,-0.057955309748650,-0.044314838945866,-0.131606698036194,0.052147399634123,-0.030231203883886,0.053997065871954,0.124480202794075,0.123272165656090,-0.094248093664646));
res += mul(Get(s3,0,-dy), float4x4(-0.005597890820354,0.008551570586860,0.098352976143360,0.002358684781939,-0.029294464737177,-0.006801861338317,-0.082849033176899,-0.055250871926546,0.206758454442024,0.166124582290649,-0.037089586257935,-0.149752214550972,-0.216465935111046,0.157926380634308,-0.189896553754807,-0.090095192193985));
res += mul(Get(s3,0,0), float4x4(0.115733578801155,-0.039976038038731,-0.031877983361483,-0.190739825367928,-0.039012596011162,-0.004496855661273,0.021327979862690,0.103958018124104,0.015369256958365,-0.179824173450470,0.159930154681206,-0.017747126519680,0.074572056531906,0.191617771983147,0.149632871150970,0.000264437840087));
res += mul(Get(s3,0,dy), float4x4(-0.074476696550846,0.011960684321821,-0.084313891828060,0.052067454904318,0.129761740565300,0.141208708286285,-0.017618520185351,0.028472807258368,-0.222851008176804,0.104868017137051,-0.024875529110432,-0.017620157450438,0.187022805213928,-0.083253614604473,0.167030319571495,-0.011647345498204));
res += mul(Get(s3,dx,-dy), float4x4(-0.009393381886184,-0.137695491313934,0.016665514558554,0.097301281988621,-0.139744058251381,0.004129595588893,-0.116474241018295,0.045220617204905,0.114207558333874,-0.183166235685349,0.125939875841141,0.014170381240547,0.056069202721119,0.106379583477974,-0.166659981012344,0.073076136410236));
res += mul(Get(s3,dx,0), float4x4(-0.003022320335731,-0.090568147599697,-0.081809669733047,0.007808544207364,0.065675131976604,-0.128636255860329,0.048366654664278,0.049048416316509,-0.051401186734438,-0.022978773340583,0.020835163071752,-0.075775898993015,0.117565497756004,-0.053299739956856,0.192770645022392,0.000112467991130));
res += mul(Get(s3,dx,dy), float4x4(-0.137181311845779,0.092804342508316,0.099266618490219,-0.117784112691879,0.069886431097984,0.111074797809124,-0.033060740679502,0.121022321283817,0.130372881889343,0.117790475487709,-0.034187648445368,-0.010162011720240,-0.139856502413750,-0.050368651747704,-0.046851933002472,-0.093309015035629));
return max(float4(0,0,0,0), res);
}
