sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.020756172016263,-0.021527759730816,0.153338342905045,-0.004932538606226,0.151112675666809,-0.020556721836329,0.021401014178991,-0.000633052375633,-0.046844694763422,-0.086769156157970,0.143554404377937,-0.030087215825915,0.110592134296894,-0.140436068177223,-0.071398854255676,-0.074966028332710));
res += mul(Get(s0,-dx,0), float4x4(0.046666920185089,-0.067622058093548,0.052761841565371,-0.033150158822536,0.086533017456532,0.004129130393267,-0.063130699098110,-0.020938359200954,-0.048230025917292,0.070133239030838,0.019007289782166,0.101401001214981,-0.061699792742729,0.027550362050533,0.077220611274242,-0.047741182148457));
res += mul(Get(s0,-dx,dy), float4x4(-0.019749745726585,0.019833924248815,0.087990164756775,-0.047330923378468,0.053278002887964,0.002673866692930,0.119512878358364,-0.018636632710695,-0.018691286444664,0.124972306191921,-0.034235149621964,0.029725363478065,-0.011606331914663,-0.070302873849869,-0.006776398047805,0.023499764502048));
res += mul(Get(s0,0,-dy), float4x4(-0.033511597663164,0.127282783389091,0.033583745360374,-0.000444968434749,-0.051322426646948,-0.079012855887413,0.023192314431071,0.045737620443106,0.127835378050804,-0.154111191630363,0.013704022392631,-0.114787697792053,-0.043225713074207,0.043090179562569,0.016303097829223,-0.025661010295153));
res += mul(Get(s0,0,0), float4x4(0.069561995565891,0.009970686398447,-0.060328215360641,0.018987236544490,-0.059283349663019,0.035427451133728,-0.019404480233788,0.059146717190742,-0.102137565612793,-0.091393053531647,-0.160397350788116,-0.001863204175606,0.028858052566648,0.146134510636330,-0.004582948517054,0.110504403710365));
res += mul(Get(s0,0,dy), float4x4(-0.030274894088507,0.043459832668304,-0.014878031797707,-0.124457180500031,0.126725792884827,-0.019442981109023,-0.066319532692432,-0.062387079000473,-0.052733346819878,0.026573276147246,-0.011962825432420,-0.002994836540893,-0.024282146245241,-0.049477133899927,-0.030663790181279,0.076344057917595));
res += mul(Get(s0,dx,-dy), float4x4(-0.066598057746887,-0.001358378794976,0.050229739397764,-0.022650117054582,0.025249296799302,-0.047938372939825,0.012630444951355,-0.027567118406296,0.027660205960274,0.126344621181488,0.018768157809973,0.036532443016768,0.054629474878311,-0.009304240345955,-0.035530369728804,-0.043313197791576));
res += mul(Get(s0,dx,0), float4x4(-0.084246493875980,0.043411929160357,-0.065996028482914,0.131905615329742,0.035088397562504,-0.046009916812181,-0.021871697157621,-0.041797570884228,-0.043098330497742,-0.016635635867715,0.004071823321283,0.033771030604839,-0.087476104497910,-0.003186924848706,0.132362872362137,0.013889593072236));
res += mul(Get(s0,dx,dy), float4x4(0.010096644982696,-0.023463599383831,-0.028972962871194,-0.000255190156167,-0.031695477664471,0.014551239088178,-0.039979550987482,0.006952172610909,-0.139404490590096,0.065724559128284,0.047044847160578,0.045505631715059,-0.006514321081340,-0.021177114918828,0.080878823995590,0.048771135509014));
res += mul(Get(s1,-dx,-dy), float4x4(-0.012402359396219,-0.081050381064415,-0.015821103006601,0.014025153592229,-0.071040697395802,0.032766137272120,-0.018419187515974,0.050063870847225,-0.028152342885733,0.064212344586849,-0.025246609002352,0.187824979424477,0.051979020237923,0.114348560571671,0.020486658439040,0.099791623651981));
res += mul(Get(s1,-dx,0), float4x4(0.112161979079247,-0.044324915856123,-0.075598977506161,-0.114720784127712,-0.034859016537666,-0.010700644925237,0.058982208371162,-0.082321897149086,0.018512003123760,-0.023473266512156,-0.059575904160738,0.042490091174841,0.020102212205529,-0.024945233017206,-0.045472864061594,0.101305395364761));
res += mul(Get(s1,-dx,dy), float4x4(0.070552811026573,0.032191880047321,0.031571965664625,-0.033324509859085,-0.038814894855022,-0.031775936484337,0.053091019392014,-0.025272764265537,-0.012169070541859,-0.058207787573338,-0.021990902721882,-0.020713230594993,-0.037463698536158,0.091797940433025,-0.141278624534607,0.033021390438080));
res += mul(Get(s1,0,-dy), float4x4(-0.096485920250416,0.220835462212563,0.015336857177317,0.012058097869158,0.007431913167238,-0.069536045193672,-0.121731281280518,-0.028591383248568,0.004370426759124,-0.010763862170279,0.026919275522232,0.038830362260342,-0.030319882556796,0.117756567895412,0.189049825072289,0.002671793568879));
res += mul(Get(s1,0,0), float4x4(0.126583412289619,-0.026775009930134,-0.092111304402351,0.120676368474960,-0.157351359724998,-0.045357212424278,0.058249175548553,0.137882754206657,0.009744573384523,0.034840177744627,-0.026684105396271,-0.064909845590591,0.303744852542877,-0.118982262909412,0.079982168972492,-0.134212538599968));
res += mul(Get(s1,0,dy), float4x4(-0.002171869855374,-0.142524197697639,0.055979140102863,0.037714492529631,-0.010368118062615,0.024153759703040,0.019575690850616,-0.045882232487202,-0.044431433081627,0.016263369470835,-0.064214423298836,0.032428000122309,0.004595799371600,0.039046049118042,-0.156438916921616,-0.003137488383800));
res += mul(Get(s1,dx,-dy), float4x4(0.020557824522257,0.082452960312366,0.033018052577972,0.013035894371569,0.066500067710876,-0.022691404446959,0.043173734098673,0.048107542097569,0.010384109802544,0.089970968663692,0.054002646356821,0.052643135190010,0.008674934506416,0.014783171005547,0.043095842003822,-0.047719437628984));
res += mul(Get(s1,dx,0), float4x4(0.079445511102676,-0.081453710794449,-0.008846501819789,0.042437020689249,0.150021329522133,-0.080183498561382,-0.073803037405014,-0.077702961862087,-0.088755033910275,0.008740296587348,0.071164049208164,0.075780913233757,0.122084856033325,0.039901893585920,-0.027094649150968,0.048650071024895));
res += mul(Get(s1,dx,dy), float4x4(0.001915579545312,-0.079896926879883,0.070121653378010,0.023773739114404,0.028901401907206,0.012503312900662,-0.061491344124079,0.021803423762321,-0.026808023452759,-0.045094795525074,-0.023458395153284,0.075774416327477,0.037986341863871,-0.017771353945136,-0.044368840754032,0.014767722226679));
res += mul(Get(s2,-dx,-dy), float4x4(0.037141829729080,0.160330519080162,0.055860541760921,-0.116168230772018,0.012981267645955,0.091952636837959,-0.002016315702349,-0.035563286393881,0.021501634269953,-0.039209976792336,0.103810943663120,-0.026502694934607,-0.038613293319941,0.052584223449230,-0.090207971632481,0.011935265734792));
res += mul(Get(s2,-dx,0), float4x4(0.021073924377561,0.074702762067318,-0.063663080334663,0.105001434683800,-0.004016907885671,0.014049513265491,-0.054912421852350,-0.016632303595543,0.021133359521627,-0.048504643142223,-0.000758311129175,-0.098562702536583,0.006680724211037,-0.121494315564632,-0.221638530492783,0.010078127495944));
res += mul(Get(s2,-dx,dy), float4x4(-0.025880666449666,0.103444032371044,-0.001028271391988,-0.160188287496567,-0.031021749600768,0.018343634903431,-0.011359943076968,-0.017006361857057,0.016689203679562,0.003708467818797,0.016746725887060,-0.032989334315062,-0.071822784841061,-0.020536104217172,-0.213362246751785,-0.047678701579571));
res += mul(Get(s2,0,-dy), float4x4(-0.005220590624958,0.036304879933596,0.216536223888397,0.082848712801933,-0.002572955796495,0.063410997390747,0.095765531063080,0.040167309343815,0.018149320036173,0.077649578452110,0.068293467164040,0.028374843299389,-0.046466536819935,-0.001087792566977,-0.074116617441177,0.002050564158708));
res += mul(Get(s2,0,0), float4x4(0.297153919935226,-0.093003548681736,-0.064801923930645,-0.028995478525758,0.047599304467440,0.068030163645744,0.032877914607525,0.052910536527634,-0.009489024057984,0.033787641674280,-0.129428654909134,-0.009498982690275,0.040760032832623,-0.062819801270962,-0.142782315611839,-0.023594735190272));
res += mul(Get(s2,0,dy), float4x4(-0.083089761435986,0.115804977715015,-0.017815096303821,-0.013330402784050,0.019568255171180,0.056527361273766,0.033099193125963,-0.037644628435373,0.073942318558693,0.098089486360550,-0.021019892767072,-0.033974330872297,-0.010150212794542,0.021786900237203,-0.218323454260826,0.013697293587029));
res += mul(Get(s2,dx,-dy), float4x4(-0.056775085628033,-0.014134260825813,0.102615416049957,0.096335969865322,-0.009894286282361,-0.022612638771534,0.027057008817792,0.003153858706355,0.025151994079351,0.058005198836327,0.041075322777033,0.031540591269732,-0.006657138001174,0.001549308886752,-0.033031810075045,0.027088269591331));
res += mul(Get(s2,dx,0), float4x4(-0.110731884837151,0.009347484447062,-0.047326974570751,0.162102207541466,0.005877132061869,0.016105156391859,0.093677029013634,-0.050199907273054,-0.052619010210037,-0.056242551654577,-0.062054835259914,0.008184240199625,-0.082507498562336,-0.040413163602352,-0.118503794074059,0.072487510740757));
res += mul(Get(s2,dx,dy), float4x4(-0.032530739903450,-0.052526682615280,-0.141306161880493,-0.016064943745732,-0.004827394615859,0.041271187365055,0.073734588921070,0.079235047101974,0.044486347585917,0.040725674480200,0.002125251106918,-0.004047289490700,-0.028468832373619,0.063403621315956,-0.049280341714621,-0.000617591082118));
res += mul(Get(s3,-dx,-dy), float4x4(-0.064709194004536,-0.159785494208336,0.128189325332642,0.006346444133669,0.052042223513126,0.123790495097637,-0.041019301861525,-0.155571639537811,-0.006405401509255,0.111624322831631,-0.071214169263840,0.048645533621311,-0.042400479316711,-0.087384380400181,0.111052051186562,0.034130338579416));
res += mul(Get(s3,-dx,0), float4x4(-0.041908167302608,-0.074135713279247,-0.040986225008965,-0.022563371807337,0.046418737620115,0.016540789976716,0.043952338397503,-0.060544379055500,0.108106449246407,0.058333799242973,-0.014537943527102,0.054609399288893,0.133219227194786,-0.048780411481857,0.005802299827337,-0.110020965337753));
res += mul(Get(s3,-dx,dy), float4x4(0.002752456814051,0.002035952406004,-0.115534059703350,-0.048066072165966,-0.011777551844716,0.007145468611270,0.076518788933754,-0.041161432862282,0.015929818153381,0.012063696980476,0.004625834990293,0.010702713392675,0.007335064001381,0.018097193911672,0.063583783805370,-0.095524780452251));
res += mul(Get(s3,0,-dy), float4x4(-0.050090909004211,-0.197176054120064,0.033288195729256,0.067366212606430,-0.062108021229506,0.020903328433633,0.129209220409393,0.028015280142426,0.052523255348206,-0.008305853232741,0.020208690315485,0.034943126142025,0.008349952287972,-0.055087983608246,0.051875460892916,0.064993821084499));
res += mul(Get(s3,0,0), float4x4(-0.050267942249775,0.051339708268642,-0.315352141857147,0.021958863362670,0.047902263700962,0.048767529428005,0.125235974788666,-0.013886642642319,0.038282420486212,-0.029015127569437,0.119311265647411,0.039631016552448,-0.005003943108022,-0.107390515506268,0.074070550501347,-0.031136913225055));
res += mul(Get(s3,0,dy), float4x4(0.021257136017084,0.000848421070259,-0.233960747718811,0.011342200450599,0.073103174567223,0.118457391858101,-0.026793364435434,-0.055897824466228,-0.025741020217538,0.022315088659525,0.105596795678139,0.033816888928413,-0.038216181099415,-0.012072743847966,0.007907750084996,0.020340008661151));
res += mul(Get(s3,dx,-dy), float4x4(-0.092900849878788,-0.014585180208087,-0.015960363671184,0.065666370093822,0.083864621818066,0.123559042811394,0.086562678217888,-0.015791455283761,-0.006353372242302,-0.009750436060131,-0.018452895805240,0.044662930071354,0.018489595502615,-0.045520711690187,0.094237968325615,0.008344501256943));
res += mul(Get(s3,dx,0), float4x4(0.003597736125812,-0.005821267608553,-0.193674042820930,0.007582237944007,0.000139487980050,-0.003534585703164,-0.011453169398010,0.078793041408062,0.147810921072960,0.036858551204205,0.020150797441602,0.027561698108912,-0.092573173344135,-0.004758601542562,-0.111225016415119,0.104089684784412));
res += mul(Get(s3,dx,dy), float4x4(-0.060853786766529,-0.118248783051968,-0.193850010633469,-0.047814533114433,0.039272297173738,0.026680370792747,-0.036344543099403,0.072866432368755,0.087751433253288,0.096633210778236,0.069940149784088,-0.024991927668452,0.048720657825470,0.073158368468285,-0.106276467442513,-0.051822315901518));
return max(float4(0,0,0,0), res);
}
