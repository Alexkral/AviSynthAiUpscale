sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.136356011033058,-0.060139860957861,-0.010477729141712,0.009714717045426,-0.116644278168678,0.028806699439883,-0.094217151403427,-0.024448506534100,-0.000318786565913,0.033680010586977,-0.060528922826052,-0.021580059081316,-0.111924536526203,0.012775960378349,-0.023600118234754,0.083063177764416));
res += mul(Get(s0,-dx,0), float4x4(-0.093200340867043,-0.060976456850767,0.009153570979834,0.404027312994003,-0.061754062771797,0.021008728072047,-0.063001774251461,0.022780494764447,-0.004475414752960,0.067654341459274,-0.044450782239437,-0.000194185209693,-0.152782544493675,0.159060642123222,-0.032340433448553,0.076637953519821));
res += mul(Get(s0,-dx,dy), float4x4(-0.026401635259390,0.170831710100174,0.044709052890539,0.052898708730936,0.033123198896646,0.032018937170506,0.082800678908825,0.005842865444720,0.038540650159121,0.049895416945219,0.086417622864246,-0.066181816160679,-0.104683101177216,-0.140841528773308,0.060491029173136,0.076349869370461));
res += mul(Get(s0,0,-dy), float4x4(0.111962839961052,0.014992206357419,-0.009289476089180,0.041203279048204,0.017404401674867,0.061637710779905,-0.015252022072673,0.072604760527611,0.085748672485352,-0.021616626530886,-0.008690786547959,-0.143800735473633,0.041773431003094,-0.094851039350033,0.034909177571535,-0.040481485426426));
res += mul(Get(s0,0,0), float4x4(0.081826694309711,-0.056159187108278,-0.005623658187687,0.167685121297836,0.078008711338043,0.019208256155252,-0.044237986207008,0.082439601421356,0.202520862221718,-0.040501330047846,-0.052879672497511,-0.056627601385117,0.291480898857117,-0.022140882909298,-0.084423430263996,-0.120588719844818));
res += mul(Get(s0,0,dy), float4x4(-0.040180638432503,0.010264545679092,-0.061267603188753,0.058928001672029,0.089184410870075,0.185616970062256,0.045475214719772,0.061381362378597,-0.042228557169437,0.039304144680500,0.136864915490150,-0.004317257087678,-0.077367469668388,-0.073492363095284,0.068233236670494,0.093515537679195));
res += mul(Get(s0,dx,-dy), float4x4(0.016672141849995,0.028469078242779,-0.015841497108340,0.117289885878563,0.032346956431866,-0.277380406856537,0.045555025339127,-0.000992438988760,0.008887041360140,0.014582691714168,-0.040729165077209,-0.052015982568264,-0.035582691431046,0.005102413706481,-0.065128974616528,0.000362303690054));
res += mul(Get(s0,dx,0), float4x4(-0.042556185275316,-0.081469252705574,0.010100171901286,-0.011405979283154,-0.024404756724834,-0.221847251057625,-0.087006442248821,0.085435807704926,-0.030737789347768,0.049898598343134,0.079716309905052,0.031547330319881,-0.056942291557789,-0.061172530055046,-0.014986995607615,0.024852782487869));
res += mul(Get(s0,dx,dy), float4x4(-0.039716646075249,-0.123249605298042,-0.115243241190910,0.003355869324878,0.082614697515965,-0.040984105318785,0.009659503586590,-0.003104493720457,-0.026807568967342,0.065221615135670,0.077085487544537,-0.006307872012258,0.056502990424633,-0.040930554270744,-0.024112913757563,0.021001454442739));
res += mul(Get(s1,-dx,-dy), float4x4(0.059542842209339,0.032319188117981,-0.004889506381005,0.058019116520882,0.051530364900827,0.052986782044172,0.044806528836489,0.010217207483947,-0.042307373136282,0.017618784680963,-0.003493477124721,-0.002970055211335,-0.024628583341837,0.154289394617081,-0.010330800898373,-0.090240798890591));
res += mul(Get(s1,-dx,0), float4x4(0.002998406067491,0.004492727573961,0.075575150549412,-0.029213709756732,0.118928864598274,0.001205513719469,0.119427621364594,-0.075596407055855,-0.063712090253830,0.061268933117390,0.035646099597216,-0.079456850886345,-0.035516731441021,-0.043286703526974,-0.107647821307182,-0.101590834558010));
res += mul(Get(s1,-dx,dy), float4x4(0.034958112984896,0.071917332708836,-0.005594695918262,0.002000520704314,0.047397200018167,-0.031536962836981,0.055506538599730,-0.002718818373978,0.016621503978968,-0.023974005132914,-0.111885860562325,-0.012678165920079,0.061815746128559,0.023511318489909,-0.046496860682964,0.030080394819379));
res += mul(Get(s1,0,-dy), float4x4(-0.044192306697369,0.005822158418596,-0.033011458814144,-0.040173720568419,0.036286603659391,-0.042544811964035,-0.098278850317001,0.098667576909065,-0.020280638709664,-0.035902790725231,0.046893134713173,-0.022252876311541,0.081915438175201,-0.006504695862532,-0.040705163031816,0.027773482725024));
res += mul(Get(s1,0,0), float4x4(-0.089830279350281,-0.003557997522876,0.104977853596210,-0.007015221752226,-0.103882804512978,0.061101637780666,0.178189724683762,0.078403025865555,0.320760548114777,0.044634867459536,-0.131227850914001,-0.023628903552890,-0.017968235537410,-0.132217064499855,0.094459541141987,0.163686707615852));
res += mul(Get(s1,0,dy), float4x4(0.044425755739212,-0.008699851110578,-0.012017016299069,-0.028653161600232,0.006754386704415,-0.033499501645565,0.025148779153824,-0.001040279632434,0.046058718115091,-0.006214319262654,-0.109884366393089,-0.045816484838724,-0.022550012916327,0.151233404874802,0.030874345451593,0.085747443139553));
res += mul(Get(s1,dx,-dy), float4x4(0.002367939334363,-0.019673373550177,0.086334146559238,-0.008192464709282,0.004388118162751,0.084188409149647,-0.133532419800758,0.019829588010907,-0.014392818324268,0.028107304126024,0.012135384604335,0.015377846546471,-0.034192871302366,0.036131713539362,0.028498081490397,-0.010209608823061));
res += mul(Get(s1,dx,0), float4x4(0.016459891572595,0.076636016368866,-0.004464527592063,-0.017308097332716,-0.019630407914519,0.084771238267422,0.127808481454849,-0.006352646276355,-0.042328264564276,0.128722265362740,-0.060400802642107,-0.035285096615553,0.003281797049567,0.033091265708208,0.087591171264648,0.032427035272121));
res += mul(Get(s1,dx,dy), float4x4(0.032369267195463,0.001971224322915,0.028201315551996,-0.023046955466270,-0.079991653561592,0.129371047019958,-0.056068170815706,-0.042701836675406,0.095197938382626,0.084805808961391,0.012485388666391,-0.048759024590254,-0.014073172584176,0.070413753390312,0.013228057883680,0.027464587241411));
res += mul(Get(s2,-dx,-dy), float4x4(0.045341126620770,0.065823972225189,0.008171264082193,-0.035740271210670,0.064635224640369,-0.030847102403641,0.021230680868030,-0.068069994449615,-0.018017467111349,-0.001115723513067,-0.023198371753097,0.033625390380621,0.047320589423180,-0.038307178765535,-0.021812442690134,0.036157928407192));
res += mul(Get(s2,-dx,0), float4x4(0.033410288393497,-0.101332232356071,0.062203112989664,-0.084496013820171,0.060659334063530,0.009504272602499,0.079210728406906,-0.085316687822342,-0.020237831398845,0.025883516296744,-0.070488378405571,0.008941251784563,0.083274781703949,0.024881904944777,-0.108742751181126,-0.039396800100803));
res += mul(Get(s2,-dx,dy), float4x4(0.027118217200041,0.014130132272840,0.023260863497853,-0.143657878041267,0.058700714260340,0.073955409228802,0.033746141940355,-0.008553748950362,-0.022100828588009,0.030610896646976,-0.020874319598079,0.038570288568735,0.040419910103083,-0.004935882985592,-0.073948055505753,0.031399119645357));
res += mul(Get(s2,0,-dy), float4x4(-0.016503056511283,-0.001248582964763,-0.012639551423490,0.209282785654068,0.097500808537006,-0.063692517578602,0.014827791601419,0.020010236650705,-0.036783993244171,-0.007122937589884,-0.035351406782866,0.044781301170588,0.106814138591290,0.046096045523882,-0.025233104825020,0.021770562976599));
res += mul(Get(s2,0,0), float4x4(0.108330249786377,0.187245398759842,0.202783659100533,-0.075835742056370,-0.024680266156793,-0.029684843495488,0.156708210706711,0.001141489483416,-0.097836874425411,0.099369361996651,-0.025417612865567,0.034836314618587,0.053998470306396,-0.086903102695942,0.017829429358244,0.087026871740818));
res += mul(Get(s2,0,dy), float4x4(-0.015433539636433,0.027484551072121,-0.002712809015065,-0.292025774717331,-0.015541473403573,-0.076079428195953,0.094733014702797,0.018575005233288,0.032851517200470,0.061110191047192,-0.025407267734408,-0.003831476671621,0.018409188836813,0.008942192420363,-0.074717037379742,-0.032694607973099));
res += mul(Get(s2,dx,-dy), float4x4(-0.049943413585424,0.037891890853643,0.086858846247196,0.010605624876916,0.124019935727119,-0.108535885810852,-0.022160544991493,0.104296609759331,-0.072516292333603,-0.043575465679169,-0.086313076317310,0.143145367503166,0.016651965677738,-0.042637649923563,-0.058744907379150,-0.016427446156740));
res += mul(Get(s2,dx,0), float4x4(-0.066180065274239,0.017562028020620,-0.006756901741028,0.079687036573887,0.023360403254628,0.131898567080498,0.079335436224937,0.278810411691666,-0.072841368615627,-0.067942820489407,-0.051963191479445,0.110858976840973,0.106409229338169,-0.123844437301159,-0.087666481733322,0.063648559153080));
res += mul(Get(s2,dx,dy), float4x4(0.017594266682863,-0.036016814410686,-0.124447166919708,-0.113174982368946,0.044257741421461,0.174120649695396,0.042906858026981,0.035147428512573,-0.081150501966476,-0.134627282619476,-0.037171214818954,0.048138678073883,-0.012968250550330,-0.100830994546413,-0.073652967810631,0.018283942714334));
res += mul(Get(s3,-dx,-dy), float4x4(0.081058315932751,-0.007255610544235,-0.074851617217064,-0.020399162545800,-0.024669047445059,0.041613321751356,0.042709503322840,-0.008567783050239,-0.001324119162746,-0.031144483014941,-0.080150060355663,-0.039007570594549,-0.158208459615707,-0.053303726017475,0.040559072047472,-0.000413494679378));
res += mul(Get(s3,-dx,0), float4x4(-0.026323007419705,-0.029410198330879,-0.035253331065178,-0.050673380494118,0.052992176264524,0.039971712976694,0.094107538461685,0.026256091892719,0.024772439152002,-0.145449534058571,-0.061981078237295,0.055479582399130,0.194388791918755,0.123151637613773,-0.056161299347878,-0.021696772426367));
res += mul(Get(s3,-dx,dy), float4x4(0.012855705805123,-0.018536936491728,0.064259625971317,0.015417522750795,0.018350265920162,0.071167252957821,0.136120051145554,0.016188388690352,0.079319611191750,-0.031780317425728,0.019544007256627,0.038451373577118,-0.154926821589470,-0.111624397337437,-0.008227698504925,0.013596227392554));
res += mul(Get(s3,0,-dy), float4x4(-0.009173694998026,-0.036098681390285,0.029656061902642,0.034370653331280,0.021366607397795,0.074631184339523,0.004766985774040,-0.043176129460335,0.075166933238506,0.052727974951267,-0.053606193512678,0.130931600928307,-0.115551263093948,-0.016002368181944,0.113100178539753,-0.108084872364998));
res += mul(Get(s3,0,0), float4x4(0.152132898569107,-0.013019846752286,-0.133099794387817,-0.020644953474402,0.049718413501978,-0.055636014789343,0.200546219944954,0.062547691166401,-0.171282306313515,0.163448140025139,0.177527561783791,0.031284671276808,0.180653810501099,-0.127850785851479,-0.102860003709793,-0.136875525116920));
res += mul(Get(s3,0,dy), float4x4(-0.100360989570618,0.012099266052246,0.042214136570692,0.033113189041615,0.053744975477457,0.044185288250446,0.132433667778969,0.069538921117783,0.217788219451904,0.087875038385391,-0.099806211888790,0.025829119607806,-0.067499719560146,0.002090365160257,0.016451263800263,0.049095895141363));
res += mul(Get(s3,dx,-dy), float4x4(-0.026150604709983,0.063442304730415,-0.024787733331323,-0.002329121576622,-0.070662848651409,0.022500481456518,0.013557645492256,0.054166112095118,0.063483037054539,-0.067448019981384,0.006919037550688,-0.174933508038521,-0.013329450041056,0.080184608697891,-0.085042960941792,0.016499979421496));
res += mul(Get(s3,dx,0), float4x4(-0.140646308660507,0.067784950137138,-0.106430783867836,-0.084480866789818,-0.052088342607021,0.104562908411026,0.108636505901814,0.012223448604345,0.107600830495358,0.008188152685761,0.076914034783840,-0.025897933170199,-0.026783835142851,0.003524687141180,0.069792568683624,0.058704145252705));
res += mul(Get(s3,dx,dy), float4x4(0.002186043420807,0.087631605565548,0.034213118255138,-0.034635003656149,-0.020108301192522,-0.024988120421767,0.040649984031916,0.013679014518857,-0.014629096724093,-0.014957060106099,0.004298579413444,-0.014665952883661,0.061346974223852,0.094716712832451,-0.018300788477063,-0.036348331719637));
return max(float4(0,0,0,0), res);
}
