sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(-0.070768177509308,-0.032480891793966,-0.141709536314011,0.007215265650302) * Get(-dx,-dy);
res += float4(-0.129904821515083,-0.017672833055258,0.056549016386271,0.306893318891525) * Get(-dx,0);
res += float4(-0.158597305417061,-0.080363214015961,-0.068009167909622,0.088165298104286) * Get(-dx,dy);
res += float4(-0.048377193510532,1.018478870391846,-0.000227382392040,0.076733127236366) * Get(0,-dy);
res += float4(0.027827126905322,-0.580189228057861,0.253232330083847,0.319198966026306) * Get(0,0);
res += float4(0.090495042502880,0.316934227943420,-0.212116420269012,-0.440692424774170) * Get(0,dy);
res += float4(-0.062113601714373,0.134986042976379,-0.049771241843700,-0.055797569453716) * Get(dx,-dy);
res += float4(0.059064429253340,-0.191180393099785,0.183798164129257,0.134161308407784) * Get(dx,0);
res += float4(0.139662817120552,0.051784198731184,-0.171227872371674,-0.180577427148819) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
