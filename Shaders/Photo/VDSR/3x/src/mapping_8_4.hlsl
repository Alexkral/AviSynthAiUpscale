sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.006142376922071,0.089176878333092,0.074516154825687,-0.062846653163433,0.003829271532595,-0.086962141096592,0.067634880542755,0.007426810916513,-0.080099910497665,0.038267049938440,0.045853450894356,-0.095443822443485,-0.029516479000449,0.042308848351240,-0.072274252772331,-0.035485915839672));
res += mul(Get(s0,-dx,0), float4x4(0.103996880352497,-0.057128798216581,0.096306212246418,-0.409458011388779,0.050606086850166,-0.053866125643253,0.001908953418024,0.123490355908871,-0.200593575835228,-0.162040993571281,-0.015564469620585,0.195181831717491,-0.108389876782894,-0.128062605857849,0.096550643444061,-0.033758454024792));
res += mul(Get(s0,-dx,dy), float4x4(0.076268598437309,-0.177452549338341,0.012878179550171,-0.119683973491192,-0.092442482709885,0.161088511347771,0.007368554361165,-0.073827534914017,0.004303076304495,-0.053749106824398,-0.018202662467957,0.042214553803205,-0.237206548452377,-0.028853321447968,-0.010248063132167,0.014656007289886));
res += mul(Get(s0,0,-dy), float4x4(0.050004936754704,-0.114813886582851,-0.081351086497307,-0.044112619012594,0.003035487141460,0.068711213767529,-0.015453850850463,0.057664506137371,0.269642770290375,0.077532470226288,-0.016230523586273,-0.061681274324656,0.063431203365326,-0.083303362131119,0.045850113034248,-0.084170259535313));
res += mul(Get(s0,0,0), float4x4(-0.087126590311527,0.066983260214329,-0.060780402272940,-0.058910571038723,0.045421618968248,0.002261040732265,-0.003148631891236,0.120766900479794,0.125501856207848,0.003719342872500,0.211608633399010,0.011747702956200,-0.087663568556309,0.072713516652584,0.048487979918718,-0.050544120371342));
res += mul(Get(s0,0,dy), float4x4(-0.136252984404564,-0.001127075054683,0.226462095975876,-0.010277645662427,0.021162685006857,-0.124664939939976,-0.065729096531868,0.080846033990383,0.133949428796768,0.022005978971720,-0.178364723920822,0.077168911695480,0.078186653554440,0.083675183355808,0.150580957531929,0.049130238592625));
res += mul(Get(s0,dx,-dy), float4x4(-0.031475137919188,0.045802615582943,-0.034600146114826,0.179767310619354,0.153442978858948,-0.028843266889453,-0.046366199851036,-0.050244521349669,0.026939457282424,-0.081959828734398,-0.012763338163495,-0.129014581441879,-0.120247699320316,-0.025770043954253,-0.009794119745493,0.097043871879578));
res += mul(Get(s0,dx,0), float4x4(-0.134876891970634,0.061608452349901,-0.014164326712489,-0.076353676617146,0.131026610732079,-0.078030899167061,-0.059758961200714,-0.144367516040802,0.004428353160620,0.045684088021517,0.155556440353394,-0.079333722591400,0.010851575061679,0.043568328022957,-0.084345184266567,0.077043794095516));
res += mul(Get(s0,dx,dy), float4x4(0.038010388612747,-0.112507283687592,-0.004940783139318,0.067134872078896,-0.224641174077988,0.038037110120058,0.018277918919921,0.072776749730110,0.048943117260933,-0.128421545028687,0.027765898033977,-0.031357292085886,-0.130254700779915,0.066635273396969,0.097898192703724,0.077118411660194));
res += mul(Get(s1,-dx,-dy), float4x4(0.165260612964630,-0.231697246432304,0.211389228701591,0.136064901947975,0.026068167760968,0.007125391159207,-0.008082584477961,-0.010894642211497,-0.066670708358288,-0.017610881477594,-0.101326622068882,0.223330110311508,-0.205949828028679,-0.136284917593002,-0.080255240201950,0.044953521341085));
res += mul(Get(s1,-dx,0), float4x4(-0.003828318556771,0.125004976987839,0.115843914449215,-0.100157611072063,-0.044683039188385,0.062413301318884,-0.103703670203686,0.095895506441593,0.015197042375803,0.182019785046577,-0.139066860079765,0.063628979027271,-0.032943747937679,0.066162481904030,0.257068932056427,0.075459361076355));
res += mul(Get(s1,-dx,dy), float4x4(-0.061223432421684,0.141774758696556,0.070392981171608,-0.038124483078718,-0.114692173898220,0.092277146875858,-0.119022309780121,0.102654926478863,0.064238399267197,0.052053079009056,-0.106000356376171,0.094936184585094,0.128144100308418,0.090333901345730,0.039999205619097,-0.085756555199623));
res += mul(Get(s1,0,-dy), float4x4(0.156844899058342,0.192333653569221,-0.135040298104286,0.139563277363777,0.019095359370112,-0.088764093816280,-0.113225281238556,0.073551103472710,-0.076540596783161,0.245551109313965,0.040350120514631,0.159073889255524,-0.053532510995865,-0.235893666744232,0.052548412233591,0.033437050879002));
res += mul(Get(s1,0,0), float4x4(0.034344341605902,0.183827564120293,-0.090058773756027,0.020379042252898,0.122474409639835,0.123700127005577,0.096528574824333,-0.121980704367161,-0.010923190973699,-0.112226895987988,0.007669318933040,-0.103785812854767,0.199083536863327,0.007720262743533,0.225724771618843,0.073747716844082));
res += mul(Get(s1,0,dy), float4x4(-0.280713975429535,-0.098104655742645,-0.008523606695235,-0.028529293835163,0.067242622375488,-0.018904520198703,-0.079142361879349,-0.073288060724735,-0.075766816735268,0.123788379132748,-0.099560946226120,0.183507040143013,0.076394662261009,-0.127588436007500,0.074090845882893,0.188919723033905));
res += mul(Get(s1,dx,-dy), float4x4(0.145674750208855,-0.013866103254259,0.102303460240364,-0.173099994659424,-0.121825523674488,0.064749099314213,-0.069478824734688,-0.030872162431479,-0.160991579294205,0.005596953444183,0.219181597232819,-0.022048877552152,0.019682897254825,-0.012620099820197,-0.133981063961983,0.031201971694827));
res += mul(Get(s1,dx,0), float4x4(-0.136657729744911,0.082497857511044,-0.013385360129178,-0.089717485010624,0.001646474236622,-0.015703631564975,0.015160371549428,-0.005238500423729,0.105859957635403,0.032642673701048,-0.075079448521137,-0.030761765316129,-0.008105413988233,0.144745007157326,-0.015486300922930,0.077910423278809));
res += mul(Get(s1,dx,dy), float4x4(0.001012579654343,0.015371204353869,0.101684592664242,0.015469680540264,-0.051536567509174,0.084504842758179,-0.086870908737183,0.034635186195374,-0.177084103226662,0.044186037033796,-0.006904924288392,-0.006781874690205,0.058202888816595,-0.072078108787537,-0.130201324820518,-0.152489662170410));
res += mul(Get(s2,-dx,-dy), float4x4(-0.182988956570625,-0.077022463083267,-0.043191805481911,0.050182033330202,-0.136224955320358,-0.070135384798050,0.111691087484360,-0.037585217505693,0.215528994798660,0.091072432696819,0.021889356896281,-0.006161415018141,0.000159611707204,-0.090904906392097,0.099241070449352,-0.241417542099953));
res += mul(Get(s2,-dx,0), float4x4(-0.102770209312439,-0.144406855106354,0.078440532088280,0.050749342888594,-0.029273692518473,0.011592820286751,0.056639157235622,0.031014755368233,0.088982582092285,0.108604848384857,-0.102857269346714,-0.035401750355959,0.013975837267935,0.109190098941326,-0.019119711592793,-0.002981197088957));
res += mul(Get(s2,-dx,dy), float4x4(-0.112387411296368,-0.110526762902737,-0.099870771169662,0.093617871403694,-0.084765017032623,0.011926230043173,0.022514078766108,0.053728837519884,0.139501512050629,-0.008161216974258,0.079981438815594,0.060959104448557,0.004503798205405,-0.011290344409645,0.031023930758238,0.001892572501674));
res += mul(Get(s2,0,-dy), float4x4(-0.029075462371111,-0.173069104552269,0.253980219364166,-0.197024390101433,-0.067600801587105,0.093217574059963,0.132969915866852,-0.100082926452160,0.224219411611557,-0.138192102313042,0.099738389253616,-0.064091809093952,-0.103017158806324,-0.036679297685623,-0.043791692703962,-0.026074089109898));
res += mul(Get(s2,0,0), float4x4(0.052149638533592,0.067715078592300,0.178329452872276,-0.037061311304569,0.064483769237995,0.232079938054085,0.164894089102745,0.061771020293236,-0.003678780980408,0.056239422410727,-0.091509059071541,0.092654228210449,-0.013929093256593,0.046231325715780,-0.063243165612221,-0.190654084086418));
res += mul(Get(s2,0,dy), float4x4(-0.070451676845551,-0.052647963166237,0.143784388899803,0.222611844539642,0.169366180896759,-0.084848977625370,-0.039034448564053,-0.103015244007111,-0.076047241687775,0.114818379282951,-0.028194127604365,-0.099079936742783,-0.159149125218391,-0.129448577761650,0.097743898630142,-0.176200032234192));
res += mul(Get(s2,dx,-dy), float4x4(0.004113959614187,-0.043362345546484,0.190487727522850,0.144930437207222,0.094724886119366,0.042124789208174,0.090446010231972,-0.008198922500014,0.081347994506359,0.106140397489071,0.122888885438442,-0.008477320894599,0.205873519182205,0.049727793782949,0.034694835543633,-0.159859836101532));
res += mul(Get(s2,dx,0), float4x4(-0.076747909188271,-0.131492584943771,0.038411885499954,-0.149993017315865,-0.013099987991154,0.058978371322155,0.053385272622108,-0.061291567981243,0.315956801176071,0.159099653363228,0.188410371541977,-0.181554824113846,0.132796302437782,0.012483704835176,-0.151089191436768,-0.153635978698730));
res += mul(Get(s2,dx,dy), float4x4(-0.304748058319092,-0.025538275018334,-0.038610909134150,0.051980789750814,0.155673265457153,-0.151242449879646,-0.181201547384262,0.111934259533882,-0.032945711165667,0.093284063041210,0.151210963726044,0.004236228764057,0.046331997960806,0.000915616634302,-0.164486736059189,0.047496248036623));
res += mul(Get(s3,-dx,-dy), float4x4(-0.058177150785923,0.000672942027450,-0.110869862139225,0.080176442861557,-0.227026745676994,-0.081331439316273,-0.178114593029022,-0.174090206623077,0.022919520735741,-0.057342123240232,-0.036775317043066,0.035307995975018,0.057839520275593,-0.065666474401951,-0.097239531576633,-0.157029539346695));
res += mul(Get(s3,-dx,0), float4x4(0.073988877236843,0.056748785078526,0.006619667168707,-0.248050615191460,-0.056769501417875,-0.185905888676643,-0.050932604819536,-0.122537620365620,0.085698142647743,-0.066320642828941,0.054189354181290,-0.023924503475428,0.049648795276880,0.148031875491142,0.030331745743752,0.094015151262283));
res += mul(Get(s3,-dx,dy), float4x4(-0.113697059452534,0.169388413429260,-0.058213293552399,-0.027952458709478,0.021049169823527,-0.058301124721766,-0.128980055451393,-0.006569763645530,-0.038030777126551,-0.018337987363338,-0.126914843916893,-0.000455574248917,0.048741102218628,-0.150943562388420,0.000636539829429,0.015046577900648));
res += mul(Get(s3,0,-dy), float4x4(-0.288316845893860,-0.067285768687725,-0.013880083337426,0.130667001008987,-0.034230228513479,-0.117709763348103,0.146875053644180,-0.193738549947739,-0.128124862909317,-0.056992657482624,-0.010902531445026,-0.074587441980839,0.103610284626484,0.120984077453613,0.102976895868778,0.095659837126732));
res += mul(Get(s3,0,0), float4x4(0.077364996075630,0.088826455175877,0.101633645594120,-0.049379941076040,0.061746444553137,0.089218311011791,-0.056227475404739,-0.085388191044331,0.028104476630688,0.085259437561035,0.062445994466543,0.106763482093811,0.004721746314317,0.028543701395392,-0.030913259834051,-0.009905552491546));
res += mul(Get(s3,0,dy), float4x4(0.008562142029405,0.059182349592447,-0.119380190968513,-0.114393487572670,0.106904134154320,-0.115565717220306,-0.023513870313764,0.024176046252251,-0.011079014278948,0.044704630970955,0.145416617393494,-0.086374558508396,-0.124393075704575,-0.013241033069789,-0.100549481809139,0.071051962673664));
res += mul(Get(s3,dx,-dy), float4x4(0.038812618702650,0.062190990895033,0.246564865112305,0.071615040302277,0.096527785062790,-0.137181356549263,-0.008571036159992,0.043229155242443,-0.024115007370710,0.001868324237876,-0.018669776618481,-0.021446803584695,-0.069059014320374,-0.114070504903793,-0.059283871203661,-0.005668113008142));
res += mul(Get(s3,dx,0), float4x4(-0.002322588115931,-0.091588385403156,0.030484696850181,-0.089661002159119,-0.085933625698090,-0.071968540549278,0.064927808940411,-0.080350175499916,-0.093363329768181,0.205502524971962,0.067696750164032,0.170875146985054,-0.030371127650142,-0.014396714046597,0.034493014216423,0.126613378524780));
res += mul(Get(s3,dx,dy), float4x4(0.041850488632917,-0.173098891973495,-0.048347856849432,-0.150938093662262,-0.081517688930035,0.129952013492584,-0.098153717815876,0.043114036321640,0.017542293295264,-0.072985090315342,-0.163252696394920,0.212084606289864,0.020639389753342,0.008660938590765,-0.025481740012765,0.213124722242355));
return max(float4(0,0,0,0), res);
}
