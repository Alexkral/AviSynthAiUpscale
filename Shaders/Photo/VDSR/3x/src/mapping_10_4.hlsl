sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.100559309124947,0.231554776430130,-0.015805577859282,0.103261329233646,-0.060856882482767,0.083585873246193,0.022977722808719,0.024322686716914,0.037315182387829,-0.005106328520924,-0.003411628771573,0.012594049796462,0.031236669048667,-0.120612934231758,0.018903682008386,-0.013852013275027));
res += mul(Get(s0,-dx,0), float4x4(0.026282913982868,-0.004210608080029,0.021097423508763,-0.016567122191191,-0.016179170459509,0.004991558380425,0.038498129695654,-0.079067878425121,0.069266691803932,0.087646469473839,-0.004049902316183,0.082989320158958,-0.021719338372350,0.055130477994680,0.037113565951586,-0.028259726241231));
res += mul(Get(s0,-dx,dy), float4x4(-0.235494881868362,0.078379459679127,0.146460771560669,0.065013691782951,0.139574557542801,-0.016414849087596,0.045356806367636,-0.045543033629656,0.024975333362818,0.113702200353146,0.044792342931032,-0.080966122448444,0.062672615051270,0.088536910712719,-0.027993993833661,-0.045997127890587));
res += mul(Get(s0,0,-dy), float4x4(0.137540042400360,0.155480071902275,-0.097734332084656,-0.027063427492976,-0.073762565851212,-0.059875626116991,-0.026489943265915,-0.024159999564290,0.015463996678591,0.052806116640568,-0.009979838505387,-0.024246450513601,-0.023042144253850,-0.067322015762329,0.045729395002127,-0.030612353235483));
res += mul(Get(s0,0,0), float4x4(0.159893676638603,-0.058846998959780,0.069171279668808,0.008668352849782,0.013063642196357,-0.083186119794846,0.015005667693913,0.035415489226580,-0.003414008300751,0.131506830453873,-0.000187627345440,0.026945324614644,-0.077443286776543,-0.021248100325465,0.071127943694592,-0.075593590736389));
res += mul(Get(s0,0,dy), float4x4(0.063587643206120,0.044727459549904,0.131584256887436,-0.032139498740435,0.034051038324833,-0.045276146382093,0.079882539808750,-0.014441969804466,0.126778095960617,0.097325712442398,-0.049928024411201,-0.035728264600039,0.002662742510438,0.136904612183571,-0.130980178713799,-0.015372165478766));
res += mul(Get(s0,dx,-dy), float4x4(-0.039404157549143,0.146127834916115,-0.099934287369251,0.030029824003577,0.006294297054410,0.057105991989374,0.081024959683418,-0.101187691092491,0.017607381567359,0.145696610212326,0.018339516595006,-0.216732606291771,-0.101382210850716,-0.081801101565361,-0.050511043518782,-0.008109084330499));
res += mul(Get(s0,dx,0), float4x4(-0.081930302083492,-0.026145972311497,0.090956993401051,0.031256381422281,0.039595298469067,0.045868784189224,0.023897210136056,-0.033660613000393,0.096501357853413,0.022609459236264,-0.001083859824575,-0.023114325478673,-0.099168106913567,-0.022890064865351,-0.009752071462572,0.010536383837461));
res += mul(Get(s0,dx,dy), float4x4(-0.035196091979742,0.040967453271151,0.026147341355681,0.004911798518151,-0.003901611315086,-0.057313896715641,0.053648672997952,0.072837270796299,0.129072487354279,0.065204329788685,-0.074855200946331,-0.029671475291252,-0.046334814280272,-0.016053499653935,-0.096675224602222,0.067722357809544));
res += mul(Get(s1,-dx,-dy), float4x4(-0.122808739542961,0.039345625787973,0.075957208871841,-0.017540797591209,-0.058377537876368,0.000163351811352,0.049185112118721,0.007284292485565,0.032707076519728,0.087077878415585,-0.098699584603310,0.153278186917305,-0.024621676653624,-0.012237814255059,-0.081804327666759,0.033570114523172));
res += mul(Get(s1,-dx,0), float4x4(0.072261825203896,-0.066747620701790,-0.067339681088924,0.014392976649106,0.038010288029909,-0.100326344370842,0.093837767839432,-0.016136491671205,0.072961241006851,-0.112240895628929,-0.030161373317242,0.150632202625275,0.019356317818165,0.045571360737085,0.016036611050367,-0.015829885378480));
res += mul(Get(s1,-dx,dy), float4x4(0.016425011679530,0.096981614828110,0.016134180128574,0.027193533256650,0.000948349770624,-0.063163153827190,0.054650574922562,-0.083138301968575,0.007123098708689,-0.030882397666574,0.094517126679420,0.179210379719734,0.025497836992145,-0.011163304559886,0.149024724960327,0.001811001216993));
res += mul(Get(s1,0,-dy), float4x4(0.077512830495834,-0.085416838526726,0.102854549884796,-0.012428759597242,0.024248739704490,0.062408473342657,0.015116131864488,-0.034087818115950,0.082411907613277,0.032646581530571,-0.114860013127327,-0.076703995466232,-0.074943944811821,-0.005770543590188,0.007901764474809,0.007549508009106));
res += mul(Get(s1,0,0), float4x4(0.042982190847397,0.000305560592096,-0.051804866641760,0.070287525653839,-0.000128178071463,-0.050857745110989,0.034735362976789,0.075981706380844,0.047340713441372,-0.150966584682465,0.091519027948380,-0.020381044596434,-0.029218135401607,0.009674901142716,-0.036780782043934,0.033491130918264));
res += mul(Get(s1,0,dy), float4x4(-0.097241498529911,0.030275819823146,-0.060303770005703,-0.031655892729759,0.017575927078724,-0.080885410308838,0.122061528265476,0.011541180312634,0.022902440279722,-0.059116993099451,0.138128563761711,-0.110972113907337,-0.002652984112501,0.065516345202923,0.215843379497528,0.069059245288372));
res += mul(Get(s1,dx,-dy), float4x4(-0.035567764192820,-0.087283492088318,0.169800698757172,0.034745089709759,-0.004487878642976,0.014158229343593,-0.047000631690025,-0.140423089265823,-0.028393052518368,0.037064366042614,-0.016312433406711,0.079576790332794,-0.124768532812595,-0.003977914340794,-0.025447854772210,0.015542717650533));
res += mul(Get(s1,dx,0), float4x4(-0.077040761709213,0.040609344840050,0.005943513009697,0.028363259509206,-0.110158249735832,-0.024274788796902,-0.111820884048939,-0.056341975927353,-0.012101684696972,-0.022765727713704,0.021249214187264,-0.066683910787106,-0.069762580096722,-0.010007752105594,-0.108804389834404,-0.066899627447128));
res += mul(Get(s1,dx,dy), float4x4(-0.147764936089516,0.203823044896126,-0.028389336541295,-0.093674391508102,-0.218042165040970,-0.084328114986420,0.025416947901249,-0.115077838301659,0.070887863636017,0.137569114565849,0.002285089343786,-0.050998259335756,-0.068743124604225,0.161951944231987,0.222289770841599,0.076764740049839));
res += mul(Get(s2,-dx,-dy), float4x4(0.054527428001165,-0.009625517763197,-0.192287564277649,-0.034088235348463,-0.107449054718018,0.035201620310545,-0.121916241943836,0.105400346219540,0.132561132311821,-0.005219104699790,-0.026706514880061,0.041295811533928,0.087729856371880,-0.116461448371410,-0.144146203994751,0.187180086970329));
res += mul(Get(s2,-dx,0), float4x4(0.080993294715881,-0.068889342248440,-0.075000062584877,-0.102095216512680,-0.008387745358050,0.032946456223726,0.105706073343754,0.038828033953905,0.039388414472342,-0.071259483695030,-0.199694007635117,-0.160813197493553,-0.032849654555321,-0.046753641217947,0.032996013760567,0.108528390526772));
res += mul(Get(s2,-dx,dy), float4x4(0.096131078898907,-0.068677455186844,0.073490835726261,-0.104304067790508,0.122248284518719,0.050291579216719,0.177200585603714,0.083497121930122,-0.120024248957634,0.114171653985977,-0.042994383722544,0.010654884390533,0.257837206125259,-0.005893921013921,0.084832400083542,0.004672771785408));
res += mul(Get(s2,0,-dy), float4x4(-0.048360679298639,-0.110461868345737,-0.045621566474438,-0.106538161635399,0.055922672152519,-0.018254511058331,-0.095320209860802,0.080359682440758,0.058364380151033,-0.040048893541098,0.219200015068054,-0.042193859815598,0.035975396633148,-0.102335713803768,-0.124672181904316,0.075006701052189));
res += mul(Get(s2,0,0), float4x4(-0.047180857509375,-0.089885301887989,-0.032764930278063,-0.045774877071381,0.050634186714888,0.019737031310797,0.032883662730455,0.026683837175369,0.052642565220594,-0.000085598439910,0.005110909696668,-0.001220573554747,-0.129191249608994,-0.075400792062283,-0.040603149682283,0.021006725728512));
res += mul(Get(s2,0,dy), float4x4(-0.028411025181413,-0.101067095994949,0.010167909786105,-0.087160490453243,0.049083318561316,-0.030500056222081,0.119006261229515,0.035575158894062,-0.005378420464694,-0.029168844223022,0.058396883308887,0.108794763684273,-0.002263509202749,0.020065905526280,0.035147834569216,-0.044150568544865));
res += mul(Get(s2,dx,-dy), float4x4(-0.017351053655148,0.054976657032967,-0.091324537992477,-0.148677185177803,-0.019592829048634,-0.003696147119626,-0.144025012850761,-0.031776357442141,-0.054316844791174,0.007365713827312,0.110249802470207,0.077682211995125,-0.091206178069115,0.071347922086716,-0.093221865594387,0.040199514478445));
res += mul(Get(s2,dx,0), float4x4(0.041953112930059,0.021970495581627,-0.027886280789971,-0.048464242368937,-0.022836526855826,-0.023819047957659,0.036753319203854,-0.069834411144257,-0.002465440658852,0.004306591581553,-0.085017755627632,0.095056600868702,-0.072632208466530,0.057245679199696,-0.089445948600769,-0.041946195065975));
res += mul(Get(s2,dx,dy), float4x4(0.035208646208048,0.117839977145195,-0.065971598029137,0.055106472223997,0.007801626343280,-0.048178896307945,-0.007821595296264,-0.031287040561438,0.051079671829939,-0.006479721982032,-0.005063000135124,0.145666390657425,0.035590611398220,0.044595349580050,-0.052629586309195,-0.078767783939838));
res += mul(Get(s3,-dx,-dy), float4x4(0.033107150346041,-0.026941049844027,-0.056836917996407,-0.079383261501789,0.072599388659000,-0.100979313254356,0.004682737402618,-0.043377179652452,-0.059593446552753,-0.056395910680294,-0.045295979827642,-0.010845606215298,-0.003019357332960,0.017468297854066,-0.056386627256870,0.015270723029971));
res += mul(Get(s3,-dx,0), float4x4(-0.060752760618925,-0.054083321243525,-0.105380959808826,-0.054886512458324,0.034803103655577,-0.053593214601278,-0.006055270321667,-0.079086050391197,0.041604951024055,0.008934800513089,0.019717516377568,0.019781792536378,-0.037598531693220,0.004461037926376,-0.031629588454962,-0.072368726134300));
res += mul(Get(s3,-dx,dy), float4x4(-0.069740466773510,0.148668825626373,0.036665394902229,0.024488907307386,0.025497868657112,0.072397544980049,-0.023582495748997,-0.069268539547920,0.047543905675411,0.091367408633232,0.001217080745846,-0.132732257246971,-0.038398202508688,0.017266808077693,-0.133937656879425,0.005166288465261));
res += mul(Get(s3,0,-dy), float4x4(-0.023226546123624,0.112530387938023,0.041122395545244,-0.044350188225508,0.000239900982706,-0.115496464073658,0.004828950390220,-0.024761214852333,-0.066067494452000,0.028924548998475,-0.061768271028996,0.051318425685167,0.076262734830379,-0.062460206449032,0.029057532548904,0.088906116783619));
res += mul(Get(s3,0,0), float4x4(-0.016565229743719,0.018965546041727,0.156231462955475,-0.011960958130658,-0.043069485574961,-0.076455950737000,0.044686295092106,-0.086534708738327,0.018510850146413,-0.026519127190113,0.014309230260551,-0.045879963785410,0.027741588652134,0.000787130615208,0.046646978706121,-0.199312761425972));
res += mul(Get(s3,0,dy), float4x4(0.020869698375463,-0.061954490840435,0.018465582281351,0.093806467950344,-0.053875360637903,0.011591919697821,-0.030187070369720,-0.027424287050962,0.058159347623587,-0.021366918459535,-0.055096991360188,-0.092913806438446,-0.057556819170713,0.086186751723289,0.026941807940602,0.408771634101868));
res += mul(Get(s3,dx,-dy), float4x4(-0.028338715434074,-0.111803062260151,-0.040547076612711,-0.156786277890205,0.065942399203777,-0.095484890043736,-0.018675535917282,0.043534409254789,-0.039951719343662,0.084432855248451,-0.043720297515392,-0.031899191439152,-0.080178253352642,-0.023927122354507,-0.007578535936773,0.117202028632164));
res += mul(Get(s3,dx,0), float4x4(-0.062452640384436,-0.043835543096066,-0.002178268739954,0.003971339669079,0.034037746489048,-0.013391731306911,-0.061855506151915,-0.042119100689888,0.000088364111434,0.085949264466763,-0.021543657407165,-0.051033843308687,-0.018620414659381,0.054663643240929,-0.064637482166290,0.161319240927696));
res += mul(Get(s3,dx,dy), float4x4(-0.017371525987983,-0.039398048073053,0.004908455070108,-0.023751968517900,0.004780013114214,0.046457294374704,-0.046308130025864,0.045259620994329,-0.048272654414177,0.035312592983246,-0.113938763737679,-0.052905540913343,-0.002129857661203,0.036155708134174,0.052303541451693,0.080375634133816));
return max(float4(0,0,0,0), res);
}
