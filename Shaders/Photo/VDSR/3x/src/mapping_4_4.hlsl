sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.044854827225208,-0.008121790364385,0.086834840476513,-0.252085864543915,-0.075596638023853,-0.200086995959282,0.127789914608002,-0.044865213334560,-0.100237771868706,-0.047017991542816,0.166712537407875,-0.062425035983324,0.160881325602531,0.043282419443130,-0.082502491772175,0.300709456205368));
res += mul(Get(s0,-dx,0), float4x4(-0.104489251971245,-0.040068607777357,-0.029641080647707,-0.150906145572662,-0.108243837952614,0.032388575375080,0.049728281795979,0.045488160103559,-0.015211587771773,0.208047643303871,-0.031156348064542,0.149397835135460,0.098689816892147,-0.116079971194267,-0.118643783032894,-0.082001097500324));
res += mul(Get(s0,-dx,dy), float4x4(-0.152595981955528,0.224297642707825,-0.050259374082088,-0.120090082287788,-0.183466777205467,-0.072859734296799,0.172914758324623,-0.070076450705528,0.282689899206161,0.113456875085831,-0.165640726685524,-0.101893983781338,-0.043047450482845,0.031168369576335,0.103231832385063,0.028839392587543));
res += mul(Get(s0,0,-dy), float4x4(0.077940247952938,-0.058717861771584,0.047873634845018,0.098966389894485,0.033796764910221,0.055474855005741,0.023644950240850,0.074936516582966,0.148310139775276,-0.015584888868034,-0.006320388521999,0.004741490352899,0.137212961912155,0.117830164730549,0.111911803483963,0.198804304003716));
res += mul(Get(s0,0,0), float4x4(0.019666554406285,-0.106346145272255,-0.119935587048531,0.030489975586534,-0.087031714618206,0.082588873803616,0.050418112426996,-0.028965672478080,0.285403788089752,-0.031576365232468,0.157102778553963,0.040556401014328,0.003943777177483,-0.132645711302757,0.020229136571288,0.052810642868280));
res += mul(Get(s0,0,dy), float4x4(0.059295233339071,-0.059816803783178,0.138989955186844,-0.055526584386826,-0.002715558744967,0.090007960796356,-0.198886021971703,0.104655206203461,-0.009719191119075,-0.185480877757072,0.026545487344265,-0.082715623080730,0.115893095731735,-0.097312219440937,0.083281584084034,-0.279906451702118));
res += mul(Get(s0,dx,-dy), float4x4(0.109675884246826,-0.123591683804989,-0.074437536299229,-0.193628728389740,0.076933473348618,-0.005047353915870,-0.176020413637161,-0.046855807304382,0.033842418342829,0.093886911869049,-0.207600593566895,-0.036121401935816,0.036224305629730,-0.114449515938759,0.037944555282593,-0.028664598241448));
res += mul(Get(s0,dx,0), float4x4(0.117789439857006,0.243729382753372,-0.094579383730888,-0.129550009965897,0.072357639670372,0.129003271460533,0.121460646390915,0.000784315168858,0.147514238953590,0.073111966252327,-0.147839590907097,0.091585956513882,0.044686902314425,0.072167962789536,-0.124417766928673,-0.044352829456329));
res += mul(Get(s0,dx,dy), float4x4(0.090921446681023,0.057202994823456,-0.066600240767002,-0.061166949570179,0.205279618501663,0.079434290528297,-0.038452848792076,0.071530394256115,-0.003088081954047,0.043347414582968,-0.113216653466225,0.137561529874802,-0.078780584037304,-0.040098201483488,0.137646496295929,0.133363291621208));
res += mul(Get(s1,-dx,-dy), float4x4(-0.000903306121472,-0.078812859952450,-0.175883412361145,-0.030001373961568,0.011899621225893,-0.093900516629219,0.075785920023918,-0.127956703305244,-0.016862813383341,0.012307081371546,0.015539844520390,-0.213369458913803,-0.111583940684795,0.083087764680386,-0.119225189089775,-0.030107701197267));
res += mul(Get(s1,-dx,0), float4x4(-0.061770185828209,0.040900919586420,-0.216798827052116,-0.081734254956245,0.014187070541084,-0.092450328171253,0.029401823878288,0.123944789171219,-0.260960429906845,0.302941739559174,-0.213879540562630,-0.087505660951138,-0.068837352097034,-0.244760230183601,0.189361289143562,-0.176174134016037));
res += mul(Get(s1,-dx,dy), float4x4(0.018065776675940,-0.068301044404507,-0.034354325383902,-0.084498897194862,-0.113538876175880,-0.070950679481030,-0.026761777698994,-0.090682357549667,-0.054840676486492,0.039727319031954,-0.070759609341621,-0.054856739938259,-0.024059193208814,-0.046542089432478,0.154241263866425,-0.033063314855099));
res += mul(Get(s1,0,-dy), float4x4(0.028880393132567,-0.029701689258218,0.028654117137194,-0.040033135563135,-0.081641726195812,-0.160069689154625,0.163825482130051,0.051107294857502,-0.114085800945759,0.016861358657479,0.136738196015358,-0.134310901165009,0.091070972383022,-0.004292439669371,-0.083460181951523,0.032813746482134));
res += mul(Get(s1,0,0), float4x4(-0.181985005736351,-0.005987907294184,0.059674326330423,-0.054097421467304,-0.016642438247800,0.106814309954643,0.068150162696838,-0.027916809543967,0.131817162036896,0.152276411652565,0.093679755926132,0.226106926798820,0.017275527119637,0.108139909803867,0.146801307797432,-0.066778078675270));
res += mul(Get(s1,0,dy), float4x4(0.071400292217731,0.070082560181618,-0.103335343301296,0.057142663747072,-0.145570710301399,-0.027416639029980,-0.004158847965300,-0.077454201877117,0.042885072529316,0.080710597336292,-0.071984484791756,0.074703052639961,-0.130155459046364,-0.099540665745735,-0.126083672046661,0.109757483005524));
res += mul(Get(s1,dx,-dy), float4x4(-0.131417006254196,-0.048225376754999,-0.059337407350540,-0.124208465218544,-0.105026036500931,0.005340350791812,0.283569395542145,0.042252726852894,-0.172129407525063,0.062807410955429,-0.006326172035187,-0.058239988982677,-0.037887722253799,-0.003945177420974,0.011350133456290,-0.086214035749435));
res += mul(Get(s1,dx,0), float4x4(-0.021299440413713,0.027429383248091,-0.070303142070770,-0.132034018635750,0.078171595931053,0.070128947496414,0.047015592455864,0.081149898469448,0.123140133917332,-0.212214499711990,0.163141548633575,-0.165506482124329,-0.111917167901993,-0.220117449760437,-0.061006359755993,-0.105962626636028));
res += mul(Get(s1,dx,dy), float4x4(-0.250206440687180,0.007243721745908,-0.065460838377476,0.036207765340805,-0.074410475790501,0.040176209062338,-0.029774785041809,-0.060840182006359,0.050659269094467,-0.242583543062210,0.005373362451792,-0.172232121229172,-0.062338873744011,0.168718114495277,-0.017644168809056,-0.146908536553383));
res += mul(Get(s2,-dx,-dy), float4x4(-0.144636362791061,-0.312419801950455,0.079525314271450,-0.079663164913654,-0.209371849894524,0.039627179503441,-0.103347733616829,-0.089875362813473,-0.181724980473518,-0.163818076252937,0.008953940123320,-0.242196649312973,-0.193854868412018,-0.012340936809778,-0.013423007912934,0.006539138499647));
res += mul(Get(s2,-dx,0), float4x4(0.069635555148125,0.088023766875267,0.003649376099929,0.109684281051159,-0.017092635855079,-0.054471168667078,0.085919305682182,-0.009057860821486,0.122309230268002,-0.121480189263821,0.010962835513055,-0.011355285532773,-0.048632454127073,0.316878408193588,-0.070298433303833,-0.202756375074387));
res += mul(Get(s2,-dx,dy), float4x4(-0.053976003080606,0.060141712427139,-0.162734046578407,0.056364938616753,0.079884715378284,0.050271783024073,0.071825653314590,-0.125668108463287,0.006429689005017,-0.017192872241139,0.027463380247355,-0.015589712187648,-0.006232110783458,0.046583790332079,0.003352722385898,0.171535521745682));
res += mul(Get(s2,0,-dy), float4x4(0.001265480881557,0.064629472792149,0.010766096413136,0.017877077683806,-0.048316158354282,-0.112010583281517,-0.217503324151039,0.066011831164360,-0.067786931991577,0.020449398085475,0.248426780104637,0.101446583867073,-0.122458688914776,-0.054576091468334,0.091944769024849,0.016099426895380));
res += mul(Get(s2,0,0), float4x4(-0.045367952436209,-0.085054136812687,0.003702427493408,0.063270159065723,-0.015689840540290,-0.046738080680370,0.054925609380007,-0.062900401651859,-0.105119213461876,0.082406863570213,-0.214300587773323,-0.010654781013727,0.013526267372072,0.037403281778097,0.089854575693607,0.052512265741825));
res += mul(Get(s2,0,dy), float4x4(0.095315702259541,0.080105364322662,-0.031011339277029,-0.026434483006597,0.035767175257206,-0.095020480453968,-0.075038969516754,0.078032881021500,-0.010133332572877,-0.159010440111160,0.007497593760490,-0.081747561693192,-0.109698116779327,-0.054149493575096,0.041226297616959,0.002671653870493));
res += mul(Get(s2,dx,-dy), float4x4(0.150943562388420,0.077638104557991,0.055136136710644,0.006648412439972,0.087938204407692,0.344769060611725,0.024284224957228,-0.003639583708718,-0.022212691605091,-0.188296899199486,0.072580516338348,-0.015048116445541,0.020898498594761,-0.021837262436748,0.177378699183464,0.214025840163231));
res += mul(Get(s2,dx,0), float4x4(-0.082080043852329,0.060205627232790,-0.156208932399750,-0.136858239769936,-0.185436353087425,-0.209156617522240,0.191859796643257,0.105370037257671,0.015399011783302,0.010494948364794,0.046314910054207,-0.266193449497223,0.045892041176558,-0.027639983221889,-0.128359392285347,-0.095988646149635));
res += mul(Get(s2,dx,dy), float4x4(-0.103798083961010,0.101194150745869,-0.004238274879754,-0.041296903043985,0.086730040609837,-0.117479294538498,-0.066067487001419,0.095719881355762,0.144307583570480,-0.087765477597713,0.024335838854313,-0.047778602689505,0.112382531166077,-0.131817758083344,0.043943908065557,-0.000272477307590));
res += mul(Get(s3,-dx,-dy), float4x4(0.032764423638582,0.282619655132294,-0.086199045181274,-0.097444288432598,0.230706363916397,-0.129786148667336,-0.156038329005241,-0.014715958386660,0.015472378581762,-0.008236474357545,0.152936622500420,-0.085806280374527,-0.053262900561094,0.257064342498779,0.076249018311501,0.000548199110199));
res += mul(Get(s3,-dx,0), float4x4(0.006977469194680,0.375129938125610,0.022817734628916,0.013841762207448,0.111487567424774,0.101479329168797,0.057331971824169,0.018510650843382,-0.025316411629319,-0.133340999484062,0.079314425587654,0.096529930830002,0.011309795081615,0.326333701610565,-0.194451391696930,0.027152389287949));
res += mul(Get(s3,-dx,dy), float4x4(0.085806891322136,0.115616723895073,0.098382934927940,0.014723896980286,0.303880542516708,0.043936870992184,-0.018225392326713,0.028383379802108,-0.064046703279018,-0.036439877003431,0.095179095864296,0.032787837088108,-0.106073625385761,0.025192596018314,0.182815760374069,0.041010849177837));
res += mul(Get(s3,0,-dy), float4x4(-0.021427972242236,0.007182456552982,-0.016039887443185,0.029666312038898,-0.009779301472008,0.003293029498309,-0.096439212560654,-0.040584579110146,-0.038372386246920,-0.200502365827560,-0.049050770699978,0.222273245453835,-0.051414709538221,-0.000775010616053,-0.140645846724510,0.031256966292858));
res += mul(Get(s3,0,0), float4x4(0.266018241643906,-0.096821397542953,0.017019638791680,0.019034614786506,-0.096741020679474,0.100951239466667,-0.229580834507942,-0.151280418038368,-0.157918423414230,-0.044081799685955,-0.059084512293339,-0.004087832756341,0.281263828277588,0.196914792060852,0.038003116846085,-0.080621913075447));
res += mul(Get(s3,0,dy), float4x4(-0.046656914055347,0.017783077433705,0.123397171497345,-0.021170562133193,0.018689285963774,0.212072759866714,0.084746859967709,0.158197402954102,-0.115747861564159,0.182634323835373,-0.042624890804291,-0.010408178903162,-0.196125045418739,-0.195201709866524,-0.011665658093989,0.004046836402267));
res += mul(Get(s3,dx,-dy), float4x4(0.000878366292454,-0.169417157769203,0.131969869136810,-0.002812821883708,0.116354398429394,-0.016830340027809,-0.015343882143497,-0.063899606466293,-0.107113510370255,0.129096493124962,0.236807689070702,0.112797528505325,0.200477987527847,0.034093849360943,0.116806209087372,-0.061474021524191));
res += mul(Get(s3,dx,0), float4x4(-0.130454868078232,0.039889648556709,-0.011753358878195,0.180848941206932,-0.032840002328157,-0.058315481990576,-0.225879549980164,0.009417354129255,-0.010844909586012,-0.065440982580185,-0.264665752649307,0.045030098408461,0.064080990850925,-0.075761854648590,-0.098486267030239,-0.058954969048500));
res += mul(Get(s3,dx,dy), float4x4(-0.065319143235683,0.053443539887667,0.105958685278893,-0.038127806037664,-0.041651893407106,0.067137397825718,-0.031319431960583,0.009301682002842,0.135562792420387,0.086477719247341,0.086884453892708,0.087431661784649,0.066515460610390,-0.087946549057961,-0.077911756932735,-0.116357244551182));
return max(float4(0,0,0,0), res);
}
