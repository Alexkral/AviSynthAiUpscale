sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.203978314995766,-0.055605109781027,-0.067315265536308,0.062752388417721,-0.030187211930752,-0.111407175660133,0.174737066030502,0.271178841590881,0.174719125032425,0.245840027928352,0.018110826611519,0.106810361146927,-0.024089628830552,0.010563196614385,0.064830444753170,0.008343608118594));
res += mul(Get(s0,-dx,0), float4x4(-0.000577757833526,-0.243319332599640,-0.085905201733112,0.157238900661469,-0.295186251401901,-0.008425937965512,0.069120362401009,-0.027278775349259,0.006129070650786,-0.037088572978973,0.067249298095703,-0.084459967911243,-0.010969243012369,0.148200884461403,0.189785718917847,0.224223703145981));
res += mul(Get(s0,-dx,dy), float4x4(-0.102560020983219,0.023887777701020,-0.163405969738960,-0.002446808386594,0.051895301789045,-0.032490264624357,0.174807846546173,-0.086378030478954,-0.067066453397274,0.018413618206978,0.229331597685814,-0.027925755828619,-0.166034176945686,0.073028869926929,0.110091917216778,-0.153629094362259));
res += mul(Get(s0,0,-dy), float4x4(0.056670218706131,-0.013041072525084,0.153564840555191,0.112328998744488,0.016187340021133,0.031898200511932,-0.007715371437371,0.028243806213140,-0.158243447542191,0.060593049973249,-0.043658927083015,-0.213957995176315,-0.083869323134422,-0.041002266108990,-0.015132881700993,-0.121473968029022));
res += mul(Get(s0,0,0), float4x4(0.053156424313784,0.052865445613861,0.103403322398663,-0.057012770324945,0.056788951158524,0.124096535146236,0.162321373820305,0.034675542265177,0.146152615547180,0.086856797337532,-0.092829637229443,-0.004904136527330,0.034501250833273,0.033771432936192,0.019777948036790,0.083013415336609));
res += mul(Get(s0,0,dy), float4x4(-0.080894641578197,-0.042042776942253,-0.267687886953354,-0.097147218883038,-0.019381385296583,-0.019037878140807,-0.095687605440617,0.019613703712821,0.090425655245781,0.020704420283437,0.026768937706947,-0.006725145969540,-0.065246768295765,0.002496343571693,0.085597164928913,-0.131533592939377));
res += mul(Get(s0,dx,-dy), float4x4(-0.144574433565140,0.111432559788227,-0.088428474962711,-0.117852255702019,-0.113581776618958,-0.206631168723106,-0.085940636694431,-0.032613515853882,-0.056762784719467,-0.072766587138176,0.139797970652580,0.016070872545242,-0.104754894971848,-0.059544235467911,0.175186976790428,0.048398382961750));
res += mul(Get(s0,dx,0), float4x4(0.035567607730627,0.082911722362041,0.122450903058052,0.044160038232803,-0.085227496922016,0.016350558027625,0.146492987871170,0.085038028657436,0.139533281326294,-0.125076636672020,-0.124176964163780,0.157627090811729,0.014675613492727,0.108827762305737,-0.196205064654350,-0.047642379999161));
res += mul(Get(s0,dx,dy), float4x4(-0.007528623100370,-0.001379672205076,-0.087807700037956,-0.022593833506107,-0.120558619499207,-0.054247751832008,-0.072290703654289,-0.086520120501518,-0.106463558971882,-0.253884494304657,0.076031252741814,0.101934671401978,0.037490732967854,0.017716698348522,0.092444367706776,-0.007502294611186));
res += mul(Get(s1,-dx,-dy), float4x4(0.064477354288101,0.154831558465958,0.158555522561073,-0.099440082907677,0.043946720659733,0.122969150543213,0.106637373566628,0.119986787438393,-0.074811257421970,0.190545663237572,-0.080314554274082,-0.005612931214273,0.048561949282885,0.067080900073051,-0.093926556408405,0.013142894022167));
res += mul(Get(s1,-dx,0), float4x4(-0.093296475708485,-0.015485626645386,0.121916085481644,-0.078458502888680,0.089273266494274,0.038647655397654,-0.015032992698252,-0.131120577454567,-0.049514494836330,0.060238979756832,0.056423038244247,0.033448252826929,0.085582561790943,0.094213008880615,-0.001240619458258,0.036816615611315));
res += mul(Get(s1,-dx,dy), float4x4(0.054411079734564,0.001106150564738,0.062576726078987,-0.045725386589766,0.092935331165791,-0.068517237901688,-0.137895897030830,-0.043996572494507,0.192784354090691,0.109073653817177,-0.125517487525940,0.089618995785713,-0.054218452423811,-0.122794590890408,-0.056473586708307,0.047613009810448));
res += mul(Get(s1,0,-dy), float4x4(0.037671726197004,-0.143554240465164,0.144064575433731,0.083955280482769,-0.015409857034683,0.070678748190403,0.175590917468071,0.125679269433022,-0.014755182899535,0.038509603589773,0.089386545121670,0.023728357627988,-0.124535888433456,-0.068705320358276,0.088059812784195,0.218616217374802));
res += mul(Get(s1,0,0), float4x4(0.013504660688341,0.078908979892731,-0.162639901041985,-0.151204541325569,0.258975356817245,-0.008377069607377,-0.030043568462133,-0.119896918535233,0.041821382939816,-0.074172735214233,-0.012567573226988,-0.020265402272344,-0.020345292985439,-0.025428095832467,0.000957306474447,-0.037171576172113));
res += mul(Get(s1,0,dy), float4x4(0.188625410199165,-0.005061159841716,-0.051690421998501,0.081115618348122,-0.081363320350647,0.123094737529755,0.094466216862202,-0.212097078561783,0.003646514145657,0.084571473300457,0.093815810978413,-0.118491992354393,-0.027900241315365,0.149121686816216,0.024321895092726,-0.005070786457509));
res += mul(Get(s1,dx,-dy), float4x4(0.262901723384857,0.037460625171661,0.138663694262505,-0.124275803565979,-0.026979641988873,-0.106481879949570,-0.174094259738922,0.063197940587997,0.126387953758240,0.099931046366692,-0.091470971703529,-0.169503703713417,-0.001701247994788,0.017936298623681,0.086429513990879,-0.128416657447815));
res += mul(Get(s1,dx,0), float4x4(0.153235673904419,-0.144026234745979,0.169560700654984,-0.023786256089807,-0.127735361456871,0.017152786254883,0.022377310320735,-0.035051692277193,0.173786997795105,0.078499317169189,-0.006843836512417,0.044504385441542,-0.015795573592186,-0.110581278800964,0.103167273104191,-0.073762357234955));
res += mul(Get(s1,dx,dy), float4x4(-0.086890146136284,0.099701911211014,-0.069320224225521,0.017578776925802,-0.069719180464745,0.149627894163132,0.223553955554962,0.169274643063545,-0.165311604738235,0.157745003700256,0.075536318123341,0.128025561571121,-0.044781479984522,-0.057978104799986,0.059699598699808,0.012968200258911));
res += mul(Get(s2,-dx,-dy), float4x4(-0.188190445303917,-0.117483675479889,0.148173555731773,0.082323357462883,-0.039719767868519,0.233789503574371,0.153498545289040,-0.190477579832077,-0.064473122358322,-0.069168061017990,-0.066487357020378,-0.039696440100670,-0.051136948168278,0.151542916893959,0.004625503439456,-0.052596230059862));
res += mul(Get(s2,-dx,0), float4x4(-0.090595021843910,0.004258861299604,-0.050913903862238,0.004848352633417,0.082539618015289,0.040873527526855,0.036660835146904,-0.034917846322060,-0.041679210960865,-0.040363281965256,0.000275268917903,-0.030255654826760,-0.053291913121939,-0.002423126948997,0.162710651755333,-0.096168823540211));
res += mul(Get(s2,-dx,dy), float4x4(0.004291466902941,0.141432195901871,0.141175523400307,0.026013975962996,0.053488492965698,-0.087956011295319,-0.214726984500885,-0.096368245780468,0.015796782448888,-0.065261006355286,-0.207230612635612,0.104428194463253,-0.016545476391912,-0.013424797914922,0.079032056033611,0.031929399818182));
res += mul(Get(s2,0,-dy), float4x4(-0.049763597548008,0.067280836403370,0.174318760633469,-0.105805233120918,0.083749882876873,-0.037292167544365,0.079878225922585,-0.042795918881893,-0.224134936928749,0.053394209593534,-0.034334022551775,0.005453851073980,-0.111173532903194,0.222541794180870,-0.082801654934883,-0.057209145277739));
res += mul(Get(s2,0,0), float4x4(-0.113952323794365,-0.062193110585213,0.293199896812439,0.004848395939916,0.206601917743683,0.107662349939346,-0.097086146473885,0.029697939753532,-0.026042493060231,0.062266469001770,0.163878351449966,-0.085009410977364,0.035614326596260,-0.004263383802027,0.043258637189865,0.020162938162684));
res += mul(Get(s2,0,dy), float4x4(-0.000834702048451,0.084946565330029,-0.134722337126732,-0.025028459727764,-0.130083680152893,-0.039219375699759,0.162014946341515,-0.141538053750992,-0.064393147826195,-0.113824769854546,-0.016484428197145,-0.013294271193445,0.090100474655628,0.010204862803221,-0.216313779354095,-0.083903506398201));
res += mul(Get(s2,dx,-dy), float4x4(0.209347128868103,0.060242645442486,0.017213238403201,-0.012393711134791,0.019196258857846,0.057212375104427,-0.130920618772507,0.076370514929295,0.043879788368940,-0.015308269299567,-0.057406600564718,-0.051428407430649,-0.118614330887794,0.034341804683208,0.019032148644328,0.092991478741169));
res += mul(Get(s2,dx,0), float4x4(0.130383506417274,-0.291757494211197,-0.016425482928753,-0.201960012316704,-0.058430101722479,-0.020193399861455,0.045646693557501,0.097360238432884,0.037825733423233,-0.052691631019115,-0.079124897718430,-0.054334789514542,-0.037615761160851,-0.027158297598362,-0.121727354824543,-0.096462897956371));
res += mul(Get(s2,dx,dy), float4x4(-0.084872320294380,-0.021814856678247,-0.027756415307522,-0.026674119755626,-0.033350434154272,-0.012414484284818,-0.000309126276989,-0.019920209422708,0.050547234714031,-0.099936060607433,0.008198725990951,0.012012114748359,-0.140683054924011,-0.058087173849344,-0.017328210175037,-0.120353996753693));
res += mul(Get(s3,-dx,-dy), float4x4(0.023409238085151,-0.154130801558495,-0.160328805446625,-0.009376172907650,-0.189268961548805,-0.072902396321297,0.113481432199478,0.074712976813316,-0.102710738778114,-0.023970045149326,0.118717275559902,-0.100639693439007,0.178276523947716,0.089545868337154,0.012186227366328,-0.029815457761288));
res += mul(Get(s3,-dx,0), float4x4(-0.040633209049702,0.081853225827217,-0.020995784550905,0.274717569351196,0.026318784803152,-0.315933853387833,0.121123045682907,0.151715338230133,0.066622093319893,0.025278007611632,0.025115406140685,0.030469795688987,-0.114144541323185,0.015111741609871,-0.060472603887320,0.014667292125523));
res += mul(Get(s3,-dx,dy), float4x4(0.191580966114998,-0.252654999494553,0.174477174878120,0.171730160713196,0.182515665888786,0.011298866942525,0.084052853286266,-0.116396695375443,0.051615729928017,0.079806409776211,-0.046961177140474,-0.001487491652369,0.174352481961250,-0.050080094486475,-0.245809525251389,-0.062706865370274));
res += mul(Get(s3,0,-dy), float4x4(0.106319770216942,0.022840827703476,-0.065176144242287,0.067458368837833,-0.141254425048828,-0.049931574612856,-0.017071360722184,-0.224807351827621,0.028837287798524,-0.050680272281170,0.108490690588951,0.129236236214638,0.006534530781209,0.018246486783028,-0.016716482117772,0.033392529934645));
res += mul(Get(s3,0,0), float4x4(-0.068131752312183,0.068670101463795,0.030691944062710,-0.038751941174269,-0.082930557429790,0.111482731997967,-0.023639332503080,-0.032803688198328,0.020590752363205,-0.034048650413752,0.077474839985371,-0.064948074519634,-0.128034383058548,0.095241703093052,-0.146914944052696,-0.018611464649439));
res += mul(Get(s3,0,dy), float4x4(0.154279440641403,0.086530268192291,-0.100699357688427,-0.068457819521427,-0.131497666239738,-0.184728339314461,0.143425434827805,-0.123131200671196,-0.111242227256298,0.072246305644512,-0.036861516535282,0.005213462747633,-0.004700480494648,0.108309954404831,-0.024067131802440,0.013222496025264));
res += mul(Get(s3,dx,-dy), float4x4(0.064704380929470,0.081462338566780,-0.057671349495649,-0.022947959601879,0.021278781816363,-0.128907158970833,-0.084610074758530,0.026531018316746,0.072233088314533,-0.103640124201775,-0.250340133905411,-0.157782077789307,-0.065777525305748,0.092003069818020,0.029769079759717,-0.101575389504433));
res += mul(Get(s3,dx,0), float4x4(0.007041934411973,0.072085291147232,0.016011109575629,0.005808117799461,-0.183297187089920,-0.013685232959688,0.042390108108521,-0.138289511203766,0.142738223075867,-0.258239537477493,-0.084287948906422,-0.125630959868431,0.022055739536881,-0.117691561579704,0.183458283543587,-0.037066072225571));
res += mul(Get(s3,dx,dy), float4x4(0.166603013873100,0.106174349784851,0.012746693566442,0.154329597949982,-0.015231532044709,0.028956392779946,-0.054145779460669,0.053892858326435,0.024337392300367,0.195934638381004,-0.185704797506332,0.207254454493523,0.142646625638008,0.051931601017714,-0.133884832262993,0.153644606471062));
return max(float4(0,0,0,0), res);
}
