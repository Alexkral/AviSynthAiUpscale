sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.179229795932770,-0.188707903027534,0.061221774667501,-0.069003783166409,-0.218802303075790,0.165649175643921,-0.057245843112469,-0.028616262599826,0.109671220183372,0.135301619768143,-0.098070055246353,-0.011848693713546,-0.034098714590073,0.022220935672522,0.029256243258715,0.033227588981390));
res += mul(Get(s0,-dx,0), float4x4(0.165282085537910,-0.059344906359911,0.012485995888710,0.165487244725227,0.142074495553970,-0.006381703540683,-0.071897894144058,0.098773203790188,-0.124089136719704,-0.055934857577085,-0.040856879204512,0.189064294099808,-0.173826843500137,0.022287389263511,-0.094117254018784,0.152911111712456));
res += mul(Get(s0,-dx,dy), float4x4(0.199350789189339,-0.061509735882282,0.127840802073479,0.089986957609653,-0.101521298289299,-0.021749133244157,-0.008622792549431,-0.132941737771034,0.157739952206612,-0.009515104815364,0.088332876563072,0.014378108084202,-0.125121533870697,-0.006684541702271,-0.126814022660255,0.168011501431465));
res += mul(Get(s0,0,-dy), float4x4(-0.065425373613834,0.135400757193565,0.004378954414278,-0.107435010373592,0.142019152641296,-0.200451493263245,-0.249246209859848,-0.084659516811371,0.105685047805309,0.109820812940598,0.021355696022511,-0.025024084374309,-0.045451059937477,-0.021582117304206,-0.185426443815231,-0.018927851691842));
res += mul(Get(s0,0,0), float4x4(0.179095789790154,-0.094195321202278,-0.051174767315388,0.107840202748775,0.157700270414352,-0.029480379074812,0.080988824367523,0.182322934269905,-0.150411546230316,-0.148989185690880,0.114000849425793,0.060729082673788,0.109059229493141,-0.082185231149197,0.043127294629812,-0.016578052192926));
res += mul(Get(s0,0,dy), float4x4(-0.077521383762360,0.073563151061535,-0.156304925680161,0.094564191997051,-0.030767239630222,-0.061927106231451,-0.118920348584652,0.039641026407480,0.069800518453121,-0.023552754893899,0.015827266499400,0.010996378958225,-0.068111419677734,-0.083542607724667,0.064207032322884,0.025847500190139));
res += mul(Get(s0,dx,-dy), float4x4(-0.080414384603500,0.119535937905312,0.186314985156059,-0.054780326783657,0.020293541252613,0.117200635373592,0.160867691040039,0.055588386952877,0.144108876585960,-0.122668690979481,-0.074594877660275,-0.079780295491219,-0.046811260282993,-0.070252686738968,-0.024514507502317,-0.132057651877403));
res += mul(Get(s0,dx,0), float4x4(0.192706480622292,-0.059426374733448,0.118956714868546,0.051615405827761,-0.014503303915262,-0.054519489407539,0.159448340535164,0.213334888219833,-0.105310551822186,0.079402856528759,0.042405780404806,-0.058163493871689,0.286998957395554,-0.041015043854713,0.093434490263462,-0.075774066150188));
res += mul(Get(s0,dx,dy), float4x4(-0.004131856840104,0.120756946504116,-0.021940061822534,0.039133183658123,-0.038227777928114,-0.130288347601891,-0.109946228563786,-0.010298793204129,0.108735077083111,-0.206159949302673,-0.000721436168533,-0.137487486004829,0.056542262434959,-0.057145491242409,-0.054843787103891,-0.241607755422592));
res += mul(Get(s1,-dx,-dy), float4x4(-0.070556335151196,-0.263991624116898,-0.215774446725845,0.156381145119667,-0.063989743590355,0.150976449251175,0.012798324227333,0.167826339602470,0.039178088307381,-0.035623196512461,-0.115843281149864,0.029418256133795,0.245128691196442,0.162146568298340,-0.046691421419382,0.192219585180283));
res += mul(Get(s1,-dx,0), float4x4(0.094328358769417,0.087355270981789,-0.080941021442413,0.067782215774059,0.089074969291687,0.017509112134576,-0.032893072813749,0.016153473407030,-0.017213772982359,-0.123613737523556,-0.058726247400045,0.017166774719954,0.133112013339996,0.188077062368393,0.193578109145164,0.151377752423286));
res += mul(Get(s1,-dx,dy), float4x4(0.022776478901505,-0.004257607273757,-0.111711859703064,-0.050406157970428,-0.124096401035786,-0.027624446898699,0.043219927698374,0.030041152611375,-0.003672162303701,-0.189940065145493,-0.023564372211695,0.138674244284630,-0.005301535595208,-0.043779309839010,-0.000204868105357,0.004596210084856));
res += mul(Get(s1,0,-dy), float4x4(0.152319625020027,-0.067534968256950,0.028921142220497,0.042507544159889,-0.052205756306648,0.003077835775912,-0.013483044691384,-0.004271042533219,-0.068913973867893,-0.106485903263092,-0.102848619222641,0.045168247073889,0.069742470979691,-0.062305767089128,-0.039298471063375,-0.074612006545067));
res += mul(Get(s1,0,0), float4x4(0.026657028123736,-0.298633724451065,0.185766920447350,-0.172461166977882,0.233425170183182,-0.047130629420280,0.012824637815356,0.269257336854935,0.025098979473114,0.028882900252938,0.029114391654730,0.180683776736259,-0.037295129150152,0.162520006299019,0.005263212602586,0.014620827510953));
res += mul(Get(s1,0,dy), float4x4(-0.030285455286503,-0.125141650438309,-0.132690146565437,0.105866149067879,-0.111323192715645,-0.122808612883091,-0.010740860365331,0.039645172655582,0.018294839188457,-0.103834949433804,-0.099026456475258,0.010539468377829,-0.006516041699797,-0.110950402915478,0.027001367881894,0.199847355484962));
res += mul(Get(s1,dx,-dy), float4x4(0.062056578695774,-0.194893583655357,0.019068149849772,0.182688653469086,0.103353127837181,0.002575860824436,-0.056451894342899,-0.058687053620815,-0.099373184144497,-0.016859171912074,-0.156607776880264,-0.131539568305016,-0.014550462365150,-0.027434123679996,-0.000490453152452,-0.140304848551750));
res += mul(Get(s1,dx,0), float4x4(0.279398322105408,-0.153830140829086,-0.093564890325069,0.035945106297731,-0.141676813364029,-0.028921591117978,0.030547885224223,-0.111505150794983,0.173113197088242,0.163412943482399,0.068478032946587,-0.106324024498463,0.028115656226873,0.023273814469576,-0.154641807079315,-0.073717832565308));
res += mul(Get(s1,dx,dy), float4x4(-0.021988946944475,-0.138636797666550,0.032094355672598,0.143131941556931,0.088145650923252,0.032559037208557,-0.011677575297654,0.055088743567467,-0.056229203939438,0.110455311834812,0.087801627814770,0.038768436759710,0.030735375359654,-0.063749916851521,-0.175452888011932,-0.027134360745549));
res += mul(Get(s2,-dx,-dy), float4x4(0.065986670553684,-0.064485140144825,-0.090721815824509,0.032694522291422,0.019498310983181,-0.002189590595663,-0.057513285428286,0.000669144908898,0.069039322435856,0.139253884553909,-0.009747724048793,-0.032445415854454,0.066574655473232,0.175700962543488,0.163999915122986,-0.159087866544724));
res += mul(Get(s2,-dx,0), float4x4(0.004549830220640,-0.151451900601387,0.114672884345055,0.151644065976143,0.075426481664181,0.000714780413546,-0.031808558851480,-0.044864464551210,-0.052907809615135,-0.016777712851763,0.055285729467869,0.178664028644562,0.101404957473278,0.087253928184509,-0.016468551009893,0.128554910421371));
res += mul(Get(s2,-dx,dy), float4x4(-0.017802380025387,0.022447219118476,0.038979072123766,-0.085334904491901,-0.038204833865166,-0.189024135470390,0.239063337445259,0.134677499532700,0.043050199747086,0.144109591841698,-0.013330352492630,0.156564146280289,-0.080270998179913,0.041356243193150,-0.021884592249990,0.225335866212845));
res += mul(Get(s2,0,-dy), float4x4(0.022515773773193,-0.069575957953930,0.073470108211040,-0.078193709254265,0.035624030977488,0.206270068883896,-0.284698277711868,0.087242394685745,0.012674383819103,0.071894511580467,-0.186046361923218,0.078649267554283,0.106628879904747,-0.016606237739325,-0.025764105841517,0.152697101235390));
res += mul(Get(s2,0,0), float4x4(0.082959510385990,0.094007372856140,0.075941644608974,0.228844985365868,0.209950655698776,0.273424357175827,0.063025087118149,0.029615778476000,-0.098028682172298,-0.033163655549288,-0.036546621471643,-0.142874225974083,0.061351101845503,0.208518236875534,0.018785243853927,-0.023847775533795));
res += mul(Get(s2,0,dy), float4x4(-0.034433089196682,-0.071971744298935,0.093694806098938,0.117836542427540,0.101108267903328,0.124115034937859,-0.005502173677087,0.121352709829807,-0.073966838419437,0.188667446374893,0.014260898344219,-0.081849567592144,0.010632598772645,-0.125720143318176,-0.014164140447974,0.114745214581490));
res += mul(Get(s2,dx,-dy), float4x4(-0.047577574849129,0.000808895565569,0.050131980329752,0.115864828228951,-0.231071740388870,0.044441923499107,-0.005453817546368,0.074833780527115,0.013653271831572,0.005518547724932,0.082157984375954,0.020876998081803,-0.145256683230400,0.004174615722150,-0.106473714113235,0.024403050541878));
res += mul(Get(s2,dx,0), float4x4(0.071287058293819,0.142932310700417,-0.101640790700912,-0.149620592594147,-0.162764132022858,0.081708520650864,-0.023489916697145,0.094354867935181,0.071201279759407,0.077738784253597,-0.134363785386086,-0.000421873701271,0.058832067996264,0.128889217972755,0.122598066926003,0.110650718212128));
res += mul(Get(s2,dx,dy), float4x4(-0.155850112438202,-0.003917870577425,-0.064940288662910,-0.101874992251396,0.168823063373566,0.199710801243782,0.101061955094337,-0.020890936255455,0.176376655697823,0.030289603397250,-0.079224199056625,-0.038578540086746,0.145774617791176,0.067414909601212,0.042470514774323,-0.104023948311806));
res += mul(Get(s3,-dx,-dy), float4x4(0.036784965544939,0.010224058292806,-0.027796765789390,0.069610588252544,0.064871057868004,-0.100535340607166,0.060731582343578,0.013381605036557,0.281706929206848,-0.113559879362583,-0.119424030184746,-0.194929361343384,0.093948014080524,-0.017597774043679,-0.054665982723236,0.136391907930374));
res += mul(Get(s3,-dx,0), float4x4(-0.024486774578691,0.184410795569420,-0.023260708898306,0.096823677420616,0.020211391150951,0.004784808028489,0.042015455663204,0.114191152155399,-0.048967026174068,-0.172782257199287,0.032087568193674,-0.053697548806667,0.108492195606232,-0.076648347079754,0.101860709488392,0.088775366544724));
res += mul(Get(s3,-dx,dy), float4x4(-0.164066657423973,-0.146755367517471,-0.018382959067822,0.080378077924252,-0.093851394951344,-0.033489294350147,-0.127528384327888,0.089750662446022,-0.108601197600365,-0.022505398839712,-0.073873773217201,-0.015131492167711,0.109088309109211,0.120282918214798,-0.138957127928734,0.075648158788681));
res += mul(Get(s3,0,-dy), float4x4(-0.068236768245697,0.102985724806786,-0.081463351845741,-0.136498630046844,0.140648946166039,0.017458226531744,0.108273603022099,0.122242391109467,0.144145250320435,-0.006038544233888,-0.086224280297756,-0.004228974226862,-0.083971202373505,-0.039844173938036,-0.079556457698345,0.109447002410889));
res += mul(Get(s3,0,0), float4x4(0.282199382781982,0.038619723170996,-0.058817215263844,0.157061398029327,0.149536475539207,0.107061810791492,0.009884704835713,0.049914535135031,0.171951457858086,0.014008444733918,0.039172850549221,0.044928681105375,-0.056651081889868,-0.119125247001648,-0.220490694046021,0.098585143685341));
res += mul(Get(s3,0,dy), float4x4(-0.103681631386280,-0.059375796467066,0.151060521602631,-0.024225460365415,0.139421910047531,-0.060492545366287,-0.162749275565147,0.021495470777154,0.123404756188393,-0.046414971351624,-0.080619893968105,-0.017449973151088,-0.030959043651819,-0.083666928112507,-0.049019388854504,-0.016571206972003));
res += mul(Get(s3,dx,-dy), float4x4(0.130493640899658,-0.128994345664978,0.080858811736107,-0.062045354396105,0.096401847898960,-0.173450455069542,0.089658126235008,0.030422050505877,-0.023788034915924,0.038848385214806,-0.088402353227139,-0.068028792738914,0.040112495422363,-0.049407787621021,0.082177534699440,-0.072430595755577));
res += mul(Get(s3,dx,0), float4x4(0.131959423422813,0.203819692134857,-0.108695447444916,0.052533771842718,-0.045360147953033,-0.011483943089843,0.134029760956764,0.206614986062050,-0.103054158389568,-0.044157728552818,0.076219752430916,-0.099087640643120,-0.140322253108025,-0.025607794523239,-0.117292366921902,-0.108700141310692));
res += mul(Get(s3,dx,dy), float4x4(-0.135521367192268,-0.078939788043499,0.189121410250664,-0.018351687118411,-0.065688028931618,0.060874130576849,0.019397500902414,0.165486931800842,0.004242756869644,-0.263864845037460,0.009376965463161,-0.026294492185116,0.074633866548538,-0.234227046370506,0.028033833950758,0.120753705501556));
return max(float4(0,0,0,0), res);
}
