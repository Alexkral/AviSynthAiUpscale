sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.102708287537098,0.049468629062176,0.011975990608335,-0.028002314269543,0.020765842869878,-0.051496502012014,-0.135901466012001,-0.032223023474216,-0.012519990094006,-0.019698500633240,-0.081015013158321,0.026163479313254,-0.002029543742537,-0.006500320509076,0.217471703886986,-0.021497672423720));
res += mul(Get(s0,-dx,0), float4x4(-0.075653724372387,-0.079060517251492,-0.099476791918278,-0.030969763174653,0.083327740430832,-0.052102368324995,-0.250358581542969,-0.047432880848646,-0.129470556974411,-0.007506057154387,-0.115159571170807,-0.047658454626799,0.017692292109132,-0.066018886864185,0.088750198483467,0.047212321311235));
res += mul(Get(s0,-dx,dy), float4x4(-0.091659329831600,-0.075147978961468,-0.083708934485912,0.092378646135330,0.077152021229267,-0.127212807536125,-0.141627237200737,-0.003405542811379,-0.028432641178370,-0.035049635916948,-0.110432796180248,0.030976545065641,0.002565376926214,-0.103525906801224,0.015086566098034,0.112632937729359));
res += mul(Get(s0,0,-dy), float4x4(0.082087293267250,0.186707496643066,0.233784854412079,-0.014164634048939,-0.111212491989136,0.022718455642462,-0.033772777765989,-0.053566645830870,0.100043162703514,0.007035573013127,-0.060790058225393,-0.037320025265217,0.153263479471207,0.060886748135090,0.019387982785702,-0.194256141781807));
res += mul(Get(s0,0,0), float4x4(0.052318640053272,0.027972346171737,-0.004960830789059,-0.147421240806580,-0.049030441790819,0.084168352186680,0.129358768463135,-0.211529120802879,-0.033439490944147,-0.008485650643706,-0.098196864128113,-0.059303224086761,0.127359539270401,-0.054175391793251,-0.004279786720872,-0.177803963422775));
res += mul(Get(s0,0,dy), float4x4(0.013860546052456,-0.020628802478313,-0.077798485755920,0.078496932983398,0.044240739196539,0.060751236975193,0.125979140400887,0.006541525945067,-0.040435548871756,0.013096850365400,-0.083142407238483,0.116831533610821,0.086340688169003,-0.093555025756359,0.010369595140219,-0.080187298357487));
res += mul(Get(s0,dx,-dy), float4x4(0.074693717062473,0.176944419741631,0.172710835933685,-0.037607416510582,-0.098619461059570,0.002031815005466,0.255415737628937,0.141164660453796,-0.011606536805630,-0.039188072085381,0.120893426239491,0.000432842178270,0.054047487676144,0.157141536474228,0.046039577573538,-0.085936225950718));
res += mul(Get(s0,dx,0), float4x4(-0.037346221506596,0.096373908221722,0.016332333907485,-0.023288706317544,-0.170428276062012,-0.001377605251037,0.127430453896523,0.111362382769585,-0.062184356153011,-0.042321909219027,0.140993475914001,-0.008324020542204,0.064551070332527,0.128037512302399,0.054379429668188,-0.254656404256821));
res += mul(Get(s0,dx,dy), float4x4(0.040473271161318,0.029984902590513,-0.108832016587257,0.020233873277903,-0.078559525310993,-0.088173896074295,-0.141341909766197,-0.062268756330013,0.028527900576591,-0.008837208151817,0.037237480282784,0.070119157433510,0.036170698702335,0.115669623017311,0.117471538484097,-0.058971744030714));
res += mul(Get(s1,-dx,-dy), float4x4(-0.193349286913872,0.000997157418169,0.091868385672569,-0.112783424556255,0.006649393588305,-0.028359940275550,0.013244803063571,0.034837625920773,0.119487300515175,0.062848620116711,0.086040109395981,0.013592848554254,0.010769517160952,-0.026951139792800,-0.083517685532570,0.033082146197557));
res += mul(Get(s1,-dx,0), float4x4(0.229436784982681,0.122289091348648,-0.001901993644424,-0.569527506828308,0.003755969228223,-0.023932605981827,0.004447985440493,0.045193716883659,0.179726839065552,0.158080190420151,0.100001379847527,0.048046428710222,0.072939738631248,0.010621697641909,-0.049374040216208,0.093917667865753));
res += mul(Get(s1,-dx,dy), float4x4(0.331026822328568,0.106839738786221,-0.069406956434250,0.068937599658966,0.009478667750955,-0.026088602840900,0.001974676735699,0.020206507295370,-0.028883662074804,0.016184195876122,0.065845869481564,0.013377472758293,0.091406457126141,-0.027342690154910,-0.007497616112232,0.112256594002247));
res += mul(Get(s1,0,-dy), float4x4(-0.068820506334305,-0.022173359990120,-0.038229230791330,-0.008646912872791,0.005418648011982,0.015260635875165,0.017797356471419,0.038343720138073,-0.024367742240429,-0.044868376106024,-0.012507184408605,-0.002155218506232,-0.047867298126221,0.029550090432167,-0.052498001605272,0.060353841632605));
res += mul(Get(s1,0,0), float4x4(-0.481859415769577,0.102434821426868,-0.037171069532633,0.454606950283051,0.009114889428020,0.015725193545222,0.009066502563655,0.050638720393181,0.148853987455368,0.081962786614895,0.080062299966812,0.022659152746201,0.023379825055599,0.005323356017470,-0.004149321932346,0.165245980024338));
res += mul(Get(s1,0,dy), float4x4(-0.134938672184944,-0.033609382808208,0.026520552113652,-0.119776807725430,-0.006356914062053,0.011076427064836,0.011247565038502,0.028518727049232,0.036979578435421,-0.033032964915037,0.086573764681816,0.012080696411431,0.064766511321068,-0.028017584234476,0.116862326860428,0.076103210449219));
res += mul(Get(s1,dx,-dy), float4x4(0.484074681997299,-0.078245855867863,-0.127011731266975,0.094230748713017,0.018109399825335,0.000344746047631,0.004657799378037,0.011142550967634,-0.110998935997486,-0.119093611836433,-0.159349456429482,-0.049990896135569,0.022280186414719,-0.004992313683033,-0.118509270250797,0.129230931401253));
res += mul(Get(s1,dx,0), float4x4(-0.277920871973038,-0.023924371227622,-0.050090551376343,0.336287081241608,0.021838566288352,0.009216045960784,-0.005080932285637,0.012036686763167,-0.010362357832491,-0.017665445804596,-0.049927148967981,-0.057610321789980,0.008473223075271,-0.014758576638997,-0.054352510720491,0.156835272908211));
res += mul(Get(s1,dx,dy), float4x4(-0.138176426291466,-0.096645705401897,0.236799046397209,-0.030447641387582,0.017425378784537,0.007762227207422,-0.010309515520930,0.010730411857367,0.004950861446559,-0.075597561895847,0.042184680700302,0.042316008359194,0.017127072438598,-0.014948325231671,0.121722288429737,0.044102773070335));
res += mul(Get(s2,-dx,-dy), float4x4(0.039334021508694,0.022751092910767,-0.056295484304428,0.083367809653282,-0.013161568902433,0.061374619603157,-0.089382469654083,0.003838761243969,0.124757088720798,-0.126362770795822,-0.306914627552032,-0.054841272532940,0.004497766494751,0.053454142063856,0.005367307458073,0.104152768850327));
res += mul(Get(s2,-dx,0), float4x4(0.087267413735390,0.003800730453804,-0.010314765386283,0.009494608268142,0.010004747658968,0.057744085788727,-0.082670979201794,0.050799261778593,-0.022508963942528,-0.036238189786673,-0.253239363431931,-0.018062068149447,0.129872679710388,-0.023085093125701,-0.056566502898932,0.048634506762028));
res += mul(Get(s2,-dx,dy), float4x4(0.001259769429453,-0.059231191873550,0.004162649624050,-0.003405825700611,0.036565411835909,-0.011713556945324,0.020316740497947,-0.006250798702240,-0.081893593072891,0.297591328620911,-0.104628652334213,0.118687272071838,0.008639514446259,-0.049218494445086,0.007868576794863,-0.035755410790443));
res += mul(Get(s2,0,-dy), float4x4(-0.026418359950185,0.031030567362905,0.008877327665687,0.016222637146711,-0.044916853308678,0.055411327630281,-0.107388660311699,-0.033524110913277,0.076164066791534,-0.094757050275803,-0.161742240190506,0.072531431913376,0.037344273179770,0.087565258145332,0.116238817572594,0.028788832947612));
res += mul(Get(s2,0,0), float4x4(0.020874775946140,0.022921005263925,0.159175738692284,-0.007205501664430,0.002438970608637,0.031411617994308,-0.068587072193623,0.034891493618488,0.098600819706917,-0.254664689302444,-0.236624836921692,-0.246003642678261,0.120919562876225,0.018335912376642,0.055006958544254,-0.052555851638317));
res += mul(Get(s2,0,dy), float4x4(-0.051203038543463,-0.060174595564604,0.099638231098652,-0.012091633863747,0.035686913877726,-0.001183618791401,0.097599588334560,-0.023317731916904,0.061712794005871,-0.010662280954421,-0.098483555018902,-0.050177801400423,0.060709413141012,-0.030689170584083,0.058863483369350,-0.065396122634411));
res += mul(Get(s2,dx,-dy), float4x4(0.019697556272149,0.013235301710665,0.060946784913540,0.007195990066975,-0.043967600911856,0.050089910626411,-0.110507562756538,-0.007502623368055,-0.035371504724026,0.132739707827568,0.077765844762325,0.022143926471472,0.046042144298553,0.073240235447884,0.088816687464714,0.026028227061033));
res += mul(Get(s2,dx,0), float4x4(0.055319730192423,0.001206676242873,0.147914230823517,0.030587878078222,-0.018279407173395,0.031829003244638,-0.029362697154284,0.014940950088203,0.035998463630676,-0.032567270100117,-0.037560764700174,0.090638004243374,0.075621239840984,0.027284735813737,0.023370303213596,-0.007744670845568));
res += mul(Get(s2,dx,dy), float4x4(-0.004856702871621,-0.093848161399364,0.067403249442577,-0.021647080779076,0.023392012342811,0.021416993811727,0.125499084591866,-0.012745285406709,0.090917900204659,0.027081502601504,-0.068348698318005,0.047828320413828,0.004094608593732,-0.006573901046067,0.029813706874847,-0.027490440756083));
res += mul(Get(s3,-dx,-dy), float4x4(-0.060411158949137,0.170265048742294,0.230065405368805,-0.084638148546219,-0.239248871803284,-0.036709848791361,-0.034054983407259,0.053217437118292,0.027499873191118,-0.162839919328690,-0.130648717284203,-0.037748433649540,0.110872186720371,0.259226411581039,-0.206992179155350,0.075711518526077));
res += mul(Get(s3,-dx,0), float4x4(-0.168981879949570,-0.117181129753590,0.058781426399946,0.017220623791218,0.090443238615990,-0.128793612122536,-0.044535309076309,-0.253017663955688,0.023678200319409,-0.127554640173912,-0.183373853564262,-0.081438593566418,-0.093296959996223,0.295892924070358,-0.239942625164986,0.209539100527763));
res += mul(Get(s3,-dx,dy), float4x4(-0.030996562913060,0.004887726623565,-0.074931487441063,-0.015952788293362,0.063801608979702,-0.208189636468887,-0.033602472394705,0.092608258128166,-0.135401576757431,0.092664681375027,0.047068115323782,-0.061644226312637,-0.166313052177429,0.200659140944481,-0.008675798773766,0.034697409719229));
res += mul(Get(s3,0,-dy), float4x4(-0.013605640269816,0.262800246477127,0.029102852568030,-0.016927396878600,-0.042049389332533,0.000852635770570,-0.012772212736309,-0.170235306024551,-0.126668751239777,0.014729982241988,-0.091421276330948,-0.111127607524395,0.195353060960770,-0.163473352789879,-0.185660064220428,-0.057718686759472));
res += mul(Get(s3,0,0), float4x4(-0.038316156715155,-0.240855529904366,-0.217951238155365,0.000929704518057,-0.143426507711411,0.052455212920904,0.059497680515051,0.185041904449463,-0.071669891476631,-0.064442187547684,-0.143470793962479,-0.076807640492916,-0.095424592494965,-0.224840149283409,-0.172755420207977,-0.109864987432957));
res += mul(Get(s3,0,dy), float4x4(-0.065075509250164,-0.088156975805759,-0.199484243988991,-0.042034007608891,0.024998825043440,-0.010094382800162,0.034103017300367,-0.056922707706690,0.125073119997978,0.037433274090290,0.066588409245014,-0.117035880684853,-0.224933326244354,-0.118687495589256,0.176188930869102,0.069690406322479));
res += mul(Get(s3,dx,-dy), float4x4(-0.035657133907080,0.214958935976028,-0.127112090587616,0.071240842342377,0.288989394903183,-0.023801006376743,-0.114900469779968,-0.227132603526115,-0.167785882949829,0.084609575569630,-0.085604444146156,0.160558104515076,0.048897579312325,-0.170362368226051,0.125215634703636,-0.030292857438326));
res += mul(Get(s3,dx,0), float4x4(0.226582273840904,-0.106600902974606,-0.162562534213066,-0.046590838581324,-0.274209022521973,0.093136921525002,0.012564258649945,0.431492835283279,-0.211689010262489,-0.057495858520269,-0.148356676101685,0.193488284945488,-0.035973761230707,-0.161619722843170,0.151239499449730,0.037736736238003));
res += mul(Get(s3,dx,dy), float4x4(-0.064133413136005,-0.118038594722748,-0.123011179268360,0.018147865310311,-0.134799644351006,-0.007375689689070,0.074280031025410,0.134486332535744,0.138487413525581,-0.115075565874577,0.139231950044632,-0.084687046706676,-0.076452411711216,-0.097759939730167,0.097241938114166,-0.099131412804127));
return max(float4(0,0,0,0), res);
}
