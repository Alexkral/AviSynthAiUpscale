sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(-0.155657142400742,0.015938052907586,0.038948487490416,0.013659426011145) * Get(-dx,-dy);
res += float4(0.025710301473737,-0.159967899322510,-0.113406427204609,0.035181440412998) * Get(-dx,0);
res += float4(0.050680596381426,0.171072453260422,-0.258465588092804,-0.068264380097389) * Get(-dx,dy);
res += float4(0.298311650753021,0.185897022485733,0.040760498493910,0.008865423500538) * Get(0,-dy);
res += float4(-0.063884958624840,-0.324844658374786,-0.026880273595452,-0.172826930880547) * Get(0,0);
res += float4(-0.087270066142082,0.224037677049637,-0.064673431217670,-0.026010580360889) * Get(0,dy);
res += float4(0.101128600537777,-0.130031496286392,-0.081939950585365,0.026594286784530) * Get(dx,-dy);
res += float4(-0.003262289334089,0.331984668970108,0.125673264265060,0.012699726037681) * Get(dx,0);
res += float4(-0.103399880230427,-0.179860085248947,0.297767728567123,-0.079006470739841) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
