sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.072965227067471,0.034766610711813,0.017526123672724,-0.106973126530647,0.024389358237386,-0.053585272282362,0.143118903040886,-0.171172589063644,0.013111285865307,-0.190843045711517,-0.000981136923656,-0.069215409457684,-0.174705222249031,-0.149679720401764,0.090187542140484,-0.065453425049782));
res += mul(Get(s0,-dx,0), float4x4(-0.136592030525208,0.107886768877506,0.025436302646995,-0.048216998577118,-0.026509823277593,-0.107055567204952,-0.117574624717236,-0.054675914347172,0.108383372426033,-0.018535034731030,-0.017082171514630,0.260282188653946,0.209251970052719,-0.124096341431141,-0.135962381958961,0.040368288755417));
res += mul(Get(s0,-dx,dy), float4x4(-0.005119064822793,0.038413226604462,-0.047308925539255,0.157130211591721,0.119992770254612,0.118082500994205,-0.073444209992886,0.019137363880873,-0.127649754285812,-0.041817039251328,-0.027937972918153,0.017493339255452,-0.048978675156832,-0.104575969278812,-0.002469917293638,0.021225139498711));
res += mul(Get(s0,0,-dy), float4x4(0.219435647130013,0.008446941152215,-0.046046208590269,0.010245103389025,-0.186488896608353,-0.075304210186005,-0.072389476001263,-0.092927269637585,0.050544016063213,0.013742260634899,0.010532772168517,0.088645599782467,0.020291944965720,-0.002911812625825,0.108074903488159,-0.155046224594116));
res += mul(Get(s0,0,0), float4x4(0.078406952321529,-0.083007939159870,0.154881790280342,-0.035519093275070,-0.173556536436081,0.083482779562473,0.000109132524813,-0.016699656844139,0.057082135230303,0.115726649761200,-0.060013711452484,-0.017723437398672,0.081015899777412,-0.109136097133160,0.044180199503899,-0.088825382292271));
res += mul(Get(s0,0,dy), float4x4(0.091474205255508,-0.219923153519630,-0.087767109274864,0.074958987534046,0.112822256982327,0.091910995543003,-0.003372052218765,-0.082961305975914,-0.039043061435223,0.047006037086248,0.098203040659428,-0.127584174275398,0.005861795973033,-0.069797076284885,0.035600453615189,0.045756828039885));
res += mul(Get(s0,dx,-dy), float4x4(0.072043329477310,0.035271015018225,-0.117369763553143,0.017227705568075,-0.186014980077744,0.113339371979237,0.046759184449911,0.059807952493429,0.002375687938184,0.062175191938877,0.043419461697340,0.087553866207600,0.047321617603302,-0.181760579347610,0.040077291429043,-0.053045108914375));
res += mul(Get(s0,dx,0), float4x4(0.173146173357964,-0.191413775086403,-0.029180910438299,0.020730741322041,-0.040406577289104,-0.017471695318818,-0.016760848462582,0.036504726856947,0.035951919853687,0.019519060850143,0.035081744194031,-0.032297950237989,0.099773906171322,-0.125092118978500,0.267046153545380,-0.255456984043121));
res += mul(Get(s0,dx,dy), float4x4(-0.021281030029058,0.057218927890062,-0.149383425712585,-0.131201252341270,-0.145559370517731,-0.011848560534418,-0.148682013154030,-0.072468511760235,-0.159987971186638,-0.021639343351126,0.164301186800003,-0.006630453746766,0.117152683436871,-0.096718780696392,0.033792015165091,-0.124233074486256));
res += mul(Get(s1,-dx,-dy), float4x4(0.058739580214024,0.074720181524754,-0.010317485779524,-0.003379797795787,-0.139254555106163,-0.013462730683386,0.051137939095497,-0.008460570126772,-0.060168284922838,0.105268806219101,-0.190490454435349,-0.092744216322899,-0.044936638325453,0.044210944324732,-0.158364608883858,0.202663034200668));
res += mul(Get(s1,-dx,0), float4x4(-0.152192831039429,0.057423669844866,-0.053202778100967,0.014606791548431,0.185950845479965,-0.165043875575066,-0.127550587058067,0.163416743278503,-0.017827702686191,-0.129399329423904,-0.041917636990547,0.093808554112911,-0.044377159327269,-0.020450599491596,0.078055158257484,-0.092113867402077));
res += mul(Get(s1,-dx,dy), float4x4(-0.123243667185307,0.205836758017540,0.095335528254509,0.004150798078626,0.052621766924858,-0.078858464956284,-0.111225754022598,-0.094178877770901,0.035822816193104,-0.033612910658121,0.000172217696672,-0.066939316689968,0.030174298211932,-0.053934317082167,0.053721055388451,-0.013420801609755));
res += mul(Get(s1,0,-dy), float4x4(0.025906456634402,-0.085732787847519,-0.024810409173369,-0.212086290121078,0.073593579232693,0.112075544893742,-0.105721816420555,-0.028258735314012,0.001697296509519,0.135279342532158,-0.010463458485901,-0.079883120954037,-0.050525370985270,0.113882660865784,-0.003779845079407,0.042811054736376));
res += mul(Get(s1,0,0), float4x4(-0.014559393748641,0.023798601701856,0.011457875370979,-0.038331661373377,0.119033232331276,-0.006990194320679,-0.141557753086090,0.043089084327221,-0.011559059843421,0.002646727487445,-0.029707573354244,0.042957734316587,0.026561180129647,0.007425177376717,0.005310497712344,-0.005622957367450));
res += mul(Get(s1,0,dy), float4x4(0.107976168394089,0.036645621061325,0.000045415410568,0.022956760600209,0.008865308947861,-0.026837768033147,-0.087200060486794,0.013340821489692,0.142604619264603,-0.176658600568771,0.145424887537956,0.003622577525675,-0.001272859866731,0.036626603454351,0.037478741258383,0.059282269328833));
res += mul(Get(s1,dx,-dy), float4x4(-0.060684841126204,-0.163132891058922,0.083916366100311,0.049124054610729,0.110878199338913,-0.124739453196526,0.015559900552034,-0.065767392516136,-0.091216109693050,0.039335280656815,-0.086134001612663,0.090061150491238,0.100817680358887,0.062611781060696,0.126534104347229,0.148499548435211));
res += mul(Get(s1,dx,0), float4x4(-0.188557878136635,-0.049580644816160,-0.102137416601181,0.015978250652552,0.032221954315901,-0.000446388818091,-0.102443277835846,0.004534970037639,0.034290451556444,0.045669641345739,0.034297462552786,0.103336706757545,0.128990754485130,-0.064173199236393,0.105360701680183,-0.101004630327225));
res += mul(Get(s1,dx,dy), float4x4(0.006838483270258,-0.080673597753048,0.064092487096786,-0.144180238246918,-0.112559840083122,0.094126753509045,-0.071708463132381,-0.122489802539349,-0.037116613239050,-0.033345568925142,-0.113275371491909,0.037059795111418,0.014140125364065,-0.101035684347153,0.042430199682713,0.100754812359810));
res += mul(Get(s2,-dx,-dy), float4x4(0.097813919186592,-0.063204273581505,-0.041808437556028,-0.016204878687859,0.051311217248440,0.097115986049175,0.058287024497986,-0.308715164661407,-0.156752452254295,-0.041443526744843,0.026252357289195,-0.044452387839556,0.094322517514229,0.002584120491520,0.061917759478092,0.018424917012453));
res += mul(Get(s2,-dx,0), float4x4(-0.143519550561905,0.013887763023376,0.168824374675751,0.055450782179832,-0.022315608337522,0.031027732416987,-0.062193509191275,-0.048011507838964,0.029751993715763,-0.073377035558224,0.118894092738628,-0.030961489304900,0.090635605156422,-0.038551867008209,-0.176448151469231,0.114530682563782));
res += mul(Get(s2,-dx,dy), float4x4(-0.023495025932789,0.058690313249826,0.130945041775703,-0.028221694752574,0.040965471416712,-0.138841107487679,0.118014872074127,-0.033541746437550,-0.027830444276333,0.080044358968735,-0.063956059515476,-0.087128609418869,0.066461212933064,0.006114253774285,-0.116383537650108,-0.017077684402466));
res += mul(Get(s2,0,-dy), float4x4(-0.057916857302189,0.141852974891663,-0.251026481389999,-0.053494412451982,0.091770969331264,-0.040142677724361,0.008444413542747,0.198507338762283,0.124408476054668,0.053219918161631,-0.080294221639633,0.107032172381878,0.109437279403210,0.257276564836502,-0.017185281962156,-0.169282868504524));
res += mul(Get(s2,0,0), float4x4(-0.048921775072813,0.087897114455700,-0.013852249830961,-0.267669975757599,-0.015284023247659,0.076769523322582,-0.016008043661714,-0.233863666653633,-0.009393047541380,0.249963805079460,0.048718634992838,0.043571855872869,-0.135499820113182,-0.051908425986767,0.175231039524078,0.126893788576126));
res += mul(Get(s2,0,dy), float4x4(-0.084789603948593,-0.137809529900551,-0.239390134811401,0.026326796039939,0.091264188289642,-0.074330903589725,0.029985301196575,-0.098944202065468,-0.150823205709457,-0.115250885486603,-0.067714966833591,0.106769651174545,-0.054322205483913,-0.049146793782711,-0.158221498131752,-0.013115454465151));
res += mul(Get(s2,dx,-dy), float4x4(0.024041345342994,-0.056059282273054,0.076969318091869,0.166248768568039,0.032075297087431,-0.147003978490829,0.244492337107658,0.049086581915617,-0.034061681479216,0.118251703679562,0.000377036834834,0.060829065740108,-0.265176922082901,-0.128809139132500,-0.131454646587372,-0.157957524061203));
res += mul(Get(s2,dx,0), float4x4(0.003903197590262,0.053130429238081,-0.105606496334076,-0.071103349328041,-0.018643965944648,0.001063611125574,0.125542595982552,0.083500348031521,-0.048776805400848,0.103900849819183,0.048242509365082,0.118025951087475,-0.048029825091362,-0.016102261841297,-0.111529141664505,0.084524236619473));
res += mul(Get(s2,dx,dy), float4x4(0.025305058807135,0.088358335196972,0.040104754269123,0.064593560993671,-0.046041276305914,-0.057901181280613,0.069129973649979,-0.152226805686951,-0.020120609551668,0.201665818691254,-0.082919962704182,-0.025794001296163,0.152463003993034,-0.135879382491112,-0.137275606393814,-0.071260318160057));
res += mul(Get(s3,-dx,-dy), float4x4(-0.031293839216232,-0.177174448966980,0.025368588045239,-0.150103107094765,-0.023913193494081,-0.086609221994877,-0.051565095782280,0.171541184186935,-0.089710317552090,0.028670165687799,0.106458686292171,0.170117989182472,0.026115197688341,-0.099666938185692,0.168514728546143,0.000214401472476));
res += mul(Get(s3,-dx,0), float4x4(0.029494794085622,0.125971511006355,0.073543824255466,-0.042409971356392,-0.013070523738861,0.162537708878517,0.044227775186300,-0.088886789977551,-0.168325707316399,0.157830446958542,-0.129901379346848,0.131916463375092,0.014426857233047,-0.116574987769127,0.029216442257166,-0.019016778096557));
res += mul(Get(s3,-dx,dy), float4x4(-0.025014284998178,-0.220271214842796,-0.092781320214272,-0.025817535817623,0.034719478338957,-0.152902781963348,0.151932701468468,-0.044588316231966,0.020706631243229,0.000787247146945,0.165147542953491,0.126499012112617,0.223609030246735,-0.061380024999380,0.130760505795479,-0.136482328176498));
res += mul(Get(s3,0,-dy), float4x4(0.216671273112297,-0.083325929939747,0.108478866517544,0.088426269590855,0.113936685025692,0.014385583810508,0.141869813203812,-0.103072665631771,0.141187742352486,0.002922531682998,-0.120541341602802,0.016244448721409,0.019881865009665,0.173832923173904,0.014713373035192,-0.177543118596077));
res += mul(Get(s3,0,0), float4x4(-0.014573178254068,0.075123503804207,0.224470123648643,-0.028020543977618,0.057905230671167,-0.054123114794493,0.034010957926512,-0.044816575944424,-0.117761872708797,0.067705698311329,-0.058520600199699,-0.011389311403036,0.190192088484764,0.100838519632816,-0.163494721055031,-0.134059697389603));
res += mul(Get(s3,0,dy), float4x4(0.014494937844574,0.065396070480347,0.093745820224285,-0.125470981001854,0.045861057937145,-0.044461369514465,0.121468141674995,0.138022020459175,-0.014563324861228,-0.010037647560239,0.141279861330986,0.047062486410141,0.098621807992458,-0.104498744010925,0.031541969627142,-0.010099004954100));
res += mul(Get(s3,dx,-dy), float4x4(0.031365457922220,-0.065186239778996,0.310544788837433,-0.115543521940708,-0.115563869476318,-0.033957585692406,0.038711085915565,-0.105695523321629,-0.016692534089088,0.116972446441650,0.046752259135246,0.004932240117341,0.068261653184891,-0.056229930371046,0.043539948761463,0.048626374453306));
res += mul(Get(s3,dx,0), float4x4(-0.084053874015808,0.273846358060837,-0.009985650889575,-0.140384763479233,-0.058469567447901,-0.116991996765137,-0.126875683665276,0.105086393654346,0.062706075608730,0.070259362459183,0.000199824047741,0.057654779404402,0.022906661033630,-0.036391258239746,0.224821910262108,-0.129998996853828));
res += mul(Get(s3,dx,dy), float4x4(0.049736235290766,-0.026510823518038,0.002606628695503,0.081104889512062,-0.113353222608566,-0.021187176927924,0.051389846950769,0.200766324996948,-0.129679694771767,-0.036267988383770,0.086124822497368,0.008660961873829,-0.045163743197918,0.012668701820076,-0.037775367498398,-0.094932213425636));
return max(float4(0,0,0,0), res);
}
