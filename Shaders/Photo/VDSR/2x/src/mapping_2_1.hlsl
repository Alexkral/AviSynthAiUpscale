sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.132350489497185,-0.006602124311030,-0.294702827930450,-0.026544902473688,-0.012054016813636,0.049865655601025,-0.003147656796500,0.023306170478463,0.010397135280073,-0.020090235397220,0.046273659914732,0.032901950180531,0.141919001936913,-0.078525781631470,-0.002545923925936,-0.000490749196615));
res += mul(Get(s0,-dx,0), float4x4(-0.083947665989399,-0.059299893677235,0.161688759922981,-0.014215483330190,-0.012054031714797,0.029407443478703,-0.041274722665548,-0.116396419703960,-0.010322163812816,0.038903340697289,0.041383776813745,0.026030756533146,0.145495221018791,-0.065205939114094,0.115470424294472,-0.007446462288499));
res += mul(Get(s0,-dx,dy), float4x4(0.014055381529033,0.006044039968401,-0.083475619554520,0.191076323390007,0.002645888598636,0.043960422277451,-0.032824538648129,-0.056005191057920,-0.038552924990654,-0.071969769895077,-0.053042244166136,0.085876695811749,-0.010883326642215,-0.086940497159958,-0.003328431630507,-0.099815167486668));
res += mul(Get(s0,0,-dy), float4x4(0.236621424555779,0.239195540547371,-0.180687725543976,0.166564911603928,-0.037052415311337,-0.026252431795001,-0.038570966571569,0.044524379074574,0.032000940293074,-0.078242078423500,0.106885567307472,0.041576389223337,0.079774022102356,0.078682057559490,-0.109690561890602,0.015806112438440));
res += mul(Get(s0,0,0), float4x4(-0.058850016444921,0.169776096940041,0.269216388463974,-0.365259468555450,0.002229511039332,0.043214607983828,-0.100731544196606,-0.088938184082508,0.010052392259240,-0.020848186686635,0.016342088580132,0.090532660484314,-0.025332670658827,0.003350890707225,0.017280209809542,-0.052658487111330));
res += mul(Get(s0,0,dy), float4x4(-0.043654322624207,-0.247471615672112,0.150006443262100,0.159806340932846,0.015764066949487,0.034652210772038,0.021448010578752,-0.111577957868576,-0.020746953785419,-0.108113095164299,-0.106399483978748,0.189600974321365,-0.121856205165386,0.017505995929241,0.007657631766051,0.050061251968145));
res += mul(Get(s0,dx,-dy), float4x4(-0.055010762065649,-0.114621967077255,0.122329302132130,-0.014030164107680,-0.048388566821814,-0.083158314228058,-0.015529155731201,0.058557201176882,0.027962878346443,-0.048143476247787,0.011793598532677,0.057163730263710,0.050982702523470,0.092285901308060,-0.065342873334885,-0.035280857235193));
res += mul(Get(s0,dx,0), float4x4(-0.212244272232056,0.045059837400913,0.030819678679109,-0.187067344784737,0.012944456189871,0.012632509693503,-0.100746482610703,-0.076118044555187,0.003810519818217,0.010427403263748,0.012339100241661,0.066334068775177,-0.031840369105339,0.184533238410950,0.023170333355665,-0.102757506072521));
res += mul(Get(s0,dx,dy), float4x4(-0.097698546946049,-0.038510765880346,-0.054779533296824,0.103363849222660,0.030512643978000,0.034151177853346,0.078071907162666,-0.104415096342564,0.039053361862898,-0.027207540348172,-0.092166528105736,0.145173043012619,-0.131396591663361,0.149433538317680,0.065076507627964,0.155556276440620));
res += mul(Get(s1,-dx,-dy), float4x4(0.107929848134518,-0.016077570617199,-0.057950779795647,0.109328009188175,0.124588392674923,-0.026854019612074,0.085236579179764,-0.006372062955052,0.036834444850683,0.184012308716774,-0.079558491706848,-0.096374705433846,0.014527557417750,0.012968166731298,0.047577802091837,0.010278967209160));
res += mul(Get(s1,-dx,0), float4x4(0.014668561518192,0.173203736543655,0.101878486573696,-0.080126956105232,-0.162082448601723,0.039860036224127,-0.036498885601759,0.024473521858454,0.121711559593678,0.103615425527096,-0.256067365407944,0.000499737740029,0.009519855491817,0.010308675467968,0.012117986567318,0.034534186124802));
res += mul(Get(s1,-dx,dy), float4x4(0.039488755166531,0.004561888985336,0.208121299743652,-0.039031993597746,-0.118063569068909,0.088048763573170,0.136500895023346,-0.006544329226017,-0.016945416107774,-0.021779557690024,0.246920436620712,0.075735673308372,0.018297830596566,0.008431479334831,0.018596366047859,0.044803269207478));
res += mul(Get(s1,0,-dy), float4x4(0.170385047793388,0.039579205214977,-0.132688701152802,0.049608942121267,-0.018030500039458,-0.060284409672022,0.035593979060650,0.003304116427898,-0.188854008913040,-0.134628921747208,-0.001564256497659,0.026623224839568,0.023711921647191,-0.001651907106861,0.040057551115751,-0.002949091140181));
res += mul(Get(s1,0,0), float4x4(-0.014185483567417,0.003871523542330,0.014768459834158,-0.062239892780781,-0.231057837605476,-0.063378646969795,-0.207697480916977,0.051083981990814,0.102339282631874,0.252438604831696,-0.251752495765686,0.185022234916687,0.038638699799776,-0.018172556534410,0.043489083647728,0.002471449319273));
res += mul(Get(s1,0,dy), float4x4(-0.028993176296353,0.064694546163082,0.031996246427298,-0.005177425220609,-0.105357289314270,0.040454193949699,-0.015346864238381,-0.056133016943932,-0.046030003577471,0.000666645530146,0.340914726257324,-0.201210752129555,0.046207211911678,-0.006320728454739,0.012106288224459,0.047531582415104));
res += mul(Get(s1,dx,-dy), float4x4(0.009558185935020,-0.141573697328568,-0.071702793240547,-0.118331491947174,-0.002299980493262,-0.016032978892326,0.092052750289440,0.052699610590935,-0.094959050416946,0.058388940989971,-0.080098837614059,-0.105043210089207,0.003432600991800,-0.011502085253596,-0.017291538417339,-0.002546368399635));
res += mul(Get(s1,dx,0), float4x4(-0.151792839169502,-0.192943647503853,-0.072787143290043,0.099358387291431,-0.120211146771908,0.009552040137351,-0.031321033835411,0.024033920839429,-0.009724969044328,-0.211264163255692,-0.020227950066328,0.048346005380154,0.018106559291482,-0.004722017794847,0.012066260911524,0.002609401475638));
res += mul(Get(s1,dx,dy), float4x4(-0.044135201722383,0.079673729836941,-0.027323102578521,0.031203506514430,0.013808636926115,-0.013330473564565,-0.024406958371401,0.027247872203588,-0.075707130134106,-0.114052481949329,0.120259806513786,-0.170802488923073,0.040781710296869,-0.001141531392932,0.016495792195201,-0.010134696029127));
res += mul(Get(s2,-dx,-dy), float4x4(0.062334332615137,0.069961875677109,-0.043653402477503,0.001926009077579,-0.060140818357468,-0.031751953065395,-0.006542981602252,0.042365897446871,0.040582921355963,0.139875233173370,0.000234888386331,0.091100126504898,0.240989759564400,0.024375144392252,-0.102962888777256,0.112295553088188));
res += mul(Get(s2,-dx,0), float4x4(0.033262383192778,0.040057249367237,-0.008402336388826,-0.016228727996349,-0.009906837716699,0.056732501834631,-0.102457284927368,-0.012844918295741,0.035491384565830,0.121288992464542,-0.034310191869736,0.039418950676918,0.109650738537312,0.245830997824669,0.062094155699015,0.079938709735870));
res += mul(Get(s2,-dx,dy), float4x4(-0.002647488145158,0.055677156895399,0.024597886949778,-0.084619298577309,0.023053187876940,0.016302840784192,-0.009064351208508,-0.046782664954662,0.006693228613585,0.034952145069838,0.065603695809841,-0.058507394045591,-0.065671712160110,0.050622269511223,0.052801363170147,-0.056924939155579));
res += mul(Get(s2,0,-dy), float4x4(0.059528868645430,-0.016504121944308,-0.013543101958930,0.083410255610943,-0.084301702678204,0.043952431529760,-0.026356901973486,0.113059349358082,0.059394352138042,0.018267501145601,0.047158066183329,-0.010893217287958,0.048244893550873,-0.095449194312096,-0.109278038144112,-0.014043780043721));
res += mul(Get(s2,0,0), float4x4(0.004260956775397,0.033084463328123,-0.023343753069639,0.020925875753164,0.033448938280344,0.146786212921143,-0.099296972155571,0.060761921107769,0.075728535652161,-0.087081998586655,0.036583043634892,-0.012110778130591,-0.143612176179886,-0.252634257078171,-0.043706290423870,-0.031564563512802));
res += mul(Get(s2,0,dy), float4x4(-0.037812683731318,0.019517373293638,0.049659620970488,-0.087137915194035,0.025446336716413,0.068241775035858,0.024438614025712,-0.034975383430719,0.064528413116932,-0.040785029530525,-0.043538492172956,0.037392944097519,-0.117106832563877,-0.103044874966145,0.089313313364983,0.102257028222084));
res += mul(Get(s2,dx,-dy), float4x4(0.080726042389870,0.005738670472056,0.061602763831615,-0.045728545635939,-0.005705593619496,0.012956122867763,-0.000210739512113,0.055192288011312,0.077183693647385,0.048943284898996,-0.046908874064684,0.015017726458609,0.039116412401199,-0.005514989141375,-0.077220626175404,0.083453729748726));
res += mul(Get(s2,dx,0), float4x4(0.024058803915977,0.030360149219632,0.013278956525028,0.009194697253406,0.041833702474833,-0.031150799244642,-0.020103326067328,0.028208218514919,0.057753283530474,-0.014022386632860,-0.018911963328719,0.032402649521828,-0.016814462840557,0.156524971127510,-0.189779430627823,-0.051241867244244));
res += mul(Get(s2,dx,dy), float4x4(0.096364438533783,0.045555129647255,0.002034779172391,-0.023922622203827,0.050789564847946,0.001175497658551,-0.053560815751553,-0.031427923589945,0.084533542394638,0.006259760353714,0.024582779034972,-0.065826229751110,0.061122186481953,0.095058672130108,0.300169229507446,-0.119220480322838));
res += mul(Get(s3,-dx,-dy), float4x4(0.024847637861967,0.006562185008079,-0.125184983015060,0.048841658979654,0.156254664063454,0.007472373079509,0.066816680133343,-0.076370798051357,0.183570295572281,-0.054023019969463,0.163635477423668,0.040324844419956,0.065509207546711,-0.003100523957983,-0.003867157967761,-0.007890993729234));
res += mul(Get(s3,-dx,0), float4x4(0.039147343486547,-0.007163838949054,0.016834614798427,0.086649402976036,-0.004751975648105,0.069272227585316,-0.163431510329247,-0.023980952799320,0.007703580893576,0.015611813403666,0.047807279974222,-0.028949633240700,-0.060622494667768,-0.031197503209114,0.002413575304672,-0.030844174325466));
res += mul(Get(s3,-dx,dy), float4x4(-0.007877521216869,0.063933663070202,-0.077565759420395,-0.003425249364227,0.022162105888128,-0.001765849534422,-0.149060532450676,-0.114365123212337,0.007778842002153,0.056549418717623,-0.063391521573067,0.011902074329555,-0.050243597477674,-0.098920635879040,0.092697821557522,-0.006084538064897));
res += mul(Get(s3,0,-dy), float4x4(0.088485360145569,-0.057549212127924,-0.031296882778406,0.004480063915253,0.243894711136818,-0.052477017045021,-0.037759248167276,-0.032585423439741,-0.113908343017101,0.079828843474388,0.031358744949102,0.019305912777781,0.058372493833303,0.062287040054798,-0.095015056431293,-0.018779549747705));
res += mul(Get(s3,0,0), float4x4(-0.016748303547502,-0.022039433941245,0.116113752126694,-0.049822270870209,-0.136329635977745,0.012419922277331,-0.232152760028839,0.121811777353287,-0.182964742183685,-0.099928133189678,-0.125732496380806,-0.100095473229885,-0.039771355688572,-0.090650558471680,0.006643652915955,0.031820978969336));
res += mul(Get(s3,0,dy), float4x4(-0.004646847024560,0.082414738833904,-0.093881070613861,0.137731239199638,-0.003162033623084,-0.103236600756645,-0.154359534382820,0.309349387884140,-0.045594222843647,-0.007060337811708,-0.019187279045582,0.014463454484940,0.046305473893881,0.044777970761061,0.084909066557884,-0.009971368126571));
res += mul(Get(s3,dx,-dy), float4x4(0.060308530926704,-0.007599378935993,-0.055572491139174,0.072044476866722,0.101937569677830,0.013604403473437,-0.026466678828001,0.006435462739319,-0.071614533662796,-0.047984223812819,0.040837042033672,0.051372215151787,-0.081022612750530,-0.063340954482555,0.007601263001561,-0.012535491026938));
res += mul(Get(s3,dx,0), float4x4(-0.037775974720716,0.036327615380287,0.061712305992842,-0.129109844565392,-0.074731543660164,0.018507353961468,-0.014039094559848,0.139354318380356,0.012628771364689,-0.026421774178743,-0.056621707975864,-0.002700684126467,-0.076108336448669,-0.312442004680634,0.017265062779188,-0.094974473118782));
res += mul(Get(s3,dx,dy), float4x4(0.000968838518020,0.034455690532923,-0.049524623900652,-0.074516870081425,-0.079173952341080,-0.030618162825704,-0.131845444440842,0.148444041609764,0.037707250565290,0.051625128835440,0.089349739253521,-0.077904671430588,-0.019570853561163,-0.125219702720642,0.013509724289179,0.098029762506485));
return max(float4(0,0,0,0), res);
}
