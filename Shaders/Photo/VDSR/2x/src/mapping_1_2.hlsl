sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.233695864677429,0.062138345092535,-0.044505238533020,-0.006144274026155,-0.208986312150955,0.005736732389778,-0.015246246941388,0.132841348648071,-0.054495796561241,-0.013167336583138,-0.029942236840725,0.076360233128071,0.090387441217899,-0.100583285093307,-0.040806759148836,0.011177060194314));
res += mul(Get(s0,-dx,0), float4x4(-0.105524793267250,-0.008053394965827,0.221134394407272,-0.197411835193634,-0.021187512204051,0.206848338246346,0.006693816743791,-0.145058780908585,-0.111553512513638,-0.108271390199661,0.022327570244670,-0.191757544875145,0.006474479567260,-0.056441713124514,-0.000086079700850,0.070337459445000));
res += mul(Get(s0,-dx,dy), float4x4(0.071564264595509,-0.086721800267696,-0.036538898944855,-0.058257810771465,0.170869767665863,0.004733342677355,-0.098442681133747,0.086718954145908,-0.088742040097713,-0.144769862294197,0.028285922482610,0.061539642512798,0.106998518109322,0.038990858942270,-0.273791998624802,-0.196602374315262));
res += mul(Get(s0,0,-dy), float4x4(-0.073637448251247,0.046975865960121,0.036427788436413,0.135802865028381,-0.064337842166424,-0.175373643636703,-0.031224546954036,0.062512293457985,-0.016001109033823,-0.052327044308186,0.102156430482864,-0.060657553374767,-0.089101798832417,0.106604695320129,0.014298563823104,0.095505185425282));
res += mul(Get(s0,0,0), float4x4(-0.153844863176346,0.213899165391922,-0.063068255782127,-0.035114750266075,0.039293810725212,0.068862758576870,0.160789027810097,-0.012576679699123,-0.073777034878731,0.115655586123466,0.008849831297994,-0.165040418505669,-0.101470820605755,0.170651793479919,-0.016810962930322,0.096492424607277));
res += mul(Get(s0,0,dy), float4x4(-0.138080567121506,-0.028340289369226,-0.110509432852268,-0.143340796232224,-0.047687143087387,-0.092359535396099,0.172856733202934,0.072214700281620,-0.069298081099987,0.090687498450279,0.041624180972576,0.119567893445492,-0.116954557597637,0.178833097219467,0.116451293230057,-0.056247651576996));
res += mul(Get(s0,dx,-dy), float4x4(0.090199127793312,-0.027730965986848,-0.024884223937988,0.076108336448669,0.056415770202875,0.121580712497234,0.032157674431801,-0.136487632989883,-0.124183021485806,0.005201874300838,-0.080811120569706,-0.057348009198904,-0.218689650297165,0.095771446824074,-0.070241339504719,-0.073576353490353));
res += mul(Get(s0,dx,0), float4x4(0.088320106267929,-0.004121594130993,-0.000232756196056,0.278336852788925,0.036799564957619,-0.006146064493805,-0.003061871742830,-0.142522305250168,-0.021724771708250,-0.182958632707596,-0.093033999204636,0.038823414593935,0.168143630027771,0.005460910033435,-0.215986594557762,-0.018702343106270));
res += mul(Get(s0,dx,dy), float4x4(-0.024272253736854,0.061362374573946,-0.196426957845688,-0.083027064800262,-0.052526302635670,0.142048388719559,-0.032325495034456,0.034050032496452,0.137671247124672,0.146874547004700,-0.076263792812824,-0.151263579726219,-0.234368428587914,0.035462807863951,-0.114297486841679,-0.068757921457291));
res += mul(Get(s1,-dx,-dy), float4x4(-0.098903268575668,-0.113438904285431,-0.124900154769421,0.038194216787815,0.052798792719841,0.046397186815739,0.035566471517086,-0.105073541402817,-0.005687405355275,0.079550549387932,-0.066201359033585,-0.053692668676376,-0.154178529977798,0.046277213841677,-0.207006648182869,0.028694143518806));
res += mul(Get(s1,-dx,0), float4x4(0.197571814060211,0.192792207002640,-0.005768074188381,-0.096441291272640,0.020517472177744,0.052210170775652,0.015864355489612,0.069247886538506,0.013102048076689,-0.066303126513958,-0.095822319388390,0.046185329556465,0.037986677139997,-0.078944310545921,-0.042507175356150,-0.094100952148438));
res += mul(Get(s1,-dx,dy), float4x4(-0.173361852765083,0.133560225367546,0.004162676632404,-0.087007731199265,0.118611663579941,-0.132533133029938,-0.058667488396168,0.058671928942204,-0.161869540810585,-0.044137675315142,0.043133925646544,0.110259696841240,0.031269229948521,0.020421253517270,-0.041190315037966,-0.058201558887959));
res += mul(Get(s1,0,-dy), float4x4(0.099532753229141,0.007861098274589,-0.047790903598070,0.047962669283152,0.005414527375251,0.120174609124660,0.068587265908718,-0.082034088671207,-0.020157748833299,0.213019102811813,-0.052433047443628,-0.044191457331181,-0.147101119160652,-0.087318256497383,-0.161437049508095,-0.084481872618198));
res += mul(Get(s1,0,0), float4x4(0.041567742824554,0.003872071625665,-0.032061010599136,-0.063572019338608,0.038790091872215,0.111608400940895,0.178391471505165,-0.017865916714072,-0.005332295317203,0.098143957555294,-0.059095609933138,-0.009637196548283,0.022035809233785,0.055085528641939,0.054118137806654,-0.058198951184750));
res += mul(Get(s1,0,dy), float4x4(-0.232345551252365,0.316081672906876,0.182306945323944,0.080702140927315,0.031930133700371,0.059012360870838,-0.016168875619769,-0.205667287111282,0.183770224452019,0.008773121982813,-0.042530257254839,-0.071213930845261,0.137222424149513,-0.004008833318949,0.014360047876835,0.015471618622541));
res += mul(Get(s1,dx,-dy), float4x4(0.075368665158749,0.069097004830837,0.206798359751701,0.003602020442486,0.082930624485016,-0.158223852515221,-0.032948728650808,0.142878830432892,0.023727357387543,-0.083332285284996,0.035953491926193,0.163551643490791,-0.118400037288666,-0.072688750922680,0.074283681809902,0.040678467601538));
res += mul(Get(s1,dx,0), float4x4(0.143008053302765,-0.023842072114348,0.088092401623726,-0.117650754749775,0.197230681777000,-0.114525519311428,-0.177789777517319,0.104081794619560,-0.009947750717402,-0.059581607580185,0.094324946403503,0.031458906829357,-0.137370750308037,0.106666214764118,0.078149728477001,0.163853809237480));
res += mul(Get(s1,dx,dy), float4x4(-0.081296391785145,-0.039189297705889,0.142185360193253,-0.107661925256252,-0.129428640007973,0.128617331385612,0.174268394708633,0.004234640393406,-0.162361577153206,0.117272801697254,-0.094228185713291,0.046267662197351,0.112600401043892,-0.278643935918808,0.061146020889282,0.098348505795002));
res += mul(Get(s2,-dx,-dy), float4x4(-0.013852664269507,-0.104220353066921,-0.018804637715220,0.094816736876965,0.042762771248817,0.049596339464188,-0.044867757707834,-0.134599581360817,-0.066187910735607,0.078795202076435,-0.008481532335281,-0.015137575566769,-0.085070952773094,-0.011405935510993,0.057451177388430,-0.173062205314636));
res += mul(Get(s2,-dx,0), float4x4(0.007669522892684,0.024047890678048,-0.075485132634640,-0.068853296339512,0.156967297196388,0.218030408024788,0.020215122029185,0.014001107774675,-0.127495348453522,0.030522393062711,0.019288016483188,0.016889240592718,-0.050919905304909,-0.033476296812296,-0.025515386834741,0.006247642450035));
res += mul(Get(s2,-dx,dy), float4x4(-0.099205158650875,0.087057963013649,-0.121247306466103,0.020570067688823,-0.172903284430504,-0.291684180498123,-0.132073521614075,-0.030305709689856,0.089986927807331,-0.081513121724129,-0.054982967674732,0.119356371462345,0.099502809345722,-0.004891820717603,-0.145946338772774,-0.073913775384426));
res += mul(Get(s2,0,-dy), float4x4(-0.068527370691299,-0.108219757676125,-0.023724770173430,0.066299006342888,0.130057662725449,-0.178193539381027,0.001422122237273,0.006106920074672,-0.135874450206757,-0.078632138669491,0.167956009507179,-0.049958389252424,0.026202155277133,0.257423520088196,0.264763146638870,-0.025401456281543));
res += mul(Get(s2,0,0), float4x4(-0.157980039715767,-0.046226691454649,0.192066624760628,-0.054510194808245,-0.079105578362942,0.106658205389977,0.156455829739571,-0.019404171034694,-0.061112225055695,-0.021901123225689,-0.028441639617085,0.009268864057958,0.083894573152065,0.063675470650196,0.259868741035461,-0.181358054280281));
res += mul(Get(s2,0,dy), float4x4(0.145372927188873,-0.213600829243660,-0.100933045148849,0.070222757756710,0.092852041125298,-0.029255373403430,-0.016520103439689,-0.125975251197815,-0.145006299018860,-0.186051189899445,-0.002638421254233,-0.223917201161385,-0.025771154090762,-0.089196078479290,0.075724460184574,-0.112732604146004));
res += mul(Get(s2,dx,-dy), float4x4(-0.137611880898476,-0.067983537912369,0.090446792542934,-0.003701576031744,-0.006059575360268,0.058541372418404,-0.100037291646004,0.059785686433315,0.084448836743832,0.012011305429041,0.000642392609734,0.064757041633129,-0.183798521757126,0.074749737977982,-0.041659682989120,-0.042605090886354));
res += mul(Get(s2,dx,0), float4x4(0.018419882282615,0.044413857161999,0.078697457909584,-0.072600990533829,0.098508730530739,0.024906843900681,-0.103669993579388,0.119361460208893,0.140681743621826,0.068378590047359,0.106198884546757,-0.068512491881847,0.012743225321174,0.000887676433194,-0.045562226325274,0.096296802163124));
res += mul(Get(s2,dx,dy), float4x4(0.094991557300091,-0.124051935970783,0.005859151016921,0.070386618375778,-0.144655898213387,0.038267675787210,-0.284103691577911,-0.091211244463921,0.029134498909116,-0.014201055280864,0.072343863546848,0.065012961626053,-0.064887233078480,-0.019476743414998,-0.111439898610115,-0.042899906635284));
res += mul(Get(s3,-dx,-dy), float4x4(-0.087801069021225,0.146524935960770,0.008224192075431,-0.143828466534615,-0.034012291580439,-0.041137326508760,-0.040478523820639,-0.107919938862324,0.056969206780195,-0.027919651940465,0.025587398558855,0.048405949026346,0.007943412289023,-0.024245705455542,-0.048384089022875,-0.025259900838137));
res += mul(Get(s3,-dx,0), float4x4(0.008917960338295,0.148701548576355,0.027497589588165,-0.002631349489093,-0.220776423811913,-0.019000524654984,-0.095647223293781,-0.011381155811250,0.172672390937805,-0.014952318742871,0.148152321577072,-0.029690094292164,-0.118559598922729,0.167441353201866,-0.238654211163521,0.031264517456293));
res += mul(Get(s3,-dx,dy), float4x4(0.199761688709259,0.231009066104889,-0.210694283246994,0.030479822307825,0.189811140298843,-0.150735050439835,-0.101577498018742,0.036278069019318,-0.086896203458309,-0.139693126082420,-0.023947905749083,0.227528288960457,-0.026633666828275,0.032593753188848,0.032326046377420,0.051110040396452));
res += mul(Get(s3,0,-dy), float4x4(0.001386372605339,-0.194266006350517,-0.027733771130443,0.138670012354851,0.078348517417908,0.104311138391495,0.074896514415741,-0.040005598217249,0.073081471025944,0.089597113430500,-0.197256401181221,-0.023632992058992,0.115071855485439,-0.239175677299500,0.108810558915138,-0.122261188924313));
res += mul(Get(s3,0,0), float4x4(0.109089717268944,0.060001827776432,0.161503270268440,0.004337886814028,0.077685207128525,0.173029363155365,-0.017100868746638,-0.082096405327320,0.098846338689327,-0.188894703984261,-0.119003280997276,0.044913139194250,-0.086883492767811,0.001941860653460,-0.032897155731916,0.064034372568130));
res += mul(Get(s3,0,dy), float4x4(-0.024345364421606,0.024098427966237,-0.083849869668484,0.046702072024345,-0.075179927051067,0.186396628618240,0.021604754030704,0.135664641857147,0.107281520962715,0.028550297021866,-0.024015946313739,-0.190261185169220,-0.022847523912787,0.039409857243299,0.065818265080452,-0.039373569190502));
res += mul(Get(s3,dx,-dy), float4x4(0.007710548117757,-0.076247684657574,-0.004998287651688,0.015067246742547,-0.044582650065422,0.019454864785075,0.202943101525307,0.002633639844134,0.012779971584678,-0.045131195336580,-0.021416367962956,0.005822550971061,0.227397292852402,0.010776163078845,-0.129241079092026,0.037926465272903));
res += mul(Get(s3,dx,0), float4x4(0.019425844773650,0.201593250036240,-0.016961824148893,0.102846920490265,0.051569312810898,-0.028970103710890,0.248997986316681,-0.207095757126808,-0.094279959797859,0.077416934072971,0.047807760536671,0.046163439750671,0.111632049083710,-0.027349425479770,0.116939820349216,0.064197339117527));
res += mul(Get(s3,dx,dy), float4x4(0.040422532707453,-0.235650196671486,-0.067173749208450,-0.083258636295795,-0.081311866641045,0.029945632442832,0.129037201404572,-0.049594163894653,-0.115632630884647,0.197910889983177,-0.082097992300987,-0.091923087835312,-0.141410097479820,0.173188179731369,-0.055026821792126,0.029472688212991));
return max(float4(0,0,0,0), res);
}
