sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.000345326319803,-0.002860608045012,-0.125471696257591,0.553428351879120) * Get(-dx,-dy);
res += float4(0.013269631192088,0.000358781253453,0.098343782126904,0.509743452072144) * Get(-dx,0);
res += float4(0.001472702831961,0.000577475235332,0.758017659187317,0.443524628877640) * Get(-dx,dy);
res += float4(-0.010823398828506,-0.002059825230390,-0.403097480535507,-0.078225985169411) * Get(0,-dy);
res += float4(0.003804594743997,0.003931861370802,-0.268426358699799,-0.306152075529099) * Get(0,0);
res += float4(-0.008776257745922,-0.007834603078663,0.383491367101669,-0.329866617918015) * Get(0,dy);
res += float4(-0.012780857272446,-0.003751622280106,-0.495584338903427,-0.372464120388031) * Get(dx,-dy);
res += float4(0.005958652589470,-0.001074746251106,-0.638489127159119,-0.546573400497437) * Get(dx,0);
res += float4(-0.004544486757368,-0.000808616227005,-0.152039170265198,-0.500859260559082) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
