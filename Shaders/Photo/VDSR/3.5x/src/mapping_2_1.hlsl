sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.029410945251584,-0.275687009096146,-0.075561672449112,-0.115399040281773,0.016734881326556,-0.032434768974781,0.008865138515830,-0.053991433233023,0.177196621894836,0.104639135301113,0.063523985445499,0.089420542120934,0.075499832630157,-0.086732313036919,-0.065429069101810,0.042903102934361));
res += mul(Get(s0,-dx,0), float4x4(-0.011721708811820,-0.048622492700815,-0.080251306295395,-0.091151401400566,-0.030620645731688,0.094360657036304,0.052021771669388,-0.044417325407267,0.161074742674828,0.150877088308334,0.093380868434906,0.005117549095303,-0.069287061691284,-0.003935390152037,-0.058964043855667,-0.249165594577789));
res += mul(Get(s0,-dx,dy), float4x4(-0.054624341428280,-0.152462989091873,-0.247404262423515,-0.141546890139580,0.024930540472269,-0.111617229878902,0.020445760339499,-0.006281418260187,-0.096407525241375,0.110835351049900,-0.014230984263122,0.055680468678474,0.011627770960331,0.016417056322098,-0.148586288094521,-0.138057649135590));
res += mul(Get(s0,0,-dy), float4x4(0.207819506525993,0.020513014867902,0.034721136093140,0.093288041651249,0.129107832908630,0.059260848909616,0.057901732623577,0.004263086244464,-0.052669361233711,-0.086917623877525,0.104246698319912,0.192717388272285,0.090000882744789,0.021294839680195,-0.180667638778687,-0.119903013110161));
res += mul(Get(s0,0,0), float4x4(0.083295904099941,-0.044319134205580,-0.010652004741132,0.008114579133689,-0.104307666420937,0.069647222757339,-0.087078154087067,0.105436138808727,0.200460150837898,0.051592465490103,-0.219688981771469,-0.063037462532520,0.089914061129093,-0.068214274942875,-0.150652974843979,-0.025006255134940));
res += mul(Get(s0,0,dy), float4x4(0.042380165308714,-0.054541807621717,-0.029058758169413,0.017368221655488,-0.004165613092482,0.005370856262743,0.002952225506306,0.075469084084034,-0.154993921518326,0.276158094406128,0.024506922811270,-0.111297063529491,-0.037789754569530,0.052564412355423,0.005916342139244,0.127019912004471));
res += mul(Get(s0,dx,-dy), float4x4(-0.013824501074851,0.134394109249115,-0.070990175008774,0.087957531213760,0.036594286561012,0.122147157788277,0.179402023553848,-0.016226664185524,0.015167637728155,0.125988990068436,-0.021981371566653,-0.178818479180336,0.060208316892385,-0.146613031625748,0.053248856216669,0.038946386426687));
res += mul(Get(s0,dx,0), float4x4(-0.219159841537476,0.092591986060143,-0.024091841652989,0.085975036025047,0.029025388881564,-0.017030425369740,-0.008009411394596,-0.059752933681011,-0.133573666214943,0.074263811111450,-0.193292483687401,0.021462045609951,0.008552648127079,0.026516417041421,-0.067629680037498,0.191771537065506));
res += mul(Get(s0,dx,dy), float4x4(-0.096275039017200,-0.229879096150398,0.102638103067875,-0.072109751403332,0.036069143563509,-0.337621271610260,0.056374188512564,0.045763041824102,-0.038822922855616,0.076581880450249,0.061996862292290,0.047798894345760,0.129981085658073,0.194875806570053,-0.108034349977970,-0.114039145410061));
res += mul(Get(s1,-dx,-dy), float4x4(0.155841574072838,-0.030832244083285,-0.055333912372589,-0.151075631380081,0.342772156000137,-0.113664172589779,-0.022319855168462,0.158034116029739,0.084554925560951,-0.016855744645000,0.059036199003458,0.008083001710474,0.039851944893599,0.016810938715935,-0.094080850481987,-0.063508160412312));
res += mul(Get(s1,-dx,0), float4x4(0.140643268823624,0.016043489798903,0.041307277977467,-0.102338686585426,0.222948625683784,-0.173724815249443,-0.004674922209233,0.076804541051388,-0.017076626420021,-0.018594419583678,-0.028432015329599,0.204800397157669,0.048974003642797,-0.038695324212313,0.061252068728209,-0.000820185057819));
res += mul(Get(s1,-dx,dy), float4x4(0.154058083891869,-0.050079476088285,-0.041897505521774,0.055140927433968,-0.130810588598251,0.033692572265863,-0.182835906744003,-0.047832299023867,-0.081288434565067,0.138227254152298,0.197909221053123,0.020880863070488,-0.215542525053024,-0.119425579905510,-0.027243893593550,0.049561455845833));
res += mul(Get(s1,0,-dy), float4x4(-0.009493010118604,0.103752054274082,0.140614166855812,0.135942310094833,0.121137566864491,-0.094890490174294,0.238546654582024,0.032089769840240,0.094330117106438,-0.204539954662323,-0.009147168137133,-0.144827604293823,0.015106757171452,-0.038031354546547,0.035880230367184,0.032669730484486));
res += mul(Get(s1,0,0), float4x4(0.165902584791183,0.149394571781158,0.166512504220009,0.053581204265356,0.133504644036293,-0.216908663511276,0.010353584773839,0.040512107312679,-0.140987008810043,0.134954214096069,0.052500911056995,-0.030594352632761,-0.112861126661301,0.036016684025526,-0.043188020586967,-0.016055326908827));
res += mul(Get(s1,0,dy), float4x4(-0.162078946828842,-0.118191927671432,-0.070281617343426,0.119762115180492,-0.263684391975403,0.092932209372520,0.041872713714838,0.024534747004509,-0.011040516197681,0.094978787004948,-0.117912612855434,-0.033093195408583,-0.019822675734758,0.055285092443228,-0.138538256287575,0.199527963995934));
res += mul(Get(s1,dx,-dy), float4x4(-0.106759376823902,0.124838344752789,0.090956844389439,0.108611077070236,-0.228778898715973,0.039764612913132,0.123594351112843,-0.076721400022507,0.030480174347758,0.119735635817051,-0.217977225780487,0.021783897653222,0.223036468029022,-0.022492168471217,0.167509421706200,0.095839917659760));
res += mul(Get(s1,dx,0), float4x4(-0.007274341769516,-0.103620700538158,0.061641488224268,-0.045550704002380,0.079798921942711,-0.155728548765182,0.058452311903238,-0.037864573299885,-0.099314920604229,0.033953569829464,0.020427193492651,0.019768344238400,0.122065506875515,0.130969181656837,0.074769049882889,0.124546989798546));
res += mul(Get(s1,dx,dy), float4x4(0.007612984627485,-0.186864539980888,-0.174161598086357,-0.259026259183884,-0.050758760422468,0.091674424707890,0.068627029657364,0.002293208846822,0.081888072192669,-0.002605118555948,0.025252699851990,-0.009779150597751,0.183402448892593,0.094575755298138,-0.008746122010052,0.070178344845772));
res += mul(Get(s2,-dx,-dy), float4x4(-0.028022062033415,0.056130066514015,0.069468945264816,-0.216664269566536,0.052348453551531,-0.055292721837759,0.093700341880322,0.028020495548844,0.028572935611010,-0.103726148605347,-0.122175134718418,-0.116439543664455,-0.107900395989418,0.124650396406651,0.153269022703171,-0.284374386072159));
res += mul(Get(s2,-dx,0), float4x4(0.162747770547867,0.064386621117592,-0.084843300282955,0.169902995228767,-0.140869081020355,-0.089148558676243,0.265910714864731,0.071630328893661,0.078328594565392,-0.074414990842342,-0.097500249743462,-0.122801132500172,0.051358066499233,0.025551514700055,0.101405791938305,-0.014075728133321));
res += mul(Get(s2,-dx,dy), float4x4(0.119083061814308,0.048893906176090,0.116673462092876,-0.148826748132706,-0.135643303394318,0.123576141893864,-0.073312014341354,-0.086681775748730,0.107821002602577,0.053846806287766,-0.114918440580368,-0.214327260851860,0.192566215991974,0.000880227773450,0.082540906965733,0.003441717242822));
res += mul(Get(s2,0,-dy), float4x4(0.081171751022339,-0.077753879129887,0.165018662810326,0.141489997506142,0.134463548660278,0.021089084446430,-0.178779974579811,-0.118075504899025,-0.116343028843403,-0.049055594950914,-0.004660217091441,-0.165553286671638,0.062392987310886,-0.044956222176552,0.045024801045656,-0.063971735537052));
res += mul(Get(s2,0,0), float4x4(0.034074276685715,0.096119999885559,-0.048914384096861,-0.028355710208416,-0.128980726003647,-0.084943734109402,0.083709783852100,0.101673007011414,0.039800483733416,0.040504187345505,-0.066655859351158,0.019254511222243,-0.199410662055016,0.078446395695210,-0.140816047787666,0.080871015787125));
res += mul(Get(s2,0,dy), float4x4(-0.007180509623140,0.038390200585127,-0.073578730225563,-0.020494431257248,-0.105807535350323,0.055348236113787,0.016690310090780,-0.155529469251633,0.074861861765385,0.114627391099930,0.225643247365952,0.155617982149124,0.062926158308983,0.223159179091454,-0.169794574379921,-0.004617663566023));
res += mul(Get(s2,dx,-dy), float4x4(-0.043578725308180,0.080831378698349,-0.024286780506372,0.135481148958206,0.086176201701164,-0.063033230602741,-0.038554113358259,-0.032097615301609,0.117865383625031,-0.035444069653749,-0.142422810196877,0.112733714282513,0.161713615059853,0.107783004641533,-0.030243340879679,0.079781338572502));
res += mul(Get(s2,dx,0), float4x4(-0.321091204881668,-0.017213044688106,0.022202836349607,0.060047965496778,-0.111474789679050,-0.060658279806376,0.178383097052574,-0.169313684105873,0.073202945291996,-0.034772127866745,0.025881564244628,0.108248509466648,0.039437707513571,-0.018765663728118,-0.041952796280384,0.064384885132313));
res += mul(Get(s2,dx,dy), float4x4(-0.137977451086044,-0.014733423478901,0.123023025691509,-0.024787001311779,0.020467991009355,0.001326675293967,0.137119159102440,-0.082444652915001,0.005484716035426,0.212095543742180,-0.034937579184771,-0.199861407279968,0.111347511410713,0.063378520309925,0.138420805335045,0.061429522931576));
res += mul(Get(s3,-dx,-dy), float4x4(0.086348585784435,0.429947197437286,-0.052585501223803,-0.106770582497120,0.112884126603603,-0.020885193720460,-0.021474123001099,-0.204707697033882,-0.036292497068644,-0.042076252400875,0.020911958068609,0.068588361144066,-0.002566997427493,-0.070553988218307,0.050666522234678,0.015828309580684));
res += mul(Get(s3,-dx,0), float4x4(-0.077202320098877,-0.007918283343315,-0.155009105801582,0.119282275438309,0.101851642131805,-0.050205942243338,0.067146450281143,0.006196392234415,0.048149600625038,0.049510486423969,0.046167653053999,-0.003878805553541,0.031309507787228,0.091209165751934,-0.026960190385580,-0.009780892170966));
res += mul(Get(s3,-dx,dy), float4x4(-0.186719089746475,-0.007430390920490,-0.080880165100098,0.146897122263908,-0.084703102707863,-0.251612126827240,0.060579769313335,-0.113669261336327,0.056183088570833,0.015094198286533,-0.110287904739380,-0.158633530139923,-0.117174893617630,-0.201636925339699,-0.109866447746754,-0.119953975081444));
res += mul(Get(s3,0,-dy), float4x4(0.091600544750690,-0.068977721035480,-0.081392981112003,-0.027993412688375,-0.022749977186322,-0.077919937670231,0.016700681298971,0.071978472173214,0.011368325911462,-0.045603826642036,0.176197245717049,-0.146362096071243,-0.093349106609821,0.033558826893568,-0.036816228181124,-0.044793333858252));
res += mul(Get(s3,0,0), float4x4(-0.093354910612106,-0.179157391190529,-0.057612325996161,-0.079141318798065,0.058864735066891,0.247000202536583,0.098283924162388,0.016262996941805,-0.012460478581488,0.070972673594952,0.169764652848244,0.075456924736500,0.196209356188774,-0.024644905701280,-0.054020259529352,-0.006632929667830));
res += mul(Get(s3,0,dy), float4x4(-0.026821352541447,0.052374523133039,-0.032389782369137,0.012058138847351,0.089365743100643,0.060963448137045,-0.056732267141342,0.034446030855179,0.010700480081141,0.050288461148739,0.045319706201553,0.162538722157478,-0.052217252552509,0.147948414087296,-0.064876936376095,0.056784819811583));
res += mul(Get(s3,dx,-dy), float4x4(-0.113207012414932,0.004960488528013,-0.019438669085503,-0.220671385526657,-0.024858146905899,-0.156217724084854,0.046409912407398,0.121684625744820,0.072913169860840,0.058312956243753,0.022418096661568,-0.006984986364841,-0.017787538468838,-0.055518817156553,0.012983578257263,-0.184649556875229));
res += mul(Get(s3,dx,0), float4x4(-0.097737580537796,0.088963508605957,-0.031630791723728,0.148966953158379,0.040428820997477,0.001597562688403,-0.026412451639771,0.087642490863800,0.044859267771244,0.104303501546383,-0.017259921878576,-0.054592005908489,0.068514093756676,0.022032143548131,-0.087319210171700,-0.155717581510544));
res += mul(Get(s3,dx,dy), float4x4(-0.144335255026817,0.180076226592064,0.324653923511505,0.207951441407204,-0.099547155201435,0.150980815291405,-0.177432775497437,-0.045269284397364,0.074907414615154,0.093684047460556,0.106519430875778,-0.049833066761494,0.295146554708481,0.049764025956392,0.320205301046371,-0.064990900456905));
return max(float4(0,0,0,0), res);
}
