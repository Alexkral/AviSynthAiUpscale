sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.043786022812128,0.119246847927570,0.104923360049725,-0.040045950561762,0.138597249984741,0.130376920104027,0.098408944904804,-0.070263370871544,-0.072821252048016,-0.120196849107742,-0.200845852494240,0.000792032689787,-0.181101769208908,0.037741068750620,0.149146854877472,0.056020312011242));
res += mul(Get(s0,-dx,0), float4x4(0.149125486612320,0.018508760258555,0.075748234987259,-0.209690436720848,0.077012367546558,-0.234278261661530,0.043371416628361,0.000114964212116,-0.009500636719167,-0.016792742535472,-0.073411568999290,-0.151054903864861,-0.205122783780098,-0.171902164816856,0.034823846071959,-0.079928062856197));
res += mul(Get(s0,-dx,dy), float4x4(0.079847097396851,-0.047458756715059,-0.070565991103649,0.010986008681357,-0.267501145601273,-0.081927977502346,0.045627992600203,0.079224936664104,0.113411881029606,-0.018971679732203,-0.122841529548168,-0.031654369086027,-0.023981666192412,0.121600143611431,0.275776147842407,0.130723968148232));
res += mul(Get(s0,0,-dy), float4x4(-0.030297832563519,0.010120928287506,-0.070492565631866,0.155656024813652,-0.069400206208229,0.064800709486008,0.141942918300629,0.253607779741287,0.079438142478466,0.144595146179199,-0.013596982695162,-0.174913153052330,-0.016512082889676,0.055840577930212,-0.024724932387471,-0.059864841401577));
res += mul(Get(s0,0,0), float4x4(-0.018206033855677,-0.195591673254967,0.053018178790808,-0.015690486878157,0.117028623819351,-0.020869903266430,-0.088907353579998,-0.080730199813843,-0.012617019936442,0.116820722818375,-0.112119823694229,-0.088263966143131,-0.005574394017458,0.155982211232185,-0.185689285397530,-0.040801137685776));
res += mul(Get(s0,0,dy), float4x4(-0.019367223605514,0.164738565683365,0.242570489645004,-0.158543378114700,-0.186829939484596,0.004870134405792,-0.114540509879589,-0.030816420912743,-0.180399090051651,0.074947677552700,-0.140917986631393,-0.151098102331161,-0.050995625555515,0.060999304056168,-0.003828172339126,-0.211382210254669));
res += mul(Get(s0,dx,-dy), float4x4(-0.147003918886185,-0.157483249902725,-0.026708092540503,-0.084744125604630,-0.000906825880520,-0.177123397588730,0.109782084822655,0.043315690010786,0.078189432621002,-0.156219214200974,0.055037084966898,0.089588753879070,0.087932519614697,-0.122320309281349,-0.149999767541885,0.012124300934374));
res += mul(Get(s0,dx,0), float4x4(-0.061242710798979,-0.145127639174461,-0.033918868750334,-0.088376604020596,0.163288831710815,0.030987557023764,-0.115928426384926,-0.220993608236313,-0.213497981429100,0.211328387260437,-0.070130854845047,-0.008269286714494,-0.070996038615704,0.179924517869949,0.075942881405354,-0.009129277430475));
res += mul(Get(s0,dx,dy), float4x4(0.071638002991676,-0.085480533540249,-0.186220958828926,-0.066733285784721,0.005066672805697,0.172316297888756,-0.218804672360420,-0.021220939233899,-0.079840973019600,0.070116244256496,-0.111197933554649,0.203661784529686,0.032331842929125,0.076825946569443,-0.168146997690201,-0.045730859041214));
res += mul(Get(s1,-dx,-dy), float4x4(-0.050983369350433,-0.001126262126490,-0.024709414690733,0.243673682212830,-0.018232874572277,0.052275620400906,-0.083001010119915,-0.021327950060368,-0.036250915378332,0.125492200255394,-0.146218791604042,0.031063243746758,0.039143510162830,0.051962547004223,0.065162964165211,-0.097494229674339));
res += mul(Get(s1,-dx,0), float4x4(0.240350410342216,0.104599796235561,-0.065361276268959,-0.018525989726186,0.120063729584217,-0.032733470201492,-0.123187497258186,0.050465963780880,0.011204690672457,0.089053831994534,-0.089181274175644,0.107176110148430,0.283612519502640,-0.029257815331221,-0.121487714350224,0.080281987786293));
res += mul(Get(s1,-dx,dy), float4x4(-0.158777445554733,-0.139327868819237,0.093220248818398,0.024345627054572,0.020346689969301,0.008507224731147,0.142272800207138,0.226789593696594,-0.084903299808502,0.174872547388077,-0.017643839120865,0.005607771221548,-0.063579380512238,0.247347101569176,-0.112682566046715,-0.106178000569344));
res += mul(Get(s1,0,-dy), float4x4(0.193779617547989,0.088614024221897,0.074851825833321,-0.004711273126304,-0.004866687115282,0.025507496669888,0.060033202171326,0.031034871935844,-0.018403524532914,0.059211790561676,0.037411946803331,-0.143656507134438,0.094632215797901,0.129817962646484,0.142534345388412,0.146440982818604));
res += mul(Get(s1,0,0), float4x4(-0.087139852344990,0.001257871277630,-0.008404364809394,-0.115224093198776,0.202330783009529,0.067044131457806,-0.092377722263336,0.031357534229755,0.041799917817116,0.074683181941509,0.023437943309546,-0.053597990423441,0.151634112000465,0.049595165997744,-0.046163797378540,0.076192088425159));
res += mul(Get(s1,0,dy), float4x4(-0.285476326942444,0.144005149602890,-0.144643545150757,0.114584222435951,0.204192027449608,-0.240099996328354,0.156157299876213,-0.136058807373047,-0.163616105914116,-0.018284128978848,0.170353114604950,-0.099367029964924,-0.027534250169992,0.053744252771139,0.025329878553748,0.022641295567155));
res += mul(Get(s1,dx,-dy), float4x4(0.220690712332726,0.128425896167755,0.103976368904114,0.050604015588760,-0.033409725874662,-0.072735339403152,0.109974533319473,0.272336781024933,0.086475722491741,0.110492937266827,-0.015897063538432,-0.030781013891101,-0.084986463189125,0.160836964845657,0.111971549689770,0.048243165016174));
res += mul(Get(s1,dx,0), float4x4(-0.044549111276865,0.010262493044138,-0.012040581554174,-0.083366945385933,-0.003840226912871,0.105925098061562,-0.079687282443047,-0.081484615802765,0.067664250731468,-0.022303748875856,-0.023359892889857,-0.062171142548323,-0.016222091391683,0.009464826434851,0.037447229027748,-0.258613795042038));
res += mul(Get(s1,dx,dy), float4x4(0.093579337000847,-0.081580527126789,-0.155064478516579,0.051124084740877,-0.164795801043510,0.116354957222939,-0.064353518188000,-0.062329471111298,0.069396041333675,0.066844381392002,-0.105521269142628,-0.218877330422401,-0.014597201719880,0.025404142215848,0.169408798217773,0.190450921654701));
res += mul(Get(s2,-dx,-dy), float4x4(0.122153706848621,-0.083151817321777,0.134895324707031,-0.013940066099167,0.102803573012352,-0.240082636475563,0.042310144752264,0.084979139268398,0.115165784955025,-0.004939686972648,-0.130997523665428,0.231685444712639,0.182267755270004,-0.106188863515854,-0.005780402105302,0.107658997178078));
res += mul(Get(s2,-dx,0), float4x4(-0.015531859360635,-0.004176134709269,0.068470075726509,0.034212186932564,-0.003149782540277,0.003987587057054,-0.017324462532997,0.048084340989590,0.045424696058035,-0.036527127027512,0.132970705628395,0.014172343537211,-0.055799923837185,0.015326844528317,0.074351243674755,-0.083727136254311));
res += mul(Get(s2,-dx,dy), float4x4(0.038978517055511,0.023050451651216,0.137837007641792,-0.117057912051678,0.230602756142616,-0.067294605076313,-0.028400290757418,-0.206133604049683,0.191569522023201,-0.041162300854921,0.122196711599827,0.171774268150330,-0.086055703461170,-0.035116929560900,-0.161216080188751,-0.188116639852524));
res += mul(Get(s2,0,-dy), float4x4(0.011860017664731,0.150929793715477,-0.043590240180492,0.191278353333473,0.066415041685104,-0.035211756825447,-0.104509554803371,-0.209254071116447,0.005393606144935,-0.052597798407078,0.052733033895493,-0.129645988345146,0.020402243360877,-0.052028205245733,0.006593054626137,-0.125899806618690));
res += mul(Get(s2,0,0), float4x4(-0.196969926357269,-0.098264694213867,0.057750929147005,-0.055427640676498,-0.028939543291926,0.121185667812824,0.077313706278801,0.071750484406948,0.130558133125305,0.038779154419899,0.071720875799656,0.057270735502243,-0.028568835929036,-0.019170083105564,0.064270064234734,-0.001870767795481));
res += mul(Get(s2,0,dy), float4x4(0.017880810424685,0.021035939455032,-0.193615421652794,0.116205394268036,0.080894716084003,0.078671723604202,-0.205710008740425,-0.096614941954613,0.080172784626484,-0.061353109776974,0.018762869760394,0.012209050357342,-0.064945295453072,-0.076868146657944,-0.070995882153511,0.054186154156923));
res += mul(Get(s2,dx,-dy), float4x4(0.008357753977180,-0.145794004201889,0.030638366937637,0.143666133284569,0.190899774432182,-0.076472520828247,0.038338739424944,-0.101692266762257,0.186736509203911,0.006412562448531,0.188755080103874,0.062077995389700,-0.010567746125162,-0.078943446278572,0.039144065231085,-0.107533447444439));
res += mul(Get(s2,dx,0), float4x4(0.037780620157719,-0.045393764972687,-0.013805736787617,-0.111068569123745,-0.112917922437191,-0.181098923087120,0.150813788175583,-0.133619338274002,0.183893322944641,0.307088017463684,0.041477326303720,0.072791382670403,-0.156026422977448,0.134496390819550,-0.113614775240421,-0.054801378399134));
res += mul(Get(s2,dx,dy), float4x4(0.084340512752533,-0.042165271937847,-0.133320525288582,-0.109279207885265,-0.002729421947151,0.162117436528206,-0.309632033109665,-0.056435104459524,-0.052648652344942,-0.001206459710374,-0.097841322422028,-0.152520582079887,-0.018129322677851,0.204700753092766,-0.028495308011770,0.002954666735604));
res += mul(Get(s3,-dx,-dy), float4x4(-0.055092703551054,-0.124528892338276,0.025707824155688,0.046731870621443,-0.127367213368416,0.095849476754665,-0.008582689799368,-0.105402410030365,0.047478545457125,-0.069658987224102,-0.047664448618889,-0.067967109382153,0.007471634540707,-0.111378945410252,0.051803890615702,0.071597203612328));
res += mul(Get(s3,-dx,0), float4x4(-0.116766422986984,-0.051706079393625,-0.031576778739691,-0.034141343086958,0.139909073710442,0.115559935569763,-0.038231808692217,-0.040051911026239,0.053282309323549,-0.025166714563966,-0.107590094208717,0.118840061128139,-0.040927406400442,-0.058744009584188,-0.155860513448715,0.067262046039104));
res += mul(Get(s3,-dx,dy), float4x4(-0.190121710300446,0.016734572127461,0.064775653183460,0.046519875526428,-0.036395944654942,-0.134359017014503,0.273021727800369,-0.151682227849960,-0.075921721756458,0.076811917126179,0.133620902895927,0.082104325294495,0.020114120095968,0.060039978474379,-0.002868029056117,0.018839422613382));
res += mul(Get(s3,0,-dy), float4x4(0.007540547754616,0.091543219983578,0.010450441390276,0.076588727533817,0.058402981609106,-0.107817068696022,0.013453369028866,0.114422701299191,0.038265939801931,0.010182074271142,0.116796247661114,0.025430992245674,0.023774242028594,-0.079221092164516,0.059427086263895,0.048407305032015));
res += mul(Get(s3,0,0), float4x4(-0.197611451148987,-0.006816190201789,-0.051977518945932,-0.126276701688766,0.007427696138620,0.029228376224637,-0.103427112102509,0.128807991743088,-0.069343782961369,0.020651785656810,-0.019502554088831,-0.032128188759089,-0.046903297305107,0.030541058629751,-0.055224124342203,-0.157960712909698));
res += mul(Get(s3,0,dy), float4x4(0.157910734415054,-0.068444728851318,0.092310957610607,0.123741671442986,-0.147673547267914,0.164423838257790,0.049299448728561,-0.043142847716808,-0.209926754236221,-0.059975940734148,0.036523759365082,0.078307405114174,0.127083107829094,-0.185401737689972,-0.019140144810081,0.014809332787991));
res += mul(Get(s3,dx,-dy), float4x4(0.000645626510959,0.102207310497761,0.101915076375008,0.016553964465857,0.057475697249174,-0.077668152749538,0.044641353189945,0.138575419783592,-0.179919540882111,-0.126126438379288,0.229640498757362,-0.143779009580612,-0.014260143972933,0.003420012770221,-0.137240678071976,0.003931061364710));
res += mul(Get(s3,dx,0), float4x4(-0.089156717061996,0.204067692160606,-0.219988301396370,-0.116208173334599,0.032550942152739,0.080852895975113,-0.027684541419148,0.015837443992496,0.119044765830040,-0.188189417123795,0.084564849734306,-0.040511768311262,-0.105845488607883,0.070066347718239,0.128929391503334,0.160854965448380));
res += mul(Get(s3,dx,dy), float4x4(-0.202203556895256,-0.011411841958761,-0.135327562689781,-0.086746372282505,-0.099934265017509,0.075601384043694,0.094991758465767,-0.051882859319448,0.157050073146820,0.079488784074783,-0.044990986585617,-0.062403719872236,-0.016497995704412,0.074850924313068,0.118966512382030,-0.072120428085327));
return max(float4(0,0,0,0), res);
}
