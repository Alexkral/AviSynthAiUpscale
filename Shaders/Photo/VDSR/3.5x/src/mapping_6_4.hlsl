sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.071619197726250,0.058816526085138,0.016285471618176,-0.010497318580747,-0.100815422832966,-0.012216314673424,-0.041993882507086,0.281930863857269,0.071317680180073,0.215689301490784,0.004298314452171,0.120053648948669,-0.080262973904610,-0.040113683789968,-0.039786249399185,-0.039858087897301));
res += mul(Get(s0,-dx,0), float4x4(0.166240260004997,0.090474575757980,0.037071887403727,0.048637770116329,-0.151240050792694,0.016122598201036,0.052160862833261,0.005536521319300,0.051659286022186,0.118939124047756,0.079928353428841,-0.081325188279152,-0.127625435590744,-0.059800330549479,-0.125372543931007,-0.055673599243164));
res += mul(Get(s0,-dx,dy), float4x4(0.149848148226738,0.037778675556183,0.177362740039825,-0.069731406867504,0.037300780415535,-0.024133313447237,-0.039388697594404,-0.145091637969017,-0.028131486847997,0.043975923210382,-0.120631843805313,-0.046785101294518,-0.336399823427200,-0.099627122282982,-0.075858302414417,-0.195334583520889));
res += mul(Get(s0,0,-dy), float4x4(0.088614389300346,0.027253014966846,-0.158064633607864,-0.076075792312622,0.085260912775993,-0.043931324034929,-0.071880698204041,0.167375326156616,-0.013459088280797,0.024032678455114,-0.118309408426285,0.027126800268888,0.003526807529852,-0.075831137597561,-0.067078448832035,-0.037999842315912));
res += mul(Get(s0,0,0), float4x4(-0.042482830584049,0.085336849093437,-0.081238955259323,0.049340914934874,-0.123184368014336,0.002399038989097,-0.021737335249782,0.087955705821514,0.117896094918251,-0.127485290169716,-0.052421726286411,-0.004368699621409,0.031759563833475,-0.059641186147928,-0.044048856943846,0.012822593562305));
res += mul(Get(s0,0,dy), float4x4(0.039835654199123,-0.011902582831681,0.014839577488601,-0.050265863537788,-0.024792941287160,-0.109362125396729,-0.055297929793596,-0.017550662159920,-0.105905704200268,-0.083566956222057,-0.030080895870924,-0.170487225055695,-0.004198896232992,-0.097169391810894,-0.104668036103249,-0.071644835174084));
res += mul(Get(s0,dx,-dy), float4x4(-0.044109806418419,-0.035624351352453,-0.004590579774231,-0.075663141906261,0.207867354154587,-0.219373568892479,-0.029444007202983,-0.112632684409618,-0.163765311241150,0.047628220170736,-0.076140239834785,-0.022644175216556,0.184497952461243,-0.067670106887817,-0.069227062165737,-0.128388330340385));
res += mul(Get(s0,dx,0), float4x4(-0.085173800587654,-0.022360658273101,0.284311145544052,0.223185807466507,0.096130721271038,-0.089581690728664,0.065570443868637,-0.054545275866985,-0.182156458497047,0.049982767552137,-0.137486994266510,0.133941397070885,0.185282006859779,0.025198698043823,-0.027694622054696,0.075659096240997));
res += mul(Get(s0,dx,dy), float4x4(0.010441061109304,-0.143825814127922,0.099165983498096,-0.015576765872538,0.098658867180347,-0.097474150359631,0.038910131901503,-0.096548162400723,-0.055373333394527,-0.093714244663715,0.126251846551895,-0.200391471385956,0.163200840353966,-0.048271905630827,0.007153223734349,-0.022132381796837));
res += mul(Get(s1,-dx,-dy), float4x4(0.122430995106697,-0.085830770432949,-0.101524904370308,-0.030248321592808,0.023416206240654,-0.135116741061211,-0.083912760019302,-0.039503451436758,-0.069390214979649,0.115425124764442,0.127001747488976,-0.007353937253356,-0.267820000648499,-0.045677788555622,-0.089704401791096,-0.008172756060958));
res += mul(Get(s1,-dx,0), float4x4(0.046350698918104,-0.151361778378487,0.019643558189273,0.073421500623226,0.002013900084421,0.092396229505539,-0.047621864825487,-0.031523987650871,0.038429718464613,-0.028644071891904,-0.005340422037989,0.090215913951397,-0.106881193816662,-0.126503676176071,-0.083946384489536,0.058177895843983));
res += mul(Get(s1,-dx,dy), float4x4(0.071436189115047,-0.049952983856201,0.007329945452511,-0.156757920980453,-0.047041442245245,-0.103512696921825,0.036592461168766,-0.231722071766853,-0.092982597649097,0.185670405626297,0.080479688942432,0.124873891472816,-0.111828833818436,-0.126665413379669,-0.094404242932796,-0.007895888760686));
res += mul(Get(s1,0,-dy), float4x4(-0.071662023663521,0.128825530409813,0.113887429237366,0.063075356185436,-0.076147675514221,0.085254058241844,-0.052131187170744,0.088050961494446,0.002013475866988,0.020364876836538,0.005510800983757,-0.019286464899778,-0.013570856302977,-0.058345757424831,-0.096923582255840,-0.094459109008312));
res += mul(Get(s1,0,0), float4x4(-0.036198165267706,-0.050182163715363,-0.038333352655172,0.181356012821198,-0.064852774143219,0.233209475874901,-0.024807667359710,0.226236969232559,0.163122802972794,-0.056938137859106,0.010025945492089,0.030861733481288,-0.056847624480724,-0.024981822818518,-0.041565027087927,-0.054464180022478));
res += mul(Get(s1,0,dy), float4x4(0.122566103935242,0.009129486046731,-0.017510367557406,0.066085651516914,-0.070920072495937,0.109471410512924,-0.066799908876419,0.136987507343292,0.008503830991685,0.122793510556221,0.011063983663917,0.012024997733533,-0.051680400967598,0.025694729760289,-0.101982891559601,-0.080268278717995));
res += mul(Get(s1,dx,-dy), float4x4(-0.018934212625027,0.105847217142582,-0.143939569592476,-0.119687899947166,0.082694768905640,-0.018585648387671,-0.017586121335626,-0.090569473803043,-0.028232131153345,-0.170095443725586,-0.070855572819710,-0.146891668438911,-0.051686987280846,-0.191213250160217,-0.086851201951504,-0.075664684176445));
res += mul(Get(s1,dx,0), float4x4(0.006807289086282,0.006182050798088,0.087746627628803,0.062815822660923,0.085330590605736,0.017384756356478,0.097675524652004,0.015762576833367,0.030283182859421,0.073297135531902,-0.049061778932810,-0.046010199934244,-0.035101678222418,-0.085788682103157,-0.044386871159077,-0.068477138876915));
res += mul(Get(s1,dx,dy), float4x4(-0.080102376639843,0.019490525126457,0.155968934297562,-0.092333585023880,-0.075777880847454,0.050278734415770,-0.072869621217251,-0.131452634930611,0.005062083248049,0.115436576306820,-0.010047999210656,-0.088470257818699,0.101926371455193,-0.050531964749098,-0.107044503092766,-0.134429454803467));
res += mul(Get(s2,-dx,-dy), float4x4(-0.146052598953247,0.017935795709491,0.024547064676881,0.101147331297398,-0.028269886970520,-0.115056246519089,0.029450021684170,-0.063875555992126,-0.020651664584875,-0.107805609703064,0.173736408352852,-0.179928079247475,-0.048249706625938,-0.144896134734154,-0.111232623457909,-0.068319946527481));
res += mul(Get(s2,-dx,0), float4x4(0.091225750744343,0.087886609137058,-0.025862904265523,0.073507614433765,0.013515416532755,-0.140497669577599,0.034622531384230,-0.018501272425056,-0.136186122894287,0.048569824546576,0.068357907235622,-0.002785859862342,0.194899335503578,-0.063704304397106,-0.016258090734482,-0.011963813565671));
res += mul(Get(s2,-dx,dy), float4x4(0.014271036721766,0.051145475357771,-0.010280726477504,-0.097707256674767,0.021423788741231,-0.006370122078806,0.092833749949932,-0.070856325328350,-0.013203310780227,0.079886481165886,-0.020920349285007,-0.001268628169782,-0.133864283561707,0.011656753718853,-0.080171540379524,0.212139725685120));
res += mul(Get(s2,0,-dy), float4x4(0.049818944185972,0.211031556129456,-0.003733014222234,0.010427357628942,-0.077282629907131,-0.035750914365053,-0.078916303813457,-0.036816485226154,-0.069812178611755,-0.101728171110153,0.091679729521275,0.109893932938576,0.020841611549258,0.261333286762238,0.017806308344007,0.025029858574271));
res += mul(Get(s2,0,0), float4x4(0.216252088546753,0.159932836890221,-0.090785615146160,-0.006970198825002,0.008188412524760,-0.086688794195652,0.008569359779358,0.156778708100319,-0.121030688285828,0.028551740571856,-0.164870381355286,0.078933276236057,0.195177748799324,0.014002613723278,-0.024749185889959,-0.039893642067909));
res += mul(Get(s2,0,dy), float4x4(-0.004967194050550,0.047716069966555,-0.071893639862537,0.051207512617111,-0.041513469070196,-0.154020383954048,0.061390530318022,-0.046435538679361,0.025319805368781,-0.032435551285744,-0.093984581530094,0.078695207834244,0.103670939803123,0.041711349040270,-0.077048406004906,-0.032443150877953));
res += mul(Get(s2,dx,-dy), float4x4(0.104300595819950,-0.186332359910011,0.042975310236216,-0.007312951143831,0.127941817045212,0.005786330439150,0.190779879689217,-0.174705520272255,-0.062607131898403,-0.059071484953165,0.228943198919296,-0.160318344831467,-0.115099132061005,0.036862529814243,-0.086140364408493,0.106650501489639));
res += mul(Get(s2,dx,0), float4x4(0.166421502828598,-0.035671386867762,-0.005147126503289,0.004092574585229,0.151273161172867,0.093195401132107,-0.059512540698051,-0.152667552232742,-0.060704454779625,0.022959984838963,-0.048505835235119,-0.115889370441437,0.006028167437762,-0.109050042927265,0.148825496435165,-0.147004619240761));
res += mul(Get(s2,dx,dy), float4x4(-0.148348048329353,0.059614062309265,0.014693809673190,0.087041758000851,0.015167107805610,0.086723104119301,-0.056187313050032,-0.151689231395721,0.018266811966896,-0.043818619102240,0.192655801773071,-0.047912575304508,-0.000960923207458,0.036547441035509,-0.077088303864002,-0.077250912785530));
res += mul(Get(s3,-dx,-dy), float4x4(-0.008541028946638,-0.020929267629981,-0.144231408834457,0.052859459072351,0.092759758234024,-0.079852901399136,-0.084877632558346,0.140816286206245,-0.035020250827074,-0.038600776344538,-0.048870164901018,0.153443202376366,0.012099850922823,-0.013583809137344,0.002669026143849,-0.036335930228233));
res += mul(Get(s3,-dx,0), float4x4(0.171222820878029,0.116834983229637,-0.153956726193428,0.209174260497093,0.069022156298161,-0.032744139432907,0.022040510550141,0.054027754813433,0.059796113520861,-0.064877294003963,0.064744658768177,0.114407598972321,0.015632277354598,-0.038366336375475,-0.000157783273607,0.114271573722363));
res += mul(Get(s3,-dx,dy), float4x4(0.042582064867020,-0.086553327739239,0.037158809602261,0.201344385743141,-0.118419058620930,0.035278104245663,-0.101102583110332,-0.170737624168396,0.009314601309597,-0.058977365493774,-0.014739817008376,0.040525585412979,-0.142994835972786,0.066139467060566,0.068203076720238,-0.088274531066418));
res += mul(Get(s3,0,-dy), float4x4(-0.106121420860291,-0.071914851665497,0.005518954247236,-0.058224912732840,-0.024882867932320,0.023159131407738,0.038839790970087,0.221511259675026,0.008036226034164,0.066784776747227,0.014188366010785,-0.038620270788670,0.005436190869659,-0.061907023191452,0.031391441822052,0.099500618875027));
res += mul(Get(s3,0,0), float4x4(-0.074285976588726,0.045129898935556,0.016928333789110,-0.058959808200598,0.039205372333527,0.015279933810234,0.128980800509453,0.096280395984650,0.056462321430445,0.090321138501167,0.086907267570496,0.044710084795952,-0.011449881829321,-0.135656371712685,0.057304490357637,0.232865378260612));
res += mul(Get(s3,0,dy), float4x4(-0.046997513622046,-0.069463409483433,0.159823000431061,-0.074916504323483,0.034215714782476,-0.123557768762112,-0.000253706937656,-0.032237693667412,0.058386266231537,0.007472032215446,-0.043402984738350,-0.096512511372566,-0.001124986913055,0.121672481298447,-0.020599346607924,-0.045618668198586));
res += mul(Get(s3,dx,-dy), float4x4(-0.106779403984547,-0.008770675398409,0.105168290436268,0.067186869680882,-0.092918738722801,0.000619187776465,-0.019367014989257,0.098530575633049,0.019607773050666,0.089843086898327,-0.069106049835682,-0.025629423558712,0.000426238490036,0.061014931648970,-0.156002536416054,0.020499648526311));
res += mul(Get(s3,dx,0), float4x4(-0.033382803201675,0.023389887064695,0.028626754879951,0.061655122786760,-0.030163476243615,0.050766963511705,0.044876977801323,-0.038336504250765,-0.070387497544289,0.111358165740967,0.146794185042381,0.051101729273796,0.096102021634579,-0.113679833710194,-0.059297770261765,-0.027901163324714));
res += mul(Get(s3,dx,dy), float4x4(-0.080140590667725,-0.010854541324079,-0.017854768782854,-0.029120173305273,-0.051109850406647,-0.078476533293724,0.073780618607998,-0.129676893353462,-0.046810261905193,0.098347194492817,0.005326745565981,-0.071185313165188,0.010788341052830,-0.066003873944283,-0.098006159067154,-0.188188672065735));
return max(float4(0,0,0,0), res);
}
