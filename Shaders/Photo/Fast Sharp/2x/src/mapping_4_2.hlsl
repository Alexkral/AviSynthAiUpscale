sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0.028351735323668,-0.070245034992695,-0.032832127064466,-0.129625231027603);
res += mul(Get(s0,-dx,-dy), float4x4(-0.006283196154982,0.120608516037464,0.059156693518162,-0.020436758175492,-0.016856791451573,-0.053156252950430,-0.126497626304626,-0.101570978760719,0.074809052050114,-0.069554790854454,0.051965657621622,-0.161274269223213,-0.048747517168522,-0.088472723960876,0.031560815870762,-0.035404603928328));
res += mul(Get(s0,-dx,0), float4x4(-0.006132170557976,0.333501309156418,0.071959368884563,0.330306738615036,0.100833751261234,-0.131148800253868,0.046923462301493,-0.032792221754789,0.025891356170177,-0.138374432921410,0.128091454505920,0.113859735429287,-0.006455185357481,-0.041247118264437,-0.165479943156242,0.049904175102711));
res += mul(Get(s0,-dx,dy), float4x4(0.001946688164026,0.121341742575169,0.007602375000715,0.080977268517017,0.051171615719795,0.042131759226322,-0.000753547938075,0.056398935616016,-0.054694619029760,-0.008758157491684,0.001956021180376,0.010175003670156,0.054892081767321,-0.155570656061172,0.073166593909264,-0.018338393419981));
res += mul(Get(s0,0,-dy), float4x4(-0.155899494886398,0.147660106420517,0.145454972982407,0.065665461122990,0.118734888732433,-0.341731786727905,0.071771107614040,0.167684376239777,0.136234015226364,0.174254804849625,-0.127866894006729,0.275949358940125,0.166020214557648,0.049264356493950,-0.224905595183372,0.032232329249382));
res += mul(Get(s0,0,0), float4x4(-0.187576875090599,0.351654261350632,0.047675918787718,-0.455376774072647,0.386761665344238,-0.069929033517838,-0.112302720546722,0.049378503113985,-0.172657102346420,0.000877913378645,0.032084133476019,0.083508595824242,-0.340699493885040,0.319584220647812,0.461313694715500,0.117327272891998));
res += mul(Get(s0,0,dy), float4x4(0.310226112604141,0.131594747304916,-0.018069479614496,0.246192872524261,-0.286534577608109,-0.212409362196922,-0.113717101514339,-0.214332565665245,0.147896379232407,0.067778959870338,0.034243874251842,0.042666081339121,-0.089393235743046,0.075367242097855,-0.113015241920948,0.241698339581490));
res += mul(Get(s0,dx,-dy), float4x4(0.033066719770432,-0.098990894854069,-0.061495222151279,0.010497322306037,-0.002826133277267,0.027468519285321,0.093642659485340,-0.031198853626847,-0.102290451526642,-0.042793102562428,0.095060244202614,-0.108733437955379,-0.024825956672430,-0.090388022363186,0.036868885159492,-0.076957389712334));
res += mul(Get(s0,dx,0), float4x4(0.169613778591156,-0.208280727267265,-0.200221478939056,0.040836308151484,0.016927294433117,-0.244803622364998,-0.077362246811390,-0.023652533069253,-0.115617580711842,0.232601955533028,0.059053979814053,-0.166539907455444,-0.106821224093437,-0.192389503121376,-0.312702596187592,-0.013318438082933));
res += mul(Get(s0,dx,dy), float4x4(0.087246343493462,-0.095056392252445,0.066746316850185,-0.108074270188808,-0.011669442988932,0.042074300348759,0.083465337753296,0.097061626613140,-0.050688125193119,0.179514229297638,-0.038734734058380,-0.028820585459471,-0.000480808143038,-0.151841163635254,-0.051836125552654,-0.083012379705906));
res += mul(Get(s1,-dx,-dy), float4x4(0.046697400510311,-0.020963739603758,0.064183332026005,-0.141980990767479,-0.105106011033058,-0.005541486199945,0.094592630863190,-0.106266580522060,0.074086353182793,0.057458210736513,-0.071527950465679,-0.105530574917793,-0.010563494637609,0.076640717685223,0.020292110741138,0.046862479299307));
res += mul(Get(s1,-dx,0), float4x4(0.060930494219065,-0.324709743261337,-0.050825096666813,0.227038711309433,-0.090297333896160,0.177412182092667,-0.087804496288300,-0.049095734953880,-0.088160552084446,0.119274929165840,0.050997704267502,-0.147256568074226,-0.133236557245255,0.368394494056702,-0.243745222687721,-0.031803317368031));
res += mul(Get(s1,-dx,dy), float4x4(0.023791639134288,-0.125576198101044,-0.065537922084332,-0.049751777201891,-0.005597659386694,0.065224885940552,0.110802821815014,-0.273752301931381,-0.166317567229271,0.080790832638741,-0.062135197222233,-0.053367141634226,0.045873593539000,0.180293545126915,0.069398142397404,-0.136450707912445));
res += mul(Get(s1,0,-dy), float4x4(0.006269261706620,-0.010177779011428,0.013139920309186,0.082701705396175,-0.071825191378593,-0.234784767031670,0.023297825828195,-0.013210226781666,0.045339178293943,-0.077814638614655,-0.036122649908066,0.070984743535519,-0.035231385380030,-0.028621701523662,-0.140134364366531,-0.021500084549189));
res += mul(Get(s1,0,0), float4x4(-0.155387371778488,0.336633980274200,-0.121746942400932,-0.309290349483490,-0.034483585506678,-0.541038751602173,0.181318655610085,0.003614745801315,-0.133763134479523,0.168079137802124,-0.061202384531498,0.079661868512630,-0.356520235538483,-0.114835523068905,0.432268291711807,-0.112215004861355));
res += mul(Get(s1,0,dy), float4x4(0.232183933258057,0.260043203830719,-0.022064335644245,0.175513386726379,-0.285529792308807,-0.265685409307480,0.062874637544155,-0.107955627143383,0.350021213293076,-0.016608865931630,0.089204013347626,-0.145316392183304,0.489680111408234,-0.070567257702351,-0.036920320242643,0.150438234210014));
res += mul(Get(s1,dx,-dy), float4x4(0.000088885775767,0.030975477769971,0.006354947108775,0.044646300375462,0.001866724225692,0.000085836065409,0.046827480196953,-0.040701858699322,0.039662949740887,0.000337331352057,-0.069837830960751,-0.017001481726766,0.000463752105134,-0.111511200666428,0.014686980284750,0.068549267947674));
res += mul(Get(s1,dx,0), float4x4(0.155832871794701,-0.345653325319290,-0.200397536158562,0.079417437314987,-0.105927303433418,0.235204637050629,0.143577888607979,-0.147237658500671,0.238290935754776,0.076597586274147,0.219392955303192,-0.103308655321598,0.036072138696909,-0.137994438409805,-0.244978889822960,0.130471587181091));
res += mul(Get(s1,dx,dy), float4x4(0.083571441471577,-0.050777997821569,0.053200196474791,-0.110651969909668,-0.008876024745405,0.097497686743736,-0.019298223778605,-0.208220258355141,0.038922950625420,0.111722499132156,0.051979590207338,0.022230712696910,0.038551647216082,-0.119549624621868,-0.010464188642800,0.073324382305145));
res += mul(Get(s2,-dx,-dy), float4x4(0.012950729578733,0.214441090822220,-0.015585790388286,-0.038400407880545,-0.004504254087806,-0.031595740467310,0.023711010813713,0.033774722367525,0.050502024590969,-0.257093816995621,-0.086336068809032,-0.095790550112724,0.042587812989950,-0.033789895474911,-0.070804893970490,0.071122899651527));
res += mul(Get(s2,-dx,0), float4x4(0.100468620657921,-0.088324636220932,0.141170799732208,-0.023336082696915,0.027558885514736,-0.033710703253746,-0.070883423089981,0.055635754019022,0.078134201467037,-0.446453303098679,0.067746140062809,0.018758190795779,-0.023789368569851,-0.028558678925037,-0.019117474555969,0.340274631977081));
res += mul(Get(s2,-dx,dy), float4x4(-0.107038274407387,-0.288850069046021,0.076274245977402,0.021933181211352,0.038967430591583,0.058879919350147,0.011305845342577,-0.052926041185856,-0.027368348091841,-0.124938637018204,-0.009183983318508,-0.079585403203964,0.120124533772469,0.119685798883438,-0.013429671525955,0.252044886350632));
res += mul(Get(s2,0,-dy), float4x4(0.010658126324415,-0.293697297573090,-0.027106285095215,0.043498061597347,0.087677769362926,0.039513800293207,-0.094803519546986,-0.036116559058428,0.037379223853350,-0.139625996351242,-0.018178684636950,-0.045330058783293,-0.008417292498052,0.009813676588237,-0.020933873951435,0.088965341448784));
res += mul(Get(s2,0,0), float4x4(-0.217526450753212,-0.119560874998569,0.063333131372929,-0.011489734053612,-0.065269574522972,0.097839102149010,0.064807280898094,-0.180455505847931,0.004447294399142,0.208016529679298,0.086190812289715,0.296362429857254,0.044070787727833,-0.109324030578136,-0.119065977632999,0.482261240482330));
res += mul(Get(s2,0,dy), float4x4(-0.168329134583473,0.164711356163025,-0.063338123261929,-0.001114579616114,-0.212147012352943,-0.246364116668701,0.071815803647041,0.101961076259613,-0.122514344751835,-0.007511625066400,-0.041841056197882,0.033458158373833,-0.187176302075386,0.003558332799003,0.013010077178478,-0.123041689395905));
res += mul(Get(s2,dx,-dy), float4x4(0.000195998174604,0.248467847704887,0.089059673249722,-0.024973563849926,0.063686817884445,-0.050926674157381,-0.001983699621633,-0.005081088282168,-0.015111077576876,-0.077675171196461,-0.045258600264788,0.023785131052136,0.021140653640032,0.010698015801609,-0.071375422179699,0.022682918235660));
res += mul(Get(s2,dx,0), float4x4(-0.070647343993187,0.094949528574944,0.087378688156605,-0.067035607993603,-0.056880239397287,-0.141031920909882,-0.112173810601234,0.066930167376995,-0.025240398943424,0.013032502494752,0.015199175104499,-0.216930463910103,0.125964596867561,0.349532216787338,0.077192530035973,-0.005037594120950));
res += mul(Get(s2,dx,dy), float4x4(0.152099534869194,-0.273548871278763,-0.154757484793663,0.178724840283394,-0.077222980558872,0.031050786375999,0.082057461142540,-0.174233391880989,0.071946151554585,-0.070388562977314,-0.040552254766226,-0.025135822594166,0.004994012881070,0.069535225629807,-0.080492727458477,0.141498953104019));
res = max(float4(0, 0, 0, 0), res) + float4(0.894678771495819,0.105614833533764,1.030059695243835,0.072801314294338) * min(float4(0, 0, 0, 0), res);
return res;
}
