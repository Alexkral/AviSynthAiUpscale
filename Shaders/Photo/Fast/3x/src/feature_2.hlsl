sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define ddx  (dx * 2.0)
#define ddy  (dy * 2.0)
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(-0.647198379039764,0.100394897162914,-0.122859358787537,-0.434192419052124);
res += float4(0.027042625471950,0.023700624704361,0.013473643921316,0.022460529580712) * Get(-ddx,-ddy);
res += float4(-0.077330850064754,0.062222070991993,-0.045601323246956,0.005183764267713) * Get(-ddx,-dy);
res += float4(0.029047384858131,0.039884153753519,0.211751401424408,0.140344038605690) * Get(-ddx,0);
res += float4(0.075753264129162,-0.075714431703091,0.093683801591396,-0.054926790297031) * Get(-ddx,dy);
res += float4(-0.033031634986401,0.012280435301363,-0.016862526535988,0.034563645720482) * Get(-ddx,ddy);
res += float4(-0.004250792320818,0.036112882196903,0.152881011366844,-0.007612986024469) * Get(-dx,-ddy);
res += float4(0.021789880469441,0.129954993724823,-0.044431962072849,-0.005827539600432) * Get(-dx,-dy);
res += float4(0.368482530117035,0.392964750528336,0.144683927297592,0.117393597960472) * Get(-dx,0);
res += float4(-0.064521394670010,0.147528007626534,0.213449165225029,0.160465165972710) * Get(-dx,dy);
res += float4(0.006756459362805,0.042015865445137,0.134596735239029,-0.002204393036664) * Get(-dx,ddy);
res += float4(-0.037485290318727,-0.017036998644471,0.033341605216265,0.072441354393959) * Get(0,-ddy);
res += float4(0.492011845111847,0.291334390640259,-0.336362510919571,0.014746351167560) * Get(0,-dy);
res += float4(0.696705758571625,-0.617730975151062,0.054072033613920,0.227839514613152) * Get(0,0);
res += float4(-0.257849454879761,-0.250150799751282,-0.226572990417480,0.133922025561333) * Get(0,dy);
res += float4(0.042142506688833,-0.133865609765053,0.168436229228973,0.036560792475939) * Get(0,ddy);
res += float4(0.012951349839568,0.009238064289093,-0.087442271411419,-0.019949387758970) * Get(dx,-ddy);
res += float4(-0.259303897619247,0.314826667308807,0.006733325775713,0.119741842150688) * Get(dx,-dy);
res += float4(-0.078351356089115,-0.508621513843536,-0.177219584584236,0.149652123451233) * Get(dx,0);
res += float4(-0.010443639941514,0.055521562695503,0.285551190376282,0.327297538518906) * Get(dx,dy);
res += float4(-0.016210868954659,0.018001044169068,-0.000429855834227,-0.072477720677853) * Get(dx,ddy);
res += float4(-0.018080048263073,-0.016830664128065,0.011442963965237,-0.050851434469223) * Get(ddx,-ddy);
res += float4(-0.051533527672291,0.008571458980441,-0.036097861826420,0.025500992313027) * Get(ddx,-dy);
res += float4(-0.013822582550347,-0.076763726770878,-0.193530648946762,0.039591580629349) * Get(ddx,0);
res += float4(0.058407608419657,-0.027503762394190,-0.080115713179111,0.026155300438404) * Get(ddx,dy);
res += float4(-0.007642820477486,0.057579346001148,-0.088462956249714,-0.011249391362071) * Get(ddx,ddy);
res = max(float4(0, 0, 0, 0), res) + float4(0.043756436556578,0.495293408632278,0.827328741550446,1.057148337364197) * min(float4(0, 0, 0, 0), res);
return res;
}
