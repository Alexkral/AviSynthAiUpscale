sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define ddx  (dx * 2.0)
#define ddy  (dy * 2.0)
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0.082885459065437,-0.152362763881683,0.039568275213242,0.092342853546143);
res += float4(0.031089283525944,0.008617954328656,0.092317968606949,0.026677580550313) * Get(-ddx,-ddy);
res += float4(0.019940426573157,0.080390080809593,-0.142967581748962,-0.097353279590607) * Get(-ddx,-dy);
res += float4(-0.104227535426617,-0.084618307650089,0.189663112163544,0.202833503484726) * Get(-ddx,0);
res += float4(0.048012919723988,-0.033893335610628,-0.136633679270744,0.011033146642148) * Get(-ddx,dy);
res += float4(-0.001053460408002,-0.013609545305371,0.015329629182816,0.058198727667332) * Get(-ddx,ddy);
res += float4(-0.016360623762012,0.010963018052280,-0.001662170281634,-0.009730149991810) * Get(-dx,-ddy);
res += float4(0.094889208674431,-0.260926663875580,-0.292168676853180,0.260094642639160) * Get(-dx,-dy);
res += float4(-1.125614047050476,0.310372918844223,0.144476011395454,0.233181670308113) * Get(-dx,0);
res += float4(-0.296880900859833,-0.017852278426290,0.088074401021004,0.011105139739811) * Get(-dx,dy);
res += float4(0.050278361886740,-0.057998005300760,-0.019624574109912,0.037974126636982) * Get(-dx,ddy);
res += float4(-0.023764217272401,0.077128261327744,-0.011216314509511,0.044685009866953) * Get(0,-ddy);
res += float4(0.007510396186262,0.207516103982925,-0.248462945222855,0.090958297252655) * Get(0,-dy);
res += float4(-0.049521390348673,0.498172819614410,-0.394948720932007,-0.584191858768463) * Get(0,0);
res += float4(0.385752618312836,0.150884062051773,-0.106487333774567,0.134669974446297) * Get(0,dy);
res += float4(0.030284784734249,0.137876093387604,-0.078766860067844,-0.114613436162472) * Get(0,ddy);
res += float4(0.019335208460689,-0.117073178291321,-0.061724815517664,-0.238738283514977) * Get(dx,-ddy);
res += float4(-0.024577418342233,-0.146553248167038,0.521691501140594,0.211550086736679) * Get(dx,-dy);
res += float4(0.344186723232269,-0.219329968094826,0.043681424111128,-0.176140934228897) * Get(dx,0);
res += float4(0.054735291749239,-0.314912319183350,0.136147335171700,0.105633877217770) * Get(dx,dy);
res += float4(-0.003663206240162,-0.028089292347431,0.136718794703484,-0.072335563600063) * Get(dx,ddy);
res += float4(-0.018219299614429,0.016961906105280,-0.036601416766644,0.121866025030613) * Get(ddx,-ddy);
res += float4(0.046242050826550,-0.036588151007891,0.110679782927036,-0.104624666273594) * Get(ddx,-dy);
res += float4(0.016211450099945,0.023775614798069,0.100771948695183,-0.141663357615471) * Get(ddx,0);
res += float4(0.035225879400969,-0.086251504719257,0.046897497028112,-0.144052758812904) * Get(ddx,dy);
res += float4(-0.075949333608150,0.020838025957346,-0.108568713068962,-0.023553764447570) * Get(ddx,ddy);
res = max(float4(0, 0, 0, 0), res) + float4(-0.005042817443609,-0.089252218604088,0.591721117496490,0.990843594074249) * min(float4(0, 0, 0, 0), res);
return res;
}
