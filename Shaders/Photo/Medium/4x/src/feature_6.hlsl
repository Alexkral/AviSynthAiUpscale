sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define ddx  (dx * 2.0)
#define ddy  (dy * 2.0)
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0.025550192221999,-0.006611885037273,0.009695481508970,-0.052722416818142);
res += float4(0.041300944983959,-0.153004318475723,-0.000704413396306,0.026805968955159) * Get(-ddx,-ddy);
res += float4(0.005075656343251,0.313700139522552,-0.210790500044823,0.105574525892735) * Get(-ddx,-dy);
res += float4(0.179094582796097,0.124772682785988,-0.075100541114807,0.154886156320572) * Get(-ddx,0);
res += float4(-0.185539662837982,-0.117697685956955,0.099691927433014,0.097527064383030) * Get(-ddx,dy);
res += float4(-0.022967373952270,-0.033954776823521,0.067661263048649,0.041335202753544) * Get(-ddx,ddy);
res += float4(-0.135993674397469,0.176218450069427,-0.127565935254097,-0.075383827090263) * Get(-dx,-ddy);
res += float4(0.124874554574490,-0.497012376785278,0.277398407459259,0.128932759165764) * Get(-dx,-dy);
res += float4(0.307868182659149,-0.153076782822609,-0.425528138875961,-0.172754585742950) * Get(-dx,0);
res += float4(-0.165087014436722,-0.036335147917271,0.150140926241875,-0.024281028658152) * Get(-dx,dy);
res += float4(0.144882708787918,0.147398129105568,0.022694351151586,-0.027366086840630) * Get(-dx,ddy);
res += float4(-0.158420532941818,-0.069610863924026,0.246786370873451,0.015733515843749) * Get(0,-ddy);
res += float4(0.083604626357555,0.116828620433807,-0.415635555982590,-0.060568008571863) * Get(0,-dy);
res += float4(0.102255463600159,0.457965403795242,0.520355939865112,0.593115389347076) * Get(0,0);
res += float4(0.056217409670353,-0.092937342822552,-0.333749383687973,0.112045556306839) * Get(0,dy);
res += float4(0.058282520622015,0.037684671580791,0.140049383044243,-0.064188934862614) * Get(0,ddy);
res += float4(0.263518810272217,0.020154878497124,-0.087032228708267,0.014081262983382) * Get(dx,-ddy);
res += float4(-0.101535417139530,-0.149266809225082,0.031429614871740,-0.347469687461853) * Get(dx,-dy);
res += float4(-0.268437653779984,-0.039714902639389,0.150483161211014,-0.284546017646790) * Get(dx,0);
res += float4(0.034083642065525,0.039807856082916,-0.109314054250717,-0.048611763864756) * Get(dx,dy);
res += float4(-0.248656898736954,-0.099387131631374,-0.110143445432186,0.096144087612629) * Get(dx,ddy);
res += float4(-0.008830401115119,0.077543608844280,0.039643242955208,0.001330884522758) * Get(ddx,-ddy);
res += float4(-0.091214872896671,0.042519386857748,-0.022665301337838,-0.018186893314123) * Get(ddx,-dy);
res += float4(-0.301814794540405,-0.273057103157043,0.123421147465706,0.036954909563065) * Get(ddx,0);
res += float4(0.261359244585037,0.186277016997337,0.065111219882965,-0.186246529221535) * Get(ddx,dy);
res += float4(0.068192198872566,-0.072312399744987,-0.016551086679101,0.004048510920256) * Get(ddx,ddy);
res = max(float4(0, 0, 0, 0), res) + float4(0.171931445598602,-0.176255002617836,0.950041413307190,0.785176694393158) * min(float4(0, 0, 0, 0), res);
return res;
}
