sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.003221567953005,-0.112123854458332,-0.036727041006088,-0.014378381893039) * Get(-dx,-dy);
res += float4(0.000119954071124,0.060422167181969,-0.037833884358406,-0.027052970603108) * Get(-dx,0);
res += float4(-0.004507110919803,0.041853573173285,-0.007522107101977,-0.021768795326352) * Get(-dx,dy);
res += float4(-0.001411220990121,0.148200139403343,-0.056706145405769,-0.007121184840798) * Get(0,-dy);
res += float4(-0.004505428019911,0.497563004493713,-0.022197544574738,0.017599681392312) * Get(0,0);
res += float4(-0.004766819067299,-0.435926824808121,0.039206739515066,0.002706086961553) * Get(0,dy);
res += float4(-0.005610453896224,-0.267492741346359,-0.035088401287794,-0.016309851780534) * Get(dx,-dy);
res += float4(-0.003730446565896,0.220171093940735,-0.002553281374276,0.020269298925996) * Get(dx,0);
res += float4(-0.001209240057506,0.223881751298904,0.071892768144608,0.009758662432432) * Get(dx,dy);
res = max(float4(0,0,0,0), res);
return res;
}
