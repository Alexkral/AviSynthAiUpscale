sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(-0.173110738396645,-0.062386218458414,0.017308017238975,0.104928255081177) * Get(-dx,-dy);
res += float4(-0.183424368500710,0.048352025449276,0.160856276750565,-0.007872198708355) * Get(-dx,0);
res += float4(0.198446527123451,-0.020855430513620,0.138602435588837,-0.108019426465034) * Get(-dx,dy);
res += float4(-0.013199839740992,-0.063244760036469,-0.078643403947353,0.213991314172745) * Get(0,-dy);
res += float4(0.032297659665346,0.054640147835016,0.003421316621825,0.510225951671600) * Get(0,0);
res += float4(0.526925206184387,-0.010622335597873,0.019194709137082,-0.099845267832279) * Get(0,dy);
res += float4(-0.150863155722618,-0.061216339468956,-0.135984942317009,-0.108034096658230) * Get(dx,-dy);
res += float4(-0.142073825001717,0.032754015177488,-0.158342435956001,-0.185175210237503) * Get(dx,0);
res += float4(0.109502434730530,-0.007462329696864,-0.112446255981922,0.003849952947348) * Get(dx,dy);
res = max(float4(0,0,0,0), res);
return res;
}
