sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.030127029865980,-0.014719286002219,0.027879303321242,-0.006429930683225,-0.025866705924273,-0.014636353589594,0.012631799094379,-0.036124773323536,-0.054699338972569,-0.007057913579047,0.007409139070660,0.033792458474636,0.050025049597025,0.017493313178420,-0.013801022432745,-0.108280435204506));
res += mul(Get(s0,-dx,0), float4x4(-0.025223627686501,-0.020430935546756,0.035861305892467,0.004488917067647,-0.081061571836472,-0.029277540743351,0.001118033542298,-0.018298553302884,-0.094988226890564,-0.014961510896683,-0.014260736294091,0.021224219352007,0.003998352680355,-0.005935799796134,-0.000832545745652,-0.097387529909611));
res += mul(Get(s0,-dx,dy), float4x4(0.008378451690078,-0.004789770580828,0.007383702322841,-0.003861957462505,0.081826381385326,-0.053988054394722,-0.010119224898517,-0.002262804424390,-0.010695707984269,-0.013844872824848,-0.013689391314983,-0.008432469330728,0.010708614252508,-0.011167470365763,0.007975790649652,-0.074192523956299));
res += mul(Get(s0,0,-dy), float4x4(-0.027876583859324,0.045134346932173,0.026322567835450,0.008165897801518,-0.016186827793717,-0.010953183285892,0.006013912614435,-0.013662289828062,-0.048768263310194,0.009134740568697,0.010515633970499,0.017053605988622,0.041253618896008,0.025920225307345,-0.064212024211884,-0.086479388177395));
res += mul(Get(s0,0,0), float4x4(-0.063190333545208,0.026577983051538,0.055064637213945,-0.023156391456723,-0.046132102608681,0.002249322365969,0.006900018081069,0.003375819418579,-0.108383439481258,0.027483228594065,-0.017584968358278,-0.012840805575252,-0.011178609915078,0.029685040935874,-0.065844438970089,-0.083247080445290));
res += mul(Get(s0,0,dy), float4x4(0.005511083640158,0.033946726471186,0.020530194044113,-0.016104180365801,0.072757422924042,0.022567618638277,-0.010702590458095,-0.003466204274446,0.011619556695223,0.024703735485673,0.003758168779314,-0.020541580393910,-0.010822856798768,0.063779368996620,-0.007860461249948,-0.052588839083910));
res += mul(Get(s0,dx,-dy), float4x4(-0.043245796114206,-0.011015265248716,0.001882506418042,0.032635781913996,-0.014235715381801,0.017420371994376,0.046154484152794,0.014513434842229,-0.025175441056490,-0.000024160559406,-0.005187237635255,0.012265781871974,0.006882045418024,-0.084769845008850,-0.029272677376866,-0.079956717789173));
res += mul(Get(s0,dx,0), float4x4(-0.039437822997570,-0.027090094983578,0.020513273775578,0.018456866964698,0.030038112774491,0.009096062742174,0.052470754832029,0.015975564718246,-0.044278804212809,-0.004194014240056,-0.018035825341940,-0.026602020487189,0.020221129059792,-0.026454593986273,0.002021993743256,-0.057189289480448));
res += mul(Get(s0,dx,dy), float4x4(-0.003062226576731,-0.005799479782581,-0.015250661410391,-0.003242837497965,-0.034526292234659,-0.013831594958901,0.012246393598616,0.024571869522333,0.026288302615285,-0.003963074181229,0.000864324392751,-0.028972355648875,0.017342654988170,0.061826705932617,-0.000703919562511,-0.008184837177396));
res += mul(Get(s1,-dx,-dy), float4x4(0.013425936922431,0.012128022499382,-0.067424908280373,-0.004621590021998,-0.051933340728283,0.106572523713112,-0.016444960609078,0.036280795931816,-0.005039589479566,-0.001609921571799,0.000497885688674,0.006270379759371,0.183730289340019,-0.000647045904770,-0.057835649698973,0.024973038583994));
res += mul(Get(s1,-dx,0), float4x4(-0.083929382264614,0.043054964393377,0.001850380096585,-0.019547682255507,0.017943860962987,0.109140470623970,0.001133719342761,0.035101395100355,0.004430147353560,0.008058936335146,-0.005307812243700,-0.010738596320152,-0.172829687595367,0.049768190830946,0.089278176426888,-0.053208984434605));
res += mul(Get(s1,-dx,dy), float4x4(0.008849516510963,0.058139231055975,-0.073738589882851,-0.029964387416840,0.039321839809418,0.064288116991520,0.001700099091977,0.001936038490385,0.000484258722281,0.004126897547394,-0.008040803484619,0.005652592517436,0.004103031009436,-0.010372048243880,-0.038020666688681,-0.025864753872156));
res += mul(Get(s1,0,-dy), float4x4(0.029116548597813,0.006404915824533,-0.006899068132043,-0.005036947783083,0.009283622726798,0.004672008100897,0.008334211073816,0.015982907265425,0.004591936711222,0.002689415588975,-0.008113571442664,0.001176741439849,0.190372020006180,-0.091857053339481,-0.055085279047489,0.075436592102051));
res += mul(Get(s1,0,0), float4x4(-0.033706843852997,0.053032226860523,0.057320762425661,0.013816523365676,0.053278606384993,0.005177011713386,0.050120789557695,-0.011432637460530,-0.008567402139306,-0.006764083635062,-0.014311120845377,-0.002377165248618,-0.205695688724518,-0.038965079933405,0.107921093702316,0.019745241850615));
res += mul(Get(s1,0,dy), float4x4(-0.005505234003067,0.092160515487194,0.023976447060704,0.026442306116223,0.082332730293274,0.059092890471220,0.021574636921287,-0.007160553243011,0.027832044288516,0.003198862075806,-0.008957047946751,-0.016431111842394,0.038908980786800,-0.034627001732588,-0.048134572803974,-0.009615524671972));
res += mul(Get(s1,dx,-dy), float4x4(0.105528153479099,0.006194832269102,-0.002576436847448,-0.039843060076237,0.042462579905987,-0.013752384111285,0.012019609101117,-0.010993107222021,-0.005666018929332,0.006029721815139,-0.008138515986502,0.005711430683732,-0.087408989667892,-0.028266513720155,-0.033066559582949,0.029367055743933));
res += mul(Get(s1,dx,0), float4x4(-0.020166194066405,0.009430023841560,0.020349232479930,0.003567347535864,-0.009538619779050,-0.003494958626106,0.035672672092915,-0.028098231181502,-0.001473426935263,-0.000618443591520,-0.015125467441976,0.006893265061080,0.051658287644386,-0.023874789476395,0.120574995875359,0.037449710071087));
res += mul(Get(s1,dx,dy), float4x4(-0.018315007910132,-0.003849420696497,-0.056519623845816,0.066379941999912,0.018569404259324,0.022114707157016,0.018036203458905,-0.045008644461632,0.010997493751347,0.008124406449497,0.018658472225070,0.006867830641568,-0.093705289065838,-0.049314748495817,-0.020547594875097,0.016343772411346));
res += mul(Get(s2,-dx,-dy), float4x4(0.003495750250295,0.004743202123791,-0.035160023719072,0.003714282065630,0.015446636825800,0.006990767084062,-0.008205375634134,0.010669360868633,-0.002764495322481,0.037082165479660,-0.051753628998995,0.022284070029855,0.031615432351828,-0.054030556231737,-0.042998962104321,0.092704415321350));
res += mul(Get(s2,-dx,0), float4x4(-0.030627511441708,-0.037812441587448,0.047185033559799,-0.003475566161796,0.017754524946213,0.023857682943344,-0.012213183566928,0.000574111356400,-0.205927565693855,0.061514809727669,0.069193772971630,-0.013337818905711,0.008513404056430,-0.042959794402122,-0.008467696607113,0.078754864633083));
res += mul(Get(s2,-dx,dy), float4x4(0.082409456372261,-0.030804246664047,-0.032255113124847,-0.040417864918709,0.016698352992535,0.008888793177903,-0.005501600913703,0.002802606439218,0.244317010045052,-0.028902100399137,-0.057259604334831,-0.051068264991045,0.139553070068359,-0.010707842186093,-0.093244701623917,0.033190928399563));
res += mul(Get(s2,0,-dy), float4x4(-0.029933158308268,-0.024154560640454,-0.012320648878813,-0.067771673202515,-0.031060932204127,0.034926429390907,0.005147303920239,0.015905175358057,0.073437251150608,-0.036724880337715,-0.027540722861886,0.099518761038780,0.028040148317814,0.016054892912507,0.095591761171818,0.008147425018251));
res += mul(Get(s2,0,0), float4x4(0.039534900337458,-0.049187272787094,0.052273955196142,-0.051607314497232,0.020373648032546,0.034896135330200,0.029295399785042,-0.007837004959583,-0.280373930931091,0.019440788775682,0.054362576454878,0.071381814777851,0.002943929750472,0.056642185896635,0.082751654088497,0.020897235721350));
res += mul(Get(s2,0,dy), float4x4(0.114460840821266,-0.001563855214044,-0.039043959230185,-0.071610137820244,0.051621738821268,0.035643134266138,0.013968842104077,-0.002233637263998,0.442459464073181,0.040348593145609,-0.073891595005989,-0.083356842398643,0.063718162477016,0.080088980495930,0.024631105363369,-0.032178379595280));
res += mul(Get(s2,dx,-dy), float4x4(0.061070021241903,-0.068923354148865,0.020358782261610,-0.038495503365993,0.010730396956205,0.011282185092568,0.101553209125996,0.018492814153433,-0.076235763728619,-0.055974502116442,0.071321696043015,0.080289170145988,-0.070488974452019,0.032546702772379,-0.058555763214827,-0.034251838922501));
res += mul(Get(s2,dx,0), float4x4(-0.023892773315310,-0.019762590527534,0.058157186955214,-0.030042773112655,-0.000997064169496,0.022969868034124,0.102111004292965,-0.000289446383249,0.155924886465073,-0.014134535565972,0.130905285477638,0.072177819907665,-0.025196272879839,0.027805419638753,-0.050584439188242,0.000645936350338));
res += mul(Get(s2,dx,dy), float4x4(0.010123244486749,0.022725107148290,-0.053078465163708,-0.079778946936131,0.007101007737219,0.023975258693099,0.087198890745640,-0.003317982191220,-0.162573501467705,-0.031134760007262,-0.005533670540899,-0.028235306963325,0.031521636992693,0.043465960770845,-0.087673470377922,-0.027149442583323));
res += mul(Get(s3,-dx,-dy), float4x4(-0.003647070843726,-0.001059633214027,-0.035601764917374,-0.002431641798466,-0.020095640793443,0.013083409518003,0.007664742879570,0.058341033756733,-0.004127614200115,0.006638730876148,0.010582603514194,0.003083311952651,0.052530214190483,-0.040119100362062,-0.040061667561531,0.009970057755709));
res += mul(Get(s3,-dx,0), float4x4(-0.070117965340614,-0.056409720331430,0.004668814130127,0.032863974571228,0.022484937682748,-0.000636894255877,-0.013339029625058,0.079534053802490,0.009272911585867,0.023787066340446,-0.008449959568679,0.005597540177405,-0.026865936815739,-0.037186812609434,0.007286352571100,-0.078634820878506));
res += mul(Get(s3,-dx,dy), float4x4(0.114323340356350,-0.045887585729361,-0.044387567788363,-0.010478329844773,0.034213796257973,0.017751721665263,0.002465800847858,0.068265646696091,0.005840790923685,-0.011644415557384,-0.008671391755342,0.012744062580168,0.032747942954302,-0.002771965460852,-0.051571752876043,-0.058632433414459));
res += mul(Get(s3,0,-dy), float4x4(-0.240879058837891,0.040007170289755,-0.011496296152472,0.003543390892446,-0.034861981868744,0.038166139274836,-0.018024643883109,-0.006316997110844,-0.008433026261628,-0.000721558812074,0.007281566970050,-0.011338337324560,0.085825607180595,-0.080585807561874,-0.034174788743258,0.067901782691479));
res += mul(Get(s3,0,0), float4x4(0.266677945852280,0.033514685928822,0.007158160675317,-0.026161694899201,0.033342640846968,-0.012704751454294,-0.009814340621233,0.026300046592951,-0.021545045077801,-0.001145153422840,0.001932613551617,0.007846518419683,0.002525857649744,0.005683920811862,0.022514648735523,0.009580919519067));
res += mul(Get(s3,0,dy), float4x4(0.115616701543331,-0.005991211626679,-0.017719417810440,-0.037297062575817,-0.019575471058488,-0.031830050051212,-0.005280110053718,0.028764391317964,-0.000660437741317,-0.013280422426760,0.002006405964494,0.004213089123368,0.031294822692871,0.070092916488647,-0.027176193892956,0.000280042964732));
res += mul(Get(s3,dx,-dy), float4x4(0.006317485123873,0.006354616489261,-0.022313976660371,0.080095775425434,0.019346404820681,0.033912874758244,0.006597980856895,-0.019963491708040,0.002271857112646,-0.005074198357761,-0.005589360371232,-0.012247016653419,0.016882514581084,-0.047367259860039,-0.031961690634489,0.060396119952202));
res += mul(Get(s3,dx,0), float4x4(0.029082732275128,0.004741976037621,-0.001178797101602,0.018781170248985,-0.012373143807054,0.023934816941619,-0.004624058026820,0.001445682253689,-0.003702254965901,-0.017831021919847,-0.003250764217228,-0.005843127612025,0.007738040760159,0.024638298898935,0.050783425569534,0.082699224352837));
res += mul(Get(s3,dx,dy), float4x4(-0.077628411352634,-0.014838607050478,-0.066306591033936,-0.008556572720408,-0.028954416513443,0.031674385070801,-0.003326365724206,-0.006500783842057,-0.003584588412195,-0.013997997157276,0.001812300411984,0.001783361542039,-0.020200345665216,0.041276872158051,-0.073674432933331,0.103196062147617));
res = max(float4(0,0,0,0), res);
return res;
}
