sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.022834561765194,0.047615844756365,0.065821044147015,-0.004410433117300,0.002220124006271,0.018558997660875,-0.002607520902529,-0.005954345688224,0.018041960895061,0.013496514409781,-0.018704138696194,-0.029170617461205,-0.017105540260673,-0.003638603724539,-0.003686673007905,-0.000757208326831));
res += mul(Get(s0,-dx,0), float4x4(-0.034731056541204,0.157178997993469,0.001120970351622,0.030887369066477,-0.014260194264352,0.006323428824544,0.004517520777881,0.024703884497285,-0.030569689348340,0.012409795075655,-0.011506046168506,0.025918064638972,0.021195411682129,0.005691201426089,-0.028392255306244,-0.002611894393340));
res += mul(Get(s0,-dx,dy), float4x4(0.044332951307297,0.116539426147938,-0.053322024643421,0.048283264040947,0.003883076598868,-0.013385253958404,-0.003202280728146,-0.007525447290391,-0.014276443980634,0.003008024301380,-0.047758780419827,-0.007367277983576,0.012694769538939,-0.008931128308177,-0.028326144441962,0.008059937506914));
res += mul(Get(s0,0,-dy), float4x4(0.039553839713335,0.042956292629242,-0.025128589943051,-0.031865786761045,-0.007866020314395,0.000958042102866,0.001127854804508,-0.009901171550155,0.003953405190259,-0.003794065210968,0.045165978372097,-0.017403889447451,0.015965821221471,0.018937379121780,-0.009103167802095,-0.017320180311799));
res += mul(Get(s0,0,0), float4x4(0.015262693166733,0.089134894311428,-0.091120138764381,-0.023084718734026,-0.032157603651285,-0.022616717964411,0.023386845365167,0.027478821575642,-0.010100166313350,-0.045600414276123,0.063165128231049,-0.020382801070809,-0.028158079832792,0.015216014347970,-0.014608752913773,0.006297906395048));
res += mul(Get(s0,0,dy), float4x4(0.023426720872521,0.081637814640999,-0.007352334447205,-0.020381405949593,-0.021292338147759,-0.033171422779560,0.009219622239470,0.006080548744649,-0.017105286940932,-0.054967701435089,0.033140379935503,-0.029429214075208,0.008443341590464,-0.012899777851999,-0.012761855497956,0.004990648943931));
res += mul(Get(s0,dx,-dy), float4x4(0.043185900896788,-0.033329043537378,0.038228631019592,0.013860356062651,-0.003628924954683,-0.000628170382697,0.010471843183041,-0.010851705446839,-0.005444780923426,0.034828688949347,-0.007942317053676,-0.055299643427134,-0.019942961633205,-0.007515659090132,-0.007550661452115,-0.019086502492428));
res += mul(Get(s0,dx,0), float4x4(0.013685479760170,-0.106853932142258,0.014540310017765,0.027013018727303,-0.021081596612930,-0.025218965485692,0.052689328789711,0.051547575742006,-0.011618993245065,0.002969700610265,0.010575006715953,-0.027205312624574,0.009411593899131,0.003655222477391,-0.006887113675475,-0.016671517863870));
res += mul(Get(s0,dx,dy), float4x4(0.030279777944088,-0.028407022356987,0.111352898180485,-0.024876151233912,-0.017701253294945,-0.022628739476204,0.012330244295299,0.034644801169634,0.035441014915705,-0.003750575706363,-0.014314726926386,-0.032647874206305,0.007404704112560,0.007207775488496,-0.013234408572316,0.003561580786481));
res += mul(Get(s1,-dx,-dy), float4x4(0.005293060559779,0.000001338861694,-0.004643708933145,0.000108695072413,0.009122005663812,-0.023986792191863,-0.043635409325361,0.025853905826807,-0.031419854611158,0.040367558598518,0.001111530116759,0.015587128698826,-0.024346316233277,0.045800901949406,-0.128186985850334,0.010347778908908));
res += mul(Get(s1,-dx,0), float4x4(0.002045305445790,0.003798179328442,0.001340325572528,0.007605245336890,0.018274376168847,0.007117857690901,-0.027330035343766,0.050147876143456,-0.028027087450027,0.017035622149706,-0.045745808631182,0.023612467572093,-0.119078300893307,0.079783841967583,-0.046099983155727,0.008100544102490));
res += mul(Get(s1,-dx,dy), float4x4(-0.002511499216780,-0.001220452017151,-0.001725312089548,-0.000099702781881,-0.006120161153376,-0.013743591494858,0.000937249918934,0.061501275748014,-0.012123240157962,-0.017259052023292,-0.026213509961963,-0.024210851639509,0.046590887010098,0.024642646312714,-0.082228310406208,0.018241291865706));
res += mul(Get(s1,0,-dy), float4x4(0.013401458039880,-0.008033880963922,-0.000141222000821,-0.002180778188631,0.087004117667675,-0.013301203027368,-0.047351032495499,0.083365522325039,-0.021234933286905,0.022011045366526,0.009081049822271,-0.001557869487442,0.225087061524391,-0.080175682902336,0.049772948026657,-0.185662269592285));
res += mul(Get(s1,0,0), float4x4(0.000550830445718,-0.005467255134135,0.007477188948542,-0.007222740910947,0.034442380070686,0.002020121086389,-0.022233106195927,0.092239990830421,-0.002620390616357,-0.033255945891142,0.000339268270181,0.023458197712898,-0.077899053692818,0.021829908713698,0.032265547662973,-0.017912926152349));
res += mul(Get(s1,0,dy), float4x4(-0.000592563010287,0.000194425214431,-0.001759454607964,0.005899706389755,-0.026509607210755,-0.008913571015000,-0.024012643843889,0.067545197904110,-0.025236852467060,-0.052401378750801,0.000761124130804,0.017454799264669,-0.003714637830853,-0.040076628327370,0.006231477484107,0.074672497808933));
res += mul(Get(s1,dx,-dy), float4x4(-0.008816048502922,0.006363703869283,-0.004141332581639,0.004788553807884,0.017955688759685,0.005183488596231,0.009747938252985,0.085206650197506,0.002514585154131,-0.000250215292908,0.005551700014621,0.005784428212792,0.100786358118057,-0.040796115994453,0.110673934221268,-0.010079794563353));
res += mul(Get(s1,dx,0), float4x4(-0.006074277684093,0.001653723884374,-0.002052007010207,0.002063683466986,-0.026005605235696,-0.008521862328053,-0.016520423814654,0.054746281355619,0.016265980899334,-0.067879758775234,0.090636216104031,0.040115546435118,-0.080509960651398,0.016384692862630,0.049258567392826,0.024309005588293));
res += mul(Get(s1,dx,dy), float4x4(-0.001829917775467,0.002170927124098,0.002347877249122,-0.001064891228452,-0.012393977493048,-0.003362890565768,-0.024859130382538,0.031882539391518,-0.009721053764224,-0.040810272097588,0.036196343600750,0.054098013788462,0.026039861142635,-0.066891409456730,0.060226850211620,0.068850904703140));
res += mul(Get(s2,-dx,-dy), float4x4(0.030158061534166,0.036548286676407,0.003513092175126,0.020144058391452,0.017090266570449,0.010123603977263,0.014493683353066,0.008909333497286,0.040985334664583,-0.015680519863963,-0.006335594225675,0.009763861075044,-0.014742175117135,-0.027634769678116,-0.020133066922426,0.011096505448222));
res += mul(Get(s2,-dx,0), float4x4(0.007596732582897,0.102098844945431,-0.209373414516449,0.012703570537269,0.075851492583752,-0.057395305484533,0.068317398428917,-0.056274272501469,0.007371901068836,-0.012576628476381,-0.008380946703255,-0.005816224496812,-0.030370494350791,-0.020061029121280,-0.014625959098339,0.008691714145243));
res += mul(Get(s2,-dx,dy), float4x4(0.049643602222204,0.024043390527368,-0.142320305109024,0.047716114670038,0.041298441588879,-0.128363117575645,0.031644098460674,-0.078784778714180,-0.038988441228867,-0.016632722690701,-0.047279447317123,0.003741558641195,-0.016998289152980,0.000453141576145,-0.013928267173469,-0.008015035651624));
res += mul(Get(s2,0,-dy), float4x4(0.016469473019242,0.120385102927685,-0.052896890789270,-0.019548099488020,-0.068829983472824,-0.030188117176294,-0.077497407793999,0.015961013734341,0.004392513073981,-0.021597212180495,0.022697972133756,0.028380881994963,-0.002143794670701,-0.006933704018593,-0.021573200821877,0.004728157073259));
res += mul(Get(s2,0,0), float4x4(-0.016177980229259,0.093731254339218,-0.194362923502922,-0.023477219045162,-0.000445791229140,-0.034842740744352,0.058487262576818,0.047591932117939,-0.063153423368931,-0.016753371804953,0.004895092453808,0.035691767930984,-0.035696189850569,0.021801531314850,-0.021082330495119,0.003864837577567));
res += mul(Get(s2,0,dy), float4x4(0.037809822708368,-0.030545208603144,-0.032046709209681,0.074311889708042,0.044983617961407,-0.018694728612900,0.050883565098047,0.055523537099361,-0.020801875740290,-0.019764047116041,-0.044568780809641,-0.017767816781998,-0.000062954481109,0.003957737702876,-0.013009842485189,0.000511915597599));
res += mul(Get(s2,dx,-dy), float4x4(-0.022851521149278,0.046534076333046,-0.035295043140650,-0.013908131048083,-0.010912667028606,-0.073310188949108,0.033141992986202,-0.004812123719603,0.006247883196920,-0.051900293678045,0.044842172414064,0.058392129838467,0.007209367118776,-0.015203111805022,0.004700070247054,-0.008322337642312));
res += mul(Get(s2,dx,0), float4x4(-0.013804876245558,0.001628281199373,-0.130092754960060,-0.025874966755509,0.047422174364328,-0.081712871789932,0.157239899039268,0.006547098048031,-0.050133623182774,-0.043121159076691,0.004211056046188,0.055517494678497,-0.004098142962903,-0.001731007941999,0.004140125587583,-0.013525260612369));
res += mul(Get(s2,dx,dy), float4x4(0.038795001804829,0.029405616223812,-0.044768854975700,0.044510837644339,0.012501345016062,-0.025020720437169,0.087101757526398,0.038647342473269,0.010692087933421,-0.058988828212023,0.004577825311571,0.020440293475986,0.010371970944107,0.003611606778577,0.002511960221455,-0.015476099215448));
res += mul(Get(s3,-dx,-dy), float4x4(0.006249656435102,-0.003200500737876,-0.027304517105222,-0.055962588638067,0.039183694869280,0.245156332850456,-0.086908191442490,-0.038400512188673,0.013019341975451,0.005954116117209,-0.011023193597794,0.006781654432416,0.084556564688683,0.027954777702689,-0.049315806478262,-0.124929681420326));
res += mul(Get(s3,-dx,0), float4x4(0.076381064951420,0.047027472406626,-0.045913547277451,-0.056906908750534,-0.208714246749878,0.176508292555809,-0.292120635509491,0.139846026897430,0.006012384314090,-0.001914033433422,0.007906236685812,-0.004292989149690,-0.020123828202486,0.076672136783600,-0.154278919100761,-0.098530329763889));
res += mul(Get(s3,-dx,dy), float4x4(0.053664479404688,-0.023919394239783,0.081084072589874,0.119844309985638,-0.032220970839262,-0.020329413935542,-0.249258995056152,0.029387334361672,0.014954655431211,0.004275869112462,-0.000098839991551,-0.002355391625315,0.028942029923201,0.019809490069747,-0.044145040214062,-0.015171205624938));
res += mul(Get(s3,0,-dy), float4x4(0.124006867408752,-0.075242824852467,-0.011699402704835,0.027851853519678,-0.328583210706711,0.019517844542861,0.013551135547459,0.049316287040710,0.009729536250234,-0.008942605927587,0.007785123772919,0.000530325982254,0.035241600126028,0.049433965235949,0.015460210852325,0.035501897335052));
res += mul(Get(s3,0,0), float4x4(0.107702188193798,-0.003512239316478,-0.014891466125846,0.040847033262253,0.482271879911423,-0.211819291114807,0.229425176978111,-0.346693664789200,-0.005608127452433,-0.003362270537764,-0.003095780033618,0.004841176327318,-0.063491165637970,0.124771982431412,-0.111120067536831,0.028994895517826));
res += mul(Get(s3,0,dy), float4x4(-0.029512833803892,-0.036511652171612,0.009144566953182,0.116681478917599,-0.051162093877792,-0.124650254845619,0.194920986890793,0.083100229501724,-0.008865939453244,0.005887397564948,0.002826147247106,-0.006178171839565,-0.009348898194730,-0.016717763617635,-0.033570259809494,0.104983240365982));
res += mul(Get(s3,dx,-dy), float4x4(0.063993349671364,-0.073013462126255,0.098519772291183,0.018849546089768,0.021128896623850,-0.047233395278454,0.015274757519364,-0.052002333104610,0.010488894768059,-0.003008868312463,-0.008409994654357,-0.001973738428205,0.067313581705093,-0.076964505016804,0.097754009068012,-0.007509448565543));
res += mul(Get(s3,dx,0), float4x4(0.017269466072321,-0.026130175217986,0.056470513343811,-0.008736271411180,-0.020897803828120,-0.067324943840504,0.232668057084084,0.240059524774551,0.002074615098536,-0.002289113355801,-0.000992978690192,-0.006859809160233,0.048568926751614,-0.024108015000820,0.015678502619267,-0.034145317971706));
res += mul(Get(s3,dx,dy), float4x4(-0.023384822532535,-0.017461754381657,0.076729848980904,0.027383072301745,0.059311889111996,-0.074691675603390,0.104032211005688,0.045469716191292,-0.003904167329893,-0.005282684229314,0.004912333562970,-0.002999486634508,0.024810327216983,-0.062630742788315,0.034356158226728,0.047863792628050));
res = max(float4(0,0,0,0), res);
return res;
}
