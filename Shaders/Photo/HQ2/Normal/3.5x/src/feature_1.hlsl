sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.040440689772367,-0.005211894400418,-0.019234521314502,-0.073771469295025) * Get(-dx,-dy);
res += float4(0.032123520970345,0.055341616272926,0.006800315808505,0.110181048512459) * Get(-dx,0);
res += float4(-0.136217296123505,0.245998784899712,-0.152941346168518,0.133380115032196) * Get(-dx,dy);
res += float4(0.061771880835295,-0.211823761463165,0.074564859271049,0.101237505674362) * Get(0,-dy);
res += float4(0.037413626909256,0.006541498005390,0.052782159298658,0.441049873828888) * Get(0,0);
res += float4(-0.141186326742172,0.402234047651291,-0.167900934815407,-0.553075373172760) * Get(0,dy);
res += float4(0.030921120196581,0.083717629313469,0.086644373834133,-0.163982182741165) * Get(dx,-dy);
res += float4(0.018904039636254,-0.119754947721958,0.072667561471462,0.127837643027306) * Get(dx,0);
res += float4(-0.133061707019806,-0.020235054194927,-0.163880109786987,0.113770559430122) * Get(dx,dy);
res = max(float4(0,0,0,0), res);
return res;
}
