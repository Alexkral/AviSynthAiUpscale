sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.000459790986497,0.132413879036903,-0.205355241894722,0.028192143887281) * Get(-dx,-dy);
res += float4(-0.000739839393646,-0.080831669270992,0.176287025213242,0.040122762322426) * Get(-dx,0);
res += float4(-0.000371329922928,0.064460441470146,-0.246137663722038,-0.001542835612781) * Get(-dx,dy);
res += float4(-0.002564568072557,0.010678454302251,0.013760701753199,0.032111272215843) * Get(0,-dy);
res += float4(-0.000116979048471,-0.473651498556137,1.730839610099792,0.050063524395227) * Get(0,0);
res += float4(0.000721633550711,-0.113635197281837,-0.182637587189674,-0.000383357139071) * Get(0,dy);
res += float4(-0.001477398793213,0.548462927341461,-0.013418855145574,-0.083138249814510) * Get(dx,-dy);
res += float4(-0.000544547277968,-0.013810202479362,-0.447522133588791,-0.072025679051876) * Get(dx,0);
res += float4(-0.002634651958942,0.138089492917061,-0.006946076173335,-0.075118146836758) * Get(dx,dy);
res = max(float4(0,0,0,0), res);
return res;
}
