sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.083594165742397,-0.123650267720222,0.030786411836743,0.065587550401688,0.090874969959259,-0.044342774897814,-0.180597931146622,0.095338068902493,-0.028227429836988,0.075735412538052,0.085304938256741,-0.180569618940353,0.061215519905090,0.009604704566300,0.084082603454590,-0.001367348129861));
res += mul(Get(s0,-dx,0), float4x4(0.119696930050850,0.013874492608011,-0.035352516919374,-0.076042331755161,0.108698718249798,-0.062036428600550,-0.095720440149307,0.091231465339661,0.021708400920033,0.023492893204093,-0.025506706908345,0.037405833601952,-0.041252061724663,0.111629694700241,0.152657285332680,0.041918762028217));
res += mul(Get(s0,-dx,dy), float4x4(0.067270010709763,0.004482555203140,0.095638327300549,-0.000824261107482,-0.114662714302540,-0.077839627861977,-0.113705486059189,0.146941021084785,0.099406190216541,-0.016671242192388,0.110722228884697,0.109843701124191,-0.078732438385487,0.088363185524940,-0.036259520798922,0.021599913015962));
res += mul(Get(s0,0,-dy), float4x4(0.036893542855978,-0.035004448145628,0.243987113237381,0.091614969074726,0.023377817124128,-0.125643953680992,0.012836524285376,-0.010642823763192,-0.068157404661179,-0.023659685626626,0.074351415038109,-0.010074007324874,-0.060475990176201,-0.024088250473142,-0.074813686311245,-0.166753128170967));
res += mul(Get(s0,0,0), float4x4(0.085210397839546,0.001227338332683,-0.059006303548813,0.042527087032795,0.077631078660488,0.080577105283737,-0.071172244846821,0.120455153286457,-0.090241938829422,-0.033826917409897,-0.047105178236961,-0.014497494325042,-0.065129108726978,0.025912303477526,0.019314305856824,-0.033262804150581));
res += mul(Get(s0,0,dy), float4x4(-0.033098068088293,0.110908485949039,-0.069151028990746,-0.073135823011398,-0.041686695069075,-0.146119415760040,-0.023836355656385,-0.127339854836464,-0.030278759077191,0.039927929639816,0.147153288125992,0.073048688471317,0.076464466750622,-0.097256556153297,0.033014271408319,-0.076702378690243));
res += mul(Get(s0,dx,-dy), float4x4(-0.088379018008709,0.163644179701805,0.015289577655494,-0.050982341170311,-0.097337990999222,-0.032418694347143,0.013513378798962,-0.092709586024284,-0.189390003681183,-0.150168091058731,0.082907289266586,-0.077168166637421,-0.032425720244646,-0.013515007682145,0.049869596958160,-0.086722552776337));
res += mul(Get(s0,dx,0), float4x4(0.076322212815285,-0.052408069372177,-0.163748264312744,-0.086587585508823,0.029452033340931,-0.028491597622633,-0.020563011988997,0.073195099830627,-0.070673324167728,0.037481583654881,0.014096006751060,0.037181012332439,-0.073947638273239,0.093694016337395,0.037526670843363,-0.041262295097113));
res += mul(Get(s0,dx,dy), float4x4(0.019615037366748,0.030752940103412,-0.022498831152916,-0.068702004849911,0.156648740172386,-0.197626098990440,-0.148329362273216,0.041267313063145,-0.085668176412582,-0.111146844923496,-0.037648204714060,-0.085040383040905,0.059151493012905,-0.145651444792747,-0.086536236107349,-0.030522791668773));
res += mul(Get(s1,-dx,-dy), float4x4(0.025167679414153,0.158835560083389,0.179007127881050,-0.009643857367337,0.023481065407395,-0.122103594243526,-0.108539223670959,0.101792074739933,-0.116001620888710,-0.033180501312017,-0.112950585782528,-0.015366687439382,0.013957086950541,-0.056350205093622,-0.070608027279377,-0.102588422596455));
res += mul(Get(s1,-dx,0), float4x4(0.087497346103191,0.084000192582607,0.086548097431660,-0.075659140944481,-0.091817617416382,-0.200124442577362,-0.065739102661610,-0.003984251990914,-0.195852875709534,-0.067438840866089,0.010778239928186,0.116406992077827,-0.005008904263377,0.153279677033424,-0.101960986852646,-0.031620420515537));
res += mul(Get(s1,-dx,dy), float4x4(-0.019624873995781,-0.089634090662003,0.045304201543331,-0.057862799614668,-0.113076396286488,-0.094404213130474,-0.021609891206026,-0.019134420901537,-0.167967349290848,-0.068128198385239,0.095639817416668,0.138925284147263,-0.133949235081673,-0.031925398856401,0.042809333652258,-0.043551526963711));
res += mul(Get(s1,0,-dy), float4x4(-0.093100905418396,0.174665689468384,0.073231615126133,0.075258873403072,-0.174152761697769,-0.050863940268755,0.025804057717323,0.082874879240990,-0.142387181520462,-0.015181669965386,-0.148218691349030,-0.249344274401665,0.055387176573277,-0.188561916351318,0.085596263408661,0.036269363015890));
res += mul(Get(s1,0,0), float4x4(0.057122975587845,0.070099286735058,0.067504830658436,-0.017953163012862,0.032498817890882,-0.163659945130348,0.007319230586290,-0.189678803086281,0.054849490523338,-0.012636272236705,-0.052341222763062,-0.086776614189148,0.155467063188553,-0.041463099420071,-0.080658897757530,0.001908401027322));
res += mul(Get(s1,0,dy), float4x4(0.018534645438194,0.059473980218172,0.081166684627533,-0.040630217641592,-0.028630163520575,-0.060646854341030,0.015043246559799,0.035590894520283,-0.030128391459584,0.079209193587303,-0.083553038537502,0.066651389002800,0.060482975095510,-0.102726832032204,-0.021026153117418,-0.105710573494434));
res += mul(Get(s1,dx,-dy), float4x4(-0.014549271203578,0.063952654600143,0.061961956322193,-0.028899971395731,-0.042520470917225,0.014771143905818,0.124188721179962,0.049190856516361,0.051071692258120,-0.000532309175469,-0.083205841481686,0.131935834884644,0.041033573448658,-0.052531197667122,-0.045521374791861,0.090794898569584));
res += mul(Get(s1,dx,0), float4x4(-0.040488522499800,-0.013147694990039,-0.033657625317574,0.041223805397749,0.153116419911385,0.023195004090667,0.145661354064941,0.169681757688522,-0.071911916136742,0.008645415306091,-0.046574205160141,0.152593284845352,-0.111262932419777,0.043849367648363,-0.018707307055593,0.082386024296284));
res += mul(Get(s1,dx,dy), float4x4(0.045336764305830,0.090184867382050,-0.064596347510815,0.031338561326265,0.029355501756072,0.020243374630809,-0.008561454713345,0.121553391218185,0.022491930052638,-0.096582695841789,0.126653715968132,0.065070025622845,0.003928821068257,0.119872309267521,0.007423916365951,0.059377476572990));
res += mul(Get(s2,-dx,-dy), float4x4(0.118663638830185,0.096119306981564,-0.016438374295831,-0.049891266971827,-0.127348184585571,0.084429845213890,-0.137155488133430,-0.043888606131077,0.239581122994423,0.108169615268707,-0.031178563833237,-0.065339207649231,-0.213735774159431,0.095622979104519,-0.020305521786213,-0.203846693038940));
res += mul(Get(s2,-dx,0), float4x4(0.068849243223667,-0.133600860834122,-0.006838796660304,-0.078881315886974,0.066885262727737,-0.038251992315054,-0.000055495824199,-0.019482271745801,0.171701148152351,0.116315193474293,0.025998884811997,-0.092922352254391,0.027005229145288,0.050426695495844,-0.044475164264441,0.010294108651578));
res += mul(Get(s2,-dx,dy), float4x4(0.009108213707805,0.134351775050163,0.014908133074641,0.054305106401443,-0.025975244119763,0.149597287178040,-0.120020963251591,0.219314709305763,0.144319996237755,-0.093256823718548,-0.025622729212046,0.209978058934212,-0.156946733593941,0.048942677676678,-0.032340332865715,-0.039580173790455));
res += mul(Get(s2,0,-dy), float4x4(-0.023627800866961,-0.128237441182137,0.003269749926403,0.001182994921692,-0.019598165526986,-0.006823995150626,0.029637796804309,-0.116547144949436,-0.018141800537705,-0.033576328307390,-0.138656139373779,0.129474058747292,-0.065966650843620,0.086475297808647,0.194382071495056,0.088581643998623));
res += mul(Get(s2,0,0), float4x4(0.044426295906305,0.132803916931152,-0.000454528082628,-0.034259933978319,-0.211569920182228,-0.070061460137367,-0.066753610968590,0.054732378572226,-0.228486448526382,-0.104399345815182,0.091343902051449,-0.055811684578657,0.104613646864891,0.014433258213103,-0.000504445924889,-0.040297407656908));
res += mul(Get(s2,0,dy), float4x4(-0.082315482199192,-0.073105044662952,0.059078052639961,-0.093929566442966,-0.081510037183762,-0.188670009374619,0.044498994946480,-0.010068085975945,0.039937254041433,0.057491838932037,-0.017889037728310,0.054092746227980,0.129453554749489,-0.167531892657280,-0.017111770808697,0.080257490277290));
res += mul(Get(s2,dx,-dy), float4x4(-0.109638743102551,-0.021128224208951,-0.045487698167562,-0.070940069854259,-0.141576603055000,0.057970535010099,-0.101732321083546,-0.043210186064243,0.017462840303779,-0.042579282075167,-0.018959775567055,0.132894203066826,-0.068887241184711,0.039433915168047,-0.042130522429943,-0.092471651732922));
res += mul(Get(s2,dx,0), float4x4(-0.135718688368797,0.204496696591377,0.014480534009635,0.082784011960030,0.038719192147255,-0.015429985709488,-0.136123552918434,0.032395791262388,-0.046049892902374,0.018639871850610,-0.071534216403961,-0.027213264256716,-0.056093018501997,0.043917570263147,0.033713836222887,-0.049222026020288));
res += mul(Get(s2,dx,dy), float4x4(-0.028036579489708,0.043583035469055,0.004142831079662,0.004731748253107,-0.002520217560232,-0.029643923044205,-0.086022838950157,-0.034959293901920,0.099784806370735,-0.054363261908293,0.010962055996060,-0.035238422453403,0.157984048128128,0.041334308683872,0.000335268734489,0.020952371880412));
res += mul(Get(s3,-dx,-dy), float4x4(0.050820291042328,0.022767240181565,0.051631771028042,0.036305122077465,-0.013538467697799,0.058490537106991,0.119790807366371,0.047467973083258,-0.081189759075642,-0.036622773855925,-0.105722323060036,0.000350404210621,0.042532294988632,-0.026782812550664,0.078282363712788,0.026809103786945));
res += mul(Get(s3,-dx,0), float4x4(0.085774987936020,0.070859529078007,0.027535805478692,-0.023150919005275,0.030446778982878,-0.050941128283739,0.123309329152107,-0.079042017459869,0.045360915362835,-0.017769819125533,0.135559320449829,0.002026047324762,0.017242427915335,-0.160957276821136,0.117066986858845,-0.206496000289917));
res += mul(Get(s3,-dx,dy), float4x4(0.086375966668129,0.095570787787437,0.004123519174755,-0.109702542424202,0.005563499405980,0.108495071530342,0.017073223367333,-0.141120985150337,0.088615044951439,0.024455484002829,0.059676494449377,0.046689320355654,0.051224146038294,-0.022515233606100,-0.118230782449245,0.089506693184376));
res += mul(Get(s3,0,-dy), float4x4(0.114465653896332,0.008346944116056,-0.069392099976540,-0.059502609074116,-0.205369204282761,0.043614000082016,0.150283187627792,0.033090166747570,0.033012740314007,0.039632264524698,0.018888834863901,0.059475723654032,-0.003637775545940,-0.052004780620337,-0.191226229071617,0.029503794386983));
res += mul(Get(s3,0,0), float4x4(0.216406613588333,-0.034588210284710,0.063693277537823,-0.047432150691748,0.115798912942410,0.166447281837463,0.145889118313789,-0.024750357493758,-0.026728743687272,-0.085765533149242,-0.138215199112892,-0.020745093002915,-0.094411931931973,-0.082064285874367,-0.071167133748531,0.019061263650656));
res += mul(Get(s3,0,dy), float4x4(0.076072260737419,0.099242277443409,0.090352185070515,-0.154496610164642,0.062814228236675,0.016346884891391,0.046655725687742,0.045885298401117,-0.119635708630085,-0.041386466473341,0.093663409352303,0.074278146028519,0.013365627266467,0.005501567386091,0.023534214124084,-0.033672291785479));
res += mul(Get(s3,dx,-dy), float4x4(0.042480483651161,-0.032620526850224,-0.016839748248458,-0.082179136574268,-0.027398284524679,0.009402830153704,0.040515039116144,0.097326412796974,0.071962282061577,-0.126971319317818,-0.011899118311703,-0.057522132992744,-0.024256223812699,-0.010313794948161,-0.088469944894314,0.001327280770056));
res += mul(Get(s3,dx,0), float4x4(0.042070239782333,-0.038631305098534,-0.077970020473003,0.088088676333427,0.054767847061157,0.027772115543485,-0.014143203385174,0.095143295824528,0.046604257076979,-0.061995871365070,0.026670783758163,-0.030838755890727,-0.004251911304891,-0.011431301012635,-0.028375567868352,-0.067104071378708));
res += mul(Get(s3,dx,dy), float4x4(0.088705331087112,0.073097392916679,0.161926344037056,0.016660669818521,-0.082239724695683,0.188134536147118,-0.030491715297103,0.093513995409012,0.106898352503777,-0.012223648838699,0.086839996278286,0.025253692641854,0.028591006994247,0.022853970527649,-0.006473974324763,0.000334105017828));
res = max(float4(0,0,0,0), res);
return res;
}
