sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.116145215928555,-0.221684888005257,0.112870693206787,0.007288983557373) * Get(-dx,-dy);
res += float4(-0.082583449780941,-0.025560917332768,-0.038685414940119,-0.125895306468010) * Get(-dx,0);
res += float4(-0.272641479969025,-0.160093218088150,0.065093286335468,0.147083550691605) * Get(-dx,dy);
res += float4(-0.147863984107971,0.265223264694214,-0.217687785625458,0.036268331110477) * Get(0,-dy);
res += float4(0.079959236085415,0.097039625048637,-0.045891929417849,-0.027201278135180) * Get(0,0);
res += float4(-0.165336832404137,0.124806277453899,-0.094751179218292,0.015935970470309) * Get(0,dy);
res += float4(0.036380134522915,-0.158940017223358,-0.166639342904091,-0.026376333087683) * Get(dx,-dy);
res += float4(-0.057294894009829,-0.073213510215282,0.043057341128588,-0.182715639472008) * Get(dx,0);
res += float4(0.093318924307823,-0.064171560108662,0.020849881693721,-0.026983380317688) * Get(dx,dy);
res = max(float4(0,0,0,0), res);
return res;
}
