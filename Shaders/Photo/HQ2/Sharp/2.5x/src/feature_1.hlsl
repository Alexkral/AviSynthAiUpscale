sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.067040890455246,0.335941702127457,0.006491673644632,-0.034278132021427) * Get(-dx,-dy);
res += float4(0.126928299665451,-0.213054016232491,0.148472398519516,0.030088791623712) * Get(-dx,0);
res += float4(-0.238169819116592,0.154657185077667,-0.074564747512341,-0.083322823047638) * Get(-dx,dy);
res += float4(0.026581069454551,0.123221717774868,-0.250682473182678,0.092278465628624) * Get(0,-dy);
res += float4(-0.027048984542489,-0.043943721801043,0.154711380600929,-0.121567636728287) * Get(0,0);
res += float4(-0.163421362638474,-0.015635291114450,0.068322949111462,-0.113168112933636) * Get(0,dy);
res += float4(-0.153176128864288,-0.054352354258299,0.026956867426634,-0.085769042372704) * Get(dx,-dy);
res += float4(0.099250271916389,-0.119332030415535,0.161757230758667,-0.310989707708359) * Get(dx,0);
res += float4(0.458743244409561,0.012463921681046,-0.054453141987324,0.150939702987671) * Get(dx,dy);
res = max(float4(0,0,0,0), res);
return res;
}
