sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.024343671277165,-0.059327702969313,0.009130071848631,0.202871650457382) * Get(-dx,-dy);
res += float4(-0.090575605630875,-0.026561999693513,0.159094154834747,0.170396760106087) * Get(-dx,0);
res += float4(0.141045957803726,0.034637607634068,-0.114587120711803,0.035974439233541) * Get(-dx,dy);
res += float4(-0.181560143828392,0.074559196829796,0.051724448800087,-0.117031499743462) * Get(0,-dy);
res += float4(-0.018998924642801,0.131430000066757,-0.058842308819294,-0.105402402579784) * Get(0,0);
res += float4(-0.027119791135192,-0.117421694099903,0.046572551131248,-0.131717622280121) * Get(0,dy);
res += float4(0.029597690328956,-0.017001554369926,-0.074571385979652,0.211687415838242) * Get(dx,-dy);
res += float4(0.032828591763973,-0.129736617207527,0.051361069083214,-0.105818890035152) * Get(dx,0);
res += float4(-0.088050067424774,-0.124207861721516,0.073426008224487,0.012399239465594) * Get(dx,dy);
res = max(float4(0,0,0,0), res);
return res;
}
