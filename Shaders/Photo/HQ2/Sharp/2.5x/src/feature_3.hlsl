sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.004040095489472,0.003167345654219,-0.083319269120693,-0.193858787417412) * Get(-dx,-dy);
res += float4(0.123550221323967,0.057005822658539,0.028984768316150,0.089019216597080) * Get(-dx,0);
res += float4(-0.055510833859444,0.243090316653252,0.054770428687334,-0.110022366046906) * Get(-dx,dy);
res += float4(-0.143355071544647,-0.071701727807522,0.260823100805283,-0.003923377022147) * Get(0,-dy);
res += float4(-0.166633576154709,0.009786689653993,-0.084594763815403,-0.077084057033062) * Get(0,0);
res += float4(0.060019690543413,0.097740076482296,-0.014409897848964,-0.022097278386354) * Get(0,dy);
res += float4(-0.017597638070583,0.013975152745843,-0.068632766604424,-0.070333100855350) * Get(dx,-dy);
res += float4(-0.062869541347027,-0.074239224195480,-0.237420007586479,0.043515287339687) * Get(dx,0);
res += float4(0.156223550438881,-0.096497759222984,-0.059259846806526,0.023038771003485) * Get(dx,dy);
res = max(float4(0,0,0,0), res);
return res;
}
