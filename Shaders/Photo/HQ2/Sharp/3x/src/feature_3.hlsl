sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.146606355905533,-0.164348453283310,-0.078561991453171,0.061698127537966) * Get(-dx,-dy);
res += float4(0.300876051187515,0.244610771536827,-0.065148063004017,0.116380855441093) * Get(-dx,0);
res += float4(0.253439486026764,-0.180028006434441,0.020232001319528,-0.236345723271370) * Get(-dx,dy);
res += float4(-0.065438956022263,-0.126350224018097,0.111114703118801,-0.137640535831451) * Get(0,-dy);
res += float4(-0.249408841133118,0.462286531925201,-0.039651222527027,-0.095880068838596) * Get(0,0);
res += float4(-0.161549225449562,0.092373117804527,-0.029680289328098,0.068708047270775) * Get(0,dy);
res += float4(-0.080636203289032,-0.009291779249907,-0.025026116520166,0.061786092817783) * Get(dx,-dy);
res += float4(0.071634657680988,-0.159517139196396,-0.123599581420422,0.035242170095444) * Get(dx,0);
res += float4(-0.046698041260242,-0.022796425968409,0.004126181360334,-0.144054457545280) * Get(dx,dy);
res = max(float4(0,0,0,0), res);
return res;
}
