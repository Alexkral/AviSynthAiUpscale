sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.127011954784393,-0.135915443301201,-0.086216598749161,0.089710660278797,-0.098523251712322,0.031758982688189,0.029594851657748,-0.039227016270161,0.006499321199954,-0.039317917078733,-0.038534250110388,0.018091199919581,0.082036815583706,-0.078200586140156,-0.061511691659689,0.009288782253861));
res += mul(Get(s0,-dx,0), float4x4(0.082033999264240,-0.023345999419689,0.016339499503374,0.038282703608274,-0.107070550322533,0.025281574577093,-0.177160277962685,0.033643826842308,-0.021370664238930,0.097385816276073,0.015464266762137,-0.012298870831728,-0.067902036011219,0.080340243875980,-0.067043773829937,-0.065160490572453));
res += mul(Get(s0,-dx,dy), float4x4(-0.013133468106389,0.004669229499996,-0.132355645298958,0.086746640503407,-0.071444422006607,-0.005467996466905,0.039626654237509,0.059265796095133,0.117950826883316,0.026174463331699,0.036461833864450,0.024398515000939,0.056711371988058,0.113565713167191,0.002979196142405,-0.049149535596371));
res += mul(Get(s0,0,-dy), float4x4(0.047937173396349,-0.010823620483279,-0.054605826735497,0.003297377610579,0.033896438777447,0.030143795534968,-0.037921223789454,0.121850453317165,0.022164529189467,-0.011935714632273,-0.037022523581982,0.031346473842859,0.103499747812748,0.041760191321373,0.014736436307430,-0.125013530254364));
res += mul(Get(s0,0,0), float4x4(0.038645509630442,0.008299252018332,-0.053615346550941,0.025296743959188,-0.027238827198744,0.039178229868412,0.148254811763763,-0.008681891486049,0.065133579075336,-0.006282779853791,0.023580688983202,0.022495875135064,-0.075191304087639,-0.004861199297011,-0.000394641218008,-0.059905827045441));
res += mul(Get(s0,0,dy), float4x4(0.061797928065062,0.044030703604221,-0.053942639380693,-0.029856836423278,0.010437110438943,0.124708391726017,0.022196089848876,0.074779741466045,0.143057003617287,-0.035995684564114,-0.001117265666835,-0.076993905007839,0.132887527346611,0.065019071102142,0.031096613034606,0.022070311009884));
res += mul(Get(s0,dx,-dy), float4x4(0.027005685493350,-0.003438095794991,-0.069379359483719,-0.111073829233646,-0.056308735162020,0.019418615847826,0.062127884477377,0.037453290075064,0.012486078776419,0.039443440735340,-0.000947111751884,-0.063916191458702,-0.112620718777180,-0.083914995193481,0.002919800346717,0.100684970617294));
res += mul(Get(s0,dx,0), float4x4(-0.035422742366791,-0.067405484616756,-0.029546281322837,-0.049973536282778,0.096679434180260,0.072388306260109,0.004752047359943,0.004984815139323,-0.033836264163256,-0.108663693070412,-0.081629909574986,-0.016633955761790,0.078290939331055,-0.001319436356425,0.065446957945824,-0.216314837336540));
res += mul(Get(s0,dx,dy), float4x4(-0.081937238574028,0.065732270479202,-0.000745065277442,0.037001751363277,0.026523865759373,0.270992189645767,-0.055999930948019,-0.111199393868446,0.052174486219883,0.067450396716595,-0.048804134130478,-0.044692892581224,-0.144581571221352,0.087760932743549,-0.015651756897569,-0.094421774148941));
res += mul(Get(s1,-dx,-dy), float4x4(0.030258307233453,-0.053715936839581,-0.044481407850981,0.102909117937088,0.090383060276508,0.010209479369223,-0.069061517715454,-0.083753786981106,0.003253510221839,0.088067278265953,-0.040737334638834,0.028230959549546,-0.033951222896576,-0.072722099721432,-0.033659048378468,0.080095261335373));
res += mul(Get(s1,-dx,0), float4x4(0.092066414654255,-0.006053297780454,0.195533975958824,-0.011334829963744,0.198652416467667,-0.012800919823349,0.067091241478920,0.104293249547482,-0.051327645778656,0.019749036058784,-0.045801982283592,0.040844667702913,0.008011979982257,-0.110463134944439,-0.060625523328781,0.041323140263557));
res += mul(Get(s1,-dx,dy), float4x4(0.104646034538746,0.049916297197342,-0.002560080261901,0.088803470134735,-0.105590365827084,0.030459754168987,0.006034851539880,0.077574618160725,-0.038845881819725,0.003842038335279,0.039138227701187,0.001348504913040,0.034817550331354,-0.070549875497818,0.095168955624104,-0.111517742276192));
res += mul(Get(s1,0,-dy), float4x4(-0.045451804995537,-0.107019983232021,-0.005546594504267,-0.085257723927498,0.062902122735977,-0.113457232713699,0.027520267292857,0.129850462079048,-0.057378664612770,0.108716063201427,-0.058315899223089,0.004772641230375,-0.098113439977169,0.045227821916342,0.007180901244283,0.011326047591865));
res += mul(Get(s1,0,0), float4x4(-0.014265176840127,-0.040697123855352,0.068444505333900,0.069481998682022,0.050012782216072,-0.111327230930328,0.084731243550777,-0.033659499138594,0.028110058978200,-0.030353758484125,0.034612510353327,-0.016939554363489,0.033553887158632,-0.044321324676275,-0.062717601656914,0.068431437015533));
res += mul(Get(s1,0,dy), float4x4(-0.043855357915163,0.054319187998772,-0.016007062047720,0.025734903290868,-0.044386699795723,0.075911775231361,-0.129450529813766,-0.059642098844051,-0.036034438759089,0.063035145401955,-0.148217648267746,-0.089302755892277,-0.063889235258102,0.080662153661251,-0.034524522721767,-0.049595173448324));
res += mul(Get(s1,dx,-dy), float4x4(0.036883812397718,-0.015227149240673,-0.031468074768782,-0.014695926569402,0.026091687381268,-0.091869935393333,-0.075369693338871,-0.058164935559034,0.041415710002184,-0.211357608437538,0.033319499343634,0.062618330121040,-0.151242688298225,-0.004402842838317,0.086004972457886,-0.084315568208694));
res += mul(Get(s1,dx,0), float4x4(0.016284221783280,0.079135410487652,-0.049111589789391,-0.077934592962265,0.063214994966984,0.059771515429020,0.063445962965488,0.038206525146961,0.062119796872139,0.020867709070444,-0.002738767303526,0.083456195890903,-0.056844335049391,0.194266542792320,0.049460798501968,0.113162480294704));
res += mul(Get(s1,dx,dy), float4x4(0.019414145499468,0.071825660765171,0.089019365608692,0.134689047932625,-0.041842825710773,-0.142556637525558,0.014375299215317,-0.071037165820599,-0.015010321512818,-0.021476177498698,0.033827845007181,-0.019876727834344,0.082479044795036,-0.049294520169497,0.003395958803594,0.019950455054641));
res += mul(Get(s2,-dx,-dy), float4x4(-0.080907925963402,-0.087560899555683,-0.004039424005896,0.019071169197559,0.077192954719067,-0.089304797351360,-0.101021543145180,-0.036658301949501,-0.074938796460629,0.053612422198057,-0.049136281013489,-0.151931554079056,0.066408075392246,-0.009030350483954,0.161704584956169,0.190301656723022));
res += mul(Get(s2,-dx,0), float4x4(-0.100653447210789,0.088153034448624,0.070883445441723,0.096414200961590,-0.019200870767236,0.081214025616646,-0.102673292160034,-0.095970265567303,-0.086354337632656,0.143473237752914,0.097218163311481,-0.092909924685955,0.014176436699927,0.066287279129028,0.044385138899088,-0.020391710102558));
res += mul(Get(s2,-dx,dy), float4x4(0.049528423696756,-0.116461910307407,0.146725699305534,0.030020613223314,0.091591157019138,0.097162164747715,0.031215477734804,0.028084067627788,-0.093029290437698,-0.040871180593967,-0.098959363996983,0.083917014300823,0.086802966892719,0.020921161398292,0.058397106826305,-0.059485152363777));
res += mul(Get(s2,0,-dy), float4x4(0.084669813513756,-0.042582787573338,-0.119233042001724,-0.060076884925365,0.062691338360310,-0.057819157838821,-0.082317017018795,0.136324375867844,0.023984478786588,0.054427333176136,0.024198425933719,0.087001971900463,-0.073247104883194,-0.094709582626820,0.042398750782013,-0.099646672606468));
res += mul(Get(s2,0,0), float4x4(-0.033839207142591,-0.037101432681084,0.034153826534748,0.026384392753243,-0.089423969388008,-0.023650117218494,-0.017363155260682,-0.010387507267296,-0.064628630876541,0.165197506546974,0.093032509088516,0.031281024217606,-0.038423612713814,-0.081157743930817,-0.063402332365513,-0.012412273325026));
res += mul(Get(s2,0,dy), float4x4(0.112291961908340,-0.008679840713739,-0.003795871976763,0.024725984781981,-0.031847491860390,0.048983018845320,0.036340925842524,-0.124696955084801,-0.018760623410344,-0.016889484599233,-0.011400071904063,-0.089606575667858,0.004135491326451,0.008684411644936,0.078400917351246,-0.062725551426411));
res += mul(Get(s2,dx,-dy), float4x4(-0.077739290893078,-0.059334516525269,0.158926278352737,-0.170583292841911,-0.001941489637829,0.027427576482296,-0.004591207485646,0.119020365178585,-0.007572575937957,0.035756468772888,-0.042494483292103,0.000642751227133,-0.035710923373699,0.001433046883903,-0.045033000409603,0.014646241441369));
res += mul(Get(s2,dx,0), float4x4(-0.048929098993540,0.037252664566040,-0.112171389162540,-0.097742602229118,0.036007046699524,0.008997463621199,0.113548845052719,0.053280021995306,0.039691705256701,-0.078749716281891,0.020995154976845,0.008907999843359,0.132356345653534,0.086088486015797,-0.004062778316438,-0.022167325019836));
res += mul(Get(s2,dx,dy), float4x4(-0.136677160859108,-0.042359683662653,0.090816535055637,-0.087359517812729,-0.124231249094009,0.000061238075432,-0.065403647720814,0.126546055078506,-0.041172828525305,-0.035037904977798,0.137745454907417,-0.017394732683897,0.030406458303332,-0.074685260653496,-0.029451752081513,-0.009343526326120));
res += mul(Get(s3,-dx,-dy), float4x4(-0.074320659041405,-0.095515012741089,0.001538353273645,0.006032600067556,-0.139509096741676,-0.000428254832514,-0.047811187803745,0.015844753012061,0.128696605563164,-0.066547721624374,-0.156487017869949,0.018379159271717,0.134783774614334,0.070232495665550,0.031688895076513,-0.001391203724779));
res += mul(Get(s3,-dx,0), float4x4(-0.020917480811477,-0.078835159540176,0.156584575772285,-0.041988722980022,-0.014257382601500,0.024660564959049,0.031134936958551,0.034590985625982,0.086210213601589,0.081399142742157,-0.296379595994949,-0.111835129559040,0.122815586626530,0.050372272729874,0.120370954275131,-0.036578744649887));
res += mul(Get(s3,-dx,dy), float4x4(-0.056451261043549,0.019807085394859,-0.001697957166471,0.014233159832656,0.007647595833987,0.061521358788013,-0.010823976248503,0.135153934359550,-0.099101148545742,0.065480291843414,-0.118338510394096,0.047115623950958,0.071757569909096,-0.079085975885391,-0.026152111589909,0.098554015159607));
res += mul(Get(s3,0,-dy), float4x4(0.067702516913414,-0.108612105250359,-0.172765329480171,-0.075108990073204,0.025965174660087,0.060367856174707,-0.112704373896122,0.041551090776920,-0.011759559623897,0.179305076599121,-0.061284780502319,0.008588013239205,0.037022415548563,0.010627450421453,0.013473413884640,-0.018598018214107));
res += mul(Get(s3,0,0), float4x4(-0.019351821392775,-0.062663801014423,0.102815210819244,-0.149131610989571,0.054303068667650,0.074712380766869,0.034472309052944,0.018895454704762,0.095988385379314,0.061157986521721,-0.073877267539501,-0.007013632450253,0.004277076572180,-0.003361808368936,0.041209384799004,-0.006938065402210));
res += mul(Get(s3,0,dy), float4x4(0.106098152697086,0.150944367051125,0.092492073774338,0.016312837600708,-0.077282249927521,-0.157380789518356,-0.215297728776932,-0.064300172030926,0.062140226364136,-0.009878769516945,-0.117415323853493,-0.050167713314295,0.125051036477089,-0.185706451535225,0.036181434988976,0.027702275663614));
res += mul(Get(s3,dx,-dy), float4x4(-0.077120237052441,0.108783006668091,0.054437998682261,-0.124065361917019,-0.023824909701943,-0.023869264870882,0.113406494259834,-0.109294429421425,-0.077835828065872,-0.077834315598011,0.042220640927553,-0.095624767243862,-0.042683813720942,-0.145471170544624,-0.052586261183023,-0.088351599872112));
res += mul(Get(s3,dx,0), float4x4(-0.108100078999996,-0.106285065412521,0.029540661722422,0.084690310060978,-0.113921560347080,0.002844683127478,-0.005745225120336,0.002475757850334,0.061246164143085,0.153492048382759,0.065902598202229,-0.020804725587368,0.082154273986816,0.033217899501324,0.084636576473713,-0.155054748058319));
res += mul(Get(s3,dx,dy), float4x4(-0.013143925927579,0.067314550280571,-0.105945870280266,0.014916100539267,0.057663545012474,-0.068373315036297,-0.006983635947108,-0.057161118835211,0.259293526411057,-0.097319550812244,0.110466092824936,-0.034102723002434,-0.094323180615902,0.050888080149889,-0.044855922460556,0.004132234957069));
res = max(float4(0,0,0,0), res);
return res;
}
