sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.116967409849167,0.113805077970028,-0.020264241844416,-0.113472409546375) * Get(-dx,-dy);
res += float4(-0.153666511178017,-0.164386302232742,-0.140582129359245,-0.178287103772163) * Get(-dx,0);
res += float4(0.117039896547794,-0.070303857326508,-0.059260003268719,0.261211037635803) * Get(-dx,dy);
res += float4(-0.174040794372559,0.104192614555359,-0.218452736735344,0.154065445065498) * Get(0,-dy);
res += float4(0.011786132119596,0.260214656591415,0.083594694733620,-0.299110889434814) * Get(0,0);
res += float4(0.132153674960136,0.213299438357353,-0.017366059124470,0.162657350301743) * Get(0,dy);
res += float4(0.007087309844792,-0.081032291054726,0.132364958524704,0.072315506637096) * Get(dx,-dy);
res += float4(0.065388515591621,-0.158392310142517,0.290300726890564,-0.042985256761312) * Get(dx,0);
res += float4(-0.015907811000943,-0.021188409999013,0.034757696092129,0.164272308349609) * Get(dx,dy);
res = max(float4(0,0,0,0), res);
return res;
}
