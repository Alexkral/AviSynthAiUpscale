sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.003787847701460,-0.028774606063962,0.033583093434572,0.240969285368919,-0.103112511336803,0.001043426804245,-0.064025700092316,0.047544013708830,-0.046676930040121,0.102031655609608,-0.091667845845222,-0.028488326817751,0.159602567553520,0.000757361995056,-0.061665005981922,0.024442439898849));
res += mul(Get(s0,-dx,0), float4x4(0.088267631828785,-0.034994862973690,-0.068493656814098,0.144465580582619,-0.133423388004303,0.066841453313828,0.114043131470680,0.043979637324810,0.009877416305244,0.105891831219196,0.032544188201427,0.105805099010468,0.033710498362780,-0.010212756693363,-0.050011653453112,-0.051742959767580));
res += mul(Get(s0,-dx,dy), float4x4(0.008016526699066,-0.066577181220055,-0.091245576739311,-0.032792776823044,-0.035012088716030,-0.024373104795814,0.149571388959885,-0.105110391974449,-0.030293844640255,-0.027707485482097,-0.072064220905304,-0.002808188553900,-0.078185930848122,-0.064694888889790,-0.021764302626252,-0.001347712008283));
res += mul(Get(s0,0,-dy), float4x4(0.065352067351341,-0.103795006871223,-0.090087898075581,0.146287173032761,0.009158155880868,0.052077796310186,-0.002600237261504,-0.170698091387749,-0.081309601664543,0.006472871173173,0.054627511650324,-0.005503473337740,0.158628255128860,-0.036989547312260,-0.008495679125190,-0.058962959796190));
res += mul(Get(s0,0,0), float4x4(0.194663077592850,-0.041764128953218,0.106981486082077,-0.073849283158779,-0.029529472813010,0.045481428503990,-0.089640125632286,0.087564133107662,-0.014157547615469,0.054088190197945,-0.078196465969086,-0.050361663103104,0.027326170355082,-0.004724490456283,-0.113154590129852,-0.005157489795238));
res += mul(Get(s0,0,dy), float4x4(0.039460036903620,0.007559275720268,0.084040820598602,0.019827172160149,0.061348397284746,-0.120479755103588,0.021211309358478,0.074740730226040,-0.005195976700634,0.000159490591614,-0.044194083660841,0.080235779285431,0.024582050740719,0.046767745167017,-0.114611506462097,-0.027407733723521));
res += mul(Get(s0,dx,-dy), float4x4(-0.142823323607445,-0.062664292752743,-0.171096906065941,0.067258521914482,0.079872719943523,-0.035637602210045,-0.011571162380278,-0.095608428120613,-0.062393043190241,0.085510142147541,-0.023872978985310,-0.171810865402222,0.084171399474144,-0.014872955158353,0.050351511687040,0.011360846459866));
res += mul(Get(s0,dx,0), float4x4(-0.046429451555014,0.000085398220108,0.064144998788834,0.150202766060829,-0.031734764575958,0.082675762474537,-0.082260139286518,0.015117915347219,0.074574314057827,-0.113691791892052,-0.030080527067184,-0.065702624619007,-0.015027629211545,0.102162308990955,-0.108411297202110,-0.074348986148834));
res += mul(Get(s0,dx,dy), float4x4(0.295985996723175,0.013373819179833,0.098049245774746,-0.050501469522715,0.150074884295464,-0.004918409977108,0.022208828479052,0.096748188138008,-0.035664130002260,-0.063709370791912,-0.154192328453064,-0.035673063248396,-0.044099967926741,-0.078036993741989,-0.006180814467371,0.026858536526561));
res += mul(Get(s1,-dx,-dy), float4x4(-0.022277140989900,0.125131815671921,0.068713292479515,0.067208312451839,-0.150268167257309,-0.017941055819392,0.037167061120272,-0.095279149711132,-0.028459234163165,0.074689246714115,0.122707009315491,0.059950124472380,-0.022468300536275,-0.064776897430420,-0.003648376092315,0.035385739058256));
res += mul(Get(s1,-dx,0), float4x4(0.012005215510726,0.075696162879467,-0.075445696711540,0.078568242490292,0.007360121700913,0.064139902591705,-0.061592258512974,0.116778887808323,0.008804758079350,0.060689963400364,0.040534738451242,0.019962806254625,0.008551096543670,0.008009098470211,-0.044544007629156,0.027060119435191));
res += mul(Get(s1,-dx,dy), float4x4(0.046822547912598,-0.064841270446777,0.039922140538692,0.028836425393820,0.041320491582155,-0.028892127797008,-0.114464461803436,-0.090694472193718,0.040906842797995,-0.113641954958439,0.013082971796393,-0.091007828712463,0.135610476136208,-0.087739773094654,0.033902686089277,-0.003312426153570));
res += mul(Get(s1,0,-dy), float4x4(-0.110903464257717,0.002594582503662,-0.047111146152020,-0.135302603244781,0.005405658856034,0.010667910799384,-0.090003602206707,0.002473179716617,0.152243375778198,0.046087294816971,-0.005518206395209,0.043395649641752,-0.080383174121380,0.027817295864224,0.035956766456366,-0.115662425756454));
res += mul(Get(s1,0,0), float4x4(0.080788761377335,-0.148800298571587,0.005630962084979,-0.002091289963573,0.157822370529175,-0.092484317719936,-0.005316754803061,0.034787327051163,0.093154713511467,-0.087848357856274,0.017685007303953,0.024148602038622,0.016184482723475,-0.006598481442779,-0.062936030328274,-0.117579333484173));
res += mul(Get(s1,0,dy), float4x4(-0.045359198004007,-0.166610032320023,-0.017464041709900,-0.075219117105007,-0.014736941084266,0.004528061952442,0.031087987124920,0.055312607437372,-0.113308884203434,-0.009154467843473,0.068994745612144,-0.077107146382332,-0.013428213074803,-0.080096080899239,0.100266955792904,-0.084252044558525));
res += mul(Get(s1,dx,-dy), float4x4(-0.091859713196754,0.081267252564430,0.097929857671261,0.073627211153507,0.075501397252083,0.070339515805244,0.061762582510710,0.094219587743282,-0.035925034433603,-0.012049800716341,-0.165998265147209,0.090375550091267,0.057022668421268,-0.034629162400961,0.051895067095757,-0.084396809339523));
res += mul(Get(s1,dx,0), float4x4(0.104722402989864,-0.046427190303802,-0.149853110313416,0.109210282564163,-0.001276209484786,0.013444930315018,-0.039783056825399,-0.047778196632862,-0.029262516647577,-0.039689913392067,-0.135035395622253,-0.092444099485874,0.056657221168280,-0.034738332033157,0.042965438216925,0.009820170700550));
res += mul(Get(s1,dx,dy), float4x4(-0.035023998469114,-0.033737245947123,0.047729745507240,0.010104422457516,0.118583239614964,-0.026949614286423,-0.059732496738434,-0.046855680644512,-0.041515633463860,-0.008434500545263,-0.025681927800179,0.050578404217958,-0.092537581920624,0.117396116256714,0.119844406843185,-0.038131911307573));
res += mul(Get(s2,-dx,-dy), float4x4(-0.031713850796223,-0.042405821382999,0.032446663826704,0.042697280645370,0.122271485626698,-0.093173131346703,0.060450781136751,0.076814055442810,-0.006447443738580,0.055956028401852,-0.006920808926225,-0.038165491074324,0.015199137851596,0.071522846817970,-0.067627057433128,0.111180625855923));
res += mul(Get(s2,-dx,0), float4x4(-0.094848625361919,0.073765024542809,0.089471310377121,0.016029633581638,0.071065641939640,-0.053746424615383,0.097078233957291,0.106013506650925,0.062382269650698,0.036120016127825,-0.082705482840538,0.022460669279099,0.021340476348996,-0.002662452403456,0.171496167778969,-0.066194087266922));
res += mul(Get(s2,-dx,dy), float4x4(0.113136895000935,0.014903604052961,-0.117615520954132,-0.113825678825378,-0.092964977025986,0.037128340452909,0.043631933629513,0.001357468776405,-0.033594526350498,0.030394775792956,0.093314051628113,0.086218662559986,-0.084320269525051,0.113111302256584,0.158253923058510,0.005967648699880));
res += mul(Get(s2,0,-dy), float4x4(-0.003463253844529,-0.063502840697765,0.155792221426964,0.071427218616009,-0.181049793958664,-0.007139339111745,-0.001832766458392,-0.205309405922890,-0.038771696388721,-0.055660456418991,-0.067587129771709,0.073494836688042,0.040412046015263,-0.110582344233990,0.105895601212978,0.070081815123558));
res += mul(Get(s2,0,0), float4x4(-0.159358173608780,0.066824853420258,-0.067792654037476,0.008008440956473,-0.059153027832508,-0.042876139283180,0.201479569077492,0.070803880691528,0.139217019081116,0.015597514808178,0.007593803573400,-0.083892516791821,0.154326081275940,-0.108299516141415,-0.012813623994589,0.076335899531841));
res += mul(Get(s2,0,dy), float4x4(0.090175896883011,-0.029327614232898,-0.076708182692528,0.015445114113390,0.086082778871059,-0.030891239643097,0.009937915019691,0.064881332218647,0.039393879473209,0.141473248600960,0.026914637535810,-0.057682141661644,0.144558966159821,0.009977097623050,0.053639870136976,0.037897504866123));
res += mul(Get(s2,dx,-dy), float4x4(-0.151367902755737,0.051290057599545,0.186477720737457,0.082870021462440,0.123473063111305,0.049355972558260,0.001545800827444,-0.097650058567524,0.072860963642597,-0.009096442721784,0.048787608742714,-0.124350674450397,-0.046584267169237,-0.065838366746902,0.045965556055307,0.040297843515873));
res += mul(Get(s2,dx,0), float4x4(0.045945983380079,-0.042518068104982,0.065857045352459,0.175884813070297,0.069456830620766,0.004302933812141,-0.036048870533705,0.004549124278128,-0.120987422764301,0.073196269571781,-0.047561522573233,0.107403762638569,-0.230478286743164,0.099763743579388,0.015314031392336,0.100164934992790));
res += mul(Get(s2,dx,dy), float4x4(-0.092022165656090,0.076746203005314,0.020895874127746,0.111181005835533,-0.147560134530067,-0.104885943233967,0.051898602396250,-0.105317398905754,-0.002042793435976,0.104942880570889,-0.084692277014256,-0.072460167109966,-0.050183929502964,-0.009674151428044,-0.100779123604298,0.187005162239075));
res += mul(Get(s3,-dx,-dy), float4x4(0.086472198367119,-0.027395104989409,0.021561330184340,-0.062021683901548,0.024823324754834,-0.142795205116272,0.026847520843148,-0.047313433140516,0.061283566057682,-0.058423273265362,0.121343336999416,-0.072314351797104,-0.199786290526390,-0.069552503526211,0.006653279997408,-0.056281916797161));
res += mul(Get(s3,-dx,0), float4x4(0.098959162831306,-0.100146792829037,-0.108539849519730,-0.123097315430641,-0.083543501794338,-0.183506071567535,0.091918259859085,0.051290869712830,0.074076138436794,0.057603362947702,0.013021232560277,0.159567713737488,-0.009906320832670,-0.021778063848615,0.018452636897564,0.006839890033007));
res += mul(Get(s3,-dx,dy), float4x4(-0.080920733511448,0.031157353892922,-0.225855007767677,-0.011487727053463,0.101204134523869,-0.053034029901028,-0.097775802016258,-0.064548045396805,-0.004829341545701,-0.116095416247845,0.050462987273932,0.058676052838564,-0.048589408397675,-0.014167011715472,-0.158224448561668,-0.065330348908901));
res += mul(Get(s3,0,-dy), float4x4(-0.080300144851208,0.082777805626392,0.031470946967602,-0.162027820944786,0.024334408342838,0.043527137488127,-0.158833429217339,-0.005747553426772,-0.056691996753216,0.013651671819389,-0.076572060585022,0.070189006626606,-0.047166269272566,-0.106768190860748,0.036456912755966,-0.118078283965588));
res += mul(Get(s3,0,0), float4x4(0.072701886296272,-0.039126209914684,0.053606554865837,-0.006331526674330,-0.019063590094447,-0.095706708729267,-0.070333682000637,0.077256441116333,-0.090872712433338,-0.014469628222287,0.137269109487534,0.086975768208504,0.070386178791523,-0.040297269821167,-0.095133222639561,0.043612908571959));
res += mul(Get(s3,0,dy), float4x4(-0.084640495479107,-0.054904315620661,0.028392486274242,-0.073410943150520,0.106909617781639,0.124566346406937,0.098850995302200,0.035420447587967,-0.106810778379440,0.118995048105717,0.071124881505966,0.060967922210693,-0.018173500895500,0.017830062657595,-0.011254535987973,-0.003927957266569));
res += mul(Get(s3,dx,-dy), float4x4(-0.041788358241320,0.020359776914120,0.062347490340471,-0.082271568477154,0.043395102024078,-0.041199777275324,0.000108729916974,0.107508130371571,0.023348148912191,0.033034775406122,0.028890913352370,0.001627251622267,0.003426627023146,0.156628623604774,-0.063332721590996,-0.070208847522736));
res += mul(Get(s3,dx,0), float4x4(0.136469215154648,0.036483943462372,0.095873899757862,0.145140543580055,0.133677989244461,0.011643144302070,0.068946078419685,0.012240787036717,-0.077048875391483,0.024577885866165,0.044117406010628,-0.056116051971912,0.001226077554747,0.058120232075453,-0.029111888259649,0.020123099908233));
res += mul(Get(s3,dx,dy), float4x4(0.066902928054333,0.061885431408882,0.076712474226952,0.019328802824020,0.013783873058856,0.061139166355133,0.030296603217721,-0.015834063291550,-0.005231171380728,0.050252091139555,-0.024059578776360,0.143120661377907,0.002594049787149,0.081463173031807,0.029628325253725,-0.004011225420982));
res = max(float4(0,0,0,0), res);
return res;
}
