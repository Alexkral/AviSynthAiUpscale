sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(-0.161479532718658,-0.054260071367025,-0.015420605428517,0.002437931485474) * Get(-dx,-dy);
res += float4(0.056305680423975,-0.108347766101360,0.121279932558537,0.025975031778216) * Get(-dx,0);
res += float4(0.103581100702286,-0.212400853633881,0.286225885152817,-0.110023081302643) * Get(-dx,dy);
res += float4(0.147709384560585,-0.193748548626900,-0.119871348142624,-0.126197874546051) * Get(0,-dy);
res += float4(0.230929821729660,-0.012842449359596,-0.182053878903389,0.046609871089458) * Get(0,0);
res += float4(-0.242224425077438,-0.133083269000053,0.086725190281868,-0.080791577696800) * Get(0,dy);
res += float4(0.019236806780100,0.160552904009819,0.005014288704842,-0.010848676785827) * Get(dx,-dy);
res += float4(0.016929434612393,0.197028741240501,-0.007313001900911,0.004557983949780) * Get(dx,0);
res += float4(-0.017385004088283,0.157040968537331,0.003179933875799,0.024376720190048) * Get(dx,dy);
res = max(float4(0,0,0,0), res);
return res;
}
