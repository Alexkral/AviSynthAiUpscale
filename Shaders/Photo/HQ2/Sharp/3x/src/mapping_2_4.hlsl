sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.047434993088245,0.043446660041809,-0.003676596330479,-0.079338222742081,-0.022840896621346,-0.012801696546376,0.105380661785603,-0.029059737920761,-0.052873939275742,0.007746951188892,0.049637738615274,-0.068154446780682,-0.015556152909994,-0.021472077816725,-0.056588903069496,-0.016515467315912));
res += mul(Get(s0,-dx,0), float4x4(-0.011062415316701,-0.014345051720738,0.140993237495422,-0.010230613872409,0.034723341464996,0.012962654232979,0.095311269164085,-0.002404191298410,-0.075826376676559,0.142121866345406,-0.003160401480272,-0.080814957618713,0.051418732851744,0.032933786511421,-0.110401675105095,-0.149066165089607));
res += mul(Get(s0,-dx,dy), float4x4(0.051218342036009,-0.054864805191755,0.066371157765388,0.032034706324339,0.105730921030045,-0.061805270612240,-0.014528957195580,-0.054604966193438,0.062581047415733,-0.022551525384188,0.070759199559689,-0.018613461405039,-0.063298173248768,-0.146136164665222,0.058112110942602,0.109203532338142));
res += mul(Get(s0,0,-dy), float4x4(0.059412781149149,-0.029081549495459,-0.000868575356435,-0.088500104844570,0.077175483107567,0.136767983436584,-0.000305144232698,-0.000282213062746,-0.063166767358780,0.129415139555931,-0.016039507463574,-0.069937512278557,0.014676000922918,-0.003440242726356,-0.112873777747154,0.010974989272654));
res += mul(Get(s0,0,0), float4x4(0.063261799514294,0.005831662099808,-0.027736552059650,0.073286071419716,-0.121146701276302,0.029413631185889,-0.060345005244017,-0.070482358336449,-0.018087314441800,-0.016754368320107,-0.084963932633400,-0.037090770900249,0.122990705072880,-0.030957343056798,0.085248492658138,-0.010442340746522));
res += mul(Get(s0,0,dy), float4x4(0.024559130892158,-0.028806870803237,-0.029173944145441,-0.136104673147202,-0.098981954157352,-0.237380266189575,-0.142185628414154,-0.002453260123730,-0.058991730213165,0.059714119881392,-0.126305982470512,0.114141143858433,0.059616576880217,0.076157264411449,-0.091732114553452,0.075075447559357));
res += mul(Get(s0,dx,-dy), float4x4(-0.011149349622428,-0.126953110098839,0.075153663754463,0.008763275109231,-0.122826531529427,-0.054996266961098,0.009185414761305,0.037019390612841,0.035236384719610,-0.150956705212593,0.078482404351234,-0.181538432836533,-0.009566503576934,0.153739079833031,0.000725960009731,-0.073334142565727));
res += mul(Get(s0,dx,0), float4x4(-0.008857037872076,0.083042234182358,-0.034255355596542,0.005486767273396,-0.042675238102674,0.049099799245596,0.027331387624145,-0.107514403760433,0.038825873285532,-0.026504153385758,0.092420883476734,0.055529497563839,-0.032193198800087,-0.083074159920216,-0.015149813145399,-0.025255510583520));
res += mul(Get(s0,dx,dy), float4x4(0.064992643892765,-0.025685383006930,-0.014975917525589,-0.115010373294353,-0.042818173766136,0.088049985468388,-0.096961826086044,-0.070785529911518,-0.017657047137618,0.062618583440781,-0.148448333144188,-0.022709954530001,-0.090670205652714,-0.017463428899646,0.071700483560562,-0.013413037173450));
res += mul(Get(s1,-dx,-dy), float4x4(0.024755816906691,-0.107053995132446,0.009895583614707,-0.014849176630378,-0.054386757314205,-0.042959503829479,0.021447684615850,0.100220158696175,0.033689890056849,0.041496682912111,-0.101687587797642,-0.147347480058670,0.136223241686821,-0.027425749227405,-0.023171747103333,0.015478504821658));
res += mul(Get(s1,-dx,0), float4x4(0.193347007036209,-0.057584505528212,0.140597015619278,-0.019828081130981,0.045046351850033,0.076939389109612,-0.069080673158169,0.203622266650200,-0.065911367535591,0.092944301664829,0.022839101031423,0.073172673583031,-0.122892864048481,0.149544045329094,0.065205425024033,0.056380171328783));
res += mul(Get(s1,-dx,dy), float4x4(0.069167971611023,0.002286937087774,-0.057595774531364,-0.053439013659954,0.051656454801559,0.044816683977842,-0.056763026863337,0.064370930194855,0.186167642474174,0.065841905772686,-0.035491257905960,-0.090516924858093,-0.048074498772621,0.019180310890079,0.094618298113346,0.007371931802481));
res += mul(Get(s1,0,-dy), float4x4(-0.065796196460724,0.066141568124294,-0.011318880133331,0.083306893706322,-0.139430001378059,-0.164827913045883,0.040943697094917,0.010500986129045,-0.013713676482439,0.038720909506083,-0.102126732468605,-0.046467773616314,0.096684738993645,0.060769006609917,0.175386458635330,0.024420153349638));
res += mul(Get(s1,0,0), float4x4(-0.083043150603771,-0.045649245381355,-0.097325496375561,-0.111442469060421,-0.151428788900375,-0.049445778131485,0.020384209230542,0.037637099623680,0.002819607499987,-0.021722929552197,0.054186977446079,-0.112224832177162,-0.002744564786553,0.110864371061325,0.018502475693822,-0.042114764451981));
res += mul(Get(s1,0,dy), float4x4(-0.035940527915955,-0.052024424076080,-0.067004106938839,0.055617887526751,-0.114478088915348,0.011216046288610,0.054817300289869,0.093684718012810,-0.056785494089127,-0.050181772559881,0.087875664234161,-0.061758369207382,0.015582996420562,-0.032676376402378,-0.015973545610905,-0.056111752986908));
res += mul(Get(s1,dx,-dy), float4x4(-0.078735932707787,-0.050119839608669,0.102490797638893,-0.062078408896923,-0.057771831750870,0.036042548716068,-0.129866957664490,-0.005478173494339,-0.043372843414545,-0.060216285288334,-0.044826380908489,0.055594693869352,-0.063167430460453,0.125227943062782,-0.051209088414907,0.086427435278893));
res += mul(Get(s1,dx,0), float4x4(0.170530900359154,-0.084968917071819,0.118178986012936,0.096909351646900,0.011754441075027,0.108665212988853,-0.096108399331570,-0.116199098527431,0.019053617492318,-0.003833705326542,-0.024747632443905,-0.064187884330750,0.013254321180284,-0.063673883676529,0.018909784033895,0.099312327802181));
res += mul(Get(s1,dx,dy), float4x4(0.090382002294064,0.071014150977135,0.115759484469891,-0.023933762684464,0.117760971188545,0.055143948644400,0.024258922785521,-0.029785411432385,-0.131128832697868,-0.136103868484497,0.001335289329290,0.039659526199102,-0.044862918555737,0.088082082569599,-0.145900353789330,-0.042176142334938));
res += mul(Get(s2,-dx,-dy), float4x4(-0.018415978178382,0.055276166647673,0.028436169028282,0.032608382403851,-0.064895480871201,0.009185499511659,-0.086530975997448,0.074729338288307,-0.051200035959482,-0.099025741219521,-0.010926505550742,0.089998006820679,0.020443653687835,-0.056997027248144,0.019881021231413,-0.019371831789613));
res += mul(Get(s2,-dx,0), float4x4(-0.000793418148533,-0.065249703824520,0.125865310430527,0.012898115441203,0.009830584749579,-0.034756120294333,-0.028246568515897,-0.048546101897955,-0.091754846274853,0.027648720890284,0.020606696605682,-0.009484278969467,-0.071818135678768,-0.021756572648883,-0.053683344274759,0.054035849869251));
res += mul(Get(s2,-dx,dy), float4x4(-0.044284734874964,-0.021007284522057,0.169176355004311,0.103607192635536,-0.123770624399185,0.028020050376654,0.001825624727644,0.038043309003115,-0.050006866455078,0.012285354547203,0.060718946158886,0.054053191095591,-0.010711590759456,-0.069217957556248,0.054613869637251,0.143071725964546));
res += mul(Get(s2,0,-dy), float4x4(-0.049221858382225,-0.010830811224878,-0.019729962572455,-0.127660825848579,0.107592709362507,-0.118656836450100,-0.000556595332455,-0.042037948966026,-0.012628858909011,0.000581991043873,-0.012175326235592,-0.117755986750126,-0.037058323621750,0.030474819242954,0.108177751302719,0.121864400804043));
res += mul(Get(s2,0,0), float4x4(-0.008266151882708,0.084974490106106,-0.093290433287621,-0.102387174963951,0.110399894416332,-0.030266294255853,0.004349821247160,-0.089078843593597,-0.051465094089508,-0.010823696851730,-0.024078462272882,0.076727345585823,0.049266591668129,0.024966204538941,-0.121897511184216,-0.048722732812166));
res += mul(Get(s2,0,dy), float4x4(-0.025918841362000,-0.044806674122810,-0.014493252150714,-0.117306508123875,0.014590604230762,0.073638953268528,0.067156873643398,-0.001359989284538,0.035168882459402,0.070247776806355,-0.069787338376045,0.157930418848991,0.001350180013105,0.038477718830109,0.011750813573599,-0.014704337343574));
res += mul(Get(s2,dx,-dy), float4x4(-0.126725658774376,0.057438842952251,-0.018176538869739,-0.062407538294792,0.047989785671234,0.094785429537296,-0.058719180524349,0.041150204837322,0.109663657844067,0.021509710699320,-0.188110560178757,-0.046496205031872,0.028609072789550,-0.026875145733356,0.000289192394121,-0.045084565877914));
res += mul(Get(s2,dx,0), float4x4(0.111022181808949,0.104193300008774,0.001381254056469,-0.125899478793144,0.033735804259777,0.152729049324989,0.031039541587234,0.084345534443855,-0.143308624625206,-0.098455190658569,0.051248960196972,-0.149078309535980,0.101208157837391,0.084155574440956,-0.147055298089981,-0.063806861639023));
res += mul(Get(s2,dx,dy), float4x4(-0.066393017768860,-0.101654782891273,-0.016916874796152,0.019794095307589,0.030988521873951,-0.049770165234804,-0.034953515976667,0.014742180705070,-0.055595047771931,0.074605226516724,0.138537794351578,0.089969672262669,-0.138413012027740,-0.003519718302414,-0.117313951253891,0.054023362696171));
res += mul(Get(s3,-dx,-dy), float4x4(-0.081629350781441,0.026860710233450,0.067588128149509,0.001967695774511,-0.037710823118687,-0.122384637594223,-0.077423036098480,-0.031788844615221,0.039169944822788,0.056404367089272,0.012840844690800,0.050943665206432,0.053764823824167,-0.003741508815438,-0.089567229151726,0.001217557233758));
res += mul(Get(s3,-dx,0), float4x4(-0.091472901403904,-0.086892858147621,-0.034201145172119,-0.062693983316422,0.092535689473152,0.145854920148849,0.000378887052648,0.121523432433605,-0.148742884397507,-0.003321560099721,-0.039179123938084,-0.038792151957750,-0.075371161103249,0.065081320703030,0.070624031126499,-0.002445988124236));
res += mul(Get(s3,-dx,dy), float4x4(0.101072050631046,-0.067587353289127,0.041296157985926,-0.132388934493065,0.002118525560945,0.036827564239502,0.002342043444514,0.032361272722483,-0.092146150767803,0.009326408617198,0.033903554081917,-0.000015250727301,0.149928063154221,-0.081508815288544,-0.021950371563435,-0.014254525303841));
res += mul(Get(s3,0,-dy), float4x4(-0.067344941198826,-0.092986822128296,0.033582810312510,-0.007267454173416,-0.166159391403198,-0.157788202166557,-0.142754852771759,-0.057267270982265,0.061475269496441,0.036008480936289,0.028331015259027,-0.132846787571907,-0.056266918778419,0.019779840484262,-0.010185141116381,0.042047712951899));
res += mul(Get(s3,0,0), float4x4(-0.183221682906151,-0.020019698888063,-0.091322429478168,-0.002636533696204,-0.027576088905334,0.041134271770716,0.012208178639412,-0.134667366743088,-0.046640921384096,-0.158344537019730,0.050784442573786,-0.002716537797824,0.012165310792625,-0.027461580932140,-0.042284764349461,0.079678036272526));
res += mul(Get(s3,0,dy), float4x4(-0.081145234405994,-0.031623106449842,-0.049955267459154,-0.096439398825169,-0.055047139525414,-0.047970596700907,0.072654291987419,0.081254869699478,-0.112455613911152,0.063220195472240,0.009054139256477,0.053445700556040,-0.124772027134895,0.001301600830629,0.040806818753481,0.055667474865913));
res += mul(Get(s3,dx,-dy), float4x4(-0.100197330117226,0.053361520171165,-0.038302604109049,-0.048907589167356,0.009246088564396,0.013240965083241,0.004169861320406,0.069287322461605,0.070599108934402,-0.051883488893509,0.104220479726791,-0.061803448945284,-0.076058961451054,-0.184715658426285,0.006308380048722,-0.032060455530882));
res += mul(Get(s3,dx,0), float4x4(-0.102879650890827,0.004190913867205,-0.040671754628420,0.057071529328823,0.052441813051701,0.134786903858185,-0.021341521292925,-0.017774935811758,0.074075579643250,0.058421809226274,0.036161970347166,-0.083546064794064,-0.064458020031452,0.059867557138205,0.071887224912643,-0.058721397072077));
res += mul(Get(s3,dx,dy), float4x4(-0.026975398883224,-0.063012227416039,0.065457478165627,0.003216510405764,0.099973686039448,-0.061805266886950,0.077752128243446,0.080417998135090,-0.045629989355803,0.065197430551052,-0.077749446034431,0.041722621768713,-0.216846019029617,-0.054617889225483,0.076602190732956,0.000232066115132));
res = max(float4(0,0,0,0), res);
return res;
}
