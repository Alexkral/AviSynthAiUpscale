sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.041010659188032,0.076949022710323,-0.084338016808033,0.084210522472858) * Get(-dx,-dy);
res += float4(0.165163606405258,-0.061583526432514,0.052861563861370,-0.008470264263451) * Get(-dx,0);
res += float4(-0.075414717197418,-0.037827551364899,-0.100020676851273,-0.070728361606598) * Get(-dx,dy);
res += float4(0.248180180788040,0.222784504294395,-0.050977684557438,0.040812663733959) * Get(0,-dy);
res += float4(-0.063920691609383,-0.093437209725380,0.141230106353760,-0.002040650462732) * Get(0,0);
res += float4(-0.168255791068077,-0.120849058032036,0.010884578339756,0.000083895523858) * Get(0,dy);
res += float4(0.008934916928411,0.233464092016220,-0.048563163727522,-0.125978574156761) * Get(dx,-dy);
res += float4(0.092100106179714,-0.023588698357344,-0.088508263230324,-0.126988127827644) * Get(dx,0);
res += float4(0.032560802996159,-0.175683662295341,-0.031406167894602,0.083558246493340) * Get(dx,dy);
res = max(float4(0,0,0,0), res);
return res;
}
