sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.123537667095661,-0.039452590048313,-0.050464678555727,-0.150155439972878,-0.097965575754642,-0.156316280364990,-0.027785435318947,-0.059081379324198,-0.182165890932083,0.065350063145161,-0.169213965535164,0.130488783121109,-0.026234390214086,-0.245362505316734,0.116000339388847,-0.041438270360231));
res += mul(Get(s0,-dx,0), float4x4(0.157681688666344,0.128541067242622,-0.111623942852020,-0.097128085792065,0.059439446777105,0.068355724215508,0.044033903628588,0.083911031484604,0.070637017488480,0.046399381011724,0.006366275716573,0.004614005796611,-0.025758655741811,0.218351021409035,-0.097109526395798,-0.020901691168547));
res += mul(Get(s0,-dx,dy), float4x4(0.145891338586807,-0.109777137637138,-0.074766770005226,-0.063074797391891,-0.049311716109514,0.034301023930311,0.120427899062634,0.059724010527134,0.023733768612146,0.013631862588227,0.000103839855001,0.036507088690996,-0.139436259865761,-0.045384071767330,-0.073589578270912,0.025330755859613));
res += mul(Get(s0,0,-dy), float4x4(0.097826160490513,-0.079426616430283,-0.340505033731461,-0.016656324267387,0.180973246693611,0.059076983481646,-0.039576537907124,0.070571929216385,0.039286371320486,0.082516372203827,0.045502454042435,-0.099986933171749,-0.091952435672283,-0.087127171456814,-0.051808148622513,0.045272585004568));
res += mul(Get(s0,0,0), float4x4(0.004534237552434,0.024813871830702,0.075815685093403,0.084875933825970,-0.096604458987713,0.008644350804389,-0.107572495937347,-0.031624343246222,0.066103987395763,0.021824151277542,0.040850326418877,0.017809379845858,-0.107736885547638,-0.076412670314312,-0.053896550089121,-0.228803426027298));
res += mul(Get(s0,0,dy), float4x4(0.146437764167786,-0.164320692420006,0.009068762883544,-0.037612583488226,0.151010036468506,-0.030566759407520,-0.040038783103228,0.026152638718486,-0.040666636079550,0.123591691255569,0.072294540703297,-0.122403912246227,-0.084164388477802,-0.003338734619319,0.155127674341202,0.097162865102291));
res += mul(Get(s0,dx,-dy), float4x4(-0.061440955847502,-0.037523679435253,0.011371188797057,-0.100533306598663,0.007704271934927,0.004765004385263,0.034832809120417,0.065678372979164,-0.076016120612621,-0.026694146916270,-0.022833088412881,0.105844147503376,0.253420770168304,-0.175426825881004,0.203771725296974,0.041561082005501));
res += mul(Get(s0,dx,0), float4x4(-0.013428064063191,0.023805625736713,-0.078492946922779,-0.189861372113228,-0.158963456749916,0.044458311051130,0.006287419702858,-0.187927827239037,-0.037095900624990,-0.013406873680651,0.067082881927490,-0.092164769768715,-0.018673697486520,0.024093497544527,-0.190008446574211,-0.125584647059441));
res += mul(Get(s0,dx,dy), float4x4(0.031099610030651,0.142118200659752,-0.036587417125702,0.020439902320504,-0.172158345580101,-0.066452100872993,-0.018738981336355,0.025732195004821,0.191127926111221,0.175137579441071,0.059292711317539,-0.065530747175217,-0.206859827041626,-0.012269606813788,0.075580827891827,-0.014223004691303));
res += mul(Get(s1,-dx,-dy), float4x4(-0.103784874081612,0.023546809330583,-0.085451476275921,0.047353643923998,0.005750018171966,0.119863577187061,-0.086939960718155,0.020439086481929,0.038451410830021,0.091581329703331,-0.001200926140882,-0.034023489803076,-0.236975848674774,-0.087373040616512,-0.021306902170181,-0.254777103662491));
res += mul(Get(s1,-dx,0), float4x4(-0.024775883182883,0.052324686199427,-0.109376259148121,0.067975759506226,0.061368163675070,-0.078189626336098,0.105976745486259,-0.115784704685211,-0.073491469025612,0.165770500898361,-0.148801162838936,-0.047944251447916,0.057264048606157,-0.050188720226288,0.009171003475785,-0.005744581110775));
res += mul(Get(s1,-dx,dy), float4x4(0.204673230648041,-0.220060318708420,-0.039423197507858,-0.041346590965986,0.044400807470083,-0.171566635370255,-0.155646637082100,-0.016799282282591,-0.022151049226522,-0.099819757044315,0.084893286228180,-0.182890519499779,0.186604827642441,0.098785251379013,0.171360760927200,-0.147913798689842));
res += mul(Get(s1,0,-dy), float4x4(-0.049880173057318,0.201637819409370,0.102086834609509,-0.019848639145494,-0.086297318339348,0.021497054025531,-0.065845116972923,-0.090365163981915,-0.010191607289016,0.104791969060898,0.116274662315845,-0.062714897096157,0.063023522496223,-0.104284122586250,-0.023559343069792,0.087770156562328));
res += mul(Get(s1,0,0), float4x4(0.107919134199619,0.029622159898281,-0.041874516755342,0.173100709915161,-0.037470027804375,0.043662726879120,-0.093594461679459,-0.057360179722309,-0.039802774786949,-0.017515653744340,0.058683935552835,-0.029686823487282,-0.249096885323524,-0.044364821165800,-0.003441899549216,-0.054267555475235));
res += mul(Get(s1,0,dy), float4x4(-0.007899109274149,0.066533714532852,0.121439993381500,-0.156296759843826,-0.111387088894844,-0.128139600157738,-0.087559945881367,0.087709069252014,0.137440010905266,-0.000808776414488,-0.054375190287828,0.017407922074199,-0.091874726116657,-0.054279912263155,-0.097422994673252,-0.049706686288118));
res += mul(Get(s1,dx,-dy), float4x4(-0.096169546246529,-0.031602460891008,-0.091076061129570,-0.111148133873940,0.346504658460617,0.040780045092106,0.054608959704638,-0.012098932638764,-0.135879024863243,-0.036652442067862,0.000852211436722,-0.191726475954056,0.187799856066704,-0.129430532455444,-0.117551006376743,0.039737727493048));
res += mul(Get(s1,dx,0), float4x4(-0.048720918595791,-0.025069003924727,0.031899292021990,-0.025179522112012,-0.060154151171446,0.100322797894478,0.075933076441288,-0.090827189385891,-0.066469535231590,0.093528650701046,-0.126332268118858,-0.037883821874857,-0.049028396606445,-0.040962904691696,0.109751343727112,0.095258675515652));
res += mul(Get(s1,dx,dy), float4x4(0.086353108286858,0.133097976446152,0.061064336448908,-0.193274229764938,-0.133696675300598,-0.053601555526257,0.115971818566322,-0.008268332108855,0.070406228303909,0.051514785736799,-0.027397349476814,-0.043694164603949,0.047150645405054,-0.021848604083061,-0.096186190843582,0.005740935914218));
res += mul(Get(s2,-dx,-dy), float4x4(-0.109663583338261,0.124189689755440,-0.028963616117835,0.016615925356746,-0.085127480328083,0.194761261343956,0.090879254043102,0.086692854762077,0.121326692402363,0.204014822840691,-0.107527874410152,0.065096490085125,0.116123147308826,-0.102264568209648,-0.105144403874874,-0.060580108314753));
res += mul(Get(s2,-dx,0), float4x4(-0.028640009462833,0.008545105345547,0.093135483562946,-0.029981939122081,-0.166108965873718,-0.001176165416837,-0.062401220202446,0.024171475321054,0.031772915273905,0.102153122425079,0.057807542383671,-0.020458072423935,-0.007356532849371,0.110624559223652,-0.154691338539124,-0.132946521043777));
res += mul(Get(s2,-dx,dy), float4x4(-0.005838872864842,0.005770034622401,0.072151191532612,-0.186387345194817,-0.119956098496914,0.184330150485039,-0.012401145882905,-0.087517946958542,0.015737762674689,0.021733809262514,-0.153819411993027,-0.303570330142975,0.265290260314941,0.004405909217894,-0.032861378043890,0.007311134133488));
res += mul(Get(s2,0,-dy), float4x4(0.004571327939630,-0.032718475908041,-0.046015121042728,0.058188375085592,0.114966765046120,-0.069348677992821,0.113231971859932,0.006665963213891,0.055217046290636,0.081474542617798,-0.344653576612473,-0.031285110861063,0.048285916447639,0.058300029486418,-0.017497967928648,-0.021913455799222));
res += mul(Get(s2,0,0), float4x4(0.008465264923871,0.237368136644363,-0.131903097033501,-0.048377033323050,-0.057754456996918,0.008868343196809,-0.163705751299858,0.086395725607872,0.071170665323734,0.032249286770821,-0.089163817465305,0.032448090612888,-0.110891260206699,0.046215020120144,0.162106499075890,-0.013178791850805));
res += mul(Get(s2,0,dy), float4x4(0.115053586661816,-0.087797299027443,-0.280142962932587,0.012709461152554,0.153622329235077,0.060279898345470,-0.068457990884781,-0.049539849162102,-0.087643079459667,-0.011104006320238,-0.075253210961819,-0.054345648735762,0.073780708014965,-0.060396932065487,0.099938385188580,-0.049380939453840));
res += mul(Get(s2,dx,-dy), float4x4(0.026361774653196,-0.028879176825285,0.098976887762547,0.092626191675663,0.115832373499870,0.020429549738765,0.063117794692516,0.009757454507053,0.074695885181427,0.271897226572037,0.095774695277214,0.048558045178652,-0.033292811363935,0.025550328195095,-0.129271268844604,0.008017187938094));
res += mul(Get(s2,dx,0), float4x4(-0.016977988183498,-0.023343212902546,0.190379142761230,0.026670843362808,0.058269772678614,0.159390941262245,0.179225519299507,-0.151725396513939,0.097488448023796,-0.017308663576841,-0.087818883359432,-0.084266066551208,0.077910594642162,0.062022600322962,0.151315912604332,0.114542007446289));
res += mul(Get(s2,dx,dy), float4x4(-0.114760525524616,0.104271717369556,0.083477906882763,-0.011585865169764,-0.108576290309429,-0.061365615576506,-0.070967867970467,-0.008866290561855,0.043874502182007,0.037403278052807,0.116769760847092,0.045351505279541,-0.119397394359112,-0.022694475948811,0.035659674555063,-0.005858310498297));
res += mul(Get(s3,-dx,-dy), float4x4(-0.093692131340504,-0.089069783687592,0.128728345036507,-0.031241841614246,-0.132921382784843,-0.066266439855099,0.094527922570705,0.151745706796646,0.127413615584373,-0.031874679028988,-0.053106006234884,0.069307565689087,0.095282077789307,-0.049632694572210,0.025842094793916,-0.173776686191559));
res += mul(Get(s3,-dx,0), float4x4(-0.005375420209020,0.033476360142231,0.021053573116660,0.022904958575964,0.062740452587605,0.034809805452824,-0.037905067205429,-0.088149532675743,-0.037124972790480,0.106105968356133,0.169070735573769,-0.007120982278138,0.280884861946106,-0.105157196521759,0.032095532864332,-0.060096200555563));
res += mul(Get(s3,-dx,dy), float4x4(-0.012257155030966,-0.227750748395920,0.110799960792065,-0.011528293602169,-0.127066716551781,0.073262341320515,-0.055279899388552,0.085189163684845,0.045039005577564,-0.090423658490181,-0.043023232370615,0.115222878754139,0.068502694368362,-0.177682235836983,-0.026689741760492,-0.007288619410247));
res += mul(Get(s3,0,-dy), float4x4(-0.008035680279136,0.061230029910803,0.003152980934829,-0.034047052264214,-0.058398969471455,-0.053159270435572,-0.040247637778521,0.086713932454586,0.082511685788631,0.173182323575020,-0.128344893455505,-0.118882998824120,0.103920064866543,0.014449229463935,-0.053638659417629,0.001999951666221));
res += mul(Get(s3,0,0), float4x4(-0.078278236091137,-0.102029353380203,0.011442771181464,-0.025301402434707,-0.068481944501400,-0.035836566239595,-0.023824833333492,-0.045403160154819,-0.024778032675385,0.109355203807354,-0.154597878456116,0.111710891127586,0.088047981262207,0.038413390517235,-0.302214443683624,-0.055716108530760));
res += mul(Get(s3,0,dy), float4x4(0.129399120807648,0.074649617075920,0.007360244169831,0.045874536037445,0.020022183656693,0.083166949450970,-0.022291168570518,0.070588022470474,0.061151184141636,0.031367328017950,0.149636864662170,-0.163555160164833,-0.054652035236359,-0.060487028211355,-0.039550252258778,0.117471769452095));
res += mul(Get(s3,dx,-dy), float4x4(-0.009025136008859,-0.007951307110488,0.073950067162514,-0.083122245967388,-0.091467052698135,0.175560608506203,-0.019241139292717,-0.003751500509679,0.240001842379570,-0.051476787775755,0.003643929958344,0.009839635342360,0.085805438458920,0.008874913677573,-0.085431262850761,0.018189292401075));
res += mul(Get(s3,dx,0), float4x4(0.065845578908920,0.109831035137177,-0.079053677618504,-0.018345065414906,-0.124811857938766,0.197648748755455,0.115350596606731,-0.060743078589439,-0.112547717988491,-0.101462922990322,0.094065636396408,-0.001554993796162,0.018769979476929,0.091148063540459,-0.115458704531193,-0.148600280284882));
res += mul(Get(s3,dx,dy), float4x4(-0.036031480878592,-0.005522156134248,0.020634936168790,-0.000893770949915,0.032052271068096,-0.027140980586410,0.026755614206195,-0.091013751924038,-0.049173910170794,-0.092196479439735,0.005308981519192,-0.119984053075314,-0.058286551386118,0.111053317785263,0.053470447659492,0.151809349656105));
res = max(float4(0,0,0,0), res);
return res;
}
