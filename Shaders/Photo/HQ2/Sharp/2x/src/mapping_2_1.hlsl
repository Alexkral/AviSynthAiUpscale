sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.226693317294121,-0.076958939433098,0.112476274371147,-0.058212872594595,-0.067281782627106,0.044944539666176,0.116761378943920,0.082891844213009,0.056475199759007,0.076855733990669,-0.015514866448939,-0.004758240655065,-0.080938786268234,-0.011174018494785,-0.104464843869209,-0.154836520552635));
res += mul(Get(s0,-dx,0), float4x4(-0.028526617214084,-0.057216454297304,0.130761012434959,0.055287681519985,0.015330334194005,0.176658898591995,-0.008357001468539,-0.181680455803871,0.078030541539192,0.026107894256711,0.106613330543041,-0.047321688383818,0.258034914731979,0.047913111746311,0.129226833581924,0.138779491186142));
res += mul(Get(s0,-dx,dy), float4x4(0.000169967024704,0.061044149100780,0.025425346568227,0.000095890565717,-0.129219159483910,0.042991109192371,-0.056787051260471,-0.097190044820309,0.087311662733555,0.050403792411089,0.143808364868164,0.104036346077919,0.093709819018841,-0.044751126319170,-0.201912865042686,-0.142406046390533));
res += mul(Get(s0,0,-dy), float4x4(0.177730873227119,0.059746142476797,-0.053687524050474,0.007382711395621,-0.069565437734127,-0.063650526106358,-0.022668596357107,-0.153956934809685,-0.270416826009750,0.043839436024427,-0.070354551076889,0.134277418255806,-0.069525629281998,-0.023078350350261,-0.034647881984711,0.016704794019461));
res += mul(Get(s0,0,0), float4x4(-0.186016112565994,-0.107395432889462,-0.077245324850082,-0.099068596959114,-0.066146627068520,-0.000815037288703,-0.117713421583176,0.042396400123835,-0.047789555042982,-0.105683647096157,0.042362857609987,0.151427701115608,0.021542012691498,-0.216149315237999,-0.065580643713474,-0.098846197128296));
res += mul(Get(s0,0,dy), float4x4(0.107711404561996,-0.233991831541061,0.015864348039031,0.029784405604005,-0.062788672745228,0.039566464722157,0.021934513002634,-0.067023836076260,-0.097081862390041,-0.091171003878117,-0.125454619526863,-0.070759594440460,-0.012538366951048,0.086829498410225,-0.085948996245861,0.063878498971462));
res += mul(Get(s0,dx,-dy), float4x4(0.106809206306934,0.109060771763325,-0.114538706839085,-0.036681201308966,-0.033541746437550,0.078230179846287,-0.112255625426769,-0.005688928999007,-0.025493618100882,-0.041858866810799,0.017834873870015,0.004838790278882,0.016475129872561,0.000305356748868,0.051617544144392,-0.150701448321342));
res += mul(Get(s0,dx,0), float4x4(0.109623298048973,0.129011571407318,0.029391454532743,-0.063011191785336,-0.071687713265419,-0.177874654531479,0.082965455949306,0.030665518715978,-0.164607271552086,0.007948230020702,0.064348086714745,-0.017636626958847,-0.165425285696983,-0.102607659995556,-0.250074744224548,-0.208683639764786));
res += mul(Get(s0,dx,dy), float4x4(0.079857937991619,0.031828280538321,-0.083086788654327,-0.111066386103630,0.105807080864906,-0.038676500320435,0.137622296810150,-0.001435145153664,0.026307053864002,-0.055278550833464,-0.134759575128555,-0.161500558257103,0.191472053527832,-0.137592360377312,0.002158418064937,0.068838328123093));
res += mul(Get(s1,-dx,-dy), float4x4(0.066946573555470,0.082374177873135,0.161141648888588,0.123711630702019,0.028895044699311,-0.058828428387642,-0.091596789658070,0.046648073941469,-0.150456115603447,0.015994464978576,0.105272971093655,0.034378658980131,-0.040517907589674,-0.140021279454231,0.232781544327736,-0.127766117453575));
res += mul(Get(s1,-dx,0), float4x4(-0.119368463754654,-0.056447606533766,-0.122355826199055,-0.048618525266647,0.039818935096264,0.008068770170212,0.130710199475288,-0.071120820939541,-0.186457484960556,0.127855300903320,-0.120542496442795,-0.016698716208339,0.020462661981583,0.051584284752607,-0.114680528640747,-0.035748273134232));
res += mul(Get(s1,-dx,dy), float4x4(0.064591735601425,0.138947337865829,-0.051135417073965,-0.038760524243116,-0.137724101543427,-0.150604471564293,-0.024390615522861,-0.001435787533410,-0.034448914229870,-0.124292485415936,-0.089833490550518,0.083365440368652,-0.097888790071011,0.064111597836018,-0.143647253513336,0.066968120634556));
res += mul(Get(s1,0,-dy), float4x4(-0.093411795794964,0.010195199400187,0.037444580346346,-0.106717690825462,-0.076750218868256,-0.114116758108139,-0.106370866298676,-0.204140856862068,-0.205944418907166,-0.040144719183445,0.021925535053015,0.045864023268223,-0.150888562202454,-0.001945425872691,0.019156062975526,-0.114984706044197));
res += mul(Get(s1,0,0), float4x4(0.068225130438805,-0.060424301773310,-0.051489599049091,-0.039344161748886,-0.134564787149429,0.026069533079863,-0.000570613192394,0.106380075216293,0.083719134330750,0.012236943468451,-0.141750857234001,0.025926975533366,-0.304130554199219,0.004083344712853,0.050240635871887,-0.003912503365427));
res += mul(Get(s1,0,dy), float4x4(0.030315514653921,-0.108136296272278,-0.104321919381618,-0.003753630677238,-0.210650101304054,-0.198623687028885,0.061834704130888,-0.039094861596823,0.003228455781937,-0.177930593490601,-0.007847648113966,-0.017529767006636,-0.040092054754496,0.072264187037945,0.034364197403193,0.068791292607784));
res += mul(Get(s1,dx,-dy), float4x4(0.046309180557728,0.141118869185448,0.107928991317749,0.013049958273768,-0.141510948538780,0.124822959303856,-0.095882505178452,0.049872305244207,-0.129291385412216,-0.037070121616125,0.043681535869837,0.026058236137033,0.107675544917583,0.073927313089371,-0.049831323325634,-0.208903506398201));
res += mul(Get(s1,dx,0), float4x4(0.209383860230446,-0.064492695033550,-0.212213173508644,0.003732657525688,0.032706357538700,-0.068273678421974,-0.172390788793564,0.108009591698647,0.051922246813774,-0.189691781997681,-0.028605425730348,0.017572646960616,0.077629812061787,-0.096207983791828,-0.049136474728584,-0.083636984229088));
res += mul(Get(s1,dx,dy), float4x4(-0.002884798450395,0.031516090035439,-0.038162130862474,0.063834026455879,0.041867237538099,-0.042166080325842,0.009497808292508,0.143708601593971,0.239398688077927,0.054846819490194,-0.053325019776821,0.039191346615553,-0.092594571411610,0.234349593520164,0.038355413824320,-0.127355992794037));
res += mul(Get(s2,-dx,-dy), float4x4(0.030670870095491,-0.076392993330956,-0.018221240490675,-0.004013950005174,0.008995296433568,0.027555447071791,-0.072488360106945,0.060826733708382,0.258719652891159,0.155087307095528,0.136743113398552,-0.027072243392467,0.029385257512331,-0.113093517720699,0.089502468705177,-0.044747356325388));
res += mul(Get(s2,-dx,0), float4x4(-0.058252494782209,-0.100695259869099,0.057597622275352,-0.171498373150826,-0.068356633186340,0.101112090051174,-0.058035749942064,0.035292290151119,-0.051740210503340,0.062331616878510,-0.015660867094994,-0.130922734737396,-0.004500579554588,-0.022899221628904,-0.022113500162959,0.127931743860245));
res += mul(Get(s2,-dx,dy), float4x4(-0.109898515045643,-0.018563916906714,0.156901642680168,-0.054280016571283,0.046705953776836,-0.073312260210514,-0.140309542417526,0.043478991836309,0.005923335440457,0.109086811542511,-0.004302301444113,-0.142134085297585,-0.117973580956459,0.134640455245972,-0.112415760755539,-0.037031557410955));
res += mul(Get(s2,0,-dy), float4x4(0.167943149805069,0.012306646443903,-0.099155686795712,0.178720325231552,-0.038241211324930,-0.002284167567268,-0.032516907900572,-0.129973441362381,-0.191380769014359,-0.018884725868702,-0.059922598302364,-0.063792482018471,-0.180142670869827,-0.150406450033188,0.083408974111080,0.167649373412132));
res += mul(Get(s2,0,0), float4x4(-0.134441182017326,0.018189646303654,-0.151091605424881,-0.124914757907391,0.002877837512642,-0.124443642795086,0.037085842341185,0.127627596259117,-0.126565128564835,0.028230408206582,-0.032634358853102,-0.023722756654024,-0.083735197782516,0.083664767444134,0.290447890758514,-0.070317663252354));
res += mul(Get(s2,0,dy), float4x4(0.085630252957344,-0.050627809017897,0.005643343552947,0.044505055993795,0.146969243884087,-0.123630426824093,0.034369494765997,0.060071822255850,0.116378135979176,0.020351029932499,0.028244420886040,-0.119683764874935,0.068990439176559,-0.164624467492104,0.109735257923603,0.025780463591218));
res += mul(Get(s2,dx,-dy), float4x4(-0.069526359438896,0.046699583530426,0.042283829301596,0.112460121512413,0.006735675036907,-0.144287914037704,0.041416529566050,-0.014483777806163,0.061197292059660,0.149741277098656,-0.162957191467285,0.016709106042981,-0.116600610315800,-0.141209304332733,0.007641216274351,0.002642403589562));
res += mul(Get(s2,dx,0), float4x4(-0.355358272790909,-0.017230534926057,-0.045795567333698,0.037762332707644,-0.022109068930149,0.037401489913464,-0.048676576465368,-0.091646417975426,-0.146289452910423,0.121207401156425,-0.099421307444572,-0.116320237517357,0.054118588566780,0.112341217696667,0.170649185776711,0.196061149239540));
res += mul(Get(s2,dx,dy), float4x4(0.013693970628083,0.114888563752174,0.001566000282764,-0.043429370969534,-0.092504359781742,0.211654737591743,-0.059761136770248,0.210176870226860,0.109879218041897,-0.019351862370968,-0.144438758492470,-0.149811610579491,0.003003397723660,-0.261518925428391,0.035515673458576,-0.017748065292835));
res += mul(Get(s3,-dx,-dy), float4x4(0.097875252366066,0.165240958333015,0.083077609539032,0.117401741445065,0.080503530800343,0.043583516031504,-0.170295432209969,-0.070264421403408,0.176343783736229,-0.027528386563063,-0.123019322752953,0.046551283448935,-0.247741535305977,-0.122175730764866,-0.118543773889542,-0.092518858611584));
res += mul(Get(s3,-dx,0), float4x4(0.157943725585938,-0.020188387483358,0.022631853818893,0.053410861641169,-0.064781002700329,-0.053032524883747,-0.025986930355430,0.064479380846024,-0.073086902499199,-0.021686142310500,-0.022097704932094,-0.141011402010918,-0.116546049714088,-0.050511021167040,0.027077194303274,-0.136517405509949));
res += mul(Get(s3,-dx,dy), float4x4(-0.004251352511346,0.110068306326866,0.137612804770470,-0.066191628575325,-0.011783671565354,0.105319984257221,0.024701565504074,-0.032524589449167,0.146813541650772,-0.046734184026718,-0.121981509029865,0.010327006690204,0.186221927404404,0.180212587118149,0.089642256498337,-0.027457989752293));
res += mul(Get(s3,0,-dy), float4x4(-0.121449314057827,-0.005354932043701,0.035194583237171,-0.024299979209900,-0.016778117045760,-0.073108606040478,0.049408014863729,0.057770751416683,-0.044418659061193,-0.114736661314964,-0.065339490771294,0.028306800872087,0.022636828944087,-0.072713591158390,0.002515941858292,0.007216558326036));
res += mul(Get(s3,0,0), float4x4(0.037291485816240,0.116004601120949,0.070103980600834,0.023818224668503,-0.149002864956856,-0.054803464561701,0.153335288167000,0.008694128133357,-0.060260705649853,0.030060617253184,-0.064673103392124,-0.078770376741886,-0.065935216844082,-0.114656366407871,-0.064397193491459,-0.006012881174684));
res += mul(Get(s3,0,dy), float4x4(-0.001414695056155,-0.084300242364407,0.085876241326332,0.047591701149940,0.149984911084175,-0.018332377076149,-0.047289457172155,0.134995922446251,0.078091546893120,-0.084879890084267,-0.024538721889257,0.027282021939754,-0.060887336730957,0.170828610658646,-0.045664053410292,0.187673464417458));
res += mul(Get(s3,dx,-dy), float4x4(0.173134043812752,0.200382322072983,-0.006789656821638,0.070261515676975,0.066924102604389,0.078823864459991,-0.139032527804375,0.059577886015177,-0.140072241425514,-0.062816120684147,0.160466581583023,0.163571223616600,0.073038458824158,0.045748375356197,-0.065974213182926,0.129674062132835));
res += mul(Get(s3,dx,0), float4x4(0.171863883733749,0.029724001884460,-0.217880174517632,-0.075130127370358,0.049404978752136,-0.052609581500292,0.088534139096737,0.214016377925873,-0.011513979174197,-0.072782553732395,0.051906052976847,-0.014743908308446,0.172604918479919,-0.153997287154198,0.010587059892714,0.060512382537127));
res += mul(Get(s3,dx,dy), float4x4(-0.095215760171413,-0.068612851202488,0.080008462071419,0.096507921814919,-0.065955698490143,0.042728465050459,0.101778693497181,0.008846791461110,-0.011906974017620,-0.049647133797407,0.212581709027290,0.094819620251656,0.044542707502842,-0.071794025599957,-0.025834424421191,0.010028956457973));
res = max(float4(0,0,0,0), res);
return res;
}
