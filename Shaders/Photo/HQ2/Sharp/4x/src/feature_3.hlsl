sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(-0.146095454692841,0.023703996092081,0.046813406050205,0.085698895156384) * Get(-dx,-dy);
res += float4(0.081649109721184,-0.041292201727629,-0.034097772091627,-0.044232822954655) * Get(-dx,0);
res += float4(0.064794726669788,-0.033894322812557,-0.106842763721943,-0.167818769812584) * Get(-dx,dy);
res += float4(0.033868737518787,0.179972827434540,-0.037485446780920,-0.054568577557802) * Get(0,-dy);
res += float4(-0.112662129104137,0.153920218348503,-0.075696341693401,-0.054275397211313) * Get(0,0);
res += float4(-0.040978021919727,0.035727772861719,-0.014897475019097,0.098863638937473) * Get(0,dy);
res += float4(0.088097050786018,-0.061755295842886,0.030550844967365,-0.154471814632416) * Get(dx,-dy);
res += float4(-0.091936826705933,-0.193279057741165,-0.071709886193275,0.084471888840199) * Get(dx,0);
res += float4(0.073143936693668,-0.178992077708244,-0.021271562203765,0.094343997538090) * Get(dx,dy);
res = max(float4(0,0,0,0), res);
return res;
}
