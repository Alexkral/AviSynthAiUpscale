sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.006737494375557,-0.038334108889103,-0.061344400048256,0.004663258325309,0.044505015015602,-0.010702184401453,0.023130059242249,0.054918773472309,-0.104235291481018,0.037703506648540,0.103875242173672,0.039986576884985,0.012252161279321,0.096661858260632,-0.037052415311337,0.049704410135746));
res += mul(Get(s0,-dx,0), float4x4(0.007482716348022,0.117391221225262,-0.008807663805783,-0.070497661828995,-0.076458096504211,0.072463072836399,-0.043988559395075,0.001194284530357,0.060641061514616,-0.048624299466610,0.035538766533136,-0.010940676555037,-0.003312695771456,-0.116348288953304,-0.019192639738321,-0.077202022075653));
res += mul(Get(s0,-dx,dy), float4x4(-0.107342630624771,-0.073168769478798,0.091762244701385,0.026714229956269,0.030586600303650,-0.032289627939463,-0.088469356298447,0.101600773632526,-0.029953505843878,-0.093939907848835,0.004408071283251,-0.159912228584290,0.072622396051884,-0.043648108839989,0.199770659208298,-0.065740197896957));
res += mul(Get(s0,0,-dy), float4x4(0.071894921362400,0.025618290528655,-0.073849521577358,-0.082691304385662,-0.057720307260752,-0.120657354593277,0.001711868215352,-0.045765686780214,0.070283740758896,-0.004156182985753,-0.027642581611872,0.131654441356659,-0.020421786233783,-0.068675503134727,0.050363652408123,0.050633400678635));
res += mul(Get(s0,0,0), float4x4(0.072110190987587,-0.059937734156847,-0.066730231046677,-0.052631903439760,0.000986543949693,0.167220264673233,0.193835601210594,0.063617102801800,-0.058809261769056,-0.064320474863052,-0.035741735249758,-0.051684305071831,-0.033614143729210,-0.137887462973595,-0.009084602817893,-0.001606252626516));
res += mul(Get(s0,0,dy), float4x4(-0.103553049266338,-0.058260347694159,0.135405376553535,0.115105845034122,0.143897071480751,0.077429547905922,0.170704811811447,0.056373652070761,-0.030529037117958,-0.067516051232815,-0.026359656825662,0.098608613014221,0.021103581413627,0.031731769442558,-0.000851751887240,0.037158869206905));
res += mul(Get(s0,dx,-dy), float4x4(-0.082832060754299,-0.029670482501388,0.025958595797420,0.115773782134056,-0.123410798609257,-0.030971875414252,-0.144526958465576,0.118020407855511,-0.050665028393269,0.051011152565479,-0.046935491263866,-0.016561428084970,-0.116067804396152,-0.005548112094402,0.075296193361282,0.194136962294579));
res += mul(Get(s0,dx,0), float4x4(-0.070806212723255,-0.010258615948260,0.052885614335537,0.073546022176743,0.054633669555187,0.042398001998663,0.034824777394533,0.048078365623951,-0.118268109858036,-0.021661987528205,0.092630021274090,-0.113974601030350,-0.058892965316772,0.085999310016632,-0.027934070676565,-0.024896794930100));
res += mul(Get(s0,dx,dy), float4x4(-0.057739980518818,0.149115666747093,0.099423877894878,-0.131070464849472,0.092371530830860,0.061606369912624,-0.035438772290945,0.078316234052181,-0.027559863403440,0.114287972450256,-0.082405239343643,-0.054958365857601,0.104288347065449,-0.010972441174090,-0.071887560188770,-0.091667026281357));
res += mul(Get(s1,-dx,-dy), float4x4(0.036407243460417,0.059509873390198,-0.060758553445339,0.026427580043674,0.053109724074602,0.038076989352703,-0.154078483581543,0.087674267590046,0.142770096659660,0.026927134022117,0.091153368353844,-0.090016990900040,-0.072170771658421,-0.207720994949341,0.047750037163496,0.041456561535597));
res += mul(Get(s1,-dx,0), float4x4(0.115161672234535,0.155180022120476,-0.098613381385803,-0.010264242999256,0.023217469453812,0.010909797623754,-0.077885121107101,-0.120482645928860,0.045225705951452,0.056786119937897,0.036634609103203,-0.120035670697689,0.169454410672188,0.135008350014687,-0.102977767586708,0.090515106916428));
res += mul(Get(s1,-dx,dy), float4x4(-0.095422446727753,-0.042796012014151,0.207203730940819,-0.017198177054524,-0.097436539828777,-0.044190227985382,0.009879066608846,0.051121972501278,-0.027484863996506,0.020353099331260,-0.188921555876732,-0.053610302507877,0.033209152519703,0.003530892776325,0.030590776354074,0.100099064409733));
res += mul(Get(s1,0,-dy), float4x4(0.062096998095512,0.021969331428409,0.055886842310429,-0.146574020385742,0.069428354501724,-0.084626965224743,-0.056580793112516,0.002143739722669,-0.008485838770866,-0.093765430152416,-0.103716798126698,-0.074733987450600,0.092965893447399,-0.058066722005606,-0.061459094285965,-0.009054028429091));
res += mul(Get(s1,0,0), float4x4(0.085765108466148,-0.011022264137864,-0.036689523607492,0.102915592491627,0.137631416320801,-0.169061005115509,0.040945298969746,-0.024869060143828,-0.054522458463907,0.048289719969034,-0.007722191046923,-0.024662422016263,-0.107276298105717,-0.033903919160366,0.005048703402281,0.056737191975117));
res += mul(Get(s1,0,dy), float4x4(-0.102905035018921,-0.005793598014861,-0.182614415884018,0.000516278902069,0.226648569107056,0.019069833680987,0.020835096016526,-0.168428078293800,-0.016731984913349,0.026875536888838,-0.012274391017854,0.028790593147278,0.078387856483459,-0.088157892227173,-0.015839561820030,0.133010372519493));
res += mul(Get(s1,dx,-dy), float4x4(0.030800372362137,0.023309582844377,0.040191341191530,0.160948693752289,0.093743413686752,-0.078913301229477,-0.068551592528820,0.103516772389412,-0.017407609149814,0.043322447687387,0.061808463186026,0.001292455242947,-0.060021903365850,0.067214399576187,-0.081772059202194,-0.099923156201839));
res += mul(Get(s1,dx,0), float4x4(0.042539395391941,0.008435635827482,0.166040629148483,0.019422587007284,-0.054413441568613,0.014695579186082,-0.003180266590789,0.048646945506334,0.007189140189439,-0.057200130075216,0.035878945142031,0.047692101448774,-0.056766934692860,-0.084040507674217,0.024657668545842,0.051610682159662));
res += mul(Get(s1,dx,dy), float4x4(0.081394195556641,-0.123901501297951,0.062823593616486,-0.163170382380486,-0.016498286277056,0.069525979459286,0.062766395509243,0.012369574978948,0.058617446571589,-0.067566514015198,0.137059435248375,-0.098467014729977,-0.107342280447483,-0.061280276626348,0.030870892107487,0.120296582579613));
res += mul(Get(s2,-dx,-dy), float4x4(0.097207598388195,0.041969452053308,0.011071477085352,0.131842866539955,-0.037210196256638,0.037600316107273,0.096785783767700,-0.072161391377449,0.042889628559351,-0.102009430527687,-0.045847445726395,0.033091142773628,0.027172500267625,0.008269887417555,0.037748064845800,0.027131235226989));
res += mul(Get(s2,-dx,0), float4x4(0.017569301649928,0.042342763394117,-0.048191159963608,-0.053384993225336,0.083266459405422,0.094202175736427,-0.051116865128279,-0.005639576353133,0.145226046442986,0.102220095694065,-0.097648121416569,0.048241637647152,0.067941389977932,-0.141530036926270,0.000239542132476,0.032333362847567));
res += mul(Get(s2,-dx,dy), float4x4(0.045603629201651,0.118829615414143,-0.027288604527712,-0.129754304885864,-0.058215469121933,0.038306552916765,0.007183792069554,0.034882422536612,0.019039699807763,0.127796426415443,-0.020041327923536,0.050887513905764,-0.105332128703594,0.054243128746748,-0.199676379561424,0.120365142822266));
res += mul(Get(s2,0,-dy), float4x4(0.105809368193150,-0.044024106115103,-0.002823855029419,0.015789616852999,0.137458935379982,0.075546957552433,-0.011157982051373,-0.022138031199574,0.074094712734222,-0.073708802461624,0.003552387934178,-0.158275246620178,-0.102982863783836,-0.002322042128071,0.095486395061016,0.061776306480169));
res += mul(Get(s2,0,0), float4x4(0.099721260368824,-0.052081968635321,-0.013110771775246,0.003471500938758,-0.140139102935791,-0.013289506547153,-0.132292896509171,0.012272874824703,0.021864537149668,-0.007711288053542,0.040407363325357,0.015735985711217,0.086241163313389,0.074763633310795,0.095614001154900,0.034296017140150));
res += mul(Get(s2,0,dy), float4x4(0.177755743265152,-0.041577398777008,-0.098163880407810,-0.001434239442460,-0.003181149484590,-0.039474461227655,-0.047344181686640,0.026510993018746,-0.019968029111624,-0.088772855699062,0.023054467514157,-0.037263128906488,-0.047162707895041,-0.053595434874296,-0.021394118666649,-0.002756571862847));
res += mul(Get(s2,dx,-dy), float4x4(0.027303354814649,-0.058306001126766,-0.040345039218664,-0.100576095283031,0.095174118876457,0.129442408680916,-0.079982101917267,-0.221972376108170,0.056115012615919,-0.167439371347427,-0.110196083784103,-0.089862376451492,0.020429885014892,-0.152579039335251,-0.062905296683311,-0.167683348059654));
res += mul(Get(s2,dx,0), float4x4(-0.041878487914801,-0.045201290398836,0.080493338406086,-0.043236099183559,0.009005340747535,0.170790046453476,-0.087429717183113,0.031753830611706,-0.115786418318748,0.033823754638433,-0.075848974287510,-0.043380673974752,0.080392934381962,-0.017487240955234,0.035878993570805,-0.014326011762023));
res += mul(Get(s2,dx,dy), float4x4(-0.009922825731337,-0.034350484609604,-0.059622608125210,0.004814895335585,0.054587606340647,-0.036054585129023,0.071509473025799,0.086781717836857,-0.082230776548386,0.101951643824577,-0.028566373512149,0.001493285992183,0.007108265534043,0.041402515023947,0.036882013082504,0.108569815754890));
res += mul(Get(s3,-dx,-dy), float4x4(0.129030361771584,0.115660950541496,-0.064114212989807,-0.102507852017879,0.011349158361554,0.076833859086037,-0.015829348936677,-0.116414085030556,0.032690525054932,0.009059250354767,-0.024874614551663,0.022239543497562,-0.070295885205269,0.014395949430764,0.044477347284555,0.106961272656918));
res += mul(Get(s3,-dx,0), float4x4(0.062289703637362,0.186705589294434,0.059272766113281,-0.226080879569054,-0.039551485329866,0.256954610347748,-0.093132495880127,-0.008629930205643,-0.014273546636105,-0.006720789708197,0.028356797993183,-0.053207073360682,-0.044305626302958,0.134489506483078,-0.093923464417458,-0.081145055592060));
res += mul(Get(s3,-dx,dy), float4x4(0.063601672649384,0.178791314363480,0.059291820973158,-0.210804298520088,-0.089496225118637,0.062775664031506,0.121750101447105,0.000147255501361,0.110983461141586,0.118395805358887,0.091337487101555,0.080341480672359,0.144760400056839,-0.019372567534447,-0.097840607166290,0.038918051868677));
res += mul(Get(s3,0,-dy), float4x4(-0.059979129582644,0.140885144472122,0.066675797104836,-0.066984191536903,-0.024054994806647,-0.117881208658218,-0.074829526245594,-0.048290297389030,-0.025549501180649,0.105758778750896,0.115369528532028,0.054530106484890,0.041502755135298,-0.006167132873088,0.056043673306704,0.243119344115257));
res += mul(Get(s3,0,0), float4x4(-0.070276997983456,0.163108825683594,0.080704055726528,-0.062309324741364,-0.026578852906823,-0.086202912032604,-0.157661661505699,0.017198640853167,-0.002559948014095,-0.117421090602875,-0.090659424662590,0.058706454932690,0.092538841068745,-0.107366241514683,-0.003491041483358,-0.067143745720387));
res += mul(Get(s3,0,dy), float4x4(-0.119789540767670,-0.077176876366138,0.082524277269840,-0.076514430344105,-0.039691392332315,-0.063372373580933,0.006320649757981,-0.062220294028521,0.176244974136353,0.083547033369541,0.086344040930271,-0.016547312960029,0.003092237748206,-0.086902983486652,-0.117500022053719,-0.000648184039164));
res += mul(Get(s3,dx,-dy), float4x4(0.019293811172247,-0.218396976590157,-0.002269876189530,-0.106536358594894,-0.205195739865303,-0.141323342919350,-0.102211810648441,-0.032686762511730,0.139955922961235,0.089759632945061,-0.052737541496754,-0.002331323223189,-0.014524300582707,-0.190270423889160,0.145754396915436,0.060534905642271));
res += mul(Get(s3,dx,0), float4x4(-0.070641517639160,-0.236305281519890,0.113681502640247,0.175373271107674,0.017818063497543,-0.130417719483376,0.059619080275297,-0.031992875039577,-0.019343843683600,0.148864641785622,-0.064007751643658,0.054294843226671,0.033532518893480,-0.018314920365810,-0.106146849691868,0.036483298987150));
res += mul(Get(s3,dx,dy), float4x4(-0.004645940382034,-0.021757300943136,0.141568526625633,0.008115480653942,0.010599886067212,-0.051878284662962,-0.056545693427324,-0.122175440192223,-0.071524150669575,0.051678750663996,0.105929233133793,0.003343120682985,-0.071182206273079,-0.084643132984638,-0.048163797706366,0.052427534013987));
res = max(float4(0,0,0,0), res);
return res;
}
