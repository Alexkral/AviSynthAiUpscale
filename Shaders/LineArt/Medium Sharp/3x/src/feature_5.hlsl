sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define ddx  (dx * 2.0)
#define ddy  (dy * 2.0)
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(-0.433402419090271,0.011830456554890,0.042889222502708,0.037572644650936);
res += float4(0.000314805220114,0.019887540489435,0.041847761720419,-0.010702249594033) * Get(-ddx,-ddy);
res += float4(0.000718575203791,-0.025276163592935,-0.007546926382929,0.086080044507980) * Get(-ddx,-dy);
res += float4(-0.002158244373277,-0.049052424728870,-0.095169894397259,-0.055093858391047) * Get(-ddx,0);
res += float4(-0.032264202833176,0.003972853533924,0.005746080074459,-0.100174672901630) * Get(-ddx,dy);
res += float4(0.021433005109429,0.002686971798539,0.008086236193776,0.006628688424826) * Get(-ddx,ddy);
res += float4(0.008160637691617,-0.089628890156746,0.171487405896187,-0.030365133658051) * Get(-dx,-ddy);
res += float4(-0.080849789083004,0.145657122135162,-0.195190802216530,-0.211152657866478) * Get(-dx,-dy);
res += float4(0.050057657063007,0.150020048022270,-0.041813991963863,0.609380841255188) * Get(-dx,0);
res += float4(-0.039355326443911,-0.217088416218758,0.039383877068758,-0.255602121353149) * Get(-dx,dy);
res += float4(0.012872343882918,-0.020776344463229,-0.030919063836336,0.040955223143101) * Get(-dx,ddy);
res += float4(-0.020518517121673,-0.157782375812531,-0.060021471232176,-0.082763217389584) * Get(0,-ddy);
res += float4(-0.405616432428360,-0.434232085943222,0.501902699470520,0.353069365024567) * Get(0,-dy);
res += float4(0.124539777636528,0.752348959445953,-0.044770222157240,-0.809257447719574) * Get(0,0);
res += float4(0.000245865085162,0.331892043352127,-0.338104695081711,0.385711312294006) * Get(0,dy);
res += float4(-0.003398527624086,-0.006448838394135,-0.057683501392603,-0.049120560288429) * Get(0,ddy);
res += float4(-0.030714051797986,-0.006447867956012,-0.137513026595116,-0.009662503376603) * Get(dx,-ddy);
res += float4(-0.036132842302322,0.153606653213501,-0.204722195863724,-0.045830223709345) * Get(dx,-dy);
res += float4(0.820897758007050,-0.172433644533157,0.139765009284019,-0.059524778276682) * Get(dx,0);
res += float4(0.126693293452263,-0.162467777729034,0.199809432029724,0.094319842755795) * Get(dx,dy);
res += float4(-0.034206748008728,-0.101424358785152,0.085144542157650,-0.084079585969448) * Get(dx,ddy);
res += float4(0.012138100340962,-0.055079158395529,0.014355804771185,0.140657424926758) * Get(ddx,-ddy);
res += float4(-0.113537289202213,-0.019435625523329,-0.010804402641952,-0.075483664870262) * Get(ddx,-dy);
res += float4(0.141604706645012,-0.079107552766800,0.015250455588102,0.105654172599316) * Get(ddx,0);
res += float4(-0.084053643047810,0.049076471477747,-0.078530900180340,0.036351170390844) * Get(ddx,dy);
res += float4(0.021082868799567,0.019342390820384,-0.004820016678423,-0.035849172621965) * Get(ddx,ddy);
res = max(float4(0, 0, 0, 0), res) + float4(-0.005734542850405,0.638103663921356,0.634511947631836,1.023193597793579) * min(float4(0, 0, 0, 0), res);
return res;
}
