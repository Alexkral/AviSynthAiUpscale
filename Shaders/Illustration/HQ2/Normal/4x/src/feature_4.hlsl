sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.146380186080933,0.012046852149069,-0.129650413990021,-0.112549275159836) * Get(-dx,-dy);
res += float4(-0.015102792531252,0.042776685208082,-0.024880388751626,-0.110895477235317) * Get(-dx,0);
res += float4(-0.062697686254978,-0.055454183369875,-0.103188194334507,0.126224517822266) * Get(-dx,dy);
res += float4(-0.302351504564285,-0.062145877629519,0.004786442033947,0.478376299142838) * Get(0,-dy);
res += float4(0.070811882615089,0.131932079792023,0.031280562281609,-0.304775565862656) * Get(0,0);
res += float4(0.045212682336569,-0.153213158249855,0.206509098410606,0.059153974056244) * Get(0,dy);
res += float4(0.065456457436085,-0.088985607028008,0.002600781852379,-0.276223540306091) * Get(dx,-dy);
res += float4(0.257047832012177,-0.054234076291323,-0.063167601823807,0.211896449327469) * Get(dx,0);
res += float4(-0.110509775578976,-0.140668615698814,-0.189838200807571,0.012107198126614) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
