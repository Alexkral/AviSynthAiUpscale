sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.117125324904919,-0.164319261908531,-0.148070737719536,-0.061265625059605,0.016919616609812,0.070493459701538,0.001649377518333,-0.036264121532440,0.089424587786198,0.115167796611786,0.023788524791598,-0.005966571159661,-0.005119634792209,0.109611451625824,-0.015307298861444,-0.041488289833069));
res += mul(Get(s0,-dx,0), float4x4(-0.135530769824982,-0.006726332008839,0.013519450090826,0.042140740901232,-0.017305584624410,0.076123364269733,0.019858755171299,0.038830507546663,0.010569607838988,0.037080548703671,0.026298435404897,-0.050590734928846,-0.013256227597594,0.068422429263592,0.065050579607487,0.031212888658047));
res += mul(Get(s0,-dx,dy), float4x4(0.047170516103506,0.076902054250240,0.038169857114553,-0.023458257317543,-0.011421069502831,-0.021891068667173,-0.014963311143219,0.074308201670647,0.019710134714842,0.032615434378386,0.036341950297356,-0.110719032585621,-0.062286809086800,0.025069687515497,-0.013346583582461,0.018464544788003));
res += mul(Get(s0,0,-dy), float4x4(-0.058919843286276,-0.157353207468987,-0.077020771801472,0.006576193030924,-0.087976120412350,0.059860922396183,-0.036025352776051,-0.044446915388107,-0.057904325425625,-0.051883947104216,-0.064242504537106,0.021587640047073,-0.051726639270782,0.074023865163326,-0.009930374100804,0.059361305087805));
res += mul(Get(s0,0,0), float4x4(-0.040761031210423,-0.006541428621858,-0.029722549021244,0.072017110884190,-0.018715195357800,0.053173478692770,0.016685739159584,0.024062488228083,-0.054101485759020,0.013395290821791,0.034517716616392,0.077405609190464,0.097121529281139,0.069882191717625,-0.068472750484943,0.145186975598335));
res += mul(Get(s0,0,dy), float4x4(0.044442363083363,0.033273942768574,0.054152645170689,0.017802631482482,-0.039544168859720,-0.029293496161699,-0.005658738780767,0.119482398033142,-0.023653062060475,0.090312525629997,-0.071389012038708,0.021408220753074,0.050838951021433,-0.015342294238508,-0.052199475467205,0.044364493340254));
res += mul(Get(s0,dx,-dy), float4x4(-0.062608182430267,0.001776898396201,-0.033119611442089,0.105246491730213,0.043277867138386,0.063288234174252,0.034208167344332,0.041268259286880,-0.011798490770161,0.064011216163635,0.043625332415104,-0.062948592007160,0.055889237672091,-0.047434259206057,0.121946789324284,-0.121540680527687));
res += mul(Get(s0,dx,0), float4x4(-0.034026887267828,0.131349846720695,-0.133907079696655,0.273789376020432,-0.027703888714314,0.153875440359116,-0.109544940292835,0.090556129813194,0.003787107067183,0.052484918385744,-0.075541831552982,-0.056409452110529,0.032232947647572,-0.015732757747173,-0.020850263535976,-0.052865188568830));
res += mul(Get(s0,dx,dy), float4x4(0.002240572823212,0.052688609808683,0.010042159818113,-0.088286608457565,0.003298285184428,0.005161007400602,0.026818413287401,-0.173326373100281,-0.011894457042217,-0.004492497537285,0.034546807408333,0.027398321777582,0.075654134154320,0.133804306387901,-0.076310932636261,0.077269844710827));
res += mul(Get(s1,-dx,-dy), float4x4(-0.039070479571819,0.117375507950783,0.029669953510165,0.012775541283190,0.038198780268431,-0.044547356665134,-0.110735960304737,0.000743152573705,0.021987631917000,0.034177385270596,-0.006590992212296,0.124340340495110,0.010999863967299,-0.015888655558228,0.021300926804543,0.119145281612873));
res += mul(Get(s1,-dx,0), float4x4(-0.064412385225296,0.139077246189117,-0.024913467466831,0.011680865660310,0.011072977446020,-0.038784820586443,0.051967285573483,-0.068265222012997,0.005317871924490,0.023108759894967,0.047000061720610,0.117721445858479,-0.052011910825968,0.009427104145288,0.067865751683712,0.023450409993529));
res += mul(Get(s1,-dx,dy), float4x4(-0.037611953914165,0.022258955985308,-0.019032161682844,0.068508729338646,-0.019367786124349,-0.083437949419022,-0.060026172548532,-0.038134548813105,-0.068300679326057,-0.020606443285942,-0.014039373956621,0.022930135950446,0.012290822342038,-0.109265111386776,-0.006256242282689,0.051964655518532));
res += mul(Get(s1,0,-dy), float4x4(-0.107519917190075,0.002795824315399,0.029400927945971,-0.045957595109940,0.015994474291801,-0.011692611500621,-0.047376394271851,-0.018080083653331,-0.060833733528852,-0.038751266896725,-0.016227083280683,-0.057827081531286,-0.013428028672934,-0.029305281117558,-0.064682558178902,0.115137882530689));
res += mul(Get(s1,0,0), float4x4(-0.028390767052770,0.053600966930389,-0.016713745892048,0.001833761809394,0.081838376820087,-0.039793282747269,0.129558086395264,0.088115468621254,-0.018479730933905,-0.010437732562423,-0.068301573395729,-0.099318012595177,0.100071564316750,0.019135542213917,0.078765183687210,0.091376706957817));
res += mul(Get(s1,0,dy), float4x4(0.111062653362751,0.058431297540665,-0.053575143218040,0.065941244363785,-0.002163416473195,-0.094256065785885,0.058464325964451,0.045028604567051,-0.050545018166304,0.039730019867420,-0.096798531711102,0.078335449099541,-0.028713472187519,-0.048582747578621,0.006984427105635,-0.033951845020056));
res += mul(Get(s1,dx,-dy), float4x4(0.036356441676617,-0.046042673289776,-0.039916489273310,0.032226942479610,0.023079019039869,0.118798360228539,0.100862674415112,0.009164522401989,0.044425420463085,-0.069434039294720,-0.072356872260571,-0.113358303904533,0.079358659684658,-0.060378592461348,0.064485274255276,0.056362528353930));
res += mul(Get(s1,dx,0), float4x4(-0.138388857245445,0.071223825216293,0.047322522848845,-0.015280835330486,-0.076894365251064,0.080195546150208,0.133191689848900,0.008927633054554,-0.049440518021584,-0.017825191840529,0.039347063750029,-0.017545863986015,-0.015031785704195,0.004530495963991,0.008146580308676,-0.051213644444942));
res += mul(Get(s1,dx,dy), float4x4(-0.029005555436015,-0.125477045774460,-0.038335409015417,-0.113330408930779,0.015281943604350,0.059733610600233,0.001660570735112,-0.110711209475994,-0.005535650067031,-0.055393394082785,-0.016328630968928,0.032714646309614,0.020665928721428,0.004290597978979,0.062827467918396,0.023689411580563));
res += mul(Get(s2,-dx,-dy), float4x4(0.010521939955652,-0.091611549258232,-0.042407635599375,-0.048819653689861,0.017944699153304,0.031854078173637,-0.099613644182682,-0.029376449063420,0.037822280079126,0.035322017967701,-0.086807794868946,-0.002052431693301,-0.002563819056377,0.003237296594307,-0.062207214534283,0.046797007322311));
res += mul(Get(s2,-dx,0), float4x4(-0.020002789795399,-0.053004968911409,0.131302267313004,0.062041420489550,-0.029929485172033,-0.039909999817610,0.132329285144806,-0.078321978449821,-0.054140459746122,-0.009625863283873,0.054043490439653,0.094422772526741,-0.061025518923998,0.000572882825509,-0.059124764055014,-0.016755053773522));
res += mul(Get(s2,-dx,dy), float4x4(-0.039862249046564,-0.174160078167915,0.000744629302062,0.101678207516670,0.114802353084087,0.020920291543007,0.189287453889847,-0.000336745608365,-0.050626304000616,0.057726424187422,0.092066511511803,-0.102377824485302,-0.010334809310734,-0.011810674332082,-0.087686039507389,-0.041693825274706));
res += mul(Get(s2,0,-dy), float4x4(0.040193311870098,-0.133236497640610,-0.094282336533070,0.096592172980309,-0.126404881477356,0.042724043130875,0.128178089857101,0.026272786781192,-0.050774067640305,-0.049332819879055,-0.012364566326141,-0.031330883502960,0.037989553064108,-0.010321568697691,-0.028960844501853,0.102711424231529));
res += mul(Get(s2,0,0), float4x4(-0.119088597595692,-0.007560524158180,0.082886099815369,0.078455634415150,-0.011503777466714,0.117147356271744,-0.118639722466469,0.249000281095505,-0.006165697705001,-0.075188279151917,-0.005821388680488,0.011455201543868,0.000113843110739,-0.084975078701973,0.002300491090864,0.001793438801542));
res += mul(Get(s2,0,dy), float4x4(-0.020500862970948,-0.027592457830906,0.189228102564812,0.020085025578737,0.189336970448494,0.035079043358564,-0.083521381020546,-0.022221885621548,0.002175697358325,0.090146549046040,-0.043175838887691,0.037091448903084,-0.016809327527881,-0.028729354962707,-0.026991950348020,0.092095673084259));
res += mul(Get(s2,dx,-dy), float4x4(-0.038948480039835,-0.082660101354122,-0.130271479487419,-0.024735061451793,-0.054531112313271,-0.028821423649788,0.152552559971809,-0.164388969540596,-0.021299974992871,0.035450238734484,-0.060607504099607,0.017090898007154,-0.063739545643330,-0.005007957573980,-0.039663277566433,0.040220364928246));
res += mul(Get(s2,dx,0), float4x4(0.018577083945274,0.050454542040825,-0.131771355867386,-0.079323530197144,0.036067467182875,-0.006117321550846,-0.135103106498718,0.056244060397148,-0.075677856802940,-0.119258522987366,-0.031500924378633,-0.017358765006065,0.018053593114018,0.004182308912277,-0.047367446124554,0.022928040474653));
res += mul(Get(s2,dx,dy), float4x4(0.011932428926229,-0.031823322176933,0.108133837580681,0.058929581195116,0.059229608625174,-0.139131754636765,0.088935226202011,-0.076348342001438,0.121440015733242,0.101039044559002,-0.049122799187899,0.056814972311258,0.097379148006439,0.146460652351379,0.045860499143600,0.113677948713303));
res += mul(Get(s3,-dx,-dy), float4x4(-0.010442407801747,0.037808027118444,0.003621038980782,0.017480682581663,-0.074489511549473,-0.057928241789341,-0.110950827598572,0.036192685365677,-0.030711166560650,-0.099476531147957,-0.055967893451452,-0.071609698235989,0.029770992696285,-0.052223112434149,-0.021133493632078,0.051663391292095));
res += mul(Get(s3,-dx,0), float4x4(-0.025996539741755,-0.115887224674225,0.000676312483847,-0.191404461860657,-0.060782760381699,0.030917927622795,0.039318446069956,0.041862525045872,-0.015874734148383,0.008039718493819,-0.026242962107062,0.099293962121010,-0.088458284735680,-0.006478343158960,0.073892660439014,-0.032661776989698));
res += mul(Get(s3,-dx,dy), float4x4(0.120843902230263,0.003138761036098,0.066873773932457,0.018933460116386,0.092888630926609,0.108483448624611,0.032123930752277,0.009635424241424,0.003399087581784,0.032718494534492,-0.027610071003437,-0.017706226557493,-0.046186860650778,-0.030317896977067,0.016632733866572,-0.069880276918411));
res += mul(Get(s3,0,-dy), float4x4(-0.104914568364620,-0.086830392479897,0.170192465186119,-0.113459408283234,-0.036125440150499,0.084646277129650,0.046179160475731,0.205752640962601,0.063106626272202,-0.057029344141483,0.085137687623501,-0.028161859139800,0.043761625885963,-0.078464582562447,-0.025363774970174,0.119027398526669));
res += mul(Get(s3,0,0), float4x4(-0.009915232658386,0.212979376316071,-0.131657719612122,0.093544594943523,-0.053294826298952,0.042034391313791,-0.006969208829105,0.010423896834254,0.094744242727757,-0.033884566277266,0.022402951493859,0.006520700640976,-0.044269271194935,0.028142904862761,0.029153408482671,0.061737038195133));
res += mul(Get(s3,0,dy), float4x4(0.224486336112022,0.057089738547802,0.173731759190559,0.106311537325382,0.090159356594086,0.074017897248268,-0.030352445319295,-0.123927026987076,0.075226761400700,-0.034909162670374,-0.030676821246743,-0.056294821202755,-0.134426951408386,0.209743931889534,0.029130976647139,-0.015532929450274));
res += mul(Get(s3,dx,-dy), float4x4(-0.063621602952480,-0.023630302399397,0.081273093819618,-0.014556123875082,0.026556169614196,-0.079485431313515,-0.008646546863019,0.034009862691164,0.096478365361691,-0.017334528267384,-0.081482760608196,0.108917616307735,0.021601749584079,0.075663909316063,-0.093489892780781,0.017547544091940));
res += mul(Get(s3,dx,0), float4x4(0.057652808725834,0.056269757449627,0.042107135057449,-0.028889965265989,-0.004808972589672,-0.142249181866646,-0.049910500645638,-0.077998153865337,0.001056790119037,-0.052688561379910,-0.030342534184456,-0.081328757107258,-0.074640125036240,-0.001428487710655,0.152923449873924,0.070361576974392));
res += mul(Get(s3,dx,dy), float4x4(0.030523043125868,-0.006018012296408,-0.009481161832809,-0.003795030526817,-0.153944969177246,0.069820933043957,-0.007390020415187,0.005306273698807,-0.087681800127029,0.052802734076977,0.022742208093405,-0.063544452190399,0.006577380467206,0.007997971028090,0.038426723331213,0.160555079579353));
return max(float4(0,0,0,0), res);
}
