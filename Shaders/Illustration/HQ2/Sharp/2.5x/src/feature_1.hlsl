sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(-0.054617576301098,0.191413477063179,0.104066483676434,-0.032616902142763) * Get(-dx,-dy);
res += float4(0.195729702711105,-0.301609992980957,0.069716155529022,0.031722545623779) * Get(-dx,0);
res += float4(-0.152996718883514,0.164535418152809,-0.061332333832979,-0.084215044975281) * Get(-dx,dy);
res += float4(0.083237648010254,0.097391359508038,-0.232299298048019,0.094488516449928) * Get(0,-dy);
res += float4(0.073035463690758,-0.007678101304919,0.021398684009910,-0.122210703790188) * Get(0,0);
res += float4(-0.179535523056984,0.058582663536072,0.051188658922911,-0.114427454769611) * Get(0,dy);
res += float4(-0.088224403560162,-0.058989215642214,0.001280061434954,-0.086603119969368) * Get(dx,-dy);
res += float4(0.008453557267785,-0.072652444243431,0.108323201537132,-0.314408987760544) * Get(dx,0);
res += float4(0.298389345407486,0.052139781415462,-0.040005728602409,0.153005555272102) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
