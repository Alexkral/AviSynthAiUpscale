sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.010520569048822,-0.009155267849565,-0.037807442247868,-0.216136321425438) * Get(-dx,-dy);
res += float4(0.072373077273369,0.049187410622835,0.041723918169737,0.078011579811573) * Get(-dx,0);
res += float4(-0.102220706641674,0.140636458992958,-0.005173021927476,-0.045098420232534) * Get(-dx,dy);
res += float4(-0.141517207026482,-0.118895471096039,0.299314439296722,-0.039841774851084) * Get(0,-dy);
res += float4(-0.166806787252426,0.062230575829744,-0.065463207662106,-0.119669608771801) * Get(0,0);
res += float4(0.040194649249315,0.065019913017750,-0.062620557844639,0.017666891217232) * Get(0,dy);
res += float4(0.026496592909098,0.018194446340203,0.058474663645029,-0.069833375513554) * Get(dx,-dy);
res += float4(0.003149271011353,0.017674710601568,-0.125488385558128,0.073168300092220) * Get(dx,0);
res += float4(0.188286036252975,-0.167213872075081,-0.029420217499137,0.094315953552723) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
