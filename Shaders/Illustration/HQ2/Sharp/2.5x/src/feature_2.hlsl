sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.064448818564415,-0.081796884536743,0.004135789815336,0.037097305059433) * Get(-dx,-dy);
res += float4(-0.060538653284311,-0.039544865489006,0.115944765508175,0.152310952544212) * Get(-dx,0);
res += float4(0.146039053797722,0.056978248059750,-0.086899042129517,0.024382021278143) * Get(-dx,dy);
res += float4(-0.179861530661583,0.066951885819435,0.048390056937933,-0.177288815379143) * Get(0,-dy);
res += float4(-0.024635462090373,0.133978798985481,-0.053470354527235,-0.026689350605011) * Get(0,0);
res += float4(-0.058926213532686,-0.099469289183617,0.030984519049525,-0.103800266981125) * Get(0,dy);
res += float4(0.052290271967649,-0.003276986302808,-0.033491861075163,0.197648704051971) * Get(dx,-dy);
res += float4(0.039746474474669,-0.115582562983036,0.051622871309519,-0.086309142410755) * Get(dx,0);
res += float4(-0.094044059514999,-0.125793561339378,0.025955121964216,0.016745883971453) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
