sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.129560202360153,-0.224239230155945,0.122102752327919,-0.013527591712773) * Get(-dx,-dy);
res += float4(-0.064960524439812,-0.015472947619855,0.003961985465139,-0.139483124017715) * Get(-dx,0);
res += float4(-0.253317892551422,-0.091050930321217,0.095337361097336,0.117603279650211) * Get(-dx,dy);
res += float4(-0.128048747777939,0.218937277793884,-0.214056447148323,0.010652224533260) * Get(0,-dy);
res += float4(0.091722175478935,0.057526212185621,-0.034297887235880,-0.038629978895187) * Get(0,0);
res += float4(-0.182256072759628,0.168697908520699,-0.093850180506706,-0.005882982164621) * Get(0,dy);
res += float4(0.039508040994406,-0.155729234218597,-0.177414894104004,-0.031265534460545) * Get(dx,-dy);
res += float4(-0.019175069406629,-0.085182175040245,0.034659307450056,-0.189363047480583) * Get(dx,0);
res += float4(0.125689223408699,-0.055728629231453,-0.002945735352114,-0.043422520160675) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
