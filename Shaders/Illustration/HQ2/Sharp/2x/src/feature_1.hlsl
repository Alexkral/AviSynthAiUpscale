sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.034138858318329,-0.005615084897727,-0.002154491376132,-0.032728821039200) * Get(-dx,-dy);
res += float4(0.021884253248572,-0.001029402483255,0.001855826820247,-0.004091156180948) * Get(-dx,0);
res += float4(-0.045914523303509,-0.009737223386765,-0.018132084980607,0.008378775790334) * Get(-dx,dy);
res += float4(0.064700394868851,-0.005779716186225,-0.056869026273489,0.035982355475426) * Get(0,-dy);
res += float4(-0.051997434347868,-0.033972810953856,0.025635758414865,-0.019011480733752) * Get(0,0);
res += float4(-0.052531789988279,-0.012184428982437,-0.049420047551394,-0.039272088557482) * Get(0,dy);
res += float4(0.056860357522964,0.009607568383217,-0.072087012231350,-0.044886581599712) * Get(dx,-dy);
res += float4(-0.092182755470276,-0.000493372383062,-0.017955763265491,0.007445325143635) * Get(dx,0);
res += float4(-0.038555111736059,-0.015003007836640,0.015762746334076,0.007057977374643) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
