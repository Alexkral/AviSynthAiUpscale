sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.049916282296181,-0.072519995272160,0.022896641865373,-0.089093983173370) * Get(-dx,-dy);
res += float4(0.269674926996231,-0.184604391455650,-0.066859260201454,-0.388724535703659) * Get(-dx,0);
res += float4(0.302658587694168,0.199146270751953,-0.022472089156508,0.149503648281097) * Get(-dx,dy);
res += float4(0.029302209615707,-0.050276748836040,-0.014981317333877,-0.003034669673070) * Get(0,-dy);
res += float4(-0.270790994167328,-0.082329407334328,-0.048092138022184,-0.174487024545670) * Get(0,0);
res += float4(-0.068916089832783,0.042785108089447,-0.064887993037701,0.249259948730469) * Get(0,dy);
res += float4(-0.096314772963524,0.124080948531628,-0.040222626179457,-0.080834038555622) * Get(dx,-dy);
res += float4(-0.209416478872299,-0.035315338522196,0.065402641892433,-0.060074627399445) * Get(dx,0);
res += float4(-0.031662944704294,-0.027582893148065,-0.010297166183591,0.309801489114761) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
