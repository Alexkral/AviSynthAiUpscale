sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.378373086452484,-0.090830355882645,-0.053004298359156,0.115222133696079,0.045136760920286,0.175896123051643,0.029956094920635,-0.073727376759052,0.089652791619301,-0.036237474530935,-0.037026189267635,-0.142541855573654,0.161264419555664,0.073863692581654,0.126651450991631,-0.014065604656935));
res += mul(Get(s0,-dx,0), float4x4(-0.079741813242435,0.212459564208984,-0.029679903760552,-0.107305727899075,-0.105265475809574,-0.051668446511030,-0.013169291429222,-0.067673712968826,-0.017036439850926,0.086825735867023,0.005968449171633,-0.009661464020610,-0.096775650978088,-0.024792470037937,0.009302561171353,-0.048274960368872));
res += mul(Get(s0,-dx,dy), float4x4(-0.258402317762375,0.062717638909817,-0.090339928865433,-0.039784770458937,-0.032663736492395,0.046453390270472,0.061879295855761,-0.070783831179142,0.012680453248322,-0.036934312433004,0.201518297195435,-0.010561039671302,-0.040968123823404,-0.004990537650883,0.026576915755868,0.036028083413839));
res += mul(Get(s0,0,-dy), float4x4(-0.196919664740562,0.225463420152664,0.064337164163589,0.083612605929375,-0.019341029226780,-0.132989257574081,-0.117546565830708,-0.191821485757828,-0.138914331793785,0.249282658100128,-0.032675419002771,-0.052822981029749,0.002314023207873,0.080333501100540,-0.093244448304176,-0.014253539964557));
res += mul(Get(s0,0,0), float4x4(0.149423658847809,-0.177399605512619,0.111320234835148,-0.010116358287632,0.215093150734901,0.027109321206808,-0.036083284765482,-0.028580866754055,0.012381275184453,0.165782392024994,0.069363065063953,0.018733730539680,0.032534953206778,-0.005634712055326,0.018945328891277,-0.029688397422433));
res += mul(Get(s0,0,dy), float4x4(-0.076404005289078,-0.225843593478203,0.080435194075108,-0.279369175434113,0.049623638391495,-0.025778986513615,-0.070482574403286,0.084864407777786,-0.024829261004925,-0.030048940330744,-0.133104979991913,0.113285638391972,-0.012802917510271,0.095386043190956,0.003057744819671,0.147091180086136));
res += mul(Get(s0,dx,-dy), float4x4(0.022477649152279,0.313307523727417,-0.083513095974922,0.223786100745201,-0.136143445968628,-0.076700173318386,-0.017334310337901,-0.024895898997784,0.128829002380371,-0.009404753334820,0.149330958724022,-0.042870122939348,0.039200685918331,0.024256549775600,0.014907350763679,-0.030663471668959));
res += mul(Get(s0,dx,0), float4x4(0.365206658840179,-0.186577394604683,0.269176602363586,0.005135479848832,-0.015146463178098,-0.224996954202652,-0.126045942306519,0.256437927484512,0.044627789407969,-0.226164430379868,0.040997896343470,0.026369636878371,-0.054416704922915,-0.012190136127174,-0.024168390780687,-0.137291565537453));
res += mul(Get(s0,dx,dy), float4x4(0.013555385172367,-0.032266084104776,-0.056418247520924,-0.003965170122683,0.064019218087196,0.086472824215889,0.082554921507835,0.003781498176977,-0.094880647957325,-0.104175470769405,-0.012247269973159,0.004631333984435,0.046832822263241,0.011843158863485,-0.001866710255854,0.110944308340549));
res += mul(Get(s1,-dx,-dy), float4x4(-0.072424702346325,-0.062406819313765,-0.066212095320225,-0.010597072541714,-0.025117384269834,0.057289268821478,0.096808381378651,-0.150377586483955,-0.159721091389656,-0.110878214240074,-0.111272320151329,-0.028902741149068,-0.001635545399040,-0.023377705365419,-0.146496951580048,0.081653863191605));
res += mul(Get(s1,-dx,0), float4x4(-0.210146009922028,-0.136499747633934,-0.071274228394032,-0.031693525612354,-0.020836004987359,0.061175480484962,0.103194490075111,-0.099304400384426,0.110606014728546,0.012306324206293,0.158834367990494,0.098959870636463,-0.080541707575321,0.016294384375215,-0.041521765291691,0.016781469807029));
res += mul(Get(s1,-dx,dy), float4x4(-0.032070796936750,-0.068003900349140,-0.069435946643353,0.175292909145355,-0.059308931231499,0.020576676353812,-0.164654210209846,0.019172096624970,0.033627498894930,0.165708690881729,-0.002524230396375,-0.038785479962826,0.123595483601093,-0.052753813564777,-0.011818392202258,0.040055360645056));
res += mul(Get(s1,0,-dy), float4x4(0.007215029094368,0.006469433661550,0.142725169658661,0.067161425948143,-0.072834700345993,0.125623852014542,0.057654786854982,-0.022528968751431,-0.022201096639037,-0.074705541133881,0.099208995699883,0.010164097882807,0.014267101883888,-0.088237911462784,-0.094360269606113,0.092423111200333));
res += mul(Get(s1,0,0), float4x4(-0.217882320284843,0.001704784692265,-0.184829756617546,0.080787256360054,-0.062827512621880,-0.151968032121658,0.044357616454363,-0.019357340410352,-0.019212942570448,0.117935687303543,0.091000452637672,0.163203060626984,0.103595115244389,-0.074640758335590,0.157703727483749,-0.021716877818108));
res += mul(Get(s1,0,dy), float4x4(-0.105772055685520,-0.019804231822491,0.174403086304665,-0.011386268772185,0.019278481602669,0.025324903428555,-0.148964568972588,0.000097521304269,0.014182141050696,-0.102550320327282,-0.057202499359846,0.159144595265388,0.076942101120949,-0.035317383706570,-0.034066572785378,-0.014626788906753));
res += mul(Get(s1,dx,-dy), float4x4(0.038097050040960,0.163323476910591,-0.049302890896797,0.039758522063494,-0.045817885547876,-0.036532074213028,0.058727417141199,0.114221498370171,-0.029359072446823,0.005533751100302,-0.078770317137241,0.040077861398458,-0.036386199295521,-0.006037251092494,-0.014298789203167,0.089501433074474));
res += mul(Get(s1,dx,0), float4x4(-0.038192160427570,0.017513785511255,0.047225218266249,-0.003774130018428,-0.036434564739466,0.046816874295473,0.070836722850800,-0.002374644158408,0.132563129067421,-0.145667091012001,-0.016660863533616,-0.138176247477531,-0.049174308776855,0.073973752558231,0.011451362632215,0.061075229197741));
res += mul(Get(s1,dx,dy), float4x4(0.067673139274120,-0.105727225542068,-0.104965001344681,0.037078887224197,0.065566182136536,0.078912563621998,-0.002870698459446,-0.017719920724630,0.098149947822094,-0.070089600980282,0.017401294782758,0.144292175769806,-0.177967563271523,0.095488809049129,0.106333047151566,-0.042511545121670));
res += mul(Get(s2,-dx,-dy), float4x4(-0.011767026036978,-0.099932461977005,-0.083109565079212,0.139187410473824,-0.108049079775810,-0.079469293355942,-0.125146865844727,-0.093536302447319,0.101844348013401,0.206237107515335,-0.119974635541439,-0.081881999969482,0.156140744686127,-0.012138407677412,-0.110059782862663,0.078857064247131));
res += mul(Get(s2,-dx,0), float4x4(-0.059514854103327,0.021078621968627,0.000674150418490,-0.037899259477854,-0.096759863197803,-0.065777800977230,0.053022235631943,-0.082091875374317,0.103188917040825,-0.090684168040752,-0.043714288622141,0.000675281102303,0.190041512250900,-0.078644201159477,-0.134126991033554,0.033424329012632));
res += mul(Get(s2,-dx,dy), float4x4(-0.058464754372835,-0.054816648364067,-0.044508222490549,-0.070347607135773,-0.023289032280445,0.025066429749131,-0.099550537765026,0.077345110476017,-0.048058513551950,-0.088609986007214,-0.014739279635251,0.019015442579985,0.173735514283180,-0.101354666054249,0.026137191802263,-0.053327016532421));
res += mul(Get(s2,0,-dy), float4x4(0.048884447664022,0.063786961138248,-0.008191168308258,0.060222543776035,0.073222875595093,-0.087769947946072,0.055257987231016,-0.036709114909172,0.028130913153291,0.095665082335472,-0.028985498473048,-0.014655789360404,0.050403635948896,0.057266615331173,-0.049045979976654,-0.009011249989271));
res += mul(Get(s2,0,0), float4x4(0.050233628600836,0.043631073087454,-0.005906397942454,-0.028273329138756,0.040648434311152,0.121985152363777,-0.093240506947041,-0.106171034276485,-0.034422483295202,0.064385004341602,0.015447845682502,-0.005155240185559,-0.138634502887726,-0.033958431333303,-0.027148656547070,-0.101542308926582));
res += mul(Get(s2,0,dy), float4x4(0.067714765667915,0.108017139136791,-0.115560583770275,-0.182771980762482,0.050484433770180,-0.070115722715855,0.128597468137741,0.126395285129547,0.079827524721622,-0.077055275440216,-0.081046812236309,0.295176416635513,-0.195054590702057,0.219835296273232,0.118955716490746,-0.069803856313229));
res += mul(Get(s2,dx,-dy), float4x4(-0.056556452065706,-0.035406734794378,-0.120516620576382,-0.083420984447002,0.076671108603477,-0.151812866330147,-0.067378722131252,-0.014162817038596,0.121651463210583,-0.121837466955185,-0.081015020608902,-0.050723344087601,0.228750318288803,-0.137679591774940,0.004937654361129,-0.033000726252794));
res += mul(Get(s2,dx,0), float4x4(-0.023519728332758,-0.124394766986370,0.074468828737736,-0.059859737753868,-0.003484439570457,0.057995613664389,0.155663505196571,-0.072794117033482,0.084436528384686,-0.102909542620182,0.134528100490570,0.101617641746998,0.069595247507095,0.059204313904047,0.001593215158209,0.070043973624706));
res += mul(Get(s2,dx,dy), float4x4(0.025137992575765,-0.006589974742383,-0.122857868671417,-0.113785490393639,0.033503733575344,-0.054297745227814,-0.049741733819246,-0.067700862884521,-0.024960631504655,-0.131092622876167,0.046098206192255,0.010949710384011,-0.231751531362534,0.172100111842155,0.114483155310154,0.050917550921440));
res += mul(Get(s3,-dx,-dy), float4x4(-0.047219570726156,-0.146401762962341,-0.035988029092550,0.029221545904875,-0.092358127236366,0.086027972400188,0.001970527227968,-0.053789347410202,-0.010481187142432,-0.018880629912019,-0.065157562494278,-0.183919504284859,-0.036312971264124,-0.063897922635078,0.068689614534378,0.058275595307350));
res += mul(Get(s3,-dx,0), float4x4(-0.041289158165455,-0.208132937550545,-0.006821153685451,0.040651977062225,-0.031664092093706,0.038649782538414,0.006284454371780,0.039431739598513,0.049328800290823,0.093064434826374,0.064687438309193,-0.018998840823770,-0.062521204352379,0.097360096871853,0.028753062710166,0.086104534566402));
res += mul(Get(s3,-dx,dy), float4x4(-0.036161087453365,-0.105396665632725,0.055353097617626,-0.001195828081109,0.167854025959969,0.048514287918806,-0.052856191992760,-0.102959387004375,0.046844195574522,0.005353613756597,0.049433086067438,0.056739527732134,0.025122987106442,-0.041098609566689,-0.024470604956150,0.005794671364129));
res += mul(Get(s3,0,-dy), float4x4(0.012078928761184,-0.010016322135925,-0.049637269228697,-0.159459576010704,-0.044185440987349,0.001798318116926,-0.081272937357426,-0.033293575048447,-0.069438114762306,0.043100353330374,0.035911750048399,0.075332298874855,-0.031901687383652,-0.069349400699139,0.129069909453392,-0.025471832603216));
res += mul(Get(s3,0,0), float4x4(0.129937425255775,-0.135342136025429,-0.033300738781691,-0.123275063931942,0.150724947452545,0.066470637917519,-0.114010728895664,0.070523299276829,0.028495902195573,-0.024485589936376,-0.129670381546021,-0.248581200838089,0.092065334320068,-0.137782543897629,-0.163844466209412,-0.019855659455061));
res += mul(Get(s3,0,dy), float4x4(0.003347822465003,0.013587251305580,0.038275055587292,-0.064137302339077,-0.136967808008194,-0.090091295540333,0.003817358287051,0.083762727677822,-0.106014296412468,0.138965234160423,0.124725997447968,0.117336660623550,0.052026264369488,-0.126929208636284,-0.093519717454910,-0.214439257979393));
res += mul(Get(s3,dx,-dy), float4x4(-0.090404160320759,0.124791219830513,0.108564354479313,-0.259596228599548,-0.126515612006187,0.196524709463120,-0.112972989678383,0.058289755135775,0.063043072819710,-0.090022712945938,-0.075693406164646,-0.029671318829060,-0.111573070287704,-0.152909651398659,0.103389315307140,0.092933148145676));
res += mul(Get(s3,dx,0), float4x4(0.015782771632075,0.021446872502565,-0.037308648228645,-0.180419161915779,-0.016859283670783,-0.096791952848434,0.071814462542534,0.158968865871429,-0.107406906783581,0.120466969907284,0.192527085542679,0.017057422548532,-0.040760871022940,-0.070523686707020,0.021581221371889,-0.045769825577736));
res += mul(Get(s3,dx,dy), float4x4(0.033770617097616,-0.009199201129377,0.028330698609352,0.017565544694662,-0.078349508345127,0.016411956399679,-0.032425660640001,0.091608315706253,0.019505903124809,0.057113088667393,0.103867329657078,-0.185488969087601,-0.079981945455074,0.090161599218845,0.042383745312691,0.067431584000587));
return max(float4(0,0,0,0), res);
}
