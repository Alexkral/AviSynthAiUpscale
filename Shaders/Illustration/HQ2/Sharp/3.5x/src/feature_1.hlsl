sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.108509898185730,-0.348126709461212,0.047119263559580,-0.125211521983147) * Get(-dx,-dy);
res += float4(-0.170926660299301,-0.126351252198219,-0.060726970434189,-0.153806254267693) * Get(-dx,0);
res += float4(-0.005706018768251,-0.178816378116608,-0.130862012505531,0.058534536510706) * Get(-dx,dy);
res += float4(-0.175460264086723,-0.093220144510269,-0.025852024555206,0.075234301388264) * Get(0,-dy);
res += float4(-0.052834134548903,0.109051257371902,-0.086619541049004,-0.069513224065304) * Get(0,0);
res += float4(0.491817057132721,0.053191617131233,0.007539554499090,-0.290788441896439) * Get(0,dy);
res += float4(0.025228727608919,0.040818352252245,-0.020994139835238,0.171933740377426) * Get(dx,-dy);
res += float4(0.013242520391941,0.170205086469650,0.169537752866745,0.135741919279099) * Get(dx,0);
res += float4(-0.149600952863693,-0.018491078168154,-0.104822844266891,0.246091008186340) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
