sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.014949777163565,0.010752911679447,0.027867587283254,0.025369212031364,-0.087776497006416,-0.170660302042961,0.071013160049915,0.080234132707119,0.038107220083475,0.078027844429016,0.222137078642845,-0.066908910870552,0.003129216609523,-0.024148499593139,0.004945902619511,-0.033830396831036));
res += mul(Get(s0,-dx,0), float4x4(-0.038047790527344,-0.172882691025734,-0.148271024227142,0.027516571804881,-0.145368471741676,0.057129669934511,0.254428774118423,0.011639448814094,-0.046716641634703,-0.109422706067562,-0.146448880434036,0.097019888460636,-0.023464336991310,0.093937054276466,-0.022153036668897,-0.186959028244019));
res += mul(Get(s0,-dx,dy), float4x4(0.200773224234581,-0.174413606524467,-0.049205642193556,-0.048491429537535,-0.055738765746355,-0.135645136237144,0.027461744844913,0.139959633350372,-0.045857019722462,-0.094120956957340,-0.050048537552357,-0.130390778183937,0.141817823052406,0.057202070951462,0.048650760203600,-0.007694831117988));
res += mul(Get(s0,0,-dy), float4x4(-0.111370958387852,0.134628847241402,0.100496657192707,-0.099427491426468,0.003990936093032,-0.065119579434395,0.019594058394432,0.006613370962441,0.010506245307624,0.076299235224724,0.139549076557159,-0.077885329723358,-0.045484524220228,-0.032075695693493,-0.039394903928041,-0.107183672487736));
res += mul(Get(s0,0,0), float4x4(-0.103345490992069,0.064833372831345,0.071403935551643,-0.002284550108016,-0.059777628630400,0.154207065701485,0.070397205650806,-0.122845456004143,0.153364449739456,-0.090750545263290,-0.011421799659729,0.058298826217651,-0.004254959523678,-0.038813710212708,-0.085007354617119,0.026844142004848));
res += mul(Get(s0,0,dy), float4x4(0.183289080858231,-0.056667037308216,0.106612250208855,0.016758678480983,0.004338460508734,-0.166602879762650,-0.053509715944529,0.058330729603767,0.132716476917267,-0.225667461752892,0.016217872500420,0.014956615865231,-0.009311822243035,-0.039971206337214,-0.034549348056316,0.144107088446617));
res += mul(Get(s0,dx,-dy), float4x4(0.000738962145988,0.038779683411121,-0.048019509762526,-0.054451212286949,-0.088659338653088,-0.056150853633881,0.025931648910046,-0.182993412017822,-0.159634232521057,-0.056988731026649,-0.070809602737427,-0.096139252185822,0.037900619208813,-0.010895984247327,-0.004965619184077,0.017333693802357));
res += mul(Get(s0,dx,0), float4x4(-0.054977726191282,0.000858591170982,-0.006196927744895,0.122366674244404,0.055672701448202,0.006958871614188,0.026240818202496,-0.087875276803970,0.016407169401646,0.073737606406212,-0.008897208608687,0.014649746008217,-0.056501500308514,-0.076172530651093,-0.031492348760366,-0.024248072877526));
res += mul(Get(s0,dx,dy), float4x4(0.075524397194386,0.003114289604127,0.062532991170883,0.082313604652882,0.009381804615259,-0.029937585815787,-0.124932073056698,0.039603158831596,-0.017271265387535,-0.114835992455482,0.130673408508301,-0.182239830493927,-0.133559882640839,0.055405709892511,0.049193300306797,0.125560730695724));
res += mul(Get(s1,-dx,-dy), float4x4(-0.107362844049931,-0.155716225504875,-0.047421757131815,0.118225850164890,-0.229152604937553,0.034648399800062,0.033674906939268,0.094883121550083,0.118318699300289,-0.076444171369076,0.055873967707157,0.180500268936157,0.024540826678276,0.009531639516354,-0.009643532335758,0.016562791541219));
res += mul(Get(s1,-dx,0), float4x4(0.077055804431438,0.018936190754175,-0.104676857590675,0.010812702588737,0.039886761456728,0.125528261065483,-0.060709640383720,-0.032449845224619,-0.095237500965595,0.072144471108913,0.043672703206539,0.109465196728706,0.062405046075583,-0.011473603546619,-0.026738433167338,0.067786522209644));
res += mul(Get(s1,-dx,dy), float4x4(0.070371381938457,0.038360416889191,-0.081952810287476,0.009435230866075,0.001604338642210,0.251416712999344,0.088689073920250,0.046488001942635,-0.020913129672408,-0.033145066350698,-0.023538872599602,0.077224358916283,0.043808404356241,0.003934056498110,0.009704737924039,0.008417591452599));
res += mul(Get(s1,0,-dy), float4x4(-0.016712812706828,-0.008815760724247,0.052528105676174,0.193607524037361,0.176164895296097,0.064909070730209,0.019329814240336,-0.019449444487691,0.003201450686902,0.091456465423107,0.048486921936274,-0.006593344733119,0.094039127230644,-0.024045636877418,-0.050327200442553,-0.082277022302151));
res += mul(Get(s1,0,0), float4x4(-0.099354945123196,0.029345341026783,-0.007168115582317,0.079122416675091,0.137129232287407,-0.055796604603529,-0.015293926931918,-0.029561968520284,-0.016357623040676,0.035294771194458,-0.085384987294674,0.012017565779388,-0.030266990885139,0.057035446166992,0.005964080337435,0.034769259393215));
res += mul(Get(s1,0,dy), float4x4(-0.039982561022043,0.019191762432456,-0.159809455275536,0.005759978201240,-0.013576132245362,0.083856754004955,0.154109835624695,0.059362996369600,-0.084264643490314,0.035316623747349,0.104523122310638,-0.017901098355651,-0.061625160276890,0.075629539787769,-0.040058452636003,-0.034189853817225));
res += mul(Get(s1,dx,-dy), float4x4(0.012019081041217,0.154657915234566,0.056773982942104,0.015111808665097,0.023642159998417,-0.007890111766756,0.150363489985466,-0.060442339628935,0.120450600981712,-0.106259167194366,-0.005827186163515,0.038412306457758,0.100882984697819,0.023650741204619,-0.016466014087200,0.018016904592514));
res += mul(Get(s1,dx,0), float4x4(0.091466248035431,0.069965571165085,0.158815532922745,-0.004866485018283,0.078079648315907,0.026478944346309,0.049104254692793,-0.097539715468884,0.073975302278996,-0.057678993791342,0.005807067733258,-0.028540190309286,-0.102360501885414,0.002768636913970,0.088437691330910,0.173892974853516));
res += mul(Get(s1,dx,dy), float4x4(0.088853448629379,0.088610775768757,-0.126261129975319,-0.155877396464348,-0.140848383307457,0.098033681511879,0.014120580628514,0.011771699413657,-0.058673374354839,-0.044801767915487,-0.006620317697525,0.154217571020126,0.012626012787223,0.060002226382494,-0.070215396583080,-0.152357935905457));
res += mul(Get(s2,-dx,-dy), float4x4(-0.013374287635088,-0.006255951244384,0.067788146436214,0.116663433611393,-0.107127979397774,0.000405966799008,-0.197968423366547,-0.084055051207542,0.029620414599776,0.167041808366776,0.063554398715496,-0.028589360415936,0.040038209408522,-0.122717328369617,0.032026279717684,0.168157219886780));
res += mul(Get(s2,-dx,0), float4x4(0.137817054986954,0.121969446539879,0.010892366059124,-0.111016035079956,0.001742135500535,-0.108742490410805,0.053093910217285,-0.050971440970898,-0.043964918702841,0.241430982947350,0.003601981094107,0.067847549915314,0.054956562817097,-0.041769441217184,0.032020930200815,-0.140092134475708));
res += mul(Get(s2,-dx,dy), float4x4(-0.062332112342119,0.188695937395096,0.116540573537350,-0.021010687574744,-0.003181978594512,0.098117545247078,-0.000520414207131,-0.002014763886109,-0.088695965707302,0.031922575086355,-0.006066187284887,-0.126443937420845,-0.036851216107607,-0.067123301327229,0.044608809053898,0.100809484720230));
res += mul(Get(s2,0,-dy), float4x4(-0.039327997714281,-0.212964519858360,-0.067417562007904,0.055941142141819,0.072176016867161,-0.002526383381337,-0.002848769305274,-0.139377683401108,0.090714626014233,0.069765359163284,0.019530670717359,-0.126194387674332,0.057015672326088,-0.000658908742480,0.061001718044281,0.084072031080723));
res += mul(Get(s2,0,0), float4x4(0.032260615378618,0.019766611978412,0.086365170776844,-0.095311589539051,-0.065301135182381,-0.083054527640343,-0.041585877537727,0.027831386774778,0.001494703115895,-0.058531150221825,-0.066588364541531,-0.141388252377510,-0.028304362669587,0.026563737541437,-0.087750524282455,-0.020953156054020));
res += mul(Get(s2,0,dy), float4x4(0.043816555291414,0.004703446291387,-0.014143004082143,-0.003883390221745,0.086887367069721,0.089484006166458,0.009955361485481,0.095414012670517,-0.133893996477127,-0.043866254389286,0.066470041871071,0.127246633172035,-0.010849324055016,0.059173639863729,-0.038777519017458,-0.058312136679888));
res += mul(Get(s2,dx,-dy), float4x4(0.104598358273506,0.029873667284846,0.041184537112713,0.132905647158623,-0.063208222389221,-0.058589283376932,0.055123776197433,-0.031044399365783,0.027725666761398,-0.039522182196379,0.111808687448502,-0.072038814425468,0.147224977612495,0.030830394476652,0.154423654079437,-0.080130115151405));
res += mul(Get(s2,dx,0), float4x4(0.089213609695435,0.055579531937838,-0.005869346670806,0.008253816515207,0.051382515579462,0.077012471854687,0.065164938569069,-0.107910379767418,0.038981460034847,0.115677848458290,-0.050128716975451,0.063675493001938,0.081042431294918,0.061584807932377,-0.022622415795922,0.072041355073452));
res += mul(Get(s2,dx,dy), float4x4(-0.005835491232574,0.045061532407999,-0.095905289053917,0.136823982000351,0.059559036046267,0.066652059555054,-0.071832068264484,0.037479512393475,0.036427695304155,-0.048709470778704,0.065302252769470,-0.027084723114967,0.078611895442009,0.064237013459206,-0.008316520601511,0.218638896942139));
res += mul(Get(s3,-dx,-dy), float4x4(0.001366080832668,-0.022706354036927,-0.015339562669396,-0.060672983527184,0.041454967111349,-0.086147740483284,0.063399240374565,-0.064294867217541,-0.074401624500751,-0.002487508580089,0.102361157536507,0.131249740719795,-0.038388740271330,-0.084023393690586,-0.081334821879864,0.081751890480518));
res += mul(Get(s3,-dx,0), float4x4(0.192705467343330,-0.035906970500946,0.055991921573877,0.054177988320589,-0.032127905637026,0.231352150440216,-0.203201219439507,-0.134360924363136,0.053640395402908,-0.007731724996120,0.093008153140545,-0.076663054525852,0.057698708027601,0.022428771480918,-0.120427541434765,-0.089106470346451));
res += mul(Get(s3,-dx,dy), float4x4(0.082680992782116,0.012219583615661,-0.001455199788325,-0.062529250979424,0.032241418957710,0.126263394951820,-0.017652446404099,-0.023864569142461,0.105733484029770,-0.086863264441490,0.006409114692360,-0.083333246409893,-0.036155536770821,-0.041532583534718,-0.039445266127586,-0.047542966902256));
res += mul(Get(s3,0,-dy), float4x4(0.080670855939388,-0.153957471251488,-0.053040761500597,-0.136128321290016,0.208705961704254,0.011396618559957,-0.003438804065809,-0.115281820297241,-0.090229682624340,-0.087052188813686,-0.066735878586769,-0.010790162719786,0.170785084366798,-0.024296257644892,0.011768880300224,-0.076381146907806));
res += mul(Get(s3,0,0), float4x4(0.103339359164238,0.003407921409234,0.027022738009691,0.166771262884140,-0.117009863257408,0.036022413522005,-0.176075130701065,-0.142522677779198,-0.018537053838372,0.094861209392548,-0.118258528411388,0.160148486495018,0.075228512287140,-0.038297757506371,-0.078693345189095,-0.102620445191860));
res += mul(Get(s3,0,dy), float4x4(0.035917166620493,0.092165291309357,0.053078722208738,-0.125039979815483,-0.035026468336582,0.025910116732121,-0.118734724819660,-0.013739200308919,0.034161284565926,-0.008164798840880,-0.054590519517660,0.094244726002216,0.018835037946701,-0.168796017765999,-0.131662830710411,-0.038233280181885));
res += mul(Get(s3,dx,-dy), float4x4(0.085078679025173,0.095227338373661,-0.040665183216333,-0.079584881663322,-0.100154526531696,-0.080633163452148,0.072976037859917,-0.143124967813492,-0.013923801481724,0.180393382906914,-0.055640194565058,0.160192936658859,0.071151897311211,-0.002230513840914,-0.063221253454685,-0.089396417140961));
res += mul(Get(s3,dx,0), float4x4(-0.017736691981554,0.046794876456261,-0.152365043759346,-0.043708734214306,0.022056274116039,0.055615231394768,-0.154517427086830,0.047653853893280,-0.041302144527435,0.071409106254578,0.063586980104446,-0.027939207851887,-0.028363464400172,-0.067694216966629,-0.032896541059017,-0.019368249922991));
res += mul(Get(s3,dx,dy), float4x4(0.016839114949107,-0.097951076924801,-0.085547253489494,-0.013834698125720,-0.116022318601608,-0.029134737327695,-0.087109751999378,0.095254927873611,-0.117386110126972,0.022045414894819,0.069879412651062,-0.002673228271306,0.063084803521633,0.087619051337242,-0.150539740920067,0.037985064089298));
return max(float4(0,0,0,0), res);
}
