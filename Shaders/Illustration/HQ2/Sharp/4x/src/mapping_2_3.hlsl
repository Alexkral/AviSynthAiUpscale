sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.118046566843987,-0.223696053028107,-0.080480627715588,0.315556108951569,0.029938546940684,-0.043252330273390,-0.063490241765976,-0.161846980452538,0.066690042614937,-0.142065212130547,0.018495636060834,-0.140518978238106,0.044509585946798,0.194776907563210,-0.013234334066510,-0.114511586725712));
res += mul(Get(s0,-dx,0), float4x4(0.033015210181475,0.190038040280342,0.124352529644966,-0.167691677808762,-0.208592638373375,0.036385428160429,0.120223894715309,-0.028114903718233,0.019609570503235,0.083720318973064,0.066171087324619,-0.176217645406723,-0.039237424731255,-0.033490404486656,-0.002702198922634,0.134220227599144));
res += mul(Get(s0,-dx,dy), float4x4(0.180006578564644,0.006357711274177,-0.158144071698189,0.175339266657829,0.044022496789694,-0.016822572797537,-0.031257823109627,0.139132052659988,0.084419794380665,-0.158032983541489,0.058495089411736,0.054201539605856,-0.133360370993614,0.005479304119945,0.050656609237194,0.033994946628809));
res += mul(Get(s0,0,-dy), float4x4(0.048983551561832,-0.287300050258636,-0.271522551774979,0.070000037550926,0.055780377238989,-0.032627463340759,0.139129310846329,0.127625614404678,0.149985730648041,-0.011821867898107,-0.117766447365284,-0.255310654640198,-0.170089602470398,-0.001241899793968,-0.084055848419666,-0.028396217152476));
res += mul(Get(s0,0,0), float4x4(0.062633685767651,-0.091106340289116,0.001197046134621,0.194189459085464,-0.060594305396080,-0.008761508390307,0.069582901895046,-0.037665471434593,-0.028220895677805,0.022397477179766,-0.039046932011843,0.083911098539829,-0.035492584109306,-0.028952775523067,0.072078116238117,-0.031816530972719));
res += mul(Get(s0,0,dy), float4x4(0.079748533666134,-0.031079279258847,-0.064208701252937,-0.160602465271950,0.047748494893312,-0.030530473217368,-0.013402239419520,0.022869568318129,-0.129572883248329,-0.016096463426948,-0.224589854478836,-0.040735371410847,-0.074525773525238,-0.109382472932339,-0.191813081502914,-0.092450730502605));
res += mul(Get(s0,dx,-dy), float4x4(0.133045271039009,-0.054489333182573,0.009745605289936,-0.240496426820755,0.025898583233356,0.069234021008015,0.176916033029556,0.033463202416897,-0.026413133367896,-0.272064596414566,-0.260228306055069,0.011850153096020,0.131781682372093,0.206897690892220,0.109824620187283,0.011037966236472));
res += mul(Get(s0,dx,0), float4x4(-0.094465345144272,0.009489489719272,0.071378976106644,-0.065679468214512,0.079464115202427,-0.005145873874426,0.002237734850496,-0.125020593404770,0.029044268652797,0.193972393870354,-0.016362899914384,0.026405215263367,-0.023242296651006,0.019217588007450,0.185751855373383,-0.044409111142159));
res += mul(Get(s0,dx,dy), float4x4(-0.264738023281097,-0.054119016975164,-0.069836817681789,0.039842523634434,-0.215851172804832,0.188474684953690,-0.115584842860699,-0.380697757005692,-0.054648824036121,0.108754843473434,-0.100497536361217,0.038052320480347,-0.054020233452320,0.132928192615509,-0.089703194797039,-0.032819680869579));
res += mul(Get(s1,-dx,-dy), float4x4(0.132514536380768,-0.053934890776873,0.010537689551711,0.010626595467329,-0.005056146997958,-0.156256422400475,-0.013563965447247,-0.017756406217813,-0.108130961656570,0.216857030987740,0.094354450702667,-0.030551286414266,0.259224891662598,-0.022200664505363,-0.099928095936775,0.009832984767854));
res += mul(Get(s1,-dx,0), float4x4(-0.120027557015419,0.186018109321594,0.245049193501472,-0.139279603958130,-0.030086591839790,-0.024020273238420,0.000632101087831,0.098637588322163,0.144471988081932,0.009792644530535,-0.189887434244156,-0.016801731660962,-0.123397164046764,0.041900176554918,0.118893116712570,-0.014291527681053));
res += mul(Get(s1,-dx,dy), float4x4(-0.208288177847862,0.183893188834190,0.163032233715057,0.177549064159393,0.005236775148660,0.073337271809578,0.127797141671181,-0.139627009630203,-0.138599440455437,-0.185109868645668,-0.094514437019825,0.114885322749615,-0.078334875404835,-0.039606470614672,0.053368404507637,-0.170022428035736));
res += mul(Get(s1,0,-dy), float4x4(-0.096421688795090,0.055904041975737,0.052980747073889,-0.205231368541718,0.067099228501320,-0.074014134705067,0.003255498828366,-0.051667295396328,0.194786831736565,0.060036599636078,0.137741088867188,0.139384344220161,0.093773625791073,-0.051162518560886,0.121976532042027,-0.164361357688904));
res += mul(Get(s1,0,0), float4x4(-0.072533130645752,-0.140033051371574,0.029535101726651,-0.121252313256264,-0.084217555820942,0.004183784592897,0.126976042985916,-0.060150016099215,-0.043985031545162,-0.037185471504927,0.193625077605247,-0.077145755290985,0.083661086857319,-0.034373577684164,0.056805908679962,-0.079894199967384));
res += mul(Get(s1,0,dy), float4x4(-0.132296219468117,0.089046262204647,0.016288992017508,0.083179868757725,0.037053916603327,-0.101958684623241,0.154822275042534,0.094544626772404,-0.006365659181029,-0.118574827909470,0.079576797783375,-0.023038865998387,-0.048677645623684,-0.018335495144129,0.074465304613113,0.055815655738115));
res += mul(Get(s1,dx,-dy), float4x4(-0.049315989017487,0.018898913636804,0.086640633642673,0.093246713280678,0.027885403484106,-0.023547032848001,-0.036520227789879,0.013296105898917,0.006290115416050,-0.160658061504364,-0.149493038654327,0.077625624835491,-0.105931304395199,-0.039901975542307,-0.154156416654587,-0.035192407667637));
res += mul(Get(s1,dx,0), float4x4(0.035490401089191,0.187338769435883,-0.100216649472713,-0.030242480337620,-0.043703638017178,0.001458083628677,0.018552672117949,-0.193167567253113,0.079908356070518,-0.197102189064026,-0.050094116479158,-0.008163971826434,-0.071346752345562,0.285908430814743,0.221688166260719,0.210376933217049));
res += mul(Get(s1,dx,dy), float4x4(0.000554397935048,-0.101926073431969,-0.014570064842701,-0.051902864128351,0.084897384047508,0.084028780460358,-0.091096438467503,-0.033333193510771,0.050679083913565,0.099374696612358,-0.081158913671970,-0.150863349437714,-0.169892415404320,0.122321806848049,0.009370623156428,0.042432330548763));
res += mul(Get(s2,-dx,-dy), float4x4(-0.040216244757175,-0.103175468742847,-0.060967478901148,-0.149468600749969,-0.002330648014322,0.145031437277794,-0.100373610854149,-0.152444288134575,0.037889417260885,-0.133548513054848,0.160176828503609,0.136824160814285,-0.135883748531342,-0.204726189374924,0.045949906110764,0.166066139936447));
res += mul(Get(s2,-dx,0), float4x4(0.050661727786064,-0.079410038888454,0.006264121271670,0.035785209387541,-0.079099893569946,0.134437143802643,0.050746645778418,-0.063430368900299,0.025284945964813,-0.214266732335091,0.044208034873009,0.127842292189598,0.015049046836793,0.053515329957008,0.052249316126108,0.182725131511688));
res += mul(Get(s2,-dx,dy), float4x4(-0.107007093727589,-0.153840050101280,0.061051916331053,-0.041933726519346,0.093053869903088,-0.179059118032455,0.080574057996273,0.094553969800472,-0.003602524520829,-0.099537253379822,0.124600477516651,0.075668379664421,0.117060333490372,0.113896198570728,-0.169979259371758,-0.062979377806187));
res += mul(Get(s2,0,-dy), float4x4(0.166250720620155,0.185672029852867,-0.167584508657455,0.038372095674276,-0.064883276820183,0.053946077823639,-0.107142031192780,-0.094619847834110,0.150842115283012,-0.082468852400780,-0.141183346509933,0.045196041464806,0.029759127646685,0.056094586849213,-0.088142648339272,-0.067677296698093));
res += mul(Get(s2,0,0), float4x4(-0.173888787627220,0.015130424872041,0.072176471352577,0.083804361522198,-0.135511040687561,-0.050747871398926,0.049534913152456,-0.162169381976128,-0.088262885808945,-0.168561384081841,-0.065840646624565,-0.131239503622055,-0.069641724228859,0.084094949066639,-0.008426710031927,-0.028474213555455));
res += mul(Get(s2,0,dy), float4x4(-0.047990195453167,-0.288158535957336,-0.084181204438210,0.046493668109179,-0.104125753045082,0.032735813409090,0.007570151705295,0.119842730462551,0.116716183722019,-0.038425534963608,0.001601392053999,-0.021597044542432,-0.010518410243094,-0.137696430087090,0.183900773525238,-0.043645348399878));
res += mul(Get(s2,dx,-dy), float4x4(-0.142697393894196,-0.368848294019699,-0.163918107748032,-0.131205677986145,-0.119712941348553,-0.054087489843369,-0.039426874369383,0.009908142499626,-0.097753845155239,-0.103240758180618,0.139973133802414,0.058374270796776,-0.037347946316004,0.020534327253699,-0.021466052159667,0.043815523386002));
res += mul(Get(s2,dx,0), float4x4(-0.079588286578655,0.189005821943283,-0.025478644296527,-0.096667550504208,-0.063553832471371,0.022587448358536,-0.084077514708042,0.273410290479660,0.132883027195930,0.239002391695976,0.083803564310074,0.176863715052605,0.006075196433812,-0.018550546839833,0.038071408867836,-0.070477738976479));
res += mul(Get(s2,dx,dy), float4x4(-0.092710539698601,-0.069018885493279,0.035564750432968,-0.022048268467188,-0.139169946312904,0.068966530263424,-0.006736847572029,0.149258181452751,0.215387761592865,0.114101745188236,0.053431820124388,0.133747935295105,-0.069085650146008,0.056272573769093,0.054874025285244,-0.078588865697384));
res += mul(Get(s3,-dx,-dy), float4x4(0.094609871506691,0.076980940997601,-0.042523480951786,0.191037520766258,0.104761213064194,-0.045119617134333,0.041437350213528,0.025885695591569,0.113272450864315,-0.005305160768330,0.036627333611250,-0.011326114647090,0.109307840466499,-0.142736643552780,0.051921296864748,-0.040588364005089));
res += mul(Get(s3,-dx,0), float4x4(-0.090584717690945,-0.078346662223339,-0.108966991305351,0.136032983660698,0.174632981419563,0.027122627943754,-0.094782680273056,0.178426191210747,-0.137487351894379,-0.145038947463036,-0.033027656376362,-0.086174108088017,0.080987453460693,-0.095365978777409,-0.131588459014893,0.038941349834204));
res += mul(Get(s3,-dx,dy), float4x4(0.078145511448383,0.260603934526443,0.053540881723166,0.130522176623344,0.094842374324799,-0.122727796435356,-0.096377715468407,-0.034802962094545,0.015481265261769,-0.078783877193928,0.029240023344755,-0.066680528223515,-0.167623445391655,-0.308089882135391,-0.140780985355377,0.064836017787457));
res += mul(Get(s3,0,-dy), float4x4(0.033107697963715,0.051613278687000,0.016994452103972,0.038701917976141,0.030967568978667,0.089781671762466,-0.119238108396530,0.021626584231853,0.095486491918564,-0.294350475072861,0.090918801724911,-0.235528931021690,-0.029559977352619,0.083249889314175,-0.160200387239456,0.046513512730598));
res += mul(Get(s3,0,0), float4x4(-0.239906504750252,-0.108865648508072,-0.024962991476059,-0.164356276392937,-0.058610860258341,-0.028119636699557,0.001413638703525,0.005999059882015,-0.217437058687210,0.226453796029091,-0.055893775075674,0.078677028417587,0.010073330253363,-0.104153178632259,-0.071503557264805,-0.055685091763735));
res += mul(Get(s3,0,dy), float4x4(0.169462025165558,-0.011459398083389,0.209931179881096,-0.042492870241404,-0.253108173608780,0.048182092607021,-0.021421082317829,-0.246392548084259,0.027622479945421,0.218866288661957,-0.069394558668137,-0.107368163764477,-0.160114660859108,0.159306347370148,-0.086833067238331,0.120723828673363));
res += mul(Get(s3,dx,-dy), float4x4(0.124897524714470,0.049605727195740,-0.042102687060833,-0.022728079929948,-0.127163216471672,0.166278108954430,-0.067713484168053,0.145885735750198,-0.097070291638374,0.179048836231232,-0.012697402387857,0.108581140637398,-0.072975486516953,-0.279836207628250,0.105729654431343,-0.121102109551430));
res += mul(Get(s3,dx,0), float4x4(0.003441960550845,0.072082504630089,-0.032334584742785,0.020536847412586,0.033199861645699,0.132921561598778,0.107252992689610,0.024653485044837,0.072784639894962,-0.099635116755962,0.007758084684610,-0.114899531006813,-0.158912539482117,-0.148992314934731,-0.017471386119723,0.208595737814903));
res += mul(Get(s3,dx,dy), float4x4(0.099871270358562,0.142252668738365,0.006760958116502,0.009151500649750,0.014515832997859,-0.003529209177941,0.176128640770912,0.042567912489176,0.182577043771744,-0.218801915645599,0.020022297278047,-0.039247892796993,-0.136086210608482,0.289824277162552,-0.151952490210533,0.082070857286453));
return max(float4(0,0,0,0), res);
}
