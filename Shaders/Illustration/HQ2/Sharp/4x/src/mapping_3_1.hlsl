sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.153265595436096,-0.068719193339348,0.045616641640663,-0.128268435597420,0.020161284133792,0.072733335196972,0.178542777895927,0.075394578278065,0.072986990213394,0.155814707279205,-0.080753751099110,-0.152627497911453,0.137471869587898,-0.045968957245350,0.041577793657780,0.020685127004981));
res += mul(Get(s0,-dx,0), float4x4(-0.153675466775894,-0.082356251776218,0.150073960423470,-0.054128933697939,-0.219140082597733,0.030665099620819,0.082131370902061,-0.046696480363607,-0.174018546938896,-0.001550811110064,-0.047874100506306,0.078069195151329,-0.126156464219093,-0.068631626665592,-0.093340389430523,-0.144983068108559));
res += mul(Get(s0,-dx,dy), float4x4(0.035372924059629,-0.055719204246998,-0.186600044369698,-0.047086179256439,-0.004395938944072,0.023707516491413,0.133723288774490,-0.165607511997223,-0.146156713366508,-0.258313030004501,0.031156994402409,-0.026573207229376,0.143698230385780,0.101583383977413,-0.282960385084152,0.079642422497272));
res += mul(Get(s0,0,-dy), float4x4(0.097113102674484,-0.195221394300461,0.059096928685904,0.000158074108185,-0.206564694643021,0.094615735113621,-0.106156587600708,-0.086452163755894,0.034484893083572,0.056742202490568,0.011129854246974,0.056818082928658,0.021993067115545,-0.166685059666634,-0.090759024024010,0.040638752281666));
res += mul(Get(s0,0,0), float4x4(0.084777325391769,-0.036474313586950,-0.108673833310604,-0.035557851195335,0.062486182898283,0.022825861349702,0.169788092374802,0.031260479241610,-0.022534800693393,0.089980028569698,-0.269916087388992,0.070133045315742,-0.192757025361061,0.132057696580887,0.162840187549591,-0.101801320910454));
res += mul(Get(s0,0,dy), float4x4(0.141591399908066,-0.016194960102439,-0.027234841138124,0.098575606942177,0.033497538417578,0.132375687360764,0.117884799838066,-0.120851106941700,0.267699182033539,-0.038064688444138,-0.199256941676140,0.131610214710236,-0.011093609035015,-0.093934178352356,-0.247410520911217,0.041079964488745));
res += mul(Get(s0,dx,-dy), float4x4(-0.100299336016178,0.088628627359867,0.117984086275101,-0.080737762153149,-0.023520873859525,-0.004570533987135,0.146577879786491,0.224315240979195,0.086831554770470,0.135611921548843,0.137728884816170,0.047943275421858,0.177577555179596,-0.046658992767334,-0.049920100718737,-0.013921895064414));
res += mul(Get(s0,dx,0), float4x4(0.167958378791809,-0.074135124683380,0.175501525402069,0.052906803786755,-0.099067151546478,0.230557173490524,0.002229155739769,-0.188872501254082,-0.046569287776947,-0.120288267731667,0.027063691988587,0.076677426695824,-0.057822361588478,0.069073140621185,0.191932946443558,0.162078902125359));
res += mul(Get(s0,dx,dy), float4x4(0.109788939356804,0.056268725544214,-0.016301950439811,0.054910928010941,0.206960260868073,-0.003869913984090,-0.080727688968182,-0.157937467098236,-0.021810129284859,0.137847140431404,-0.019654152914882,0.056328941136599,0.103406444191933,0.079867482185364,0.034020837396383,-0.003269801847637));
res += mul(Get(s1,-dx,-dy), float4x4(-0.153400555253029,-0.134732231497765,0.231304317712784,0.121114045381546,0.067673303186893,0.105079136788845,0.174502342939377,-0.188075423240662,0.132730305194855,0.157839760184288,-0.002244312781841,-0.101074002683163,-0.155427142977715,0.210626646876335,-0.104474537074566,-0.000771543243900));
res += mul(Get(s1,-dx,0), float4x4(-0.003405909519643,-0.165802463889122,-0.175649195909500,-0.337270081043243,-0.001060693990439,-0.028984237462282,-0.041642002761364,-0.267195314168930,-0.048232909291983,0.039667394012213,0.170065209269524,-0.088146381080151,0.085399508476257,0.023995855823159,0.025671442970634,-0.123731076717377));
res += mul(Get(s1,-dx,dy), float4x4(0.039212528616190,-0.073374986648560,-0.178956285119057,-0.174147337675095,0.122442431747913,-0.162076652050018,-0.058420304208994,0.103959962725639,-0.025961069390178,-0.279225230216980,-0.012487648054957,0.132068723440170,-0.009430648759007,-0.062021031975746,0.005316684488207,0.061467632651329));
res += mul(Get(s1,0,-dy), float4x4(-0.012950366362929,0.007147782016546,0.020310537889600,0.189497753977776,0.059372972697020,0.126343503594398,-0.093432590365410,0.237805306911469,0.132537454366684,-0.153688594698906,-0.101596049964428,-0.145876586437225,-0.180844694375992,-0.024134671315551,0.103598289191723,-0.048956431448460));
res += mul(Get(s1,0,0), float4x4(-0.162512630224228,-0.165093645453453,-0.031004322692752,0.036738164722919,0.118270367383957,-0.044917643070221,0.084432393312454,-0.026273773983121,0.088308520615101,-0.042474649846554,-0.097760736942291,-0.105662092566490,0.028699226677418,0.055735368281603,-0.004038257524371,-0.102831713855267));
res += mul(Get(s1,0,dy), float4x4(0.084826640784740,-0.000871240452398,-0.066630013287067,-0.049989961087704,-0.077275656163692,-0.019639259204268,-0.076391763985157,0.174599841237068,0.075060345232487,0.009831408038735,-0.107226647436619,-0.007622830569744,-0.067593246698380,0.088779613375664,-0.164766430854797,0.028302611783147));
res += mul(Get(s1,dx,-dy), float4x4(-0.135965883731842,-0.166264578700066,0.032703693956137,0.093994170427322,-0.094542235136032,0.070880793035030,0.151337727904320,0.070311576128006,-0.044127102941275,0.177311882376671,0.000337481527822,-0.107598580420017,0.072025254368782,-0.052974142134190,0.070024363696575,-0.041408084332943));
res += mul(Get(s1,dx,0), float4x4(-0.016829468309879,-0.035795744508505,0.148768514394760,0.199985548853874,0.047060888260603,-0.148065239191055,0.015122132375836,0.009049629792571,0.083027198910713,-0.025033676996827,0.046940386295319,-0.023171974346042,-0.063158556818962,-0.110638253390789,0.147149458527565,0.155462950468063));
res += mul(Get(s1,dx,dy), float4x4(-0.085189111530781,-0.100565433502197,0.058222100138664,0.164554834365845,0.025855507701635,0.102909393608570,-0.084198057651520,-0.239604711532593,-0.080297745764256,0.010244015604258,0.123095065355301,-0.080654561519623,-0.017091970890760,-0.130664080381393,-0.113129265606403,-0.160792708396912));
res += mul(Get(s2,-dx,-dy), float4x4(0.063253320753574,-0.024305606260896,-0.183221265673637,-0.122506141662598,-0.090299084782600,-0.106504827737808,-0.016922993585467,0.064908385276794,0.023976247757673,0.065090797841549,-0.006254012230784,0.086542047560215,0.011644302867353,0.014936180785298,0.044858887791634,-0.011107936501503));
res += mul(Get(s2,-dx,0), float4x4(-0.012362399138510,0.117084935307503,-0.012319857254624,0.162618398666382,-0.121654160320759,0.167565003037453,-0.212587967514992,-0.119839310646057,-0.076137296855450,0.010006344877183,-0.003506404114887,-0.042120251804590,0.018466787412763,-0.055399388074875,-0.075376592576504,-0.153212159872055));
res += mul(Get(s2,-dx,dy), float4x4(-0.003306316677481,-0.001835737028159,-0.083146288990974,0.028300054371357,0.166974827647209,0.081919133663177,-0.072743549942970,-0.111743457615376,0.206197708845139,0.131753221154213,0.061602499336004,0.036668818444014,-0.023463660851121,0.006064440589398,-0.126872777938843,0.039388060569763));
res += mul(Get(s2,0,-dy), float4x4(0.075427725911140,-0.203884810209274,-0.149273574352264,0.069365255534649,0.162549540400505,0.022061070427299,-0.010606343857944,0.259102195501328,0.171824157238007,0.087394833564758,-0.092982947826385,-0.007941870950162,0.155923813581467,0.160077184438705,0.022262170910835,-0.020930157974362));
res += mul(Get(s2,0,0), float4x4(-0.179866090416908,0.007913161069155,-0.220471084117889,-0.145243197679520,0.074248656630516,-0.007963382638991,0.177346676588058,-0.140127539634705,-0.121964268386364,-0.077267728745937,0.031131967902184,-0.193111106753349,-0.062571190297604,0.123578734695911,0.239855825901031,-0.043350767344236));
res += mul(Get(s2,0,dy), float4x4(0.041937008500099,0.012482025660574,0.035371325910091,-0.027072772383690,0.083349354565144,-0.220596402883530,-0.089978873729706,-0.010475692339242,0.002071572002023,-0.016163496300578,0.004747929517180,-0.061658587306738,0.052465125918388,0.164775311946869,-0.048180911689997,0.067420944571495));
res += mul(Get(s2,dx,-dy), float4x4(0.075262352824211,0.050462871789932,0.250570535659790,-0.041598755866289,-0.251444786787033,0.070111081004143,-0.091863118112087,0.114761874079704,-0.151491299271584,0.027022384107113,-0.048690762370825,-0.021524604409933,-0.067464955151081,-0.020857177674770,-0.029619494453073,0.072546131908894));
res += mul(Get(s2,dx,0), float4x4(0.062325906008482,-0.221666812896729,-0.051269736140966,-0.189975365996361,0.262659728527069,0.055902406573296,0.140577897429466,0.079431474208832,-0.075729183852673,-0.186274081468582,-0.007869547232985,0.019218590110540,-0.049270417541265,0.177028730511665,-0.090728446841240,-0.274360120296478));
res += mul(Get(s2,dx,dy), float4x4(0.097618490457535,0.080960027873516,-0.022359412163496,-0.012879523448646,0.116368316113949,-0.047865226864815,-0.165785714983940,-0.053729571402073,0.136199280619621,-0.068053759634495,0.071629770100117,0.036072913557291,0.077430509030819,0.071912981569767,0.017029831185937,-0.092968642711639));
res += mul(Get(s3,-dx,-dy), float4x4(-0.290005803108215,-0.040994092822075,0.036885492503643,0.282689750194550,-0.012397103942931,0.154976874589920,-0.160038158297539,0.155169233679771,0.052622690796852,0.095450192689896,0.098558925092220,-0.036177970468998,-0.007875741459429,-0.118145674467087,-0.061643309891224,0.032589893788099));
res += mul(Get(s3,-dx,0), float4x4(-0.157423138618469,0.114009596407413,-0.058150168508291,-0.025890892371535,-0.111005567014217,0.018556993454695,0.045915588736534,-0.003859433345497,-0.014709800481796,-0.121327608823776,-0.031286437064409,0.149271950125694,0.110883958637714,-0.165571019053459,-0.121323019266129,-0.141867145895958));
res += mul(Get(s3,-dx,dy), float4x4(0.031727641820908,0.184685811400414,0.010158705525100,-0.017320593819022,-0.007633768953383,-0.021930670365691,0.102572835981846,0.078395046293736,-0.095301143825054,0.014903955161572,-0.280344128608704,0.029594764113426,-0.183164164423943,-0.005206147674471,-0.088623218238354,-0.198034837841988));
res += mul(Get(s3,0,-dy), float4x4(-0.064015686511993,-0.041735019534826,0.026487030088902,0.124798908829689,-0.008979983627796,0.040183737874031,-0.000927325570956,0.106367409229279,0.234061777591705,-0.050065796822309,0.164431631565094,0.275538355112076,-0.096059799194336,-0.014800761826336,-0.019588960334659,-0.066004402935505));
res += mul(Get(s3,0,0), float4x4(-0.016050921753049,-0.235168009996414,0.103312097489834,0.023055369034410,0.076012611389160,0.140744522213936,0.065175294876099,0.080206349492073,-0.007586200721562,-0.021113745868206,0.084354788064957,-0.116668619215488,0.063860684633255,-0.130706295371056,-0.051800064742565,-0.111679933965206));
res += mul(Get(s3,0,dy), float4x4(0.110985569655895,0.054199934005737,-0.152317613363266,-0.126488551497459,0.046640958636999,0.020653374493122,-0.016198357567191,0.001403738395311,-0.060177721083164,-0.143707275390625,0.134533002972603,0.125328078866005,0.215068474411964,-0.097423166036606,-0.090656824409962,0.170166403055191));
res += mul(Get(s3,dx,-dy), float4x4(-0.074956476688385,0.007260805927217,-0.018933352082968,0.141755625605583,0.271638780832291,-0.065903298556805,-0.121331490576267,-0.077629983425140,-0.161580234766006,-0.158720403909683,0.016005206853151,0.148245170712471,-0.097867846488953,0.053746309131384,-0.019080990925431,0.040040135383606));
res += mul(Get(s3,dx,0), float4x4(-0.115990623831749,-0.264045029878616,0.048724532127380,-0.040374081581831,-0.081078208982944,0.011223264038563,0.000201856120839,-0.159320399165154,0.106737464666367,0.066406168043613,0.081558629870415,-0.045310720801353,0.116730503737926,-0.244048938155174,-0.001893532229587,0.019116684794426));
res += mul(Get(s3,dx,dy), float4x4(-0.166645556688309,0.017977358773351,-0.151526272296906,0.099593438208103,-0.124158218502998,-0.056442029774189,0.050660267472267,-0.013280942104757,-0.090550906956196,0.052452865988016,0.153904691338539,-0.167645439505577,0.119140461087227,0.037979573011398,0.119619429111481,-0.061818692833185));
return max(float4(0,0,0,0), res);
}
