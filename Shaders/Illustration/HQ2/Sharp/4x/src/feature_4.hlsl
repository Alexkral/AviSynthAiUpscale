sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(-0.202599823474884,-0.170780897140503,-0.130504265427589,0.087676636874676) * Get(-dx,-dy);
res += float4(0.243701502680779,-0.105542585253716,0.132385417819023,0.061849031597376) * Get(-dx,0);
res += float4(0.082746155560017,-0.041338860988617,-0.235499709844589,-0.113455668091774) * Get(-dx,dy);
res += float4(0.119014263153076,0.124728307127953,-0.091239467263222,-0.183896690607071) * Get(0,-dy);
res += float4(-0.024933645501733,0.056106105446815,-0.021007385104895,0.040397249162197) * Get(0,0);
res += float4(-0.033654779195786,-0.113094456493855,0.053515058010817,0.044865861535072) * Get(0,dy);
res += float4(-0.132838636636734,-0.051195543259382,0.051940668374300,0.042341548949480) * Get(dx,-dy);
res += float4(-0.025755330920219,0.053843092173338,0.141329839825630,-0.030777316540480) * Get(dx,0);
res += float4(0.107724674046040,0.140545308589935,-0.052902281284332,-0.226541370153427) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
