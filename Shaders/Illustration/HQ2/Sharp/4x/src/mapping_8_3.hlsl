sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.139366447925568,-0.088310018181801,0.046368937939405,-0.032831192016602,0.112692676484585,0.161784306168556,-0.033139694482088,0.105037569999695,-0.214256599545479,0.226594761013985,-0.207571327686310,0.112200006842613,0.030578287318349,0.030333310365677,0.043048709630966,-0.125951975584030));
res += mul(Get(s0,-dx,0), float4x4(-0.145694330334663,0.173185437917709,0.093637324869633,0.119071967899799,-0.078370869159698,-0.126253172755241,-0.082036875188351,0.022537285462022,-0.104471661150455,-0.204309523105621,0.081958487629890,-0.001247385167517,-0.109836228191853,-0.184196680784225,-0.063015818595886,0.132616460323334));
res += mul(Get(s0,-dx,dy), float4x4(0.152601987123489,-0.051175311207771,-0.108084194362164,0.041746694594622,0.020706463605165,0.141403138637543,-0.059730399399996,0.049796912819147,-0.106455914676189,-0.182433828711510,0.136088356375694,-0.017493350431323,-0.150647640228271,-0.081922754645348,0.006392383482307,0.149139478802681));
res += mul(Get(s0,0,-dy), float4x4(0.056574348360300,-0.025329431518912,0.211772859096527,0.065890505909920,0.034731585532427,-0.055257949978113,0.114187568426132,0.111704714596272,0.099367812275887,0.107426300644875,-0.059895869344473,-0.079696074128151,-0.056483890861273,-0.088669471442699,-0.020061358809471,-0.069137856364250));
res += mul(Get(s0,0,0), float4x4(-0.132864892482758,0.109761103987694,0.101379074156284,0.031994495540857,-0.041943259537220,0.036614663898945,-0.016257284209132,0.023832755163312,-0.116755709052086,0.069314822554588,0.104378893971443,-0.007308063562959,0.181779950857162,-0.059965007007122,-0.019376521930099,-0.246606647968292));
res += mul(Get(s0,0,dy), float4x4(0.097512297332287,0.194958418607712,-0.051591642200947,0.040902376174927,0.011460214853287,-0.027684889733791,0.108030639588833,-0.055894345045090,0.026986794546247,-0.108667336404324,0.176324024796486,-0.045758806169033,0.150487363338470,-0.148682385683060,-0.108270086348057,-0.061580337584019));
res += mul(Get(s0,dx,-dy), float4x4(-0.176568865776062,0.093718230724335,-0.011850539594889,0.047511834651232,0.225794926285744,-0.204859793186188,0.016358898952603,-0.011357019655406,-0.050404138863087,0.131254076957703,-0.017922732979059,0.137573570013046,-0.084697380661964,0.099753133952618,0.029297664761543,-0.136250048875809));
res += mul(Get(s0,dx,0), float4x4(0.050907973200083,-0.107766129076481,-0.009436078369617,-0.224921956658363,-0.073297500610352,0.080583348870277,-0.022071683779359,-0.071445547044277,-0.040896691381931,0.056837882846594,0.017400193959475,0.029087593778968,-0.017529107630253,0.068534977734089,0.047829393297434,-0.228129118680954));
res += mul(Get(s0,dx,dy), float4x4(-0.080542147159576,-0.060227807611227,0.122382394969463,0.097382232546806,0.145374193787575,0.013613230548799,0.060478039085865,-0.135900780558586,0.150737658143044,0.081070885062218,0.043909166008234,-0.147576987743378,0.197109386324883,-0.106300488114357,-0.214279875159264,0.118757084012032));
res += mul(Get(s1,-dx,-dy), float4x4(-0.054086189717054,-0.020656662061810,-0.185296505689621,0.063127622008324,0.035852693021297,0.201386630535126,0.220642775297165,0.091647341847420,-0.036766149103642,0.128053754568100,-0.155584990978241,-0.104466088116169,-0.140029609203339,0.017295122146606,0.241619288921356,0.015377582050860));
res += mul(Get(s1,-dx,0), float4x4(0.068544954061508,-0.047956835478544,-0.235497310757637,0.103169552981853,-0.146395191550255,-0.032715979963541,-0.088565558195114,0.112704537808895,0.113108180463314,-0.143274262547493,0.157553941011429,-0.054595243185759,-0.171824529767036,-0.308379828929901,0.079825155436993,0.058428581804037));
res += mul(Get(s1,-dx,dy), float4x4(-0.077019073069096,0.099463455379009,-0.071790263056755,0.068602994084358,-0.078559845685959,-0.030370349064469,0.167111858725548,0.170318529009819,-0.161670714616776,-0.144735410809517,0.190553441643715,0.016734115779400,-0.001732915523462,0.013663941062987,-0.097930714488029,0.130564898252487));
res += mul(Get(s1,0,-dy), float4x4(0.095730759203434,-0.005064168944955,-0.032490972429514,0.017025303095579,-0.094739444553852,0.037122707813978,0.000704228354152,0.106993943452835,0.315191745758057,0.080152720212936,-0.116002999246120,0.001084262738004,0.000618223391939,-0.178087025880814,0.080844074487686,0.022983673959970));
res += mul(Get(s1,0,0), float4x4(-0.212313324213028,0.016152156516910,0.236274480819702,-0.003195916535333,0.131488814949989,-0.050048317760229,-0.293730914592743,0.038320202380419,-0.042515687644482,0.198583319783211,0.095656029880047,0.037731304764748,-0.208805039525032,-0.183716788887978,-0.052828449755907,0.091654919087887));
res += mul(Get(s1,0,dy), float4x4(0.077434815466404,0.224424257874489,0.052414793521166,-0.075772508978844,0.081790901720524,0.019842073321342,-0.096738785505295,0.149167135357857,-0.056785564869642,-0.102217748761177,-0.173195645213127,-0.180544331669807,-0.032287191599607,-0.089285813271999,0.000273561803624,0.053453788161278));
res += mul(Get(s1,dx,-dy), float4x4(-0.123514458537102,-0.051816746592522,0.047466605901718,0.045396067202091,0.122266724705696,0.018943412229419,0.119409993290901,-0.290935099124908,-0.054642107337713,0.093540742993355,0.058556105941534,0.129762500524521,-0.153223842382431,0.076621524989605,-0.066871136426926,0.053259938955307));
res += mul(Get(s1,dx,0), float4x4(0.100935660302639,-0.066002592444420,0.195243865251541,0.026584122329950,0.067677736282349,0.010617625899613,-0.012455483898520,-0.069761887192726,-0.140258312225342,0.064748868346214,-0.041001338511705,-0.077422894537449,0.006322443019599,0.235177651047707,-0.180504336953163,0.050175346434116));
res += mul(Get(s1,dx,dy), float4x4(-0.156294137239456,-0.043766856193542,-0.004804812837392,0.072333946824074,-0.116961985826492,0.022314706817269,0.098815396428108,0.142758607864380,-0.071769215166569,-0.084501847624779,-0.110467955470085,-0.117912739515305,-0.195444896817207,0.041477266699076,-0.013892801478505,-0.038343504071236));
res += mul(Get(s2,-dx,-dy), float4x4(-0.084156043827534,0.119974747300148,0.108178436756134,-0.027238644659519,-0.233749806880951,-0.070434451103210,0.021258613094687,0.084151789546013,0.040404088795185,0.128441616892815,0.074300140142441,-0.068225480616093,0.120843939483166,-0.026642972603440,-0.092268183827400,-0.102265864610672));
res += mul(Get(s2,-dx,0), float4x4(0.001869680592790,0.210795521736145,0.185998708009720,-0.123496919870377,0.014120128937066,-0.061665445566177,0.019832639023662,-0.029650207608938,-0.234799489378929,0.149547725915909,-0.136030033230782,0.088278658688068,0.062131233513355,0.112439356744289,-0.100365571677685,-0.079244680702686));
res += mul(Get(s2,-dx,dy), float4x4(0.132889240980148,0.150088295340538,0.353946655988693,0.195787712931633,0.017143633216619,0.149654060602188,-0.018909288570285,0.064151294529438,0.101039975881577,-0.215605154633522,0.025544205680490,-0.162916719913483,0.029609588906169,0.122291915118694,0.161544129252434,0.178368210792542));
res += mul(Get(s2,0,-dy), float4x4(0.182118445634842,0.020149173215032,-0.003051083534956,-0.183025956153870,0.011972347274423,-0.107347607612610,0.026178283616900,0.063231393694878,-0.044845312833786,-0.064680650830269,0.071650326251984,-0.056361336261034,0.113223947584629,-0.005752857308835,0.221512168645859,0.159767657518387));
res += mul(Get(s2,0,0), float4x4(0.011164953932166,0.013338343240321,0.168243125081062,-0.155103594064713,-0.027502998709679,0.073562532663345,0.006821272894740,-0.006272743921727,0.080062426626682,0.074057824909687,-0.084321588277817,0.093580313026905,-0.078666388988495,-0.022834267467260,-0.009823056869209,-0.162746146321297));
res += mul(Get(s2,0,dy), float4x4(0.027962073683739,-0.157638922333717,0.075926043093204,-0.139303714036942,-0.038854528218508,-0.054898533970118,0.140089124441147,0.049841132014990,-0.239393860101700,0.150964215397835,-0.034300841391087,-0.082928866147995,0.125311121344566,0.100249692797661,-0.046644207090139,-0.134611696004868));
res += mul(Get(s2,dx,-dy), float4x4(0.095253042876720,0.215539813041687,-0.092635422945023,-0.084826245903969,-0.065250098705292,-0.203640505671501,-0.032553624361753,-0.000694445683621,-0.098470628261566,0.077929884195328,-0.007474772632122,0.002790039405227,0.193568930029869,-0.089102797210217,0.285637438297272,0.091563075780869));
res += mul(Get(s2,dx,0), float4x4(0.046478267759085,0.108238548040390,-0.017050048336387,0.194179281592369,-0.092766821384430,-0.106977179646492,-0.106298133730888,-0.055742621421814,0.044099234044552,-0.011342450045049,-0.059413101524115,-0.181160002946854,-0.131448313593864,0.109152115881443,-0.037628103047609,-0.021332802250981));
res += mul(Get(s2,dx,dy), float4x4(0.056575573980808,0.057956766337156,0.116289317607880,-0.155805706977844,-0.064266726374626,0.155069068074226,0.046233654022217,0.054793588817120,0.123406268656254,0.241620525717735,-0.001444494584575,-0.077652998268604,0.180604547262192,0.277475655078888,-0.109233386814594,-0.253438413143158));
res += mul(Get(s3,-dx,-dy), float4x4(0.109176613390446,0.011261139996350,-0.020588418468833,0.013548718765378,-0.137101754546165,0.050006374716759,-0.157712787389755,-0.095923677086830,0.101289652287960,-0.004153039306402,-0.141478285193443,-0.156680151820183,-0.009427421726286,0.105945192277431,-0.038821648806334,-0.092881701886654));
res += mul(Get(s3,-dx,0), float4x4(0.177442654967308,0.051478717476130,0.024454537779093,0.137818425893784,0.163160502910614,0.180052474141121,-0.097260177135468,-0.125043109059334,0.059468526393175,-0.036272149533033,-0.018270395696163,0.049850191920996,0.237507894635201,0.045319303870201,-0.072609186172485,0.091447807848454));
res += mul(Get(s3,-dx,dy), float4x4(-0.205831974744797,0.071966782212257,-0.178912311792374,0.066910848021507,-0.073404915630817,-0.149248138070107,-0.185510143637657,0.051247611641884,-0.083234034478664,0.042471390217543,0.160586386919022,-0.096434600651264,-0.074132420122623,0.007435938343406,0.045475289225578,-0.226029992103577));
res += mul(Get(s3,0,-dy), float4x4(-0.000169801889569,0.089455202221870,0.208309322595596,0.078196734189987,0.063929967582226,-0.175448924303055,-0.087048873305321,0.074391514062881,-0.019620247185230,-0.034081798046827,-0.071039058268070,-0.058330692350864,-0.064626492559910,-0.124144822359085,0.239429414272308,-0.042515728622675));
res += mul(Get(s3,0,0), float4x4(-0.154065281152725,0.096852384507656,-0.133703202009201,0.072420641779900,0.057083662599325,-0.166790232062340,0.131209105253220,-0.120208859443665,-0.065036058425903,0.029763357713819,-0.028658559545875,-0.156920179724693,0.078062459826469,-0.125514551997185,-0.148392081260681,-0.196565583348274));
res += mul(Get(s3,0,dy), float4x4(0.073079891502857,0.139299318194389,-0.075658261775970,-0.048769745975733,0.119433656334877,0.113448597490788,0.198961049318314,0.144781559705734,-0.123946487903595,-0.110883891582489,-0.117716774344444,0.212034851312637,0.032068356871605,-0.013136540539563,0.024953747168183,0.061897031962872));
res += mul(Get(s3,dx,-dy), float4x4(-0.131958723068237,-0.038076497614384,0.096644230186939,0.129607915878296,0.008328717201948,-0.052625764161348,-0.078247748315334,-0.055647708475590,0.233107924461365,0.063106991350651,0.028114276006818,-0.059771668165922,-0.042423855513334,-0.048408623784781,-0.022511158138514,-0.091178640723228));
res += mul(Get(s3,dx,0), float4x4(0.045337416231632,-0.292245477437973,-0.060517728328705,0.020477401092649,-0.147204861044884,-0.103541761636734,0.048757590353489,0.075067564845085,0.071513570845127,-0.001121005741879,-0.248880580067635,0.030800011008978,-0.030840974301100,0.200376793742180,0.155196234583855,-0.066901043057442));
res += mul(Get(s3,dx,dy), float4x4(0.021506426855922,-0.058617886155844,-0.039692550897598,0.047574974596500,-0.029422046616673,-0.058650173246861,0.063621245324612,0.007179436739534,-0.073712065815926,0.141256287693977,-0.128857284784317,-0.005434643477201,-0.116002179682255,-0.085123151540756,0.325974106788635,0.046944770962000));
return max(float4(0,0,0,0), res);
}
