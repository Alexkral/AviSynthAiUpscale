sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.054762165993452,-0.063892237842083,0.149728462100029,-0.465243220329285,0.130819782614708,0.198270305991173,-0.127797380089760,-0.194673985242844,-0.085804484784603,0.030038198456168,0.205386713147163,0.204805269837379,0.019887616857886,-0.003566727973521,0.057986978441477,0.038453653454781));
res += mul(Get(s0,-dx,0), float4x4(-0.285529047250748,-0.271274358034134,0.086957044899464,-0.352769464254379,0.207474395632744,-0.094775199890137,-0.128996744751930,0.014888974837959,0.108472175896168,0.039972815662622,0.096478931605816,0.010801637545228,-0.087047211825848,0.127162978053093,0.045177586376667,-0.146728247404099));
res += mul(Get(s0,-dx,dy), float4x4(-0.095389552414417,-0.054823782294989,-0.050713907927275,-0.111944779753685,0.148823559284210,-0.052821859717369,-0.181326344609261,-0.045294638723135,0.287037730216980,-0.131318271160126,0.214465975761414,0.131136119365692,0.093291625380516,-0.018533417955041,0.128418713808060,-0.132901787757874));
res += mul(Get(s0,0,-dy), float4x4(0.168394252657890,0.083509013056755,0.103121116757393,-0.018966581672430,0.003489514812827,0.127325147390366,-0.051640521734953,-0.037166669964790,-0.014595594257116,-0.014518398791552,-0.050260484218597,0.082189880311489,0.029394006356597,-0.032227534800768,0.194982185959816,0.208595648407936));
res += mul(Get(s0,0,0), float4x4(0.020166317000985,-0.012996194884181,-0.117831528186798,-0.052590556442738,-0.048551347106695,0.375409066677094,0.118403203785419,0.107736855745316,-0.054484315216541,0.094226859509945,0.013328832574189,-0.062532566487789,0.008850544691086,-0.037096682935953,0.083133496344090,0.356340706348419));
res += mul(Get(s0,0,dy), float4x4(0.169191479682922,-0.038658432662487,-0.142951905727386,0.109585762023926,-0.010496393777430,0.069166816771030,0.026616657152772,0.201752632856369,-0.009969714097679,0.068260170519352,0.250941962003708,0.081307053565979,0.008215541951358,-0.082995437085629,0.121985010802746,0.156124800443649));
res += mul(Get(s0,dx,-dy), float4x4(0.206307440996170,0.053090449422598,0.004851100966334,-0.154419928789139,0.048455778509378,-0.236070796847343,-0.299456179141998,-0.080257348716259,-0.039274588227272,-0.003285615239292,-0.077894940972328,0.057794764637947,0.111972920596600,0.023606855422258,-0.029915068298578,0.081325583159924));
res += mul(Get(s0,dx,0), float4x4(-0.023486908525229,-0.057134926319122,-0.217189088463783,0.166181594133377,-0.035168759524822,-0.029284866526723,0.048820797353983,0.344090878963470,-0.070392526686192,0.146138966083527,-0.183007985353470,0.055382728576660,-0.016167888417840,0.090429089963436,0.051217060536146,0.207948267459869));
res += mul(Get(s0,dx,dy), float4x4(0.120488286018372,0.018484247848392,-0.230292901396751,-0.026145504787564,-0.068130053579807,0.079521477222443,-0.081158332526684,0.005821559112519,-0.014865435659885,0.031847976148129,-0.027539560571313,0.189713627099991,-0.036080531775951,-0.017505060881376,0.175742164254189,0.152414202690125));
res += mul(Get(s1,-dx,-dy), float4x4(0.052951551973820,-0.055968858301640,-0.116466090083122,0.077992379665375,-0.053204197436571,-0.190776810050011,0.023898594081402,-0.111179113388062,-0.130478397011757,0.213580563664436,-0.098264954984188,-0.169324398040771,-0.016098106279969,0.370694845914841,0.041849702596664,-0.128437146544456));
res += mul(Get(s1,-dx,0), float4x4(0.264441460371017,-0.067299492657185,-0.073876373469830,-0.107847429811954,-0.078681439161301,0.059216797351837,-0.078300118446350,-0.275784224271774,-0.038428075611591,0.085567198693752,0.171195417642593,0.232340320944786,-0.017955370247364,0.087245382368565,0.098095841705799,-0.133819654583931));
res += mul(Get(s1,-dx,dy), float4x4(0.052156198769808,-0.018948862329125,0.153822869062424,-0.122607409954071,-0.062772020697594,-0.057718511670828,0.056045040488243,0.031249644234776,0.148212403059006,0.104858644306660,0.000641716993414,0.106510028243065,0.047615624964237,-0.108156330883503,0.199559107422829,-0.224457964301109));
res += mul(Get(s1,0,-dy), float4x4(-0.032161381095648,-0.098530285060406,-0.075609833002090,0.097917951643467,-0.147482797503471,-0.170289456844330,0.065096080303192,-0.057551342993975,0.002648455090821,0.078675530850887,-0.064145930111408,-0.066799663007259,-0.027787944301963,0.355346947908401,0.081244766712189,0.008213501423597));
res += mul(Get(s1,0,0), float4x4(-0.075185522437096,-0.017298202961683,0.053716767579317,-0.041511621326208,-0.030367020517588,-0.130292922258377,-0.007689139805734,-0.110230095684528,0.035992097109556,-0.038130223751068,0.111089803278446,0.073843255639076,0.021506793797016,0.131729796528816,0.073743946850300,0.093131400644779));
res += mul(Get(s1,0,dy), float4x4(0.005602154415101,-0.075901098549366,0.396945387125015,0.076119080185890,0.057731576263905,-0.125648751854897,0.057457253336906,0.036975380033255,0.001808935194276,-0.014523146674037,0.059302426874638,-0.017627792432904,0.029241951182485,-0.052436355501413,-0.001082690781914,0.040052998811007));
res += mul(Get(s1,dx,-dy), float4x4(-0.082708895206451,-0.258910477161407,-0.295749992132187,0.251104205846786,-0.173597157001495,0.129349425435066,-0.112006582319736,0.044332094490528,-0.208457663655281,-0.090481922030449,-0.127628818154335,0.215685039758682,-0.166736900806427,-0.088754713535309,-0.142231017351151,0.185175597667694));
res += mul(Get(s1,dx,0), float4x4(-0.089800663292408,-0.113205634057522,0.092484168708324,-0.086581788957119,-0.040210247039795,-0.096923463046551,0.024679409340024,0.027729252353311,-0.126595839858055,0.035296205431223,-0.012803086079657,-0.010947979986668,-0.072867855429649,0.150595381855965,-0.263039469718933,0.014037946239114));
res += mul(Get(s1,dx,dy), float4x4(0.050221830606461,-0.015878165140748,0.035885032266378,0.231257513165474,-0.012214389629662,-0.023356873542070,-0.120282106101513,0.542273044586182,0.201617985963821,-0.203771695494652,-0.180631592869759,0.048884369432926,-0.025323154404759,0.115614227950573,-0.095773331820965,-0.071506254374981));
res += mul(Get(s2,-dx,-dy), float4x4(0.063752405345440,0.079643420875072,0.030015559867024,-0.183883681893349,0.062011521309614,-0.162870988249779,-0.113035768270493,-0.084435775876045,0.100021347403526,0.023699086159468,-0.139395877718925,-0.008263892494142,-0.072187215089798,-0.105527192354202,0.062763594090939,-0.086224749684334));
res += mul(Get(s2,-dx,0), float4x4(0.008705108426511,0.081169478595257,-0.021521266549826,0.018745947629213,0.020642818883061,-0.061350196599960,0.097224384546280,-0.116672120988369,0.001237130840309,0.091554842889309,-0.040913678705692,0.007460259366781,-0.023844012990594,-0.033074311912060,0.022211000323296,-0.139481991529465));
res += mul(Get(s2,-dx,dy), float4x4(-0.145816817879677,-0.216856405138969,0.119373008608818,-0.062002059072256,-0.032570689916611,-0.108361095190048,-0.015889538452029,-0.160448729991913,0.061768509447575,-0.145028844475746,-0.009478160180151,-0.008806323632598,-0.118638582527637,-0.119712829589844,0.071790993213654,-0.191228672862053));
res += mul(Get(s2,0,-dy), float4x4(-0.134795799851418,-0.031196361407638,-0.022477060556412,-0.067899599671364,-0.081771038472652,-0.152192845940590,0.174961775541306,0.182612672448158,-0.029192762449384,-0.081668511033058,0.107179589569569,0.076683342456818,0.132261350750923,-0.053010839968920,-0.116646334528923,0.115170195698738));
res += mul(Get(s2,0,0), float4x4(-0.091282784938812,0.080888837575912,-0.101084388792515,-0.031373459845781,-0.120240315794945,-0.072897449135780,0.231885671615601,0.039791531860828,0.009954090230167,0.248488456010818,0.281711518764496,-0.001482829218730,0.011009193956852,-0.078782960772514,0.236230835318565,0.112992599606514));
res += mul(Get(s2,0,dy), float4x4(-0.028490234166384,0.146437942981720,0.055239137262106,-0.064033083617687,-0.225405335426331,-0.103559814393520,0.239238694310188,0.016709815710783,0.026783768087626,-0.084709823131561,-0.020468214526772,0.196085795760155,-0.017292989417911,-0.063325785100460,0.237924903631210,0.331380695104599));
res += mul(Get(s2,dx,-dy), float4x4(0.059078779071569,0.039391294121742,-0.109787724912167,-0.012259354814887,-0.087346218526363,-0.090470269322395,0.169255062937737,0.058932963758707,-0.015118468552828,-0.131693899631500,-0.058120757341385,-0.039077769964933,0.008372027426958,0.159345716238022,-0.039511088281870,-0.055843148380518));
res += mul(Get(s2,dx,0), float4x4(0.063385859131813,-0.159815475344658,-0.102353148162365,0.166080325841904,-0.086135677993298,-0.017627067863941,0.046231295913458,-0.073754213750362,-0.068338893353939,0.241160556674004,0.095933683216572,0.202128231525421,0.151734605431557,0.000790684949607,0.017503457143903,0.107970125973225));
res += mul(Get(s2,dx,dy), float4x4(-0.024444822221994,-0.142700821161270,-0.206434175372124,-0.082818754017353,-0.123872227966785,-0.025427181273699,0.188005000352859,0.105115070939064,0.033125165849924,0.040066517889500,0.075768575072289,0.240719228982925,0.249140411615372,-0.025285392999649,0.122082404792309,0.042713373899460));
res += mul(Get(s3,-dx,-dy), float4x4(0.035432063043118,0.031481295824051,-0.033091891556978,-0.185611277818680,-0.035867098718882,0.274814784526825,0.159939125180244,0.092571966350079,-0.134141892194748,-0.065331496298313,-0.250614136457443,-0.011899520643055,0.031127056106925,0.113395243883133,0.160178855061531,0.053885847330093));
res += mul(Get(s3,-dx,0), float4x4(-0.012065631337464,-0.064519487321377,-0.106163188815117,-0.290706515312195,-0.146376445889473,-0.039965461939573,-0.067838646471500,-0.017380496487021,0.070884138345718,-0.045122835785151,-0.063579261302948,-0.203533992171288,0.089204117655754,0.106702342629433,0.066394485533237,0.139290541410446));
res += mul(Get(s3,-dx,dy), float4x4(0.047831505537033,-0.160676211118698,-0.005696051754057,-0.174318939447403,-0.016636818647385,-0.007634821813554,-0.017188226804137,-0.224214494228363,0.211808905005455,0.109041057527065,-0.121554933488369,-0.007852843962610,0.051829505711794,0.062358465045691,-0.076753646135330,0.009970407932997));
res += mul(Get(s3,0,-dy), float4x4(-0.095187164843082,-0.061059590429068,-0.205286517739296,0.058561440557241,0.166860133409500,0.126583382487297,0.033867269754410,0.028096543624997,-0.051651429384947,-0.114478394389153,-0.053077831864357,0.373357802629471,0.043538242578506,0.071366421878338,0.031197991222143,0.113587230443954));
res += mul(Get(s3,0,0), float4x4(0.046436399221420,0.089907728135586,-0.094361886382103,-0.029017224907875,-0.109673738479614,-0.008728458546102,-0.080204658210278,0.031453311443329,0.114600472152233,-0.071377106010914,0.044941257685423,0.049905229359865,0.028553472831845,-0.055661298334599,-0.020990850403905,0.019529106095433));
res += mul(Get(s3,0,dy), float4x4(0.186334788799286,-0.115088656544685,-0.248549073934555,-0.070794038474560,-0.039096318185329,0.016848932951689,0.023918149992824,0.029274165630341,0.122006230056286,0.004628297872841,-0.006043492350727,0.109568238258362,-0.023164400830865,-0.047487303614616,0.174730837345123,0.076558165252209));
res += mul(Get(s3,dx,-dy), float4x4(-0.094859056174755,0.037988979369402,-0.269428372383118,-0.005397215485573,0.486272782087326,0.179749444127083,-0.265162497758865,-0.041590582579374,0.094528406858444,0.023504830896854,-0.006256523542106,-0.044923141598701,-0.102493122220039,0.047926146537066,-0.143556222319603,0.134248539805412));
res += mul(Get(s3,dx,0), float4x4(-0.009953855536878,-0.038744110614061,-0.247321501374245,-0.006350596901029,-0.133079126477242,0.034470129758120,-0.165934517979622,-0.054523084312677,0.097656689584255,-0.046386763453484,0.159043446183205,-0.041654322296381,0.232406362891197,-0.077036358416080,0.144620314240456,-0.055254258215427));
res += mul(Get(s3,dx,dy), float4x4(0.119689717888832,-0.152061477303505,-0.311537355184555,-0.109573200345039,-0.080736614763737,0.051999162882566,0.037113204598427,0.047321293503046,-0.069259487092495,0.066054299473763,-0.059892009943724,0.047304384410381,0.160821378231049,-0.092504046857357,-0.086770735681057,0.089299522340298));
return max(float4(0,0,0,0), res);
}
