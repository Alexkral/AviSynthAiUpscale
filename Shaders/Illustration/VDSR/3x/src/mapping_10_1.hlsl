sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.108465164899826,0.181665346026421,-0.017521308735013,0.054145976901054,0.093183815479279,-0.014625832438469,-0.112857639789581,0.009685155935585,-0.034664813429117,0.193027168512344,-0.129799574613571,0.211699888110161,0.049649585038424,-0.201767131686211,-0.065084494650364,-0.310201883316040));
res += mul(Get(s0,-dx,0), float4x4(-0.111939482390881,-0.249699473381042,-0.119851879775524,-0.063805192708969,-0.310280412435532,0.112634621560574,-0.085941798985004,-0.055180937051773,-0.226340949535370,0.068734854459763,0.104782044887543,-0.029336096718907,0.003183788154274,-0.054134845733643,0.123238392174244,-0.240574285387993));
res += mul(Get(s0,-dx,dy), float4x4(0.115836963057518,-0.033973444253206,0.014487813226879,-0.085298657417297,-0.068169482052326,-0.046157706528902,0.074384815990925,-0.053693115711212,0.075801976025105,-0.023745710030198,-0.091953657567501,0.049648031592369,0.129210263490677,0.048501893877983,-0.039037439972162,-0.116522699594498));
res += mul(Get(s0,0,-dy), float4x4(0.103594571352005,-0.173827767372131,-0.119072802364826,0.068776920437813,-0.015452360734344,-0.023472778499126,0.028400965034962,-0.002671651076525,-0.017200585454702,0.217159122228622,0.128115847706795,-0.028367847204208,0.039552085101604,-0.112877123057842,0.039132766425610,0.025465300306678));
res += mul(Get(s0,0,0), float4x4(0.178509443998337,0.170747488737106,-0.039624642580748,-0.106607720255852,-0.005619285162538,-0.125112235546112,-0.144067093729973,0.005882633849978,-0.008849170058966,-0.159733444452286,0.118201866745949,-0.004668773151934,-0.013460837304592,0.041310571134090,-0.054344099014997,0.030901599675417));
res += mul(Get(s0,0,dy), float4x4(0.225416436791420,-0.006212509237230,-0.149257659912109,-0.091739773750305,0.143176704645157,0.106915928423405,-0.057474475353956,-0.037680055946112,-0.020927524194121,-0.017168071120977,-0.051511913537979,-0.007757083512843,-0.038719598203897,-0.052344609051943,-0.080477677285671,0.040964018553495));
res += mul(Get(s0,dx,-dy), float4x4(0.129360899329185,-0.014721455052495,-0.086856171488762,0.002659422112629,-0.047111745923758,0.284834891557693,0.038766611367464,0.005290861707181,-0.084009148180485,0.297964423894882,-0.044932980090380,-0.025618026033044,-0.138917282223701,0.021639904007316,-0.169163152575493,0.074558824300766));
res += mul(Get(s0,dx,0), float4x4(-0.156922787427902,-0.079036682844162,-0.070295564830303,-0.048081159591675,-0.051182374358177,-0.049070741981268,0.007393483072519,-0.027443526312709,-0.011821356602013,-0.008296047337353,0.005452761892229,-0.028905060142279,-0.085904568433762,-0.100738540291786,0.162268683314323,0.148378014564514));
res += mul(Get(s0,dx,dy), float4x4(0.023659806698561,-0.091399393975735,-0.066387347877026,-0.113419324159622,-0.032259657979012,0.093389704823494,0.255683064460754,-0.147463485598564,0.192893922328949,-0.149708524346352,0.154728874564171,-0.049914211034775,-0.191229641437531,0.041893173009157,-0.118241220712662,0.145349130034447));
res += mul(Get(s1,-dx,-dy), float4x4(-0.092018082737923,-0.058460321277380,0.121596001088619,0.034146439284086,0.086568042635918,-0.033016044646502,-0.108963266015053,0.133146375417709,-0.077597051858902,-0.066242314875126,-0.072553940117359,-0.102022990584373,-0.141505271196365,-0.002404356375337,0.064504027366638,-0.104827798902988));
res += mul(Get(s1,-dx,0), float4x4(-0.150589600205421,-0.137966275215149,-0.032415360212326,-0.225554764270782,-0.100088477134705,0.135380223393440,-0.125687465071678,0.034258939325809,0.054287303239107,0.199343979358673,0.027998056262732,-0.158877506852150,0.102972917258739,-0.050348080694675,0.077521793544292,-0.017942767590284));
res += mul(Get(s1,-dx,dy), float4x4(0.389385253190994,0.061295092105865,0.029987346380949,-0.156798243522644,0.035883072763681,0.100990012288094,-0.196361795067787,-0.000073092509410,-0.110148653388023,-0.033547684550285,-0.027247348800302,-0.073538444936275,-0.240480348467827,0.036995284259319,0.194822564721107,0.008431055583060));
res += mul(Get(s1,0,-dy), float4x4(-0.172194018959999,0.009613287635148,0.026778189465404,0.174647912383080,-0.103311106562614,-0.020882504060864,-0.047628425061703,-0.110798478126526,-0.182596266269684,0.064372979104519,0.072696082293987,0.119465269148350,-0.025845918804407,-0.049107234925032,0.093905389308929,-0.069618552923203));
res += mul(Get(s1,0,0), float4x4(-0.037212178111076,0.146843567490578,-0.117314800620079,0.041262634098530,-0.036523837596178,0.018310198560357,0.161920487880707,0.202955469489098,0.118224374949932,0.196276992559433,0.088867299258709,0.019051769748330,0.209225192666054,-0.105848446488380,-0.080017656087875,0.110827483236790));
res += mul(Get(s1,0,dy), float4x4(-0.059636302292347,0.182367727160454,0.014399813488126,0.038290534168482,0.247610062360764,0.163410276174545,0.182788103818893,0.203033030033112,0.044788662344217,-0.002191487234086,-0.030668178573251,-0.046584114432335,-0.211059823632240,-0.111770600080490,0.073060214519501,0.101076632738113));
res += mul(Get(s1,dx,-dy), float4x4(-0.034297466278076,0.135072633624077,-0.138251602649689,0.232686877250671,0.068365000188351,0.074971288442612,-0.059720743447542,0.093592740595341,0.003779062535614,-0.246607914566994,-0.071044124662876,0.122248426079750,-0.043247580528259,0.107201159000397,0.030232407152653,0.160911619663239));
res += mul(Get(s1,dx,0), float4x4(0.015932247042656,0.113670803606510,-0.061958841979504,-0.031243093311787,-0.015387020073831,-0.179344102740288,0.037596989423037,-0.106261916458607,0.096179217100143,0.004497061949223,-0.126804932951927,-0.072609670460224,-0.088062331080437,-0.101037010550499,0.046214062720537,0.022134182974696));
res += mul(Get(s1,dx,dy), float4x4(0.151423245668411,0.167337805032730,0.033894009888172,0.126920759677887,0.061612680554390,0.214852601289749,-0.011959867551923,-0.055628053843975,-0.016675384715199,0.018346423283219,0.045673489570618,0.101595684885979,0.064869686961174,-0.113812439143658,0.008766536600888,0.088515952229500));
res += mul(Get(s2,-dx,-dy), float4x4(0.028733195737004,0.097371660172939,0.089457698166370,0.156782791018486,0.102665215730667,0.069003015756607,0.095318406820297,0.114606618881226,0.114336572587490,-0.161217734217644,-0.049869153648615,-0.050923418253660,0.194449037313461,0.212962791323662,0.173671230673790,0.044226780533791));
res += mul(Get(s2,-dx,0), float4x4(0.050683084875345,-0.061464466154575,0.019180120900273,0.004020258784294,0.046337351202965,-0.054632291197777,0.231360644102097,0.040620543062687,0.163523420691490,-0.140522450208664,0.008446918800473,-0.181524410843849,0.155351847410202,-0.151206761598587,-0.026112392544746,-0.083161190152168));
res += mul(Get(s2,-dx,dy), float4x4(-0.047294821590185,0.060930635780096,-0.048407763242722,-0.153205558657646,-0.013727318495512,0.149554997682571,-0.104720838367939,0.026089813560247,0.055517029017210,-0.095768690109253,-0.170440480113029,-0.080817349255085,-0.043028324842453,-0.193734467029572,0.151302367448807,-0.052754897624254));
res += mul(Get(s2,0,-dy), float4x4(-0.006421137135476,0.136740311980247,0.113790474832058,-0.010273235850036,-0.129551216959953,-0.032945718616247,-0.122982211410999,-0.182674825191498,0.029987197369337,-0.040955647826195,0.005850672256202,-0.270279020071030,0.239901661872864,0.213091805577278,-0.023012479767203,0.016872579231858));
res += mul(Get(s2,0,0), float4x4(0.218788802623749,-0.217270702123642,-0.134753718972206,-0.105663321912289,-0.072274968028069,0.109166242182255,0.174820393323898,-0.115834906697273,-0.142151400446892,0.014932299964130,-0.106454320251942,0.139936864376068,0.053209174424410,0.016132136806846,0.046277012676001,0.114648863673210));
res += mul(Get(s2,0,dy), float4x4(0.107252433896065,0.058215383440256,-0.140817120671272,0.081529803574085,0.060168366879225,-0.048346824944019,-0.089365050196648,0.028170235455036,0.101435296237469,-0.222005292773247,-0.038046039640903,-0.134338796138763,-0.127053558826447,0.148569166660309,-0.129201009869576,-0.108258537948132));
res += mul(Get(s2,dx,-dy), float4x4(0.186005368828773,0.167472347617149,0.041236661374569,0.006224790588021,0.003571677953005,0.062018137425184,-0.101071260869503,-0.029002735391259,-0.211235776543617,-0.232282802462578,-0.048680458217859,-0.165053680539131,0.014778648503125,0.215812638401985,0.016522411257029,0.175006940960884));
res += mul(Get(s2,dx,0), float4x4(-0.009449299424887,0.101785115897655,-0.033445343375206,-0.174769759178162,0.008043494075537,-0.022658847272396,-0.027046835049987,-0.089651748538017,-0.090169616043568,0.159051373600960,0.081891804933548,-0.058647368103266,-0.017311062663794,-0.243717417120934,-0.018317682668567,0.022562328726053));
res += mul(Get(s2,dx,dy), float4x4(0.040276635438204,0.071006767451763,0.029620014131069,-0.020487703382969,0.246294364333153,0.194548606872559,0.036766491830349,-0.025992980226874,-0.057781409472227,-0.107097268104553,0.176813498139381,-0.129327490925789,-0.038988057523966,0.174584627151489,0.106764025986195,0.180429995059967));
res += mul(Get(s3,-dx,-dy), float4x4(0.076524898409843,-0.012084015645087,-0.032645538449287,0.058619398623705,-0.182765677571297,0.251967221498489,0.066629178822041,-0.036818291991949,-0.053035646677017,0.047425780445337,0.061118803918362,-0.017307464033365,-0.087324284017086,0.041464444249868,-0.156845077872276,0.017358288168907));
res += mul(Get(s3,-dx,0), float4x4(-0.000332592666382,-0.071846835315228,0.051007345318794,0.299671173095703,-0.087576515972614,0.065234504640102,0.004034461453557,0.209002226591110,0.044033158570528,-0.147102251648903,-0.228584617376328,-0.023498915135860,-0.257911622524261,-0.055780570954084,0.016089864075184,0.050203952938318));
res += mul(Get(s3,-dx,dy), float4x4(-0.172048330307007,0.049452997744083,0.139236375689507,0.131163388490677,0.073982506990433,-0.041677147150040,-0.049959715455770,0.057959415018559,0.045158036053181,0.068526521325111,0.019669547677040,0.023940818384290,-0.149335339665413,-0.059532683342695,-0.000332144525601,-0.038902394473553));
res += mul(Get(s3,0,-dy), float4x4(0.151713222265244,-0.105634853243828,0.098337545990944,-0.010348134674132,-0.168070882558823,0.136933639645576,-0.013163909316063,-0.081721872091293,-0.097029626369476,0.014770157635212,-0.021516149863601,0.018260294571519,-0.054727893322706,-0.027406288310885,-0.005639880429953,0.039943382143974));
res += mul(Get(s3,0,0), float4x4(0.037666395306587,0.015593068674207,0.013858476653695,-0.145342573523521,0.034028079360723,-0.080995313823223,-0.086180105805397,0.032958969473839,0.038366854190826,-0.048311904072762,-0.015676481649280,0.130776450037956,-0.302643030881882,0.065024964511395,-0.023502176627517,-0.098500818014145));
res += mul(Get(s3,0,dy), float4x4(0.139068052172661,0.008547589182854,0.047329735010862,0.022540701553226,0.064868532121181,0.023287249729037,-0.182465210556984,0.060267418622971,-0.020116260275245,0.096108965575695,0.051689799875021,0.127471596002579,-0.083054967224598,-0.053721006959677,0.059025779366493,0.113826096057892));
res += mul(Get(s3,dx,-dy), float4x4(-0.033507883548737,0.125245869159698,-0.099676236510277,-0.098490342497826,-0.002067623892799,0.278641134500504,0.014229411259294,-0.098037749528885,-0.113766983151436,0.083692394196987,0.142533794045448,0.001278866431676,0.174627006053925,-0.122942991554737,0.102084718644619,-0.048785898834467));
res += mul(Get(s3,dx,0), float4x4(-0.033201273530722,0.064177125692368,-0.095993563532829,0.032772790640593,-0.098183207213879,0.086666934192181,-0.029750199988484,-0.124855764210224,-0.176160186529160,0.015483761206269,0.088489048182964,0.097984001040459,-0.013651419430971,-0.085130825638771,0.014074801467359,-0.157688900828362));
res += mul(Get(s3,dx,dy), float4x4(0.145618781447411,-0.064658626914024,-0.177077636122704,-0.021455040201545,-0.157399803400040,-0.097082734107971,-0.129676908254623,-0.176770344376564,-0.064048059284687,0.084753707051277,0.108535915613174,-0.165441572666168,0.070781558752060,-0.352408140897751,-0.000446197023848,0.186964496970177));
return max(float4(0,0,0,0), res);
}
