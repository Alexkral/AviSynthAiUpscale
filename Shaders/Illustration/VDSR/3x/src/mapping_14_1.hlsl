sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.031910300254822,-0.089943088591099,0.086690433323383,0.070456854999065,-0.032613091170788,0.083317756652832,-0.009401489980519,-0.039855428040028,0.006382127758116,-0.087361767888069,0.132365345954895,0.186809614300728,0.039859291166067,-0.050512190908194,-0.048142399638891,0.213310495018959));
res += mul(Get(s0,-dx,0), float4x4(0.005145130679011,0.067280769348145,0.004965750034899,0.022097634151578,-0.021476691588759,-0.076684340834618,0.256674885749817,0.242866545915604,0.016557030379772,0.087713316082954,-0.099448718130589,0.122094646096230,-0.025239447131753,-0.106237657368183,0.138589099049568,0.319981306791306));
res += mul(Get(s0,-dx,dy), float4x4(0.013493238948286,-0.041140083223581,0.112571395933628,0.154530033469200,-0.048046033829451,0.059353370219469,0.247214570641518,-0.103868782520294,0.064359910786152,0.182212531566620,-0.217376530170441,0.105473376810551,-0.144205883145332,0.017512096092105,0.357588171958923,0.127301543951035));
res += mul(Get(s0,0,-dy), float4x4(-0.043662670999765,0.103047542273998,-0.007255733478814,-0.142544195055962,-0.075821816921234,0.044088482856750,-0.052804782986641,-0.000742722128052,0.070886962115765,-0.198659211397171,0.401370912790298,0.034286234527826,0.118246719241142,0.148722156882286,-0.229216903448105,-0.197408407926559));
res += mul(Get(s0,0,0), float4x4(0.009486241266131,0.272693932056427,-0.183881551027298,-0.360416591167450,-0.029692506417632,-0.066458247601986,0.316429078578949,0.606958210468292,0.032774847000837,-0.066208682954311,0.012580508366227,-0.109773389995098,-0.050862904638052,0.226159453392029,-0.128421500325203,-0.030215408653021));
res += mul(Get(s0,0,dy), float4x4(0.024480609223247,0.041309051215649,-0.012210519053042,-0.025518905371428,-0.034234095364809,-0.072578869760036,0.241243198513985,0.295823544263840,0.098731994628906,0.155530214309692,-0.197981923818588,-0.116040915250778,-0.045716170221567,-0.033912423998117,0.087013959884644,0.181256324052811));
res += mul(Get(s0,dx,-dy), float4x4(0.084970735013485,-0.077482894062996,0.147534579038620,-0.011213436722755,-0.026598243042827,0.012294495478272,0.010606851428747,-0.061982270330191,0.023848585784435,-0.189375013113022,0.475169509649277,-0.012011277489364,0.138911858201027,0.094895310699940,-0.040001109242439,-0.276232272386551));
res += mul(Get(s0,dx,0), float4x4(0.070465862751007,0.040921334177256,-0.122267827391624,-0.218330204486847,-0.031378563493490,-0.061739917844534,0.034208923578262,0.202839985489845,-0.073170594871044,-0.083940729498863,0.181896522641182,0.089881688356400,0.067208297550678,0.048414349555969,0.043138440698385,-0.210776656866074));
res += mul(Get(s0,dx,dy), float4x4(0.075181461870670,-0.114243775606155,0.146037921309471,0.011144134216011,0.076041758060455,-0.098531834781170,0.062044743448496,-0.065747819840908,0.172072574496269,0.067534774541855,0.028837056830525,-0.105308309197426,-0.015763385221362,0.007423991803080,0.007151905447245,-0.004059785977006));
res += mul(Get(s1,-dx,-dy), float4x4(0.060993831604719,-0.125265717506409,-0.112654961645603,0.140660583972931,0.007509361486882,-0.166139662265778,0.198320269584656,0.098913386464119,0.087305322289467,0.087802149355412,-0.187502786517143,-0.195797353982925,-0.143758893013000,0.108743481338024,0.085858359932899,0.150765657424927));
res += mul(Get(s1,-dx,0), float4x4(0.042399331927299,0.183971524238586,-0.286340653896332,-0.153547972440720,0.008043685927987,0.030724894255400,-0.007525055669248,0.110108405351639,0.054547347128391,0.210949122905731,-0.157792836427689,-0.349765539169312,-0.056558098644018,0.010960937477648,0.075448401272297,0.142169117927551));
res += mul(Get(s1,-dx,dy), float4x4(-0.012817538343370,0.099786922335625,-0.019293386489153,0.010149675421417,-0.058209046721458,-0.101785428822041,0.021509988233447,-0.037386022508144,-0.026243228465319,0.113520205020905,0.048273168504238,-0.281065464019775,0.090545199811459,-0.039508439600468,-0.091446056962013,0.027621630579233));
res += mul(Get(s1,0,-dy), float4x4(-0.000125155871501,-0.036341533064842,0.027387751266360,0.076935335993767,-0.124512374401093,0.073437005281448,0.212765842676163,0.218043863773346,0.102090835571289,0.227041602134705,-0.132538571953773,-0.106052272021770,-0.177021548151970,0.103277087211609,0.261863738298416,0.362023234367371));
res += mul(Get(s1,0,0), float4x4(-0.024109976366162,-0.012891887687147,-0.162723392248154,-0.353115409612656,-0.062128651887178,0.218515738844872,0.088956207036972,0.146316781640053,0.163195550441742,-0.025113560259342,-0.044590059667826,-0.081527724862099,-0.157582610845566,-0.012851277366281,0.286768198013306,0.251894623041153));
res += mul(Get(s1,0,dy), float4x4(-0.091623418033123,-0.003848867025226,0.301103353500366,-0.074541285634041,-0.089226856827736,0.104279793798923,0.108838334679604,0.345548659563065,-0.044503223150969,-0.153195783495903,0.313401579856873,-0.080026656389236,-0.083129934966564,0.165547907352448,0.027105128392577,-0.143583551049232));
res += mul(Get(s1,dx,-dy), float4x4(0.066387407481670,-0.181990608572960,0.311953425407410,-0.006788861472160,0.081476680934429,0.008115611970425,0.185585364699364,0.145872071385384,0.031917288899422,0.015261131338775,0.127758771181107,0.085335813462734,0.039871882647276,0.006771627813578,0.257832527160645,0.085524752736092));
res += mul(Get(s1,dx,0), float4x4(0.118753544986248,0.144942969083786,0.356564491987228,-0.239515647292137,0.028520418331027,0.101703628897667,0.115876689553261,0.236704722046852,-0.016308045014739,-0.187445804476738,0.438899546861649,0.348190099000931,0.012451606802642,-0.196535319089890,0.233757242560387,0.156710892915726));
res += mul(Get(s1,dx,dy), float4x4(-0.198972314596176,0.019208217039704,0.463360726833344,-0.011002779006958,-0.085198573768139,0.113794155418873,0.242098018527031,0.179303288459778,-0.040437754243612,-0.225916594266891,0.112365208566189,0.302927315235138,0.040344204753637,-0.051579233258963,0.269928216934204,-0.033106319606304));
res += mul(Get(s2,-dx,-dy), float4x4(0.144847363233566,-0.178111925721169,0.167260840535164,-0.186063796281815,-0.067572094500065,-0.008967099711299,0.102927401661873,-0.001331166247837,0.018648300319910,0.024435255676508,0.107535280287266,0.034799020737410,-0.143508613109589,0.027893001213670,0.065238393843174,-0.103661730885506));
res += mul(Get(s2,-dx,0), float4x4(0.015149747021496,-0.127717971801758,0.215226829051971,-0.289040207862854,-0.084137588739395,-0.188867941498756,0.575978219509125,0.321193456649780,-0.058727513998747,0.068307861685753,0.128619894385338,0.310485184192657,-0.082585282623768,0.035143394023180,0.079288527369499,0.266600638628006));
res += mul(Get(s2,-dx,dy), float4x4(0.037282388657331,0.006390390451998,0.033441212028265,-0.182440787553787,-0.105588391423225,-0.073219880461693,0.265643626451492,0.239306718111038,0.038671489804983,0.071632742881775,0.147025972604752,0.354658961296082,-0.032836239784956,0.031050626188517,0.222441390156746,0.133947908878326));
res += mul(Get(s2,0,-dy), float4x4(0.044483959674835,-0.053646255284548,-0.076676256954670,0.164930686354637,-0.021600415930152,-0.099059507250786,0.088799774646759,0.055765815079212,0.077958129346371,0.107695214450359,-0.267514020204544,-0.242127209901810,-0.125992059707642,0.100172646343708,0.037279266864061,-0.147450476884842));
res += mul(Get(s2,0,0), float4x4(0.112881138920784,-0.162565514445305,0.151158228516579,0.351330786943436,0.008364932611585,-0.177804842591286,0.223529383540154,0.528173923492432,0.051723778247833,-0.078343711793423,-0.161959320306778,-0.116843342781067,-0.096896760165691,0.170581609010696,0.186746299266815,0.125929012894630));
res += mul(Get(s2,0,dy), float4x4(0.104204811155796,-0.055681351572275,0.005552555900067,0.102105967700481,-0.089807800948620,-0.037310618907213,-0.212971404194832,0.175357118248940,-0.052229952067137,0.043953210115433,0.193459227681160,0.086477823555470,-0.085657328367233,-0.040078599005938,0.216701686382294,0.278867363929749));
res += mul(Get(s2,dx,-dy), float4x4(-0.082185946404934,0.136943116784096,-0.091296352446079,-0.088983267545700,-0.096955977380276,-0.032419204711914,-0.016562445089221,0.176448792219162,0.088313147425652,0.068233586847782,-0.217189967632294,-0.357700884342194,0.038162477314472,0.076405264437199,0.329234957695007,0.155252799391747));
res += mul(Get(s2,dx,0), float4x4(-0.003313389373943,0.029673893004656,-0.251563757658005,0.220933914184570,-0.021505340933800,0.042048845440149,-0.041251521557570,0.366341531276703,0.041863340884447,-0.023639848455787,-0.084207072854042,-0.054327879101038,-0.039313022047281,0.168900936841965,0.196394547820091,0.059134062379599));
res += mul(Get(s2,dx,dy), float4x4(0.022949596866965,0.124906450510025,-0.238343819975853,0.086540803313255,0.009899125434458,0.156408995389938,-0.259452104568481,-0.224873140454292,-0.010505414567888,0.013739331625402,0.126282364130020,-0.056501079350710,0.022378431633115,0.041562646627426,0.285621672868729,0.146951362490654));
res += mul(Get(s3,-dx,-dy), float4x4(0.123079672455788,0.104277975857258,0.025959847494960,0.016589403152466,0.093237228691578,0.115291945636272,0.139753922820091,0.039626706391573,-0.088063232600689,0.028431568294764,0.169536843895912,0.197460234165192,0.025721816346049,-0.059298958629370,-0.035081535577774,-0.278429657220840));
res += mul(Get(s3,-dx,0), float4x4(-0.003584076184779,-0.000379996985430,0.119146816432476,-0.061458237469196,0.053367655724287,0.022480739280581,0.108292661607265,0.254077047109604,-0.177757441997528,0.244673162698746,0.004428671672940,-0.071655794978142,-0.091731034219265,-0.053578589111567,0.122693106532097,0.082718983292580));
res += mul(Get(s3,-dx,dy), float4x4(-0.156267747282982,-0.012386030517519,0.325514584779739,0.153826594352722,-0.092259764671326,0.078146539628506,-0.107369765639305,-0.030767710879445,0.008968809619546,0.030727095901966,-0.016929402947426,0.001462549320422,-0.039101772010326,-0.033981770277023,-0.307171702384949,-0.095959477126598));
res += mul(Get(s3,0,-dy), float4x4(0.029442036524415,0.112683817744255,-0.127080202102661,0.107976943254471,-0.001285701524466,-0.155978217720985,0.224474310874939,0.022489117458463,-0.070764213800430,0.178495481610298,0.261377304792404,-0.002062428509817,-0.005609267856926,0.045044127851725,-0.097927443683147,-0.086349599063396));
res += mul(Get(s3,0,0), float4x4(0.021550286561251,-0.144082725048065,-0.089866936206818,0.144537478685379,0.189431503415108,-0.136906698346138,0.150606900453568,0.338811397552490,-0.002282549627125,0.045403819531202,0.316493391990662,0.177428126335144,-0.078044772148132,-0.170533865690231,0.371227800846100,0.287131398916245));
res += mul(Get(s3,0,dy), float4x4(-0.058896478265524,-0.111678384244442,0.195655748248100,0.195869490504265,0.002496202941984,-0.028183048591018,-0.102947562932968,-0.098209038376808,0.013506213203073,0.001175799872726,0.177051767706871,0.189588531851768,-0.090258933603764,-0.145926952362061,0.044148445129395,-0.060649745166302));
res += mul(Get(s3,dx,-dy), float4x4(-0.058703977614641,0.272685170173645,-0.264624714851379,-0.200791791081429,-0.073558114469051,0.041944663971663,0.170932501554489,-0.126094087958336,-0.111936099827290,0.118102721869946,0.055600482970476,-0.009906332939863,-0.050723381340504,0.106818310916424,-0.060417659580708,-0.119861692190170));
res += mul(Get(s3,dx,0), float4x4(-0.057518817484379,0.118439987301826,0.026998115703464,-0.261117100715637,0.008834191597998,-0.114192433655262,0.114409871399403,0.252693831920624,-0.114192537963390,0.007877261377871,0.188905671238899,0.542534887790680,-0.062372867017984,-0.108065240085125,0.310620516538620,0.473175942897797));
res += mul(Get(s3,dx,dy), float4x4(-0.028181957080960,-0.065622039139271,0.095384180545807,0.137193128466606,-0.006891550496221,-0.019037764519453,-0.129215285181999,0.005936640780419,0.000433722132584,-0.015782818198204,-0.008150666020811,0.071808747947216,0.032683935016394,-0.084848277270794,-0.080017082393169,0.191572844982147));
return max(float4(0,0,0,0), res);
}
