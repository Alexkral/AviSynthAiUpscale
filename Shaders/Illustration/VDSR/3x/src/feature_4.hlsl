sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.015815269201994,-0.095568433403969,-0.045427147299051,-0.014619428664446) * Get(-dx,-dy);
res += float4(0.027610491961241,-0.031151626259089,-0.018468426540494,0.007977430708706) * Get(-dx,0);
res += float4(0.185954391956329,0.037238322198391,0.007820828817785,-0.241082921624184) * Get(-dx,dy);
res += float4(-0.041484221816063,-0.051438808441162,-0.350672155618668,0.026115026324987) * Get(0,-dy);
res += float4(-0.117019064724445,0.070339217782021,-0.035722099244595,0.217985138297081) * Get(0,0);
res += float4(0.164221152663231,0.077607810497284,0.158580929040909,0.007659079972655) * Get(0,dy);
res += float4(0.052103504538536,-0.145596206188202,-0.129603505134583,0.002966545056552) * Get(dx,-dy);
res += float4(-0.066016450524330,-0.120262026786804,0.101006485521793,-0.095514342188835) * Get(dx,0);
res += float4(-0.223087459802628,-0.093718200922012,0.023786703124642,-0.041385870426893) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
