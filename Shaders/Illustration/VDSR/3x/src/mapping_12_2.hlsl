sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.106122769415379,0.115317128598690,0.106553703546524,0.039328429847956,0.015596338547766,-0.011286796070635,0.011007819324732,-0.030350850895047,0.031857330352068,-0.110762238502502,-0.110102236270905,0.017295178025961,-0.000056847748056,-0.000312452146318,-0.018972551450133,-0.078027494251728));
res += mul(Get(s0,-dx,0), float4x4(-0.044061038643122,-0.042047623544931,0.039700534194708,-0.166583120822906,0.096261017024517,0.060677275061607,0.132605582475662,0.293212592601776,0.122807331383228,-0.052994437515736,0.138203859329224,-0.125514417886734,0.226293221116066,0.249202311038971,-0.128901749849319,0.066180005669594));
res += mul(Get(s0,-dx,dy), float4x4(0.066051587462425,-0.044553637504578,0.198939889669418,-0.025445425882936,-0.085975371301174,-0.086095601320267,-0.125348597764969,-0.019655371084809,-0.044808860868216,-0.006156990770251,-0.182278826832771,0.186322167515755,0.026028536260128,0.024535020813346,0.074007771909237,0.059371963143349));
res += mul(Get(s0,0,-dy), float4x4(0.053841792047024,0.266223132610321,0.027604149654508,-0.041454330086708,0.141342803835869,-0.004212063737214,0.075539730489254,0.064760595560074,0.133101850748062,-0.019444731995463,0.067688196897507,0.158692255616188,0.021938826888800,0.117635585367680,-0.035474248230457,0.080398254096508));
res += mul(Get(s0,0,0), float4x4(-0.117114380002022,0.133861377835274,-0.040711302310228,0.008075717836618,-0.088062167167664,0.065606184303761,-0.004659200552851,0.028289245441556,0.168941363692284,-0.054618496447802,-0.068557530641556,-0.097513169050217,0.042114689946175,0.028279416263103,0.048458993434906,0.076376110315323));
res += mul(Get(s0,0,dy), float4x4(-0.008183865807950,0.107921481132507,0.202222570776939,0.113130331039429,-0.052323859184980,0.166350334882736,0.035389233380556,-0.085079148411751,-0.019928889349103,0.090800784528255,-0.014725370332599,0.323107063770294,0.162899106740952,-0.011145303025842,0.019876746460795,0.045726161450148));
res += mul(Get(s0,dx,-dy), float4x4(0.074156589806080,0.087020158767700,0.016372174024582,-0.128735661506653,0.023753710091114,0.127328068017960,0.076932840049267,-0.130158513784409,0.029945949092507,-0.123289532959461,0.208818212151527,-0.018252730369568,-0.179389610886574,-0.100567638874054,-0.062657356262207,-0.075945109128952));
res += mul(Get(s0,dx,0), float4x4(-0.036573331803083,-0.105276808142662,-0.026458095759153,-0.043734580278397,-0.078065060079098,-0.084385178983212,-0.200631216168404,0.083110533654690,0.092442803084850,0.092966251075268,0.266503185033798,0.024179210886359,0.092837527394295,0.158560559153557,-0.144107103347778,-0.028380900621414));
res += mul(Get(s0,dx,dy), float4x4(0.009866498410702,-0.109654709696770,-0.007973807863891,0.157248973846436,0.037388473749161,-0.007792806252837,0.060040604323149,-0.122153989970684,-0.047541573643684,0.109301291406155,-0.025373982265592,0.228919968008995,-0.017422206699848,0.029431039467454,0.020641235634685,-0.159439742565155));
res += mul(Get(s1,-dx,-dy), float4x4(-0.096769101917744,-0.197937116026878,-0.030671505257487,0.022805921733379,-0.062316983938217,0.147035405039787,0.100578397512436,0.198471188545227,0.054554082453251,-0.033963143825531,0.055630281567574,-0.130322098731995,0.171191617846489,-0.084234088659286,-0.044726260006428,0.046596996486187));
res += mul(Get(s1,-dx,0), float4x4(-0.114313654601574,0.090698249638081,0.193614408373833,0.064385443925858,0.092462606728077,-0.005447971168905,0.202034503221512,-0.005407948046923,-0.102973043918610,0.125126689672470,0.069229379296303,0.064084298908710,0.013489938341081,-0.030843164771795,-0.005935295484960,0.087783314287663));
res += mul(Get(s1,-dx,dy), float4x4(-0.010452574118972,-0.036153193563223,0.054984845221043,0.173994123935699,-0.012061916291714,0.161917388439178,0.089788086712360,0.045392356812954,-0.120343826711178,0.117382027208805,0.026630226522684,0.223095536231995,-0.092124655842781,-0.154414087533951,-0.006600097287446,0.049025747925043));
res += mul(Get(s1,0,-dy), float4x4(-0.006087110843509,0.218493878841400,0.004953355994076,0.067073114216328,0.030715391039848,0.053111691027880,0.007067520637065,0.052169933915138,0.183239445090294,-0.048297934234142,-0.014303981326520,-0.000717255403288,-0.079445399343967,-0.000779253430665,-0.218954667448997,-0.085007667541504));
res += mul(Get(s1,0,0), float4x4(0.017451742663980,0.145023554563522,0.010660680942237,-0.048949848860502,0.093628145754337,-0.086913771927357,-0.059209197759628,-0.006956879049540,-0.098674967885017,0.059564784169197,-0.071376331150532,-0.032198097556829,-0.075255483388901,-0.001698836567812,-0.041945789009333,-0.113621741533279));
res += mul(Get(s1,0,dy), float4x4(0.077983886003494,-0.182132527232170,0.043105237185955,0.129301339387894,0.066958986222744,0.081806890666485,0.211298763751984,-0.008350206539035,-0.030151562765241,-0.053160168230534,-0.152421846985817,0.115843504667282,-0.125597611069679,0.108255036175251,-0.091951712965965,0.009861862286925));
res += mul(Get(s1,dx,-dy), float4x4(-0.011838486418128,0.072357796132565,-0.042035348713398,0.102686367928982,0.101815998554230,0.068236127495766,-0.035245131701231,-0.008362969383597,-0.009398710913956,-0.090958289802074,-0.077122412621975,-0.074157282710075,-0.041289310902357,0.188889309763908,-0.044348310679197,0.022712308913469));
res += mul(Get(s1,dx,0), float4x4(0.082394532859325,0.128766462206841,0.090743802487850,-0.041034512221813,0.159650176763535,0.004046495538205,-0.050609137862921,-0.107906818389893,0.144593343138695,-0.023359624668956,-0.154568821191788,-0.112238556146622,-0.081132531166077,0.072401449084282,0.049816429615021,-0.056775495409966));
res += mul(Get(s1,dx,dy), float4x4(0.097567349672318,-0.137881621718407,-0.021593010053039,0.170936897397041,0.056021939963102,0.041211985051632,0.002582863671705,-0.083019040524960,-0.103632509708405,-0.118018515408039,-0.224610477685928,-0.142942830920219,0.165565252304077,-0.041513483971357,0.032139360904694,0.112829089164734));
res += mul(Get(s2,-dx,-dy), float4x4(0.093545988202095,0.147109672427177,-0.125682398676872,0.014839363284409,0.093758404254913,0.034486487507820,-0.033690113574266,-0.033179011195898,-0.150318697094917,-0.125144541263580,0.073624379932880,0.043659064918756,-0.014671121723950,-0.037194747477770,-0.164384022355080,-0.164415925741196));
res += mul(Get(s2,-dx,0), float4x4(-0.065676361322403,0.179574966430664,-0.101887203752995,0.005658825859427,0.109362818300724,0.028049407526851,-0.054951783269644,-0.118284106254578,-0.116190217435360,-0.214933440089226,-0.052011728286743,-0.024505512788892,-0.203297823667526,0.027728304266930,-0.116655990481377,-0.074893832206726));
res += mul(Get(s2,-dx,dy), float4x4(-0.006224810611457,0.052421711385250,-0.202263757586479,0.080508291721344,-0.079485215246677,0.060749869793653,0.129668831825256,0.053610883653164,0.138893634080887,0.075970664620399,0.104336984455585,-0.048133969306946,0.122689411044121,-0.101997338235378,0.030879162251949,0.052476193755865));
res += mul(Get(s2,0,-dy), float4x4(0.024746581912041,0.065724648535252,-0.059677563607693,-0.030922168865800,0.033180560916662,0.013595924712718,0.072728790342808,-0.026788536459208,-0.023202322423458,0.112272471189499,-0.065408319234848,0.103015527129173,-0.082580931484699,0.081670895218849,0.053816035389900,-0.031677253544331));
res += mul(Get(s2,0,0), float4x4(0.092290811240673,-0.061903137713671,-0.137448266148567,-0.132097005844116,-0.032398547977209,-0.110463261604309,0.125610455870628,-0.099747434258461,-0.059515941888094,-0.081122659146786,0.102998398244381,0.160158693790436,0.082045756280422,-0.068197689950466,-0.180708631873131,0.251189053058624));
res += mul(Get(s2,0,dy), float4x4(0.095994427800179,-0.013063634745777,-0.003758316859603,-0.127884164452553,0.033511079847813,-0.172745913267136,0.081649512052536,0.198237344622612,0.021464562043548,0.025511974468827,0.190703570842743,-0.093920193612576,0.199420943856239,-0.121067851781845,0.003300682175905,0.142285212874413));
res += mul(Get(s2,dx,-dy), float4x4(-0.301399588584900,0.136895671486855,-0.130501568317413,0.116240859031677,0.125142902135849,0.120827503502369,0.126962557435036,0.029115958139300,0.107148714363575,0.123667158186436,-0.092750154435635,-0.096976116299629,-0.264934748411179,0.121718555688858,-0.076169587671757,-0.208057835698128));
res += mul(Get(s2,dx,0), float4x4(-0.115404680371284,-0.016054226085544,-0.070122629404068,0.002183681819588,-0.050553224980831,0.010123490355909,-0.042677287012339,0.035699699074030,-0.007468701805919,0.092120416462421,-0.072794273495674,0.085884429514408,-0.088071964681149,-0.184376388788223,-0.107189841568470,-0.025096818804741));
res += mul(Get(s2,dx,dy), float4x4(-0.034583561122417,-0.112760014832020,-0.158918336033821,0.002014500554651,0.206254184246063,-0.147495374083519,-0.107663065195084,-0.093133561313152,-0.076015830039978,0.046060670167208,-0.025241384282708,0.121883399784565,0.053970701992512,-0.047162070870399,0.184295162558556,-0.036103650927544));
res += mul(Get(s3,-dx,-dy), float4x4(0.180708080530167,-0.143907159566879,-0.101390115916729,0.043865408748388,0.025326339527965,-0.016277125105262,-0.044345904141665,0.019586013630033,-0.153161481022835,-0.082248784601688,-0.138275161385536,-0.117958784103394,-0.067452929913998,0.025184793397784,0.062480658292770,0.062442030757666));
res += mul(Get(s3,-dx,0), float4x4(-0.003660393645987,0.045766659080982,0.122255615890026,-0.043007317930460,-0.042283121496439,-0.049823053181171,-0.044637288898230,-0.175549492239952,-0.073275670409203,0.044266771525145,0.064969114959240,-0.089878082275391,-0.058644376695156,-0.138451844453812,0.190732330083847,0.047211322933435));
res += mul(Get(s3,-dx,dy), float4x4(0.007031084038317,0.017066635191441,-0.004028547555208,-0.216090604662895,0.008359269239008,-0.226417273283005,0.308436632156372,0.107298374176025,-0.205502212047577,-0.079493276774883,-0.105933353304863,0.029540456831455,-0.063960909843445,-0.047895964235067,-0.017875375226140,0.000619432248641));
res += mul(Get(s3,0,-dy), float4x4(0.012605622410774,0.057073410600424,0.035800423473120,-0.051045127213001,-0.012403043918312,-0.053742870688438,0.171143710613251,0.163704514503479,0.105026446282864,-0.072549089789391,0.076071515679359,0.010937333106995,0.030399752780795,0.033130943775177,0.097105234861374,0.078536063432693));
res += mul(Get(s3,0,0), float4x4(0.006639721803367,-0.028109552338719,0.005793888121843,0.146542593836784,-0.099250212311745,0.013795048929751,0.094318516552448,0.021629143506289,0.045699726790190,0.110187180340290,0.160270422697067,0.139931678771973,0.060305073857307,0.183123826980591,0.064011126756668,-0.047195058315992));
res += mul(Get(s3,0,dy), float4x4(0.024688975885510,0.113783054053783,0.056915558874607,-0.068571709096432,-0.093588307499886,-0.055818099528551,0.007083352655172,0.220988646149635,0.085281625390053,0.053623799234629,-0.047792501747608,-0.011570168659091,-0.197291180491447,-0.220481947064400,-0.227971121668816,0.009956571273506));
res += mul(Get(s3,dx,-dy), float4x4(0.275317996740341,-0.130077496170998,0.085081629455090,-0.077623993158340,-0.007630276028067,0.150530129671097,0.072259441018105,-0.123361423611641,-0.113641753792763,-0.068790450692177,0.228277176618576,-0.015394559130073,-0.056794784963131,0.134483650326729,-0.153074592351913,0.000013108588973));
res += mul(Get(s3,dx,0), float4x4(-0.108425550162792,0.018452432006598,0.058690890669823,0.070932388305664,-0.063366129994392,-0.069843970239162,0.103303045034409,-0.159418150782585,0.173294469714165,0.101485796272755,0.174275949597359,-0.180030614137650,0.046096231788397,0.079073265194893,-0.079406194388866,-0.035817787051201));
res += mul(Get(s3,dx,dy), float4x4(-0.091357178986073,0.005285067483783,-0.174294665455818,0.151665776968002,-0.059639401733875,0.097443625330925,-0.052223008126020,-0.078427396714687,-0.096389129757881,0.113820634782314,0.154224187135696,-0.159650847315788,0.233391702175140,0.215884074568748,0.134788855910301,0.066108107566833));
return max(float4(0,0,0,0), res);
}
