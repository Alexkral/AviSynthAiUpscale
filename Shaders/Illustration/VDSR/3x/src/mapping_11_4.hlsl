sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.008521491661668,0.178047016263008,-0.080731607973576,0.030189219862223,0.000388485495932,0.064411401748657,-0.159130722284317,-0.093751132488251,-0.123188264667988,0.086152330040932,0.071421973407269,-0.005014084279537,0.079606086015701,-0.132515549659729,0.086930923163891,0.069084428250790));
res += mul(Get(s0,-dx,0), float4x4(-0.039173893630505,-0.042681865394115,-0.067951306700706,-0.079429194331169,-0.017563996836543,0.024982543662190,-0.307942390441895,-0.086647935211658,0.007838564924896,0.064006499946117,0.086096964776516,-0.021967904642224,-0.208146780729294,-0.137859389185905,0.049340460449457,-0.075577333569527));
res += mul(Get(s0,-dx,dy), float4x4(-0.067271344363689,-0.097870707511902,0.308818250894547,0.021042767912149,-0.034178797155619,-0.155417457222939,-0.125136911869049,-0.158624321222305,0.095500387251377,-0.098784610629082,0.042693771421909,-0.001404422218911,0.172167554497719,0.137549296021461,0.019450537860394,0.151666983962059));
res += mul(Get(s0,0,-dy), float4x4(0.095495164394379,0.036882754415274,0.190210565924644,0.139693766832352,-0.031481631100178,0.136677011847496,0.158923327922821,0.023096671327949,-0.067033238708973,-0.058427434414625,-0.054438013583422,-0.037242453545332,-0.185675427317619,-0.079154685139656,-0.028641937300563,-0.052872207015753));
res += mul(Get(s0,0,0), float4x4(0.108981400728226,-0.101248823106289,-0.064831592142582,0.079451605677605,-0.066840231418610,0.055294975638390,-0.259347796440125,-0.014658083207905,-0.095443271100521,0.062079254537821,0.194667384028435,0.022465977817774,0.068640269339085,-0.115498423576355,0.062252402305603,0.047896169126034));
res += mul(Get(s0,0,dy), float4x4(0.103547975420952,-0.040337957441807,0.058423232287169,-0.178893014788628,-0.043345510959625,0.046271461993456,0.097964346408844,0.130918011069298,-0.095294505357742,-0.082446686923504,0.110076136887074,0.023774283006787,0.026223316788673,0.266869902610779,0.267298787832260,0.144325628876686));
res += mul(Get(s0,dx,-dy), float4x4(0.097522348165512,-0.040881562978029,-0.123192608356476,-0.008170589804649,-0.070694319903851,-0.061590217053890,-0.146042436361313,-0.327722787857056,0.051810368895531,0.104030124843121,-0.128103643655777,-0.101478077471256,-0.077586889266968,-0.014610493555665,-0.043095774948597,0.054598916321993));
res += mul(Get(s0,dx,0), float4x4(-0.045230884104967,-0.070860274136066,0.104398131370544,0.016039019450545,-0.201423913240433,-0.010222988203168,-0.021562572568655,-0.108820222318172,0.022259330376983,-0.142730191349983,-0.126485899090767,0.088215075433254,0.027332587167621,0.178414419293404,-0.142242684960365,-0.213529199361801));
res += mul(Get(s0,dx,dy), float4x4(0.128003329038620,-0.105002760887146,-0.008123105391860,0.047015309333801,-0.023274358361959,-0.099604435265064,0.172421336174011,0.133647993206978,0.012831009924412,0.122129656374454,0.096269764006138,0.027197914198041,0.069885782897472,0.229294806718826,-0.207480132579803,-0.071880564093590));
res += mul(Get(s1,-dx,-dy), float4x4(-0.007219549268484,-0.012871653772891,0.145727321505547,-0.039415959268808,-0.121606118977070,0.093975238502026,-0.031574405729771,-0.061351750046015,0.107787847518921,0.025445371866226,0.044503059238195,-0.173644736409187,-0.075052216649055,-0.006775994319469,-0.079351454973221,0.083658881485462));
res += mul(Get(s1,-dx,0), float4x4(0.103335104882717,0.022377876564860,0.077480517327785,0.004697038326412,-0.057298474013805,0.125398471951485,0.075723983347416,0.079870328307152,-0.015674479305744,0.143488392233849,-0.015080234967172,0.002536301268265,0.169313415884972,0.145104020833969,-0.105546630918980,-0.067026562988758));
res += mul(Get(s1,-dx,dy), float4x4(0.166037574410439,-0.092430166900158,0.145057901740074,-0.074506677687168,-0.057359591126442,-0.101090624928474,-0.006054750178009,0.025144722312689,-0.150241300463676,-0.015053001232445,-0.146986290812492,-0.137388110160828,-0.091620668768883,0.006614624056965,0.260359406471252,0.093421407043934));
res += mul(Get(s1,0,-dy), float4x4(0.046443335711956,0.072041980922222,-0.011347364634275,0.081772074103355,-0.036703135818243,0.181947872042656,-0.175030410289764,-0.222267016768456,0.186260014772415,0.047965500503778,0.063638947904110,-0.176847130060196,0.119622573256493,-0.078299961984158,0.028713008388877,-0.090386100113392));
res += mul(Get(s1,0,0), float4x4(0.165940836071968,0.112461276352406,-0.151736870408058,0.014154694974422,-0.062328353524208,0.026171667501330,0.036261599510908,-0.015744268894196,-0.006005917675793,0.184008181095123,0.006033064331859,-0.013733613304794,0.155887469649315,0.331702083349228,-0.033752769231796,0.150272890925407));
res += mul(Get(s1,0,dy), float4x4(0.010423712432384,-0.019383454695344,0.104297183454037,-0.018284337595105,0.068136982619762,0.036375019699335,0.026743840426207,0.055895019322634,-0.174747452139854,0.014332504943013,0.075123205780983,-0.091858968138695,-0.274823933839798,0.101727388799191,0.123154267668724,0.063646078109741));
res += mul(Get(s1,dx,-dy), float4x4(-0.190785884857178,-0.111237779259682,0.062781579792500,0.092310398817062,-0.067287005484104,-0.174004316329956,-0.014197858050466,-0.004155677277595,0.021516650915146,0.090883739292622,0.108546793460846,-0.083299115300179,0.066536627709866,0.006736066192389,0.022946126759052,-0.087787777185440));
res += mul(Get(s1,dx,0), float4x4(-0.187037572264671,0.028541970998049,0.001938042812981,-0.028275240212679,-0.017106072977185,-0.047436673194170,-0.174705222249031,0.008992034941912,-0.074232555925846,0.061605114489794,0.100745327770710,0.022296182811260,0.036939755082130,0.079038470983505,-0.023122118785977,-0.070252038538456));
res += mul(Get(s1,dx,dy), float4x4(0.114467859268188,-0.111922547221184,-0.017102370038629,-0.048851802945137,0.055970925837755,-0.036648947745562,0.071316428482533,0.198812514543533,0.148516520857811,-0.015122240409255,0.029211133718491,0.082443237304688,-0.094127036631107,-0.008697235956788,-0.005030725151300,-0.017486061900854));
res += mul(Get(s2,-dx,-dy), float4x4(-0.081297986209393,-0.040078964084387,-0.089442253112793,0.088100396096706,0.021447908133268,-0.096197731792927,-0.039299819618464,-0.089506477117538,0.099171236157417,-0.094719164073467,-0.082512728869915,0.050917260348797,0.003487386275083,0.009152039885521,-0.034753222018480,0.067328482866287));
res += mul(Get(s2,-dx,0), float4x4(0.176163688302040,0.071718297898769,-0.046069916337729,-0.066727474331856,-0.004541664384305,-0.059653256088495,0.009427873417735,-0.061193507164717,-0.219927281141281,0.092144526541233,0.039930872619152,0.216315433382988,-0.071266822516918,0.013600343838334,0.075614877045155,0.129224061965942));
res += mul(Get(s2,-dx,dy), float4x4(-0.040221247822046,0.093835450708866,0.015327591449022,0.057992286980152,0.114792041480541,0.143342152237892,-0.130251482129097,-0.022277772426605,-0.049583245068789,0.341343909502029,0.058069594204426,-0.195339620113373,0.064158856868744,0.101359233260155,0.176116496324539,-0.035361867398024));
res += mul(Get(s2,0,-dy), float4x4(0.158731654286385,0.152453050017357,-0.000761070055887,0.016749925911427,-0.068975552916527,-0.023742791265249,-0.139340162277222,0.088209606707096,-0.072577528655529,0.015765573829412,0.019903052598238,-0.038881186395884,-0.098899565637112,-0.009127524681389,-0.044457849115133,0.072579957544804));
res += mul(Get(s2,0,0), float4x4(0.092498764395714,0.068603418767452,-0.114209987223148,-0.059766527265310,0.075471237301826,-0.029143406078219,-0.000100622797618,0.160094097256660,-0.107513509690762,0.042960405349731,-0.005568743683398,0.168918520212173,0.019734239205718,0.068878576159477,-0.060117110610008,0.047297310084105));
res += mul(Get(s2,0,dy), float4x4(0.053426861763000,0.027830161154270,0.164657399058342,-0.163584142923355,-0.124349981546402,-0.221247553825378,-0.058401841670275,-0.005964668467641,0.172647655010223,0.102161861956120,-0.069343023002148,0.021152799949050,-0.012049602344632,0.100109234452248,-0.004740689415485,0.194080650806427));
res += mul(Get(s2,dx,-dy), float4x4(-0.149862363934517,-0.108685687184334,-0.057977795600891,-0.015021892264485,-0.117233894765377,-0.055013917386532,0.094380326569080,0.117948137223721,0.014321201480925,-0.037632808089256,0.077289476990700,0.090716324746609,-0.158960714936256,-0.002831764053553,-0.060360964387655,-0.122201725840569));
res += mul(Get(s2,dx,0), float4x4(-0.062262631952763,0.217828571796417,0.035431832075119,0.154791608452797,0.021596107631922,-0.080235607922077,-0.159360602498055,0.226183891296387,-0.139232933521271,0.090317502617836,0.005837765056640,-0.119341135025024,-0.006091536954045,0.207020699977875,-0.160959541797638,-0.044261582195759));
res += mul(Get(s2,dx,dy), float4x4(-0.024975351989269,0.204922795295715,0.129662156105042,0.017570134252310,0.194441050291061,-0.057938732206821,0.106935575604439,0.007258290890604,0.059790339320898,0.056939687579870,0.157774239778519,0.162709712982178,0.032854948192835,-0.094896450638771,-0.023553011938930,-0.179551675915718));
res += mul(Get(s3,-dx,-dy), float4x4(0.042498659342527,0.039274830371141,0.039872381836176,0.039085149765015,-0.018314704298973,-0.086120352149010,-0.132737770676613,0.028443388640881,0.067463971674442,-0.168030977249146,0.017627732828259,0.132121667265892,-0.000399117299821,0.028316099196672,-0.037151984870434,-0.010561860166490));
res += mul(Get(s3,-dx,0), float4x4(0.042345039546490,-0.159223988652229,0.064885593950748,0.070469819009304,0.070608392357826,-0.034036245197058,0.183821022510529,-0.013958764262497,0.071047738194466,0.092042475938797,-0.025281967595220,0.014071229845285,0.021339528262615,-0.020972223952413,-0.045394219458103,-0.045280702412128));
res += mul(Get(s3,-dx,dy), float4x4(-0.014551894739270,-0.055320829153061,-0.036727424710989,-0.047235216945410,-0.111126534640789,-0.191258415579796,0.007513627409935,0.096721939742565,-0.016961250454187,0.044446349143982,0.084501162171364,-0.211304321885109,-0.011909650638700,-0.093516133725643,0.269724100828171,0.080011278390884));
res += mul(Get(s3,0,-dy), float4x4(0.045808266848326,0.115343503654003,0.328103929758072,-0.045763269066811,0.100283078849316,0.208120420575142,-0.260038316249847,-0.031319055706263,-0.008344605565071,-0.071566626429558,0.129229992628098,-0.135431945323944,0.073973454535007,-0.033684965223074,0.235899016261101,-0.189398005604744));
res += mul(Get(s3,0,0), float4x4(-0.005245574750006,0.024162556976080,0.112748570740223,0.127841323614120,-0.092055253684521,-0.042190682142973,0.040577132254839,-0.041645664721727,-0.189397603273392,-0.062275368720293,0.018762117251754,0.001108006224968,-0.040375679731369,0.051443658769131,-0.089189164340496,0.043134365230799));
res += mul(Get(s3,0,dy), float4x4(0.019852459430695,-0.170275717973709,0.039055995643139,-0.031393136829138,0.064183838665485,-0.219769254326820,0.021477986127138,-0.026072297245264,-0.138575047254562,-0.002418667776510,0.001067172503099,0.153530091047287,-0.123966053128242,-0.003501266473904,0.012786706909537,0.033406101167202));
res += mul(Get(s3,dx,-dy), float4x4(-0.149642676115036,-0.082376427948475,0.137936428189278,-0.119049631059170,-0.025350807234645,-0.044092554599047,0.016329368576407,-0.022311288863420,0.112146556377411,-0.043027888983488,0.076971381902695,-0.266478091478348,0.050355408340693,0.104253336787224,-0.078970044851303,0.148683741688728));
res += mul(Get(s3,dx,0), float4x4(0.084874801337719,-0.100950017571449,0.002350139664486,-0.060578659176826,-0.059329044073820,-0.061473961919546,-0.051086351275444,-0.033951673656702,-0.047778207808733,-0.118783399462700,-0.047507654875517,-0.117402374744415,0.148855403065681,0.092235393822193,0.205204114317894,0.028190357610583));
res += mul(Get(s3,dx,dy), float4x4(0.003888225648552,-0.032723180949688,0.020357772707939,-0.064784027636051,0.079371243715286,-0.091354072093964,0.065602704882622,-0.078240588307381,-0.064907111227512,-0.223143368959427,0.045388747006655,-0.174805581569672,-0.058236960321665,0.103225789964199,0.211841344833374,0.031615991145372));
return max(float4(0,0,0,0), res);
}
