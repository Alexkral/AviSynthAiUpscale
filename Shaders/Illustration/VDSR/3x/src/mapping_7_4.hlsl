sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.149046808481216,-0.154869332909584,0.033979117870331,0.023161217570305,0.057147223502398,0.092557795345783,0.143298536539078,-0.042763661593199,-0.064291916787624,0.030529985204339,-0.044258482754230,-0.112891800701618,0.072900243103504,0.104130081832409,-0.139795467257500,0.076721824705601));
res += mul(Get(s0,-dx,0), float4x4(-0.155256703495979,-0.091314569115639,-0.094243995845318,0.181335121393204,0.045851372182369,0.100377120077610,0.034844562411308,-0.127501249313354,-0.049377869814634,0.268601417541504,-0.023487228900194,-0.059818290174007,0.000598269747570,-0.190427362918854,0.094287894666195,0.032975364476442));
res += mul(Get(s0,-dx,dy), float4x4(-0.008795563131571,0.042712286114693,-0.211820334196091,0.092580772936344,0.077454909682274,-0.352732449769974,0.127308383584023,-0.091591440141201,-0.108480513095856,-0.035425715148449,0.100467093288898,0.096598982810974,0.172816485166550,0.230689436197281,-0.173716753721237,-0.094924308359623));
res += mul(Get(s0,0,-dy), float4x4(0.509537756443024,-0.101162724196911,-0.029632225632668,-0.138227224349976,0.046564657241106,0.122318424284458,0.169145151972771,-0.174977421760559,-0.062785468995571,-0.051927417516708,-0.073604002594948,-0.135048747062683,-0.208978071808815,0.048798695206642,-0.071460373699665,-0.063274152576923));
res += mul(Get(s0,0,0), float4x4(-0.171232074499130,-0.150571659207344,0.086800724267960,0.021188672631979,-0.037169389426708,0.222704574465752,-0.022157242521644,-0.087050870060921,-0.084099911153316,-0.035635232925415,-0.026572978124022,-0.172532021999359,-0.047438096255064,0.067740947008133,0.082109875977039,0.059918470680714));
res += mul(Get(s0,0,dy), float4x4(0.053555566817522,0.014115407131612,0.034715384244919,-0.085946977138519,-0.120186880230904,-0.000556802086066,0.006599175743759,0.049793522804976,-0.099905177950859,-0.035026330500841,0.001159700099379,0.012610232457519,-0.047156985849142,0.268558919429779,-0.030149366706610,0.167820587754250));
res += mul(Get(s0,dx,-dy), float4x4(0.322372853755951,0.184943825006485,0.062935106456280,-0.176010876893997,0.205825284123421,-0.075046263635159,-0.097977757453918,-0.072602316737175,-0.167270466685295,0.019932590425014,-0.155292347073555,-0.062350425869226,-0.082598119974136,-0.040391318500042,-0.075980119407177,-0.120630539953709));
res += mul(Get(s0,dx,0), float4x4(-0.014543415047228,0.084333367645741,0.235839024186134,-0.150608032941818,0.008914700709283,0.305905014276505,-0.205744355916977,-0.076583057641983,-0.171752706170082,-0.073274038732052,-0.256316214799881,-0.085706293582916,-0.058883983641863,-0.085441984236240,0.032711405307055,-0.113946527242661));
res += mul(Get(s0,dx,dy), float4x4(0.009217934682965,0.060840304940939,0.065004989504814,-0.144516691565514,-0.022019790485501,-0.096872165799141,0.205925911664963,-0.085771955549717,-0.046862129122019,-0.137167528271675,-0.245936080813408,-0.030686965212226,0.199649050831795,-0.113090649247169,-0.036404982209206,-0.017849691212177));
res += mul(Get(s1,-dx,-dy), float4x4(-0.070776201784611,-0.218830898404121,-0.072069540619850,0.152110010385513,-0.048070754855871,-0.038272578269243,0.094630435109138,0.281885474920273,-0.089878499507904,0.115982383489609,0.026876185089350,0.143656626343727,0.057732291519642,-0.006621597334743,-0.077763333916664,0.152463555335999));
res += mul(Get(s1,-dx,0), float4x4(0.089107133448124,-0.029213691130280,0.023977346718311,0.039216160774231,0.030236111953855,-0.105002865195274,-0.016448201611638,0.044087491929531,-0.025957439094782,-0.306440681219101,0.344143897294998,-0.164831891655922,0.131849989295006,-0.229190200567245,-0.109187416732311,0.041644793003798));
res += mul(Get(s1,-dx,dy), float4x4(-0.000792659469880,0.061326820403337,0.083663217723370,-0.128302410244942,-0.213042601943016,0.042977351695299,-0.013256010599434,-0.140840724110603,-0.002209305763245,-0.263225883245468,0.116920888423920,-0.017165221273899,0.101120673120022,0.151492089033127,-0.003305413993075,-0.076157137751579));
res += mul(Get(s1,0,-dy), float4x4(-0.148201197385788,-0.126551389694214,0.032821346074343,-0.007304692175239,-0.043692331761122,0.059884194284678,0.213887304067612,-0.128029525279999,0.258000493049622,0.061034087091684,-0.168544813990593,0.051855936646461,0.063091874122620,0.309069663286209,-0.066941551864147,0.009882220067084));
res += mul(Get(s1,0,0), float4x4(0.097983010113239,0.059604939073324,0.113424882292747,0.184120833873749,-0.106950521469116,0.045015029609203,-0.074750006198883,-0.076094336807728,-0.037924248725176,-0.190237373113632,-0.084998004138470,-0.255758732557297,-0.045942891389132,0.198883265256882,0.009640859439969,0.068631283938885));
res += mul(Get(s1,0,dy), float4x4(0.195033371448517,-0.034989941865206,0.190466836094856,0.092039167881012,-0.108557805418968,0.093274861574173,-0.134343609213829,-0.071445308625698,-0.020672388374805,-0.145309329032898,-0.042655043303967,0.608018398284912,-0.177127614617348,0.356242686510086,0.053601477295160,-0.083524577319622));
res += mul(Get(s1,dx,-dy), float4x4(-0.191533297300339,0.031626090407372,0.244019702076912,0.044997699558735,0.235062345862389,0.072392761707306,0.041437141597271,0.158959478139877,0.185309350490570,0.042968194931746,-0.071299195289612,-0.050438623875380,0.000271194090601,-0.018801668658853,-0.134941682219505,-0.051288254559040));
res += mul(Get(s1,dx,0), float4x4(0.213301345705986,0.007433918770403,-0.133885756134987,-0.017486795783043,0.026486644521356,0.001188061665744,-0.021491046994925,-0.006114609073848,-0.126525700092316,-0.069738753139973,-0.051276613026857,0.014257127419114,-0.091887190937996,-0.054881580173969,-0.045261580497026,-0.037793435156345));
res += mul(Get(s1,dx,dy), float4x4(0.052107613533735,-0.168274566531181,-0.040322352200747,-0.209665432572365,-0.140576928853989,0.159200295805931,0.087534472346306,-0.107794448733330,-0.249233067035675,-0.099250838160515,-0.017887588590384,0.263246119022369,-0.076115071773529,0.374595463275909,-0.021072469651699,-0.096676722168922));
res += mul(Get(s2,-dx,-dy), float4x4(0.025323605164886,0.227477148175240,0.296039551496506,0.030022157356143,0.004821656271815,0.304140150547028,0.033195868134499,-0.068480633199215,-0.126066356897354,-0.162129878997803,-0.100349210202694,0.031736038625240,-0.055978849530220,-0.056094743311405,0.079198695719242,-0.061955507844687));
res += mul(Get(s2,-dx,0), float4x4(0.099776163697243,-0.101669147610664,0.144416481256485,0.010800740681589,-0.005811817944050,0.268773257732391,0.035169016569853,0.062280904501677,-0.030941791832447,-0.081515714526176,0.219468072056770,0.374257147312164,-0.068168945610523,-0.221168547868729,0.404642790555954,0.216138139367104));
res += mul(Get(s2,-dx,dy), float4x4(-0.111133702099323,-0.103611424565315,-0.060011286288500,0.176547870039940,-0.046590484678745,-0.008492629975080,-0.075956225395203,-0.095443479716778,-0.098847746849060,-0.188969001173973,0.091088078916073,0.179523348808289,-0.085714645683765,-0.203894406557083,0.030168743804097,0.015821825712919));
res += mul(Get(s2,0,-dy), float4x4(0.157287254929543,0.200883865356445,0.087901763617992,-0.155336320400238,0.262808620929718,0.116215541958809,0.120022505521774,0.044222395867109,0.095526203513145,-0.031129335984588,-0.057366173714399,0.028724245727062,-0.143504261970520,-0.058726251125336,-0.233773931860924,-0.157076120376587));
res += mul(Get(s2,0,0), float4x4(-0.092548720538616,-0.061424676328897,0.063501685857773,0.014863139018416,-0.019126543775201,0.108788430690765,0.099169835448265,0.012282485142350,-0.002845503157005,-0.046343516558409,-0.078568235039711,-0.140495717525482,-0.094912171363831,-0.092169664800167,0.012241335585713,0.103090703487396));
res += mul(Get(s2,0,dy), float4x4(-0.057321876287460,-0.024124873802066,-0.023799758404493,-0.126519024372101,-0.119445964694023,-0.037681043148041,0.098805941641331,-0.024526257067919,-0.056111041456461,-0.191711679100990,0.004546390846372,-0.048859156668186,0.074156813323498,-0.186284631490707,-0.145393848419189,0.043816030025482));
res += mul(Get(s2,dx,-dy), float4x4(0.002201799303293,0.141235634684563,0.152563780546188,-0.225691586732864,0.194748118519783,0.106259807944298,-0.117849685251713,-0.150856077671051,0.141616836190224,-0.049451749771833,0.046883586794138,-0.145939499139786,-0.081017620861530,0.045939594507217,-0.204308390617371,0.071145355701447));
res += mul(Get(s2,dx,0), float4x4(-0.105085924267769,0.191807240247726,-0.053850162774324,-0.041365206241608,0.016867464408278,0.175288498401642,0.006926666479558,-0.183891594409943,-0.094390757381916,-0.048578109592199,0.062858819961548,0.147243261337280,0.046136178076267,-0.147746324539185,-0.055540941655636,0.150917053222656));
res += mul(Get(s2,dx,dy), float4x4(-0.103896126151085,-0.079467505216599,-0.100061349570751,-0.049644749611616,-0.033618655055761,0.016242299228907,-0.088649787008762,-0.157409027218819,-0.133359700441360,-0.083806633949280,0.015716901049018,-0.067364640533924,0.079662978649139,-0.290564239025116,-0.048074055463076,-0.052932787686586));
res += mul(Get(s3,-dx,-dy), float4x4(-0.054927557706833,0.032517142593861,0.034258302301168,-0.111794948577881,0.099106132984161,-0.016538919880986,-0.102707020938396,-0.068388335406780,-0.034437779337168,-0.082582741975784,0.013534574769437,-0.067280702292919,0.232303619384766,0.031990054994822,-0.163402810692787,-0.014121397398412));
res += mul(Get(s3,-dx,0), float4x4(-0.011417699046433,-0.116805262863636,0.043450120836496,-0.257566422224045,-0.052380278706551,-0.018350705504417,-0.060964629054070,0.036878652870655,0.109824873507023,-0.052728939801455,0.049692343920469,0.098469197750092,-0.029296739026904,0.046724125742912,-0.075938910245895,0.016379496082664));
res += mul(Get(s3,-dx,dy), float4x4(-0.082910947501659,-0.206908836960793,-0.035812161862850,-0.064616180956364,-0.028565956279635,-0.035042900592089,0.026929784566164,0.272021144628525,0.019652526825666,0.188709244132042,-0.033800389617682,0.069211475551128,0.132162049412727,0.037947975099087,-0.091504335403442,0.146466717123985));
res += mul(Get(s3,0,-dy), float4x4(-0.123701289296150,0.065021045506001,-0.160960406064987,-0.203667566180229,0.003052853047848,0.109584413468838,0.163936719298363,0.101809084415436,-0.032018318772316,-0.250114172697067,-0.010095009580255,0.088871188461781,-0.180019348859787,0.085897333920002,-0.123781278729439,-0.014263233169913));
res += mul(Get(s3,0,0), float4x4(-0.085510291159153,-0.048043917864561,0.061567831784487,-0.104742713272572,0.093263983726501,0.149866789579391,0.051827616989613,0.163384199142456,0.038251038640738,-0.182855978608131,-0.069698728621006,0.230009913444519,-0.209582924842834,-0.197348847985268,-0.105941832065582,0.021946221590042));
res += mul(Get(s3,0,dy), float4x4(-0.018053412437439,-0.049323167651892,-0.045320153236389,-0.038223605602980,0.040591295808554,0.031265914440155,-0.067423395812511,0.057072207331657,-0.014919118955731,-0.001542526180856,-0.103514060378075,0.293616205453873,-0.085221335291862,0.092387750744820,-0.128237232565880,-0.006156510207802));
res += mul(Get(s3,dx,-dy), float4x4(-0.146039322018623,0.036917239427567,-0.312792718410492,-0.259936481714249,0.080076187849045,-0.023925751447678,0.029079480096698,-0.152696251869202,-0.119490332901478,-0.022672178223729,-0.131984993815422,-0.115159720182419,-0.091801039874554,-0.170995652675629,-0.262011051177979,-0.254248172044754));
res += mul(Get(s3,dx,0), float4x4(-0.042924515902996,0.051756862550974,-0.160740166902542,-0.107531495392323,0.129019409418106,-0.003502411302179,0.117527671158314,0.011516300961375,-0.075224123895168,-0.021662183105946,-0.145625278353691,-0.125478804111481,-0.187231332063675,-0.087707214057446,-0.165490761399269,-0.190845102071762));
res += mul(Get(s3,dx,dy), float4x4(-0.020263088867068,-0.071588084101677,0.014737780205905,-0.068095847964287,0.072369255125523,0.118014268577099,-0.006025963928550,0.154275387525558,-0.112310044467449,-0.093928672373295,-0.228070557117462,-0.141001418232918,-0.181987807154655,0.089984275400639,-0.203712463378906,-0.067436218261719));
return max(float4(0,0,0,0), res);
}
