sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.015174895524979,0.094483971595764,0.014146276749671,-0.064016841351986,-0.016624880954623,0.153349339962006,0.256703555583954,0.134645432233810,0.065045155584812,0.081456303596497,-0.022620191797614,-0.014863451011479,-0.054691355675459,0.105995059013367,-0.143619850277901,-0.038161300122738));
res += mul(Get(s0,-dx,0), float4x4(-0.134829521179199,-0.090982675552368,-0.013210014440119,-0.121951192617416,-0.011697541922331,0.069909162819386,0.115427508950233,0.055534102022648,-0.255304306745529,0.108172878623009,0.082723006606102,-0.086799450218678,0.014401985332370,-0.030630143359303,0.073586344718933,0.127930268645287));
res += mul(Get(s0,-dx,dy), float4x4(-0.053551308810711,-0.082541398704052,-0.250283777713776,0.071330904960632,0.128170996904373,-0.097707673907280,-0.043047506362200,-0.011445373296738,-0.048796255141497,-0.093882031738758,0.061686228960752,-0.136492952704430,-0.080292582511902,-0.065392881631851,0.004268088378012,-0.178590938448906));
res += mul(Get(s0,0,-dy), float4x4(-0.025023724883795,0.040001858025789,0.063964754343033,-0.114623226225376,0.140313148498535,-0.096280656754971,0.037773035466671,0.272515386343002,0.067697234451771,0.019035765901208,0.011372716166079,-0.201606348156929,-0.205153167247772,-0.096405826508999,0.024000998586416,0.079153798520565));
res += mul(Get(s0,0,0), float4x4(0.067419394850731,0.031278006732464,0.060143742710352,0.125157922506332,0.020419653505087,-0.084783755242825,-0.067784994840622,0.156868413090706,-0.192915812134743,0.175529643893242,-0.193412184715271,0.219198778271675,0.056971047073603,-0.069144658744335,0.080074712634087,0.002075820928439));
res += mul(Get(s0,0,dy), float4x4(-0.010981995612383,0.121226429939270,0.072392605245113,0.116673290729523,-0.161541372537613,-0.077935591340065,-0.046622850000858,0.155739426612854,0.077456653118134,-0.075643867254257,0.010582076385617,-0.206010103225708,-0.049472223967314,-0.088911831378937,0.130971118807793,0.032361894845963));
res += mul(Get(s0,dx,-dy), float4x4(-0.158272966742516,0.101242825388908,0.132078438997269,0.028970129787922,0.034811485558748,0.009834171272814,0.177099406719208,0.035392392426729,0.009246123954654,0.066905021667480,0.047465849667788,0.283811271190643,0.042734645307064,-0.182503044605255,0.115704834461212,0.102508798241615));
res += mul(Get(s0,dx,0), float4x4(0.007587622385472,-0.052048377692699,-0.072881542146206,-0.015375342220068,0.060354579240084,0.024936979636550,-0.026105787605047,0.222848236560822,0.073908470571041,0.185908153653145,-0.042641885578632,0.128453075885773,0.071397185325623,-0.101190030574799,-0.017103159800172,0.050922624766827));
res += mul(Get(s0,dx,dy), float4x4(-0.149627193808556,-0.078733623027802,0.077227830886841,-0.105879247188568,-0.280215233564377,0.232437521219254,-0.111750453710556,0.017827438190579,0.061936866492033,-0.078271344304085,-0.102950200438499,-0.228730618953705,-0.004047697409987,0.005550238303840,0.068728320300579,0.156890258193016));
res += mul(Get(s1,-dx,-dy), float4x4(-0.248973861336708,0.194960832595825,0.069067798554897,0.076327413320541,-0.119378842413425,0.121086403727531,0.086202822625637,0.066539630293846,-0.060014918446541,0.176533162593842,0.007074897177517,-0.100177541375160,-0.076560668647289,-0.016929985955358,-0.080401048064232,-0.002122044330463));
res += mul(Get(s1,-dx,0), float4x4(0.113041900098324,-0.049216099083424,-0.207319959998131,-0.087685883045197,0.087970733642578,0.062448188662529,0.034668635576963,0.147167071700096,0.037221416831017,0.086455076932907,0.086412765085697,-0.127010092139244,-0.215133905410767,-0.231278061866760,0.075486637651920,0.075055092573166));
res += mul(Get(s1,-dx,dy), float4x4(-0.070906594395638,0.063312076032162,0.196678563952446,0.042779266834259,0.057578355073929,-0.026550568640232,0.126677230000496,-0.085989840328693,0.102858774363995,-0.074725762009621,-0.019924631342292,-0.243843987584114,-0.098222717642784,0.043247535824776,0.061783153563738,0.039638876914978));
res += mul(Get(s1,0,-dy), float4x4(-0.028638634830713,0.018203936517239,0.133341908454895,0.037080448120832,-0.098112836480141,-0.035583250224590,-0.076487146317959,-0.016014525666833,-0.103088147938251,-0.052079133689404,-0.006589006632566,-0.032073054462671,0.026082936674356,0.083490170538425,0.026684343814850,-0.082984589040279));
res += mul(Get(s1,0,0), float4x4(0.092132225632668,0.088321588933468,0.041290942579508,0.148889392614365,-0.208526596426964,0.005705864634365,0.058580428361893,0.112428538501263,-0.217038184404373,0.072634033858776,-0.008382587693632,0.003710250137374,0.143661752343178,-0.004318701103330,0.050115827471018,-0.210851907730103));
res += mul(Get(s1,0,dy), float4x4(-0.025769757106900,0.046620458364487,0.006488272454590,-0.113444656133652,0.077077247202396,-0.142405152320862,0.167305916547775,-0.047755133360624,-0.029445070773363,0.111889816820621,-0.123876079916954,0.029651358723640,0.130711689591408,-0.196447670459747,0.214825108647346,-0.113058827817440));
res += mul(Get(s1,dx,-dy), float4x4(-0.124797061085701,-0.155615791678429,0.019622566178441,0.005781116895378,0.190037250518799,0.027492428198457,0.254996597766876,0.048630714416504,-0.188281849026680,0.016227155923843,-0.211821377277374,0.039075266569853,-0.189965948462486,-0.228583276271820,-0.050294462591410,0.094470955431461));
res += mul(Get(s1,dx,0), float4x4(0.065999835729599,-0.266415774822235,-0.153556242585182,-0.253199040889740,0.020017433911562,-0.225737884640694,-0.151317805051804,-0.163133651018143,-0.022209893912077,0.155889153480530,-0.019538929685950,-0.097499512135983,-0.043257132172585,0.191484868526459,0.228795811533928,-0.019524076953530));
res += mul(Get(s1,dx,dy), float4x4(0.000181821829756,-0.067890137434006,-0.010482158511877,0.169615641236305,0.053510401397943,-0.118984483182430,-0.030542060732841,-0.082950107753277,-0.134252771735191,-0.132251501083374,0.062666118144989,-0.019248027354479,-0.006653044372797,-0.136067420244217,0.130684211850166,-0.037363778799772));
res += mul(Get(s2,-dx,-dy), float4x4(-0.116273581981659,-0.031345099210739,0.086807727813721,-0.069900542497635,-0.103135049343109,-0.062653869390488,-0.142775550484657,-0.136007159948349,0.106710724532604,-0.023422734811902,0.078676529228687,-0.002453197026625,0.069577291607857,-0.118479222059250,-0.137567207217216,0.063634514808655));
res += mul(Get(s2,-dx,0), float4x4(0.015587285161018,0.043701514601707,-0.182000264525414,-0.084048576653004,-0.123962603509426,0.032416224479675,-0.032693587243557,-0.036125544458628,0.223393842577934,0.184382885694504,-0.003135778475553,-0.130374103784561,0.207984730601311,0.211047962307930,-0.108174093067646,0.007786108646542));
res += mul(Get(s2,-dx,dy), float4x4(0.025616243481636,0.053738012909889,0.025492209941149,0.048416275531054,0.069917254149914,0.068266540765762,-0.063602834939957,-0.069139599800110,0.155491203069687,-0.101192936301231,0.131789639592171,-0.126234412193298,0.149407416582108,0.136725962162018,-0.056356906890869,0.017292840406299));
res += mul(Get(s2,0,-dy), float4x4(-0.141728669404984,-0.222366541624069,-0.120724126696587,0.144621521234512,-0.067045331001282,-0.304098784923553,0.112274043262005,-0.102108061313629,0.174143373966217,-0.120633371174335,-0.097113028168678,0.061057671904564,0.054497841745615,-0.108629934489727,0.140015482902527,0.105504170060158));
res += mul(Get(s2,0,0), float4x4(-0.059620685875416,0.040378682315350,0.029645208269358,0.076761722564697,-0.114179179072380,-0.072203837335110,0.114471353590488,0.084997080266476,-0.053282774984837,0.084395848214626,0.084811612963676,0.164934039115906,0.085464440286160,0.122292406857014,-0.183165296912193,-0.187053993344307));
res += mul(Get(s2,0,dy), float4x4(-0.117292389273643,-0.010838217101991,-0.103138931095600,0.038115084171295,-0.095799781382084,0.045947078615427,-0.010025501251221,0.038324985653162,0.121736273169518,0.114630736410618,-0.151046395301819,0.057028893381357,0.011662364937365,0.107297345995903,0.034696634858847,0.228290379047394));
res += mul(Get(s2,dx,-dy), float4x4(-0.103184983134270,-0.196402013301849,-0.012718062847853,0.108967773616314,0.209435194730759,0.045041698962450,0.008303992450237,0.221456930041313,-0.043094791471958,0.149363577365875,-0.056436467915773,0.114914059638977,-0.014020826667547,0.103405892848969,-0.049757596105337,-0.014029127545655));
res += mul(Get(s2,dx,0), float4x4(0.042901158332825,-0.072979949414730,0.166894808411598,-0.009790892712772,0.341821521520615,0.098415091633797,-0.021142505109310,0.101733341813087,-0.168131053447723,0.094292797148228,0.042010113596916,-0.042818259447813,-0.052822981029749,-0.022700179368258,-0.176502197980881,0.079177655279636));
res += mul(Get(s2,dx,dy), float4x4(-0.207406669855118,-0.081606045365334,-0.120351947844028,0.002152215922251,-0.020772155374289,0.120404161512852,0.111873127520084,0.077937088906765,-0.035935111343861,0.129458859562874,-0.126340940594673,0.060242760926485,-0.001312653068453,0.037297066301107,-0.195710688829422,-0.064396455883980));
res += mul(Get(s3,-dx,-dy), float4x4(0.164060860872269,0.139209955930710,0.295316249132156,0.071313008666039,-0.061752159148455,0.039008956402540,-0.144081547856331,0.321865826845169,-0.167020827531815,-0.000465530873043,0.087505131959915,0.156158253550529,0.047746915370226,0.027890117838979,-0.155655220150948,0.027924362570047));
res += mul(Get(s3,-dx,0), float4x4(-0.022420577704906,0.200779780745506,-0.007569050416350,-0.060961168259382,0.000833993486594,0.057891253381968,0.175234571099281,-0.131508037447929,-0.160263240337372,-0.056033179163933,-0.085411548614502,0.130844071507454,0.040621548891068,0.072655566036701,0.272977501153946,-0.060458250343800));
res += mul(Get(s3,-dx,dy), float4x4(-0.151840895414352,0.181820809841156,0.028374910354614,0.064673446118832,0.032239265739918,-0.065732106566429,-0.104388698935509,-0.118421584367752,0.054071173071861,0.118416272103786,0.062814377248287,-0.074825324118137,0.117441907525063,-0.134952887892723,-0.000775106542278,-0.185827821493149));
res += mul(Get(s3,0,-dy), float4x4(0.038292057812214,0.001410195836797,0.042992882430553,-0.061032172292471,-0.074122339487076,-0.065612114965916,-0.017708664759994,-0.148087352514267,-0.119932949542999,0.065276034176350,0.030848598107696,0.001602089847438,-0.129858672618866,0.051352590322495,0.071383066475391,0.033941123634577));
res += mul(Get(s3,0,0), float4x4(-0.130102246999741,0.090350583195686,-0.012446600943804,-0.142080992460251,0.100128583610058,0.061722487211227,0.079877309501171,-0.150752648711205,-0.044806454330683,-0.002059305552393,0.084903135895729,-0.012327238917351,-0.032631929963827,0.137533858418465,0.134342804551125,-0.094028808176517));
res += mul(Get(s3,0,dy), float4x4(-0.065740555524826,0.063725039362907,-0.044458083808422,0.071840912103653,-0.109299004077911,0.036113377660513,-0.120394051074982,-0.050743732601404,-0.018986577168107,-0.093894764780998,-0.016945140436292,0.030236151069403,-0.118931412696838,-0.134016856551170,0.180924043059349,-0.148745879530907));
res += mul(Get(s3,dx,-dy), float4x4(0.093792445957661,-0.111821517348289,0.071899048984051,0.023993220180273,0.287619918584824,-0.068140253424644,0.062996305525303,0.036220833659172,0.053301494568586,0.053893622010946,0.046797920018435,-0.075707264244556,0.118039451539516,0.125778645277023,-0.024378435686231,0.164464503526688));
res += mul(Get(s3,dx,0), float4x4(0.095816172659397,-0.208959996700287,0.069943785667419,-0.069809511303902,-0.016196608543396,-0.064243525266647,0.031736809760332,0.002333176089451,0.211723178625107,0.130179047584534,-0.024726351723075,-0.068912841379642,0.220935195684433,-0.030371742323041,-0.081184789538383,0.062103644013405));
res += mul(Get(s3,dx,dy), float4x4(-0.081745937466621,-0.023769011721015,-0.037843517959118,0.270744264125824,0.154190242290497,-0.063278406858444,-0.057513345032930,-0.163638636469841,0.149345710873604,-0.051709704101086,0.026933154091239,0.024597845971584,0.237407043576241,-0.027026172727346,-0.233358427882195,-0.218891099095345));
return max(float4(0,0,0,0), res);
}
