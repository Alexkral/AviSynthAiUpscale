sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.117645487189293,0.166676968336105,-0.133246421813965,-0.066258303821087,0.012000263668597,0.031434111297131,0.122545391321182,0.047430515289307,0.034344512969255,-0.167010203003883,-0.164711460471153,-0.033720083534718,-0.056891489773989,-0.053082600235939,-0.269577473402023,-0.098237000405788));
res += mul(Get(s0,-dx,0), float4x4(-0.028347730636597,-0.151322320103645,0.069575659930706,-0.001807895721868,0.017574919387698,-0.163011759519577,-0.095639176666737,0.029808826744556,0.105764120817184,0.077226229012012,0.011483541689813,-0.023875018581748,0.025103375315666,-0.074458897113800,-0.174890339374542,0.110544860363007));
res += mul(Get(s0,-dx,dy), float4x4(-0.002810916630551,-0.312079697847366,-0.021032517775893,-0.089173138141632,0.012703214772046,0.088558763265610,0.139712736010551,0.134242087602615,-0.007270421367139,0.028713967651129,-0.062442731112242,-0.047747183591127,0.159089833498001,0.052568204700947,0.105332873761654,0.052368558943272));
res += mul(Get(s0,0,-dy), float4x4(-0.124105855822563,0.156346976757050,0.112235903739929,0.006266373675317,0.013856490142643,-0.036888133734465,0.003558139782399,0.014793679118156,-0.074248194694519,0.001816547941417,0.036587167531252,-0.236758947372437,0.047968272119761,0.041506242007017,0.197316735982895,0.039240650832653));
res += mul(Get(s0,0,0), float4x4(-0.269672602415085,0.011557843536139,0.073369242250919,-0.271946072578430,0.235870584845543,0.031457249075174,0.050018515437841,-0.093433022499084,-0.190938115119934,0.093522839248180,0.094129845499992,-0.133125081658363,-0.017773211002350,0.066162377595901,-0.066756986081600,0.105433672666550));
res += mul(Get(s0,0,dy), float4x4(0.028000848367810,0.104157887399197,-0.056736443191767,-0.105526588857174,-0.111071534454823,0.028591398149729,-0.109155468642712,-0.086651936173439,0.072520934045315,-0.103400692343712,-0.194636672735214,-0.040214646607637,-0.057635232806206,0.080765113234520,-0.069110468029976,0.103444546461105));
res += mul(Get(s0,dx,-dy), float4x4(0.052688576281071,0.029761694371700,-0.124734677374363,0.071240767836571,0.026517895981669,0.047610223293304,-0.099135562777519,-0.112427853047848,0.076873399317265,-0.144494876265526,-0.078135728836060,0.036273479461670,0.000932798546273,0.074402764439583,0.030449161306024,-0.041726063936949));
res += mul(Get(s0,dx,0), float4x4(0.210568770766258,0.096710048615932,-0.008004878647625,0.035798728466034,0.074581861495972,-0.072929665446281,0.009854576550424,0.054380543529987,-0.156912162899971,-0.031013987958431,-0.033357907086611,-0.095110557973385,0.065547399222851,-0.217217117547989,0.082685157656670,-0.154900297522545));
res += mul(Get(s0,dx,dy), float4x4(-0.121496073901653,0.199390709400177,-0.048681147396564,-0.133036464452744,-0.191548585891724,-0.082409031689167,-0.014419798739254,0.103793501853943,-0.116325803101063,0.085144720971584,-0.232048034667969,-0.134307980537415,-0.041453424841166,0.018473993986845,0.066342592239380,-0.137363836169243));
res += mul(Get(s1,-dx,-dy), float4x4(0.104984275996685,0.133472397923470,0.310718685388565,0.126658022403717,-0.062879316508770,-0.142832830548286,0.011801717802882,-0.031158931553364,0.054781503975391,0.052581861615181,-0.084027029573917,-0.052677188068628,-0.202203541994095,0.027438169345260,0.155996382236481,0.053495027124882));
res += mul(Get(s1,-dx,0), float4x4(0.095135390758514,-0.127006590366364,0.144319415092468,0.131243437528610,0.039202410727739,0.115222319960594,-0.153066441416740,-0.084311477839947,-0.088551379740238,0.104612708091736,0.041767399758101,-0.034016884863377,0.060367695987225,0.081004448235035,-0.014942576177418,-0.010411577299237));
res += mul(Get(s1,-dx,dy), float4x4(0.109119094908237,-0.062518499791622,-0.021446961909533,-0.048511639237404,-0.053711578249931,0.041519001126289,-0.141191065311432,-0.218504250049591,-0.131666421890259,-0.034553240984678,0.051557119935751,0.089326918125153,-0.006600069347769,-0.139897853136063,-0.054924074560404,-0.175474971532822));
res += mul(Get(s1,0,-dy), float4x4(0.175489291548729,0.227283358573914,0.244036108255386,-0.017486462369561,-0.164830684661865,0.179238945245743,-0.171839728951454,-0.115592069923878,-0.195818558335304,0.014570901170373,0.117665268480778,0.011647222563624,0.190350681543350,0.135014370083809,-0.085298933088779,-0.189056217670441));
res += mul(Get(s1,0,0), float4x4(-0.212723925709724,-0.136769041419029,-0.107577323913574,0.076625384390354,-0.021853592246771,0.101116418838501,0.087416842579842,0.329192876815796,0.060204237699509,0.214279279112816,-0.029748739674687,0.120333321392536,0.098387792706490,0.132952019572258,0.134534373879433,-0.071280933916569));
res += mul(Get(s1,0,dy), float4x4(0.083312936127186,0.009452048689127,-0.063146427273750,0.122569158673286,-0.236012399196625,0.051607556641102,-0.082364551723003,-0.071258790791035,-0.004488504957408,-0.018921980634332,-0.021664872765541,0.010034371167421,-0.156556501984596,0.114803105592728,-0.032392483204603,-0.005772328935564));
res += mul(Get(s1,dx,-dy), float4x4(-0.078849799931049,-0.011887919157743,0.010293253697455,-0.008069757372141,0.151788786053658,0.062056601047516,-0.177334845066071,0.179331928491592,0.081977836787701,0.006295383442193,0.007834323681891,0.045267984271049,0.292039066553116,0.046306293457747,-0.033270772546530,-0.167498603463173));
res += mul(Get(s1,dx,0), float4x4(-0.188435733318329,0.052055593580008,-0.075060121715069,-0.072449490427971,-0.052419684827328,-0.124581061303616,0.059175789356232,-0.036691959947348,-0.075135447084904,0.035624954849482,0.074696332216263,-0.050998147577047,0.109405070543289,-0.039669070392847,-0.151572123169899,0.046668097376823));
res += mul(Get(s1,dx,dy), float4x4(0.008377654477954,-0.037562474608421,-0.038241032510996,0.163532555103302,0.060070548206568,-0.014441757462919,-0.010403215885162,0.102559268474579,-0.306984066963196,-0.067395657300949,0.103435233235359,0.141250416636467,-0.172118663787842,-0.207759186625481,-0.136801838874817,0.141200393438339));
res += mul(Get(s2,-dx,-dy), float4x4(0.083862759172916,-0.067249469459057,0.218342125415802,-0.067071072757244,0.270490616559982,0.306336581707001,0.002365980762988,0.165733054280281,0.035877559334040,0.008894706144929,0.001779649755917,-0.110705502331257,-0.015211423859000,-0.066045694053173,-0.158230856060982,-0.167990431189537));
res += mul(Get(s2,-dx,0), float4x4(0.043177936226130,0.025266261771321,0.114647604525089,0.009108378551900,0.054840076714754,-0.105563797056675,0.190581709146500,-0.272205054759979,0.167791008949280,-0.076226659119129,-0.071298524737358,0.142899930477142,-0.128387272357941,0.083773128688335,-0.048364546149969,-0.183382898569107));
res += mul(Get(s2,-dx,dy), float4x4(-0.029104746878147,0.164108321070671,0.084868550300598,-0.089380234479904,0.127402856945992,-0.045918956398964,0.059970367699862,0.001482721650973,0.064164333045483,0.050982836633921,-0.059757981449366,-0.201432660222054,-0.118811242282391,-0.008892468176782,-0.050162527710199,0.057648520916700));
res += mul(Get(s2,0,-dy), float4x4(-0.138513237237930,-0.116708442568779,-0.010476379655302,-0.013558899983764,-0.000710790045559,-0.041792467236519,0.213841050863266,0.033581275492907,-0.061191461980343,-0.098869860172272,-0.069784648716450,-0.059467602521181,-0.103404007852077,0.104663282632828,-0.120193697512150,-0.225543439388275));
res += mul(Get(s2,0,0), float4x4(-0.081902496516705,0.200407728552818,-0.066903360188007,-0.070760548114777,-0.151803880929947,-0.058158062398434,-0.002734291367233,-0.036249730736017,0.013362715952098,-0.037807796150446,0.079425983130932,0.138975381851196,0.115732111036777,-0.141022235155106,-0.050698488950729,0.080588281154633));
res += mul(Get(s2,0,dy), float4x4(0.051103755831718,-0.134149089455605,0.134612366557121,0.117614865303040,-0.101540707051754,0.001253277412616,0.089052736759186,0.134002119302750,0.081652998924255,0.008121644146740,-0.107799135148525,0.041591882705688,-0.031174030154943,-0.006391845177859,-0.069520428776741,-0.215071320533752));
res += mul(Get(s2,dx,-dy), float4x4(-0.064550429582596,0.084531255066395,0.085721105337143,0.097386807203293,0.096369616687298,0.006985814776272,-0.055005915462971,-0.162223383784294,-0.054872769862413,-0.142468944191933,0.077788695693016,-0.031516142189503,0.182557046413422,-0.058447577059269,-0.178068399429321,0.031250145286322));
res += mul(Get(s2,dx,0), float4x4(-0.100683972239494,0.033381745219231,-0.216492682695389,0.047068960964680,-0.012073090299964,0.146157294511795,-0.189582899212837,-0.086193129420280,0.137041568756104,-0.210615664720535,-0.004771046340466,0.012009257450700,-0.004907927475870,-0.036583408713341,-0.200132489204407,0.035143129527569));
res += mul(Get(s2,dx,dy), float4x4(-0.019643805921078,-0.238036617636681,-0.114736787974834,-0.060177177190781,-0.031348403543234,0.121056698262691,0.016247762367129,0.047922726720572,0.127410247921944,-0.027576483786106,0.004721736535430,-0.114730440080166,0.039612419903278,-0.132348254323006,-0.380230218172073,-0.021197834983468));
res += mul(Get(s3,-dx,-dy), float4x4(-0.035092376172543,0.006924778223038,0.041730992496014,-0.026694888249040,0.265788793563843,-0.023007169365883,0.046521473675966,0.028805214911699,0.167911201715469,-0.179048642516136,0.062868408858776,-0.199768438935280,-0.043818857520819,0.102211773395538,0.159000217914581,-0.029608299955726));
res += mul(Get(s3,-dx,0), float4x4(0.177231818437576,-0.028230275958776,-0.132428810000420,0.140927061438560,0.115452334284782,0.092434629797935,-0.013049958273768,0.041489675641060,-0.059569370001554,0.059219788759947,0.016713120043278,-0.137002706527710,0.015049169771373,-0.100873641669750,-0.202510148286819,0.037186913192272));
res += mul(Get(s3,-dx,dy), float4x4(0.145470008254051,-0.098791278898716,0.001583466073498,0.094920337200165,-0.100479736924171,-0.123881027102470,-0.096714600920677,0.014259294606745,-0.088731296360493,0.291876882314682,0.092087574303150,0.003228895831853,0.124929323792458,-0.005187516100705,0.028157420456409,-0.019612932577729));
res += mul(Get(s3,0,-dy), float4x4(-0.037169754505157,-0.031601227819920,-0.055719710886478,-0.125137254595757,0.162404611706734,0.168669193983078,-0.084509089589119,0.000606025627349,0.196353316307068,0.025789096951485,0.011980898678303,-0.038662660866976,-0.017324116080999,-0.027729740366340,0.175178766250610,-0.059090185910463));
res += mul(Get(s3,0,0), float4x4(-0.061262257397175,-0.087692826986313,0.069761835038662,-0.061949893832207,-0.017150828614831,-0.202503681182861,0.244939342141151,-0.167702645063400,0.151439979672432,0.079000249505043,0.070460416376591,0.047146517783403,0.077064298093319,-0.082784943282604,-0.003909430000931,0.186820134520531));
res += mul(Get(s3,0,dy), float4x4(-0.033005625009537,-0.088512457907200,0.016087282449007,0.038544151932001,-0.055117595940828,0.164470955729485,-0.107993356883526,0.181000441312790,0.050735183060169,0.090488359332085,0.177724882960320,0.112689234316349,-0.000539315340575,-0.008432378061116,0.016275584697723,0.003360246308148));
res += mul(Get(s3,dx,-dy), float4x4(-0.089213915169239,-0.106112390756607,0.163150012493134,-0.026959305629134,0.019128831103444,0.043556470423937,0.119522064924240,-0.005276020150632,0.033970993012190,0.015806932002306,0.098869353532791,-0.096084639430046,0.008589140139520,-0.164589226245880,0.110964804887772,0.007432825863361));
res += mul(Get(s3,dx,0), float4x4(0.063576981425285,-0.152121156454086,0.009958062320948,0.121106676757336,-0.071244053542614,-0.209323018789291,0.011759735643864,-0.122426830232143,0.090809859335423,0.106854893267155,-0.047540448606014,0.116691499948502,-0.208845406770706,-0.182068616151810,0.249647960066795,-0.043652892112732));
res += mul(Get(s3,dx,dy), float4x4(0.119561739265919,-0.093644097447395,0.038709372282028,-0.144217208027840,0.014563607983291,0.134590834379196,0.084149092435837,-0.083549693226814,-0.117305144667625,-0.046129576861858,-0.101601697504520,0.046735662966967,0.154906094074249,-0.178760468959808,0.101347714662552,-0.163168534636497));
return max(float4(0,0,0,0), res);
}
