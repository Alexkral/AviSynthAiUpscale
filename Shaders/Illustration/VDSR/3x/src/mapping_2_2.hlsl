sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.004795348737389,-0.016406906768680,0.145205080509186,-0.108861066401005,0.101776823401451,0.044016934931278,-0.105520069599152,0.019464882090688,0.136265799403191,-0.173735678195953,-0.125717163085938,-0.026474323123693,0.100555062294006,-0.089216329157352,0.097379051148891,-0.079910054802895));
res += mul(Get(s0,-dx,0), float4x4(0.090002916753292,0.071420304477215,-0.038093592971563,0.088435977697372,0.201493248343468,-0.007802790496498,0.172282561659813,-0.028337061405182,0.010037532076240,-0.024140348657966,-0.044433839619160,0.033174771815538,-0.082755573093891,-0.047963477671146,-0.074866391718388,-0.184533774852753));
res += mul(Get(s0,-dx,dy), float4x4(0.074156485497952,-0.115095824003220,-0.100629493594170,0.028777142986655,-0.033865924924612,0.186773389577866,0.049826640635729,-0.081968411803246,-0.009053927846253,0.127230450510979,-0.072341680526733,0.107425943017006,0.080735623836517,0.055839020758867,0.099958673119545,0.022399701178074));
res += mul(Get(s0,0,-dy), float4x4(0.268163442611694,-0.068324342370033,-0.039154861122370,-0.019854117184877,-0.027594944462180,0.034524105489254,0.031435757875443,-0.095882058143616,0.162334814667702,0.089143782854080,0.116632014513016,0.117538578808308,0.174657970666885,0.220153093338013,-0.133264854550362,-0.010892327874899));
res += mul(Get(s0,0,0), float4x4(0.023467661812901,-0.149463370442390,0.146361649036407,-0.008734050206840,-0.042140770703554,-0.055964261293411,0.025718608871102,0.017581881955266,-0.197463244199753,0.018585573881865,0.179827392101288,-0.253600865602493,-0.079135522246361,0.069711856544018,0.070544086396694,-0.043718364089727));
res += mul(Get(s0,0,dy), float4x4(0.093637071549892,0.008200372569263,0.015272674150765,-0.132571145892143,-0.064300879836082,0.008949941955507,-0.063389062881470,0.162207797169685,0.026276499032974,0.200657486915588,0.122878223657608,-0.009832277894020,-0.089598052203655,-0.145926430821419,-0.093530721962452,0.101214691996574));
res += mul(Get(s0,dx,-dy), float4x4(-0.091653183102608,0.023859849199653,-0.027152769267559,-0.114072002470493,-0.202770069241524,-0.075144879519939,-0.003804377745837,0.130382075905800,-0.117040805518627,-0.055339269340038,0.149559780955315,-0.104202494025230,0.013210585340858,-0.028042975813150,-0.113858953118324,0.066577747464180));
res += mul(Get(s0,dx,0), float4x4(0.053031172603369,0.093159921467304,0.139666900038719,-0.086987674236298,0.051190219819546,0.160093978047371,-0.011004072614014,0.055246356874704,-0.067419163882732,0.026397302746773,0.088152319192886,-0.068685963749886,0.085226096212864,-0.072532691061497,-0.054783575236797,0.046224772930145));
res += mul(Get(s0,dx,dy), float4x4(0.018250592052937,-0.124357767403126,0.025655226781964,0.017900198698044,-0.079791001975536,-0.037713509052992,-0.011017953045666,-0.019996553659439,0.020136237144470,-0.095758549869061,0.062717728316784,0.191134259104729,0.018688052892685,-0.046865921467543,-0.148599982261658,-0.029693160206079));
res += mul(Get(s1,-dx,-dy), float4x4(-0.123707354068756,0.155619144439697,0.006602037698030,0.012878115288913,-0.017759948968887,0.079425439238548,-0.052410528063774,-0.035770393908024,0.170710846781731,0.215818822383881,0.172560736536980,0.207828655838966,0.080881647765636,0.014616922475398,-0.129164710640907,0.112679012119770));
res += mul(Get(s1,-dx,0), float4x4(-0.027915729209781,0.061701118946075,0.114081360399723,-0.072364754974842,-0.023942476138473,-0.179643929004669,-0.245287716388702,-0.124169647693634,-0.070297390222549,-0.005882967729121,-0.213621780276299,-0.025123670697212,-0.140368327498436,-0.248191803693771,0.011283412575722,-0.070331193506718));
res += mul(Get(s1,-dx,dy), float4x4(0.033308409154415,0.104631885886192,-0.066084101796150,-0.001967280637473,-0.080825865268707,-0.036655936390162,0.010875682346523,0.099709190428257,-0.034695800393820,0.047616034746170,-0.127082169055939,0.001973900245503,0.055163066834211,-0.215053990483284,0.036699879914522,-0.108340412378311));
res += mul(Get(s1,0,-dy), float4x4(-0.031882472336292,0.067666925489902,0.062331046909094,0.052546698600054,0.140195548534393,0.009889353066683,-0.181480407714844,-0.134819120168686,-0.105969101190567,-0.000427164341090,0.129944577813148,0.022902049124241,-0.006135717500001,0.105042465031147,0.017527379095554,-0.151798069477081));
res += mul(Get(s1,0,0), float4x4(-0.127349898219109,-0.061887942254543,0.012482167221606,0.014853014610708,0.016819525510073,0.035365410149097,-0.023838147521019,-0.049821238964796,0.185458555817604,0.047371473163366,-0.029552683234215,0.090064108371735,0.144157499074936,-0.034203436225653,0.034232780337334,0.195219457149506));
res += mul(Get(s1,0,dy), float4x4(0.059685606509447,0.110579386353493,0.118943206965923,-0.112938858568668,-0.176563382148743,0.091954618692398,0.104462228715420,0.100869707763195,0.023119164630771,0.131145566701889,-0.021465621888638,-0.016195377334952,0.071178689599037,-0.201395213603973,0.228046953678131,-0.131898388266563));
res += mul(Get(s1,dx,-dy), float4x4(0.081408441066742,-0.209467411041260,-0.030228054150939,-0.057993113994598,-0.057043373584747,0.074421919882298,0.099652878940105,0.013622365891933,0.122007012367249,-0.099571600556374,0.097918957471848,0.042977027595043,0.005347782745957,-0.248697832226753,-0.113318473100662,0.047931946814060));
res += mul(Get(s1,dx,0), float4x4(0.011275213211775,0.055646378546953,0.012444796971977,-0.111470542848110,0.155862018465996,0.111361809074879,-0.003181045874953,-0.098017849028111,-0.088085748255253,0.047566093504429,0.236193999648094,0.034590341150761,-0.095077261328697,-0.011882681399584,0.044098220765591,-0.010946065187454));
res += mul(Get(s1,dx,dy), float4x4(-0.026773029938340,0.030357375741005,0.235912054777145,0.076765984296799,-0.017154833301902,0.054216142743826,0.179591163992882,-0.088526569306850,0.042706165462732,-0.057969175279140,-0.174132287502289,0.266286849975586,-0.061297386884689,0.065300278365612,0.094633899629116,-0.227758854627609));
res += mul(Get(s2,-dx,-dy), float4x4(0.005590377841145,0.044636581093073,0.046466197818518,0.227602943778038,0.077616125345230,-0.035655301064253,0.066808402538300,0.035581387579441,0.131272673606873,-0.036722023040056,-0.232580378651619,-0.053708761930466,0.028143068775535,-0.038106087595224,-0.116260215640068,0.059108212590218));
res += mul(Get(s2,-dx,0), float4x4(-0.100175447762012,0.136478349566460,-0.069848820567131,0.061115846037865,0.063586585223675,-0.138293921947479,-0.101330034434795,0.031177928671241,-0.229269921779633,0.090338125824928,-0.000744982564356,-0.022744005545974,0.026007348671556,0.239180654287338,-0.082689657807350,0.060159340500832));
res += mul(Get(s2,-dx,dy), float4x4(0.119601644575596,0.041260827332735,0.008664926514030,0.205318152904510,0.133503437042236,0.007473859470338,-0.204519763588905,-0.069090582430363,-0.032156329602003,0.076915234327316,-0.008660663850605,0.108337767422199,0.114106953144073,0.083773732185364,-0.076423615217209,0.220258831977844));
res += mul(Get(s2,0,-dy), float4x4(0.089466907083988,-0.008500864729285,-0.030583765357733,0.042726796120405,0.152745053172112,0.002406641142443,0.066494569182396,0.056276239454746,-0.078164882957935,-0.034242957830429,0.035924512892962,0.097269475460052,0.089509345591068,0.027789019048214,-0.012414459139109,-0.121420867741108));
res += mul(Get(s2,0,0), float4x4(0.113209359347820,0.129570946097374,-0.066259734332561,0.025318713858724,0.014064471237361,0.002145114587620,-0.103638149797916,-0.131959810853004,-0.180901378393173,-0.173964694142342,0.027095938101411,0.179969847202301,-0.016600737348199,-0.119356811046600,-0.052013859152794,-0.028856331482530));
res += mul(Get(s2,0,dy), float4x4(0.136593461036682,0.234748587012291,0.146541848778725,-0.108064591884613,0.130404770374298,-0.146449193358421,-0.104319743812084,-0.062147740274668,-0.007546364329755,0.117648877203465,0.220216348767281,0.080133177340031,-0.062547653913498,-0.050693899393082,-0.082260042428970,0.258154422044754));
res += mul(Get(s2,dx,-dy), float4x4(-0.006749815307558,-0.007394801825285,-0.036529108881950,0.000487154145958,-0.003326269565150,-0.124032415449619,0.022962352260947,-0.002158754505217,0.006588652729988,0.077514261007309,0.058638691902161,0.094937130808830,0.198342591524124,-0.165327638387680,-0.141086250543594,0.099667578935623));
res += mul(Get(s2,dx,0), float4x4(-0.053867749869823,-0.026180045679212,-0.072657622396946,0.021976508200169,0.091780692338943,-0.107856623828411,0.081021957099438,-0.110225923359394,0.107226811349392,-0.027304360643029,-0.018340263515711,0.138479247689247,-0.049573354423046,0.068667136132717,0.005127539392561,-0.033686324954033));
res += mul(Get(s2,dx,dy), float4x4(0.058007437735796,0.111110448837280,-0.091459959745407,-0.166193559765816,-0.144683286547661,0.068932078778744,0.097033977508545,-0.031710565090179,-0.018176086246967,0.089329600334167,0.049776412546635,-0.044424336403608,0.031571660190821,0.105372868478298,0.132497876882553,0.052075665444136));
res += mul(Get(s3,-dx,-dy), float4x4(-0.159196630120277,-0.139351651072502,0.115512102842331,0.027673162519932,0.165455996990204,-0.121757589280605,0.012297778390348,-0.101054869592190,0.073551587760448,-0.028807651251554,0.051387846469879,-0.016479704529047,-0.036437489092350,0.178268224000931,-0.193499252200127,0.003157588187605));
res += mul(Get(s3,-dx,0), float4x4(-0.126093536615372,0.317611545324326,-0.027861189097166,-0.037709388881922,0.215998068451881,0.073189541697502,0.034345198422670,-0.130476415157318,0.048724193125963,-0.232304021716118,-0.042629033327103,-0.159102901816368,-0.053934842348099,0.141642734408379,0.186586886644363,-0.092036217451096));
res += mul(Get(s3,-dx,dy), float4x4(0.035807859152555,0.157044544816017,-0.014894642867148,-0.257957220077515,-0.197846814990044,-0.225471138954163,-0.140923053026199,-0.317559301853180,0.017424864694476,-0.024299642071128,0.019171219319105,0.049254581332207,-0.016443893313408,-0.055514201521873,-0.205069169402122,-0.024807857349515));
res += mul(Get(s3,0,-dy), float4x4(0.038864016532898,-0.011423763819039,0.106773488223553,-0.040126483887434,-0.007193074561656,-0.027395173907280,-0.288312882184982,-0.019516380503774,0.066223867237568,-0.050271835178137,-0.135069295763969,0.127124950289726,0.292990922927856,0.002936590230092,-0.227391526103020,-0.017324101179838));
res += mul(Get(s3,0,0), float4x4(0.108221754431725,0.198603689670563,-0.033147428184748,0.011331724002957,-0.068107515573502,0.065469242632389,-0.138178691267967,-0.050424113869667,-0.025358140468597,-0.141720160841942,0.061681501567364,-0.046819698065519,-0.207703530788422,0.182591050863266,0.134229749441147,0.085160903632641));
res += mul(Get(s3,0,dy), float4x4(-0.140225052833557,-0.231182008981705,0.238630995154381,0.311805576086044,-0.011225141584873,0.022727856412530,-0.086480692028999,0.019924419000745,-0.046730168163776,0.109774865210056,0.085958950221539,0.035619515925646,-0.149421244859695,0.174131765961647,0.117716021835804,0.064541071653366));
res += mul(Get(s3,dx,-dy), float4x4(0.119084618985653,-0.066773965954781,-0.000091202593467,-0.148028180003166,-0.099031247198582,-0.057611990720034,-0.064022317528725,0.025038216263056,-0.001914778607897,0.029470622539520,-0.045241933315992,-0.140150710940361,-0.003969114739448,0.130710154771805,-0.030528893694282,0.167813628911972));
res += mul(Get(s3,dx,0), float4x4(0.056366875767708,-0.022714823484421,-0.016237026080489,-0.076894864439964,0.151206761598587,-0.093431025743484,0.048568770289421,0.186533257365227,-0.081213906407356,-0.047823093831539,0.101002067327499,0.115790948271751,-0.078438363969326,-0.011038637720048,0.100094147026539,0.141614496707916));
res += mul(Get(s3,dx,dy), float4x4(-0.039570931345224,0.080462843179703,0.086420051753521,0.020921070128679,0.197705075144768,0.084186628460884,0.073191933333874,0.136957123875618,-0.054767142981291,0.005724460817873,0.201154574751854,0.010595926083624,-0.112500183284283,-0.071345135569572,0.189959615468979,0.023371461778879));
return max(float4(0,0,0,0), res);
}
