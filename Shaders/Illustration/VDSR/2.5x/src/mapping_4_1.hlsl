sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.289576977491379,-0.191742449998856,-0.235337644815445,-0.125496700406075,-0.138315916061401,-0.029594954103231,0.106415048241615,0.132594987750053,-0.034768547862768,-0.220447182655334,-0.077312484383583,-0.083733409643173,-0.061571579426527,-0.001690391683951,0.158191114664078,-0.072465151548386));
res += mul(Get(s0,-dx,0), float4x4(-0.322953134775162,-0.052033461630344,-0.173202946782112,0.015134864486754,-0.108182050287724,0.123559057712555,0.146322920918465,0.237851426005363,-0.028924632817507,-0.159569948911667,-0.175798103213310,-0.098237380385399,-0.089122094213963,-0.021269358694553,0.008595763705671,-0.029541777446866));
res += mul(Get(s0,-dx,dy), float4x4(-0.172071814537048,-0.238460615277290,0.085197485983372,-0.091767333447933,0.015342028811574,-0.045365598052740,0.150543078780174,0.079505346715450,-0.140529349446297,-0.048342913389206,-0.208260983228683,-0.177298709750175,-0.147718682885170,0.102156870067120,0.072904884815216,-0.112352803349495));
res += mul(Get(s0,0,-dy), float4x4(0.027029324322939,-0.209742575883865,-0.031180664896965,0.147499740123749,-0.037105478346348,0.089571751654148,-0.008222905918956,-0.057737533003092,0.041424214839935,0.040941227227449,0.079934835433960,0.116210155189037,-0.011545297689736,-0.076425611972809,-0.065698012709618,-0.140903085470200));
res += mul(Get(s0,0,0), float4x4(0.002575707389042,0.106290988624096,0.134636610746384,0.043629232794046,0.075501143932343,0.069250531494617,0.120884470641613,0.119352929294109,-0.075027510523796,-0.033000510185957,-0.166074216365814,0.201645925641060,0.157861918210983,-0.035867635160685,-0.112547852098942,0.052371580153704));
res += mul(Get(s0,0,dy), float4x4(-0.036765415221453,0.069339454174042,0.145964086055756,-0.111306510865688,0.005374766886234,0.109704680740833,0.150722444057465,-0.126695737242699,-0.106483235955238,-0.015841117128730,-0.167744040489197,-0.082256138324738,-0.044605806469917,0.106138095259666,-0.040252942591906,0.047788169234991));
res += mul(Get(s0,dx,-dy), float4x4(0.103105150163174,-0.030594291165471,0.110255494713783,0.298386961221695,0.167194828391075,-0.062706060707569,0.076771520078182,0.028126820921898,0.023873260244727,0.270703107118607,-0.098170526325703,-0.016852075234056,0.036930944770575,0.108417004346848,-0.116799943149090,-0.348840743303299));
res += mul(Get(s0,dx,0), float4x4(0.133531913161278,0.102472156286240,-0.059512037783861,0.005566857755184,0.150931701064110,-0.016008948907256,-0.016813579946756,0.047397509217262,-0.107045382261276,0.238125100731850,-0.105630561709404,0.026224864646792,0.149555698037148,0.185986757278442,-0.033252809196711,-0.112319506704807));
res += mul(Get(s0,dx,dy), float4x4(0.299214512109756,0.219322189688683,0.121705874800682,-0.187778323888779,0.013878718018532,0.176469832658768,-0.167224824428558,-0.161562576889992,-0.094975277781487,0.122518867254257,0.012469431385398,0.426328808069229,-0.106254413723946,-0.026435088366270,-0.011744714342058,0.008675627410412));
res += mul(Get(s1,-dx,-dy), float4x4(-0.067561678588390,0.092892967164516,0.032301560044289,-0.076213121414185,-0.059721477329731,0.222014218568802,0.009048840031028,-0.187900424003601,-0.360688477754593,-0.047245543450117,-0.171569362282753,0.104586869478226,-0.219060704112053,0.202863901853561,0.182633444666862,-0.076838918030262));
res += mul(Get(s1,-dx,0), float4x4(-0.064347624778748,-0.052034758031368,-0.076740697026253,-0.039478454738855,0.049214921891689,0.038110002875328,0.059776794165373,-0.091830424964428,-0.267888724803925,0.007017819210887,0.231776028871536,0.157819226384163,-0.107367403805256,0.050720386207104,-0.066450849175453,0.026088811457157));
res += mul(Get(s1,-dx,dy), float4x4(-0.096498496830463,-0.049422875046730,0.001806307584047,0.121665984392166,0.073223166167736,0.126593485474586,0.068302698433399,-0.088155947625637,-0.125084280967712,-0.028827738016844,0.229229390621185,-0.061994228512049,0.256563931703568,0.216027602553368,-0.079226791858673,-0.176141023635864));
res += mul(Get(s1,0,-dy), float4x4(-0.056696448475122,0.007596906274557,-0.138159617781639,0.038165520876646,-0.133396670222282,-0.005235871300101,-0.040672555565834,0.053604017943144,-0.005163160618395,-0.072043567895889,-0.081541709601879,-0.027466028928757,-0.197418540716171,0.437592595815659,0.242650106549263,-0.019243577495217));
res += mul(Get(s1,0,0), float4x4(0.005433872807771,-0.021846679970622,-0.028924452140927,-0.046558592468500,-0.115806639194489,0.000427099847002,0.064934976398945,0.073037087917328,-0.101040914654732,-0.282435446977615,-0.159619972109795,0.143922358751297,-0.251640051603317,-0.049250401556492,-0.103299506008625,0.136005714535713));
res += mul(Get(s1,0,dy), float4x4(-0.065211877226830,-0.045829076319933,0.074413128197193,-0.064629055559635,0.301907718181610,-0.131068184971809,0.090255305171013,-0.112282648682594,0.000488927005790,-0.190069526433945,-0.043140031397343,-0.055814363062382,-0.019105235114694,0.104206688702106,-0.025105092674494,0.031208695843816));
res += mul(Get(s1,dx,-dy), float4x4(-0.025170918554068,-0.120472073554993,-0.162083148956299,-0.006237536668777,-0.070275053381920,0.125982269644737,0.045885019004345,0.328243523836136,0.263535618782043,-0.180592939257622,0.021840415894985,-0.072947971522808,0.151083067059517,0.201588064432144,-0.001933052088134,-0.107861988246441));
res += mul(Get(s1,dx,0), float4x4(0.003716725390404,-0.064211040735245,-0.176902115345001,-0.055133916437626,-0.105635724961758,-0.014598436653614,0.015600631013513,0.238174796104431,0.225590184330940,-0.131817936897278,-0.092517539858818,-0.059535894542933,-0.104264520108700,-0.064386002719402,-0.022801069542766,-0.012064802460372));
res += mul(Get(s1,dx,dy), float4x4(-0.053417429327965,0.082660809159279,-0.063213430345058,-0.018253421410918,0.157810911536217,-0.105879649519920,-0.087041348218918,-0.049367524683475,-0.007001947145909,0.188642099499702,0.026530975475907,-0.043736137449741,0.141601175069809,0.246043711900711,-0.060306787490845,-0.141500413417816));
res += mul(Get(s2,-dx,-dy), float4x4(-0.118035897612572,-0.186270415782928,-0.213938578963280,0.247040808200836,0.196778133511543,-0.020548785105348,-0.082361415028572,-0.068658664822578,-0.024817047640681,-0.180882439017296,-0.263030618429184,0.026794258505106,-0.227517068386078,-0.134679123759270,0.064457342028618,0.017815267667174));
res += mul(Get(s2,-dx,0), float4x4(-0.087485410273075,-0.180047303438187,-0.119226172566414,-0.159270897507668,0.217695578932762,-0.202192142605782,-0.125331431627274,-0.000537000887562,0.053456805646420,-0.192849233746529,0.098675847053528,-0.121488228440285,-0.175408095121384,-0.105525612831116,0.077908515930176,0.023533063009381));
res += mul(Get(s2,-dx,dy), float4x4(-0.025670923292637,-0.043106719851494,-0.158480048179626,-0.096722304821014,0.123191215097904,0.179531842470169,0.116652727127075,0.070630073547363,0.082106493413448,-0.131458431482315,0.091711997985840,-0.079168416559696,-0.167524784803391,-0.032285425812006,0.002366901841015,0.036579445004463));
res += mul(Get(s2,0,-dy), float4x4(-0.096331901848316,-0.188113689422607,-0.217403605580330,0.129880622029305,0.000969461165369,-0.172286972403526,-0.058222014456987,-0.130558446049690,-0.045276321470737,-0.179165691137314,0.153475388884544,0.055006437003613,-0.071216501295567,-0.051180742681026,0.163951575756073,0.005077998153865));
res += mul(Get(s2,0,0), float4x4(-0.079002842307091,-0.137623891234398,-0.200491681694984,-0.033034838736057,-0.012618858367205,-0.086450777947903,0.023377005010843,0.033986452966928,0.000212409882806,-0.133670359849930,0.298110961914063,0.242000833153725,-0.132780164480209,-0.098313443362713,0.166545048356056,0.062780752778053));
res += mul(Get(s2,0,dy), float4x4(-0.085090652108192,0.126140058040619,-0.199451640248299,0.091372951865196,0.031788803637028,0.148753821849823,0.047068025916815,-0.054872028529644,0.021580686792731,0.014813513495028,0.125490769743919,-0.006944734137505,-0.190246328711510,0.047994475811720,0.031784351915121,0.071449205279350));
res += mul(Get(s2,dx,-dy), float4x4(-0.163385376334190,-0.073145240545273,-0.108134441077709,0.025504838675261,0.103642337024212,-0.148772388696671,0.007849669083953,0.060096982866526,0.073628321290016,-0.077208220958710,0.028826067224145,0.020846258848906,0.047684613615274,0.103043124079704,0.000162444121088,-0.119596548378468));
res += mul(Get(s2,dx,0), float4x4(-0.069715194404125,-0.218731880187988,-0.070572108030319,0.121781453490257,-0.036733586341143,-0.021092226728797,-0.087957672774792,0.119370132684708,0.051775947213173,0.163726076483727,0.086526215076447,0.350780099630356,-0.020244430750608,0.218299657106400,-0.065932691097260,-0.168945461511612));
res += mul(Get(s2,dx,dy), float4x4(-0.064008310437202,0.130299523472786,-0.140004321932793,0.057358019053936,0.118627540767193,-0.072999842464924,-0.072854876518250,-0.085506170988083,-0.034771867096424,0.254823505878448,0.163931488990784,0.289325624704361,-0.114669948816299,0.324626654386520,-0.119336202740669,-0.062536381185055));
res += mul(Get(s3,-dx,-dy), float4x4(0.091410435736179,0.044148188084364,0.189477354288101,-0.128949835896492,0.022905698046088,-0.066774867475033,0.066007152199745,-0.022276408970356,0.069722697138786,-0.107132330536842,-0.024975389242172,0.017361365258694,-0.126763984560966,0.116802133619785,-0.067502290010452,0.150010243058205));
res += mul(Get(s3,-dx,0), float4x4(-0.199077650904655,-0.039222173392773,0.190641090273857,-0.052430432289839,-0.034112945199013,0.012584270909429,0.243455007672310,-0.064407877624035,0.095334090292454,-0.155076101422310,0.084526859223843,-0.073301948606968,-0.187380790710449,-0.082765214145184,-0.117510944604874,0.114577494561672));
res += mul(Get(s3,-dx,dy), float4x4(-0.251570314168930,0.012172495946288,-0.026637800037861,0.045510139316320,-0.120486594736576,-0.041870161890984,0.286910086870193,-0.107960999011993,0.137466624379158,-0.220616668462753,0.151472970843315,0.030929621309042,-0.068598367273808,-0.063993766903877,-0.184720575809479,0.065013140439987));
res += mul(Get(s3,0,-dy), float4x4(0.192408442497253,-0.032810121774673,-0.148810103535652,-0.144673734903336,0.224219486117363,0.027209158986807,0.127326667308807,-0.035158850252628,0.001395989675075,-0.197170719504356,-0.084453180432320,0.297040313482285,0.058706037700176,0.060216870158911,0.097046718001366,-0.043749921023846));
res += mul(Get(s3,0,0), float4x4(-0.094844415783882,-0.076340451836586,0.210378661751747,-0.136674568057060,0.293377190828323,0.182425826787949,0.037021577358246,-0.083618372678757,0.053877830505371,-0.210432723164558,-0.269028186798096,0.062617808580399,0.026254598051310,-0.061549499630928,-0.064419507980347,-0.140969306230545));
res += mul(Get(s3,0,dy), float4x4(-0.276968717575073,0.059103123843670,0.056716583669186,-0.060075592249632,-0.005311004351825,0.043668266385794,0.135211020708084,-0.144993647933006,-0.202871069312096,-0.111757859587669,-0.077373087406158,-0.150209903717041,-0.050784792751074,-0.155226573348045,0.128228515386581,-0.006010038778186));
res += mul(Get(s3,dx,-dy), float4x4(0.004186822101474,0.171330481767654,0.017584744840860,-0.040908344089985,-0.067226782441139,0.004033717792481,0.178048402070999,0.008092963136733,-0.131619542837143,0.163585722446442,-0.096889719367027,-0.032294247299433,0.134994849562645,-0.111110001802444,-0.029223306104541,-0.175212293863297));
res += mul(Get(s3,dx,0), float4x4(0.006785868201405,-0.150301247835159,-0.021841164678335,-0.103795960545540,0.120048359036446,0.039449371397495,-0.028117785230279,-0.082809552550316,-0.059329450130463,-0.038844130933285,-0.043113589286804,-0.200570538640022,0.124758914113045,0.013267437927425,-0.057116374373436,-0.204482793807983));
res += mul(Get(s3,dx,dy), float4x4(-0.058022685348988,-0.057590309530497,-0.066084899008274,-0.052545633167028,0.333660185337067,-0.188884675502777,0.086207225918770,-0.217381402850151,-0.101672358810902,0.296237230300903,0.097824268043041,0.052755363285542,-0.175151273608208,0.169758379459381,0.099708817899227,0.028732156381011));
return max(float4(0,0,0,0), res);
}
