sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.083631969988346,-0.077737577259541,-0.155501499772072,0.105072349309921) * Get(-dx,-dy);
res += float4(-0.026060463860631,-0.155910223722458,0.075176127254963,-0.157359704375267) * Get(-dx,0);
res += float4(-0.053545121103525,0.006583011243492,0.061673909425735,-0.138681307435036) * Get(-dx,dy);
res += float4(-0.220786824822426,-0.029263643547893,0.151074185967445,-0.071680076420307) * Get(0,-dy);
res += float4(-0.110639080405235,-0.111556515097618,0.127914041280746,0.059340577572584) * Get(0,0);
res += float4(0.041256036609411,0.194608330726624,-0.227190881967545,-0.027481663972139) * Get(0,dy);
res += float4(0.123537980020046,-0.042241439223289,-0.013828437775373,-0.027609225362539) * Get(dx,-dy);
res += float4(0.015806565061212,0.070606485009193,-0.030759582296014,0.115866795182228) * Get(dx,0);
res += float4(-0.139776676893234,-0.000548236421309,0.065886348485947,0.131597056984901) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
