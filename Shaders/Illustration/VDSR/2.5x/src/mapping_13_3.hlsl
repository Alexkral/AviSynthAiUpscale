sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.060498543083668,-0.054380752146244,-0.064084053039551,0.159206196665764,0.134196445345879,0.140815496444702,0.039365537464619,-0.071614190936089,0.020923236384988,-0.073470629751682,0.028970226645470,0.021107787266374,0.086255848407745,-0.129011690616608,-0.174644008278847,0.047911670058966));
res += mul(Get(s0,-dx,0), float4x4(0.298231691122055,0.004501178395003,-0.098403215408325,-0.048989843577147,-0.060920458287001,0.064844906330109,-0.035784706473351,-0.104787111282349,0.006371571682394,0.096354290843010,0.118973329663277,0.162850588560104,-0.039187431335449,-0.002255626721308,-0.143887743353844,0.121831618249416));
res += mul(Get(s0,-dx,dy), float4x4(0.179208055138588,0.087199404835701,0.006812621373683,-0.032117266207933,0.173547297716141,-0.090945407748222,0.138635173439980,0.254378795623779,0.225899308919907,0.102785721421242,-0.115252077579498,-0.021091423928738,-0.119398005306721,-0.021413380280137,-0.045128874480724,0.289040118455887));
res += mul(Get(s0,0,-dy), float4x4(0.091413550078869,-0.099950559437275,0.026705022901297,-0.027952963486314,0.271694868803024,-0.167975395917892,0.080135121941566,-0.058924682438374,0.133777707815170,0.004483705386519,-0.225153595209122,-0.015089076012373,0.043707311153412,-0.124739550054073,0.053693793714046,-0.084260001778603));
res += mul(Get(s0,0,0), float4x4(-0.189431801438332,-0.003172319848090,0.158555924892426,0.115435220301151,0.016974855214357,0.081094831228256,0.034873500466347,-0.050677556544542,-0.144100829958916,0.117526873946190,-0.014472667127848,0.028007926419377,0.022106831893325,0.079570770263672,0.035926975309849,0.156226828694344));
res += mul(Get(s0,0,dy), float4x4(0.018262192606926,0.060544658452272,0.114898741245270,-0.053436070680618,0.042794018983841,-0.052655983716249,-0.006002930924296,0.072097964584827,0.069845117628574,0.076777212321758,-0.096067860722542,-0.137702777981758,-0.135084912180901,0.114517562091351,0.375928461551666,0.159551084041595));
res += mul(Get(s0,dx,-dy), float4x4(-0.062978871166706,0.006578746251762,-0.098711214959621,-0.016707971692085,0.235284209251404,0.159807473421097,-0.013188919983804,-0.062644369900227,-0.052643552422523,-0.085071600973606,0.105829007923603,0.072071425616741,0.096097312867641,-0.209954395890236,-0.020122386515141,0.125260412693024));
res += mul(Get(s0,dx,0), float4x4(-0.005866280756891,0.013993884436786,-0.089396461844444,0.007610287982970,-0.034184623509645,-0.172845780849457,0.014235679991543,-0.039348512887955,-0.046451989561319,0.122038997709751,-0.181509509682655,-0.172486588358879,-0.028078606352210,-0.193416029214859,0.028404381126165,0.006264325696975));
res += mul(Get(s0,dx,dy), float4x4(-0.039505638182163,-0.161014124751091,0.000084125895228,-0.083756439387798,0.007070575375110,0.069595657289028,-0.039599865674973,-0.104289218783379,0.194349467754364,0.304178267717361,0.029709018766880,-0.021201092749834,0.094760850071907,0.131347566843033,0.169738143682480,-0.025684433057904));
res += mul(Get(s1,-dx,-dy), float4x4(0.262955695390701,0.180291816592216,-0.045074366033077,-0.010365367867053,-0.009892970323563,0.006214652210474,0.178177163004875,-0.059276893734932,-0.152916252613068,0.024407623335719,0.047783099114895,-0.008625912480056,-0.088685907423496,-0.068059235811234,0.058387190103531,0.035508371889591));
res += mul(Get(s1,-dx,0), float4x4(0.067282550036907,-0.187389731407166,0.003996764309704,-0.141914099454880,-0.196226730942726,-0.071341119706631,0.154268831014633,-0.072489187121391,-0.086836494505405,-0.025691183283925,-0.032868660986423,0.008073054254055,-0.255706101655960,-0.028605584055185,0.036192212253809,-0.011275282129645));
res += mul(Get(s1,-dx,dy), float4x4(0.108610823750496,-0.162709981203079,0.111220866441727,0.094039350748062,-0.138460829854012,0.104057647287846,-0.011331055313349,0.177405759692192,0.061037354171276,-0.243064954876900,0.186484470963478,-0.064283512532711,-0.075235091149807,-0.163181886076927,-0.085162863135338,0.066735245287418));
res += mul(Get(s1,0,-dy), float4x4(-0.004634090233594,0.108135499060154,-0.115107007324696,-0.007053898647428,0.034057889133692,0.029312832280993,0.055032983422279,-0.033119969069958,-0.137014746665955,0.120058171451092,0.099967755377293,0.016561953350902,-0.216337770223618,0.108802087605000,0.085762575268745,0.065923757851124));
res += mul(Get(s1,0,0), float4x4(0.176911875605583,0.060325819998980,0.002136311493814,0.106724753975868,0.069110393524170,-0.116203032433987,-0.006717348471284,0.083126589655876,-0.167668059468269,0.090074911713600,0.048641338944435,0.086570382118225,-0.087204858660698,0.217890277504921,0.016275217756629,0.032127365469933));
res += mul(Get(s1,0,dy), float4x4(0.068834319710732,0.208696305751801,0.063342392444611,0.081242024898529,-0.025124862790108,-0.093231745064259,-0.241416990756989,0.083531059324741,0.091388575732708,-0.114535696804523,0.026234481483698,0.006495826411992,0.065480925142765,0.138138070702553,-0.021788932383060,0.030035527423024));
res += mul(Get(s1,dx,-dy), float4x4(-0.055857781320810,0.130488112568855,-0.149184256792068,-0.119310170412064,-0.026488678529859,-0.101209774613380,0.215099588036537,-0.005608424078673,0.030931128188968,-0.069259636104107,0.108833953738213,0.012467703782022,-0.048482973128557,-0.036247327923775,0.073173634707928,0.088320828974247));
res += mul(Get(s1,dx,0), float4x4(0.028076726943254,0.023814771324396,-0.028091408312321,0.067378550767899,0.155071526765823,-0.050262954086065,-0.225633516907692,-0.004439787939191,-0.009996376931667,-0.004526235163212,-0.038155507296324,-0.119490459561348,0.145100176334381,-0.123396232724190,-0.103241115808487,0.076773896813393));
res += mul(Get(s1,dx,dy), float4x4(0.087209753692150,-0.088480360805988,0.069637246429920,-0.104296617209911,0.127522334456444,0.026016963645816,0.155107200145721,-0.002337384037673,-0.112628407776356,0.017306981608272,0.040419220924377,-0.042715348303318,-0.004909780807793,0.035269692540169,-0.118009731173515,-0.261570096015930));
res += mul(Get(s2,-dx,-dy), float4x4(0.084872104227543,-0.277591586112976,0.033226739615202,-0.047538492828608,0.072057127952576,-0.183968007564545,-0.005924095399678,-0.000263083202299,0.217259868979454,-0.125951796770096,-0.069704234600067,-0.185317143797874,0.189844563603401,0.139217898249626,-0.011907472275198,0.164095073938370));
res += mul(Get(s2,-dx,0), float4x4(0.058129649609327,-0.067678466439247,-0.235662609338760,0.005151452962309,-0.118105597794056,-0.131745934486389,-0.152348935604095,-0.034348968416452,-0.050549715757370,0.002998728770763,0.118990756571293,-0.011887688189745,0.110949277877808,0.043158415704966,0.025479044765234,-0.000436229485786));
res += mul(Get(s2,-dx,dy), float4x4(0.107101447880268,0.006710595451295,-0.251990228891373,-0.136562377214432,-0.088741846382618,0.195700794458389,-0.009853044524789,0.129776731133461,0.128714025020599,-0.033517610281706,0.141090944409370,-0.011605603620410,0.111868962645531,-0.219434738159180,0.163993522524834,-0.152200415730476));
res += mul(Get(s2,0,-dy), float4x4(-0.036870535463095,-0.070002444088459,0.052100878208876,0.214206993579865,0.008199890144169,-0.237561866641045,0.064902275800705,0.026887806132436,0.067466601729393,-0.059926170855761,-0.092824190855026,0.156110048294067,-0.142153844237328,-0.022038035094738,0.066546745598316,0.136591270565987));
res += mul(Get(s2,0,0), float4x4(0.042129904031754,-0.047809638082981,-0.010463176295161,-0.182581409811974,0.141810849308968,0.202499300241470,-0.170018076896667,0.100202582776546,0.094385653734207,0.024884896352887,-0.043304033577442,-0.083561800420284,0.113586559891701,0.001349979429506,0.027859946712852,0.020647292956710));
res += mul(Get(s2,0,dy), float4x4(0.300250887870789,0.064336039125919,-0.137320041656494,-0.146277010440826,0.000393224618165,0.095756672322750,-0.017206607386470,-0.051738169044256,-0.014100639149547,0.143022730946541,-0.015597913414240,-0.043721258640289,0.117791622877121,-0.260457277297974,0.033844325691462,-0.076693326234818));
res += mul(Get(s2,dx,-dy), float4x4(-0.046807523816824,-0.140188977122307,-0.092062264680862,0.110393851995468,0.266735047101974,0.073336914181709,-0.111663334071636,-0.296490103006363,0.021280750632286,0.000369802786736,0.004244564566761,0.041046723723412,0.092898376286030,0.023033989593387,0.104077517986298,0.091726385056973));
res += mul(Get(s2,dx,0), float4x4(-0.072026915848255,-0.156482443213463,-0.076657019555569,-0.029454637318850,0.136988818645477,-0.028315305709839,-0.009291993454099,-0.005209045950323,-0.182642742991447,-0.011257959529757,-0.116846717894077,-0.098168015480042,0.102784104645252,-0.128512948751450,-0.012874498032033,0.064804866909981));
res += mul(Get(s2,dx,dy), float4x4(0.052845478057861,-0.061336256563663,-0.052117310464382,0.070410788059235,0.132275179028511,0.221174314618111,-0.112443923950195,0.232944563031197,-0.134541079401970,-0.060312010347843,-0.120852015912533,-0.110507607460022,0.187978312373161,-0.134429886937141,0.076954796910286,-0.021412996575236));
res += mul(Get(s3,-dx,-dy), float4x4(-0.122398547828197,-0.161399185657501,0.062167022377253,-0.057637419551611,-0.033900216221809,-0.065613321959972,-0.031828507781029,0.042206387966871,-0.026194857433438,-0.041956622153521,0.109462469816208,0.055161863565445,-0.195675358176231,-0.044541019946337,-0.066860482096672,0.004939168691635));
res += mul(Get(s3,-dx,0), float4x4(0.044941686093807,0.120010592043400,0.072387322783470,-0.031438767910004,0.060049496591091,-0.011060946621001,-0.023682955652475,-0.003603200893849,-0.091395735740662,-0.063485808670521,0.081364497542381,-0.057898260653019,-0.034553717821836,0.058083519339561,-0.203633815050125,-0.045446753501892));
res += mul(Get(s3,-dx,dy), float4x4(-0.002609115326777,0.055369094014168,0.020249359309673,0.063429519534111,0.190724208950996,-0.136078551411629,-0.201123535633087,-0.203276872634888,-0.234488397836685,-0.116210460662842,0.213651090860367,0.048126168549061,0.005426388699561,-0.062751039862633,-0.118319593369961,-0.009715820662677));
res += mul(Get(s3,0,-dy), float4x4(0.006937617901713,0.036232881247997,0.219118207693100,0.015984762459993,0.171822577714920,-0.182336181402206,-0.242157533764839,-0.154285669326782,0.040634535253048,-0.095208123326302,-0.014077214524150,0.038501895964146,-0.043860729783773,0.101754277944565,-0.112724304199219,-0.095365107059479));
res += mul(Get(s3,0,0), float4x4(-0.067425668239594,0.021681690588593,0.185065045952797,-0.085932433605194,-0.102002106606960,0.120880074799061,0.086897864937782,0.109936848282814,-0.172326639294624,-0.031292159110308,0.025539852678776,0.127760633826256,0.055577665567398,0.027834881097078,0.063744239509106,0.017784371972084));
res += mul(Get(s3,0,dy), float4x4(-0.176972433924675,0.197046786546707,0.262839853763580,-0.191766843199730,-0.134231597185135,0.076827429234982,0.106998614966869,0.002315996447578,0.088134497404099,-0.133680105209351,-0.026530278846622,0.110516808927059,0.008855360560119,-0.068025209009647,0.203207254409790,0.040164504200220));
res += mul(Get(s3,dx,-dy), float4x4(-0.108680114150047,0.021334506571293,-0.008485496044159,0.065683968365192,0.167559981346130,-0.084784172475338,-0.066438011825085,-0.053542099893093,-0.071157358586788,-0.000239740213146,0.039238661527634,-0.042327161878347,-0.095674216747284,-0.046419274061918,0.014693045057356,0.203895241022110));
res += mul(Get(s3,dx,0), float4x4(-0.020432986319065,-0.058209985494614,0.046280208975077,-0.005815969314426,-0.079829476773739,0.125844612717628,0.004221709445119,-0.015202393755317,-0.108321316540241,-0.033741965889931,-0.014473558403552,-0.043131798505783,0.075799271464348,0.005542721599340,0.197162374854088,0.076865397393703));
res += mul(Get(s3,dx,dy), float4x4(-0.304909855127335,0.190795361995697,0.048777196556330,-0.044672317802906,-0.281812846660614,-0.012728471308947,0.002167820464820,0.015338949859142,0.075014457106590,0.008653541095555,-0.052423130720854,-0.015466868877411,0.002177791669965,0.084517128765583,0.058530148118734,0.108675897121429));
return max(float4(0,0,0,0), res);
}
