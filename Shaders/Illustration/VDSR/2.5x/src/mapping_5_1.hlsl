sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.126424714922905,-0.239789709448814,-0.067115738987923,0.342794716358185,0.139834672212601,0.268755733966827,0.068563669919968,-0.051691040396690,-0.390632927417755,-0.042196054011583,-0.088547214865685,0.084237463772297,0.072412893176079,-0.141980692744255,-0.098716840147972,-0.126044809818268));
res += mul(Get(s0,-dx,0), float4x4(0.328168213367462,-0.275780141353607,-0.002697221003473,0.184753090143204,0.049450125545263,-0.006345643661916,0.021439608186483,0.002636604942381,-0.252726733684540,-0.010460179299116,0.006242218893021,0.030023403465748,-0.147065132856369,-0.069644868373871,-0.111519344151020,-0.225953400135040));
res += mul(Get(s0,-dx,dy), float4x4(0.003996063023806,-0.015573138371110,-0.064896143972874,0.199974626302719,0.114990606904030,0.038686536252499,-0.033635508269072,0.010124450549483,-0.151073604822159,0.036585737019777,0.084204673767090,-0.036292102187872,0.051208008080721,-0.007934821769595,0.184123352169991,0.029006186872721));
res += mul(Get(s0,0,-dy), float4x4(0.014795243740082,-0.106758564710617,0.013662380166352,0.109476134181023,0.020139951258898,0.178443849086761,0.001557809649967,0.014996285550296,-0.129510864615440,-0.071120843291283,-0.110456004738808,-0.080441765487194,0.145061701536179,-0.182330489158630,0.119092665612698,-0.105286113917828));
res += mul(Get(s0,0,0), float4x4(0.077336616814137,-0.099283494055271,-0.117076531052589,0.001878422684968,0.065151333808899,0.039057552814484,0.009126040153205,0.089804142713547,-0.109676539897919,0.051196515560150,-0.114381112158298,-0.079507879912853,0.008032036945224,-0.050073381513357,-0.182037040591240,-0.137862607836723));
res += mul(Get(s0,0,dy), float4x4(0.244441881775856,0.073831081390381,-0.154194414615631,-0.168490126729012,0.063810966908932,0.054742980748415,-0.126903980970383,0.081393502652645,-0.162694379687309,-0.040678549557924,-0.172220006585121,0.015961132943630,-0.000708862673491,-0.214568406343460,0.021850164979696,-0.021865731105208));
res += mul(Get(s0,dx,-dy), float4x4(-0.144927889108658,0.209132641553879,0.282138466835022,0.060722690075636,0.157844036817551,0.055152792483568,-0.054038003087044,-0.104998573660851,-0.011636268347502,0.137449294328690,-0.078619875013828,0.001153741613962,0.296330302953720,-0.263082534074783,-0.130806848406792,0.345561295747757));
res += mul(Get(s0,dx,0), float4x4(-0.166755333542824,0.145104959607124,0.038074415177107,0.127391174435616,0.295073717832565,0.015053890645504,-0.071021549403667,0.039526104927063,-0.096908502280712,0.019852718338370,-0.119097813963890,-0.165956825017929,0.000614583666902,-0.097944922745228,-0.200229987502098,0.057487566024065));
res += mul(Get(s0,dx,dy), float4x4(0.087219655513763,0.188377991318703,-0.075893491506577,0.020439252257347,0.167674526572227,-0.133404850959778,-0.156810000538826,-0.044088385999203,-0.217683017253876,0.091781295835972,-0.228223219513893,0.118126347661018,-0.032399300485849,-0.026291858404875,-0.052740693092346,0.155389875173569));
res += mul(Get(s1,-dx,-dy), float4x4(-0.118251845240593,-0.001675860024989,-0.090740211308002,0.180556282401085,0.107997149229050,-0.115932419896126,0.147611826658249,-0.130189970135689,-0.191779702901840,0.182055175304413,0.114738136529922,-0.073861740529537,0.178422614932060,0.173887774348259,-0.090508326888084,-0.122562840580940));
res += mul(Get(s1,-dx,0), float4x4(-0.144445419311523,0.056457072496414,-0.093998327851295,-0.026464203372598,0.069746106863022,-0.090751200914383,0.026915552094579,-0.226762667298317,-0.342389345169067,-0.010030123405159,0.047789830714464,-0.246875122189522,-0.015547223389149,-0.064722329378128,-0.110876128077507,-0.110037803649902));
res += mul(Get(s1,-dx,dy), float4x4(0.052398819476366,-0.110097996890545,0.019931696355343,0.035155512392521,-0.025123083963990,-0.054260823875666,-0.177846714854240,0.011485607363284,-0.129923984408379,0.302173882722855,0.084572836756706,-0.136156424880028,-0.082133710384369,-0.062098708003759,-0.004009144846350,-0.019320096820593));
res += mul(Get(s1,0,-dy), float4x4(0.000853207078762,-0.010808785445988,-0.284618496894836,0.039253152906895,0.007626277394593,-0.021863861009479,0.204657316207886,-0.041032060980797,0.012934258207679,0.008839109912515,0.020672902464867,0.031302146613598,-0.020176026970148,0.138632610440254,0.163014739751816,-0.059174586087465));
res += mul(Get(s1,0,0), float4x4(-0.102397367358208,-0.112927146255970,-0.210062682628632,-0.086046807467937,0.160595849156380,-0.005694970954210,0.096559360623360,-0.030810615047812,0.024365976452827,-0.035171978175640,-0.043083697557449,-0.069468937814236,0.104995213449001,0.111406706273556,-0.145693153142929,-0.043668106198311));
res += mul(Get(s1,0,dy), float4x4(-0.136454746127129,-0.121380396187305,-0.090573243796825,0.016026655212045,-0.164525315165520,0.007382923737168,-0.137068077921867,0.034290891140699,0.047496639192104,0.149530246853828,0.054908439517021,-0.140277773141861,-0.132725238800049,-0.029846319928765,-0.052634712308645,0.087342955172062));
res += mul(Get(s1,dx,-dy), float4x4(-0.035179134458303,0.385105699300766,-0.262572079896927,0.136793792247772,0.005646722391248,-0.124991968274117,-0.043068941682577,0.132341101765633,-0.161291658878326,-0.139999777078629,-0.146154984831810,0.197031810879707,-0.113546520471573,-0.070039927959442,0.088374353945255,-0.034126982092857));
res += mul(Get(s1,dx,0), float4x4(0.022117309272289,0.198030024766922,-0.254014700651169,-0.167677775025368,0.044883310794830,-0.083549633622169,0.026775650680065,0.045391533523798,0.098684191703796,0.030490946024656,-0.084856964647770,-0.056408327072859,0.231240764260292,0.016323139891028,0.127656593918800,-0.013371190056205));
res += mul(Get(s1,dx,dy), float4x4(-0.155551880598068,0.225685641169548,-0.114730566740036,-0.148911163210869,-0.060024790465832,0.013708189129829,-0.202994167804718,0.098004661500454,-0.080385230481625,-0.117776840925217,0.018045473843813,0.032689113169909,-0.073199413716793,-0.174586147069931,0.051707681268454,-0.013342095538974));
res += mul(Get(s2,-dx,-dy), float4x4(-0.071450896561146,0.053402643650770,0.200455129146576,-0.058755319565535,0.044281974434853,0.099473573267460,0.034911964088678,0.012684440240264,-0.181830599904060,0.032287064939737,0.033411253243685,-0.055287893861532,-0.195851877331734,-0.041410990059376,0.079375229775906,0.163460850715637));
res += mul(Get(s2,-dx,0), float4x4(-0.040753334760666,-0.008666202425957,0.077612452208996,0.076049461960793,-0.095009386539459,0.096400365233421,0.000009259430954,-0.052871119230986,-0.028596958145499,-0.032737895846367,0.094788566231728,0.141667708754539,0.008283365517855,-0.047466751188040,0.015213214792311,0.126611471176147));
res += mul(Get(s2,-dx,dy), float4x4(0.003585012163967,0.056701693683863,0.146150663495064,-0.005073029082268,-0.033065363764763,0.213305145502090,-0.008292301557958,-0.106491774320602,-0.029535194858909,-0.121710360050201,-0.038925345987082,0.089746251702309,-0.074783541262150,0.124889723956585,-0.011121739633381,-0.030498649924994));
res += mul(Get(s2,0,-dy), float4x4(-0.242041498422623,0.010269985534251,-0.087364308536053,0.149873912334442,0.244489744305611,-0.013344050385058,-0.036997020244598,0.096447244286537,-0.153811126947403,0.326757282018661,-0.150836944580078,-0.036115307360888,-0.051798179745674,-0.156767904758453,0.071148581802845,0.224242612719536));
res += mul(Get(s2,0,0), float4x4(-0.039184600114822,-0.062722496688366,-0.128899678587914,0.017811199650168,0.031375739723444,-0.077702321112156,-0.100584618747234,0.154235169291496,-0.037916183471680,0.015168076381087,0.061812758445740,0.119670666754246,0.043799173086882,-0.115301728248596,0.073331587016582,-0.046233002096415));
res += mul(Get(s2,0,dy), float4x4(0.022647395730019,0.079439431428909,0.007781467866153,-0.223394453525543,-0.091581650078297,0.124920904636383,-0.130894899368286,0.111258685588837,-0.028328731656075,0.085587009787560,-0.046804927289486,0.001814813818783,-0.022528097033501,0.030147580429912,-0.010046084411442,0.003235957352445));
res += mul(Get(s2,dx,-dy), float4x4(-0.118503354489803,0.005006751976907,-0.100663796067238,0.104838840663433,0.183904483914375,-0.077021375298500,-0.079537473618984,0.145236447453499,-0.057241909205914,0.038190416991711,-0.016830543056130,0.222826421260834,-0.041021574288607,-0.162772223353386,0.361194670200348,0.145656868815422));
res += mul(Get(s2,dx,0), float4x4(-0.054507739841938,-0.167874291539192,-0.132918000221252,0.125482097268105,0.233205303549767,-0.032750502228737,-0.018018508329988,0.093561403453350,0.119825564324856,0.030987231060863,0.090263314545155,0.040712699294090,-0.029100861400366,-0.146774873137474,-0.091001458466053,-0.013527536764741));
res += mul(Get(s2,dx,dy), float4x4(-0.012708081863821,0.001029011793435,-0.203175082802773,0.033572878688574,-0.043494246900082,0.096897341310978,-0.057113025337458,0.084751270711422,0.063602708280087,0.107653997838497,-0.150277465581894,0.026901997625828,-0.132047265768051,-0.039531175047159,0.038579236716032,-0.039957363158464));
res += mul(Get(s3,-dx,-dy), float4x4(-0.217080131173134,-0.015535240992904,-0.090446688234806,-0.065734349191189,0.142817839980125,-0.057876154780388,0.038704294711351,0.063483282923698,-0.103309147059917,-0.000661641417537,0.192603871226311,0.155478432774544,-0.077403187751770,0.087467409670353,0.233724340796471,-0.005394667387009));
res += mul(Get(s3,-dx,0), float4x4(-0.223104774951935,-0.037705477327108,0.134472087025642,-0.045576531440020,0.058119602501392,0.007200206629932,0.004966873675585,-0.082958132028580,-0.081081829965115,-0.051466394215822,0.226147562265396,0.162895426154137,0.093018874526024,-0.093295618891716,0.071578450500965,-0.009832396171987));
res += mul(Get(s3,-dx,dy), float4x4(-0.130725443363190,-0.162008047103882,0.001925548072904,-0.214872032403946,0.241038486361504,-0.123354502022266,0.156057566404343,-0.032560676336288,0.281775742769241,0.020951988175511,0.062456130981445,0.097930908203125,-0.069082155823708,-0.029865467920899,-0.137562364339828,-0.152149096131325));
res += mul(Get(s3,0,-dy), float4x4(0.045283935964108,-0.119781777262688,-0.113912850618362,0.122603625059128,0.071389310061932,-0.020777009427547,0.102359041571617,0.120789341628551,-0.095890238881111,0.081875145435333,-0.052551541477442,0.017972342669964,-0.149632453918457,-0.074374794960022,0.000367600820027,-0.002825045492500));
res += mul(Get(s3,0,0), float4x4(-0.060845792293549,-0.040021836757660,0.136954069137573,-0.079962000250816,0.068050310015678,-0.057998973876238,-0.003304731100798,-0.029570806771517,-0.074368499219418,-0.089980259537697,-0.144872829318047,0.097986921668053,-0.060240793973207,-0.112915977835655,0.311123371124268,0.024707924574614));
res += mul(Get(s3,0,dy), float4x4(-0.035264555364847,-0.086319871246815,0.015142134390771,-0.233492657542229,0.128922656178474,-0.138418674468994,0.121516786515713,-0.033097099512815,0.028616290539503,-0.054256003350019,0.034187521785498,-0.006346677895635,0.175923392176628,-0.094880938529968,0.091301806271076,-0.098502874374390));
res += mul(Get(s3,dx,-dy), float4x4(-0.020927110686898,0.003716320265085,-0.316350549459457,0.149341091513634,0.300679951906204,-0.095274820923805,-0.045143786817789,0.121620565652847,0.194843277335167,-0.033790983259678,-0.166067913174629,-0.055260658264160,-0.114135026931763,-0.099720932543278,-0.090313360095024,0.103483870625496));
res += mul(Get(s3,dx,0), float4x4(0.215933203697205,-0.102172307670116,-0.090094603598118,0.065769396722317,0.038321617990732,-0.055592622607946,-0.213508248329163,-0.031858522444963,-0.090459823608398,-0.083314895629883,-0.036719731986523,-0.042649682611227,-0.091060400009155,-0.089682981371880,-0.073208548128605,0.167979508638382));
res += mul(Get(s3,dx,dy), float4x4(-0.011722444556653,-0.064655259251595,0.009852478280663,-0.131870046257973,0.005336326081306,-0.061724510043859,-0.081640481948853,-0.071715675294399,-0.002779523609206,-0.064912311732769,0.211409777402878,0.084041595458984,0.090167708694935,-0.053492080420256,-0.038094047456980,0.037393983453512));
return max(float4(0,0,0,0), res);
}
