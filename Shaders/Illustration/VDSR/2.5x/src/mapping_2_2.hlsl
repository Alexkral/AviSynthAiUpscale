sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.147133484482765,-0.069598071277142,0.127373233437538,-0.103053316473961,0.049533233046532,-0.050671011209488,0.007178761065006,0.001855357200839,-0.027854345738888,-0.063949622213840,-0.233652055263519,-0.129640802741051,0.055664759129286,0.108449250459671,-0.273699194192886,0.052018836140633));
res += mul(Get(s0,-dx,0), float4x4(-0.045944534242153,-0.284921616315842,0.311658620834351,0.233302116394043,0.082577183842659,0.076745226979256,-0.166996777057648,0.067618250846863,0.032096333801746,-0.060664221644402,0.050765864551067,0.080267719924450,0.011446113698184,-0.176572337746620,-0.039686884731054,0.030856702476740));
res += mul(Get(s0,-dx,dy), float4x4(-0.146116420626640,0.061980009078979,-0.088089592754841,0.019204827025533,0.005552829243243,-0.088932603597641,-0.025553809478879,-0.052833575755358,0.027253119274974,0.021319890394807,-0.141380473971367,-0.143031775951385,-0.076557099819183,-0.109196260571480,-0.010566562414169,0.007037891540676));
res += mul(Get(s0,0,-dy), float4x4(0.129736647009850,0.043298795819283,-0.034317657351494,-0.003647151403129,-0.087305553257465,0.256292790174484,-0.235351264476776,0.008227040991187,0.045277200639248,0.127973347902298,0.011976175941527,0.009090175852180,-0.015510649420321,0.228775322437286,0.061717849224806,0.010202716104686));
res += mul(Get(s0,0,0), float4x4(0.195712029933929,0.159150660037994,0.036023873835802,0.049738127738237,0.200330555438995,-0.190297961235046,0.193289503455162,-0.139249846339226,-0.108257725834846,0.203394606709480,-0.050859745591879,-0.164481937885284,0.012258331291378,-0.086406290531158,-0.073078356683254,-0.093601308763027));
res += mul(Get(s0,0,dy), float4x4(0.019323807209730,0.133345678448677,-0.012707288376987,0.003791843308136,-0.196185022592545,-0.050543408840895,-0.066886998713017,0.044384486973286,0.089111305773258,0.092077076435089,0.122670687735081,-0.008642199449241,0.169790878891945,-0.253488361835480,-0.048190753906965,0.038516599684954));
res += mul(Get(s0,dx,-dy), float4x4(-0.222290933132172,-0.170422941446304,-0.077418446540833,0.075561419129372,-0.008388056419790,0.133409112691879,-0.022148033604026,0.007237591780722,0.088522873818874,0.276703208684921,-0.008005591109395,-0.127124354243279,-0.283363491296768,-0.058840654790401,-0.063893020153046,-0.143658429384232));
res += mul(Get(s0,dx,0), float4x4(0.061736982315779,0.022412467747927,-0.075901649892330,0.106887578964233,-0.129380211234093,0.022138450294733,-0.088470920920372,0.274569064378738,0.056924782693386,0.046702064573765,-0.080610811710358,0.102706924080849,-0.003853940637782,-0.118235431611538,-0.001130211283453,-0.036204043775797));
res += mul(Get(s0,dx,dy), float4x4(0.114008747041225,0.034555997699499,-0.242448717355728,-0.002113268245012,-0.004194857552648,0.048475466668606,0.210878267884254,0.035887677222490,0.095642223954201,-0.315583229064941,0.023920411244035,-0.075405828654766,-0.054517861455679,0.049831934273243,-0.006535630673170,0.137026607990265));
res += mul(Get(s1,-dx,-dy), float4x4(-0.136915177106857,-0.039985999464989,-0.110627442598343,-0.046608809381723,-0.098102495074272,-0.072469681501389,-0.025847947224975,-0.051081493496895,0.008642698638141,-0.017165135592222,0.085552386939526,0.194029599428177,-0.009505309164524,0.184400454163551,-0.047816634178162,-0.002545412164181));
res += mul(Get(s1,-dx,0), float4x4(0.179131865501404,0.062919914722443,-0.026519272476435,0.206483140587807,-0.005207188427448,0.188347712159157,-0.091693431138992,0.392618060112000,-0.210062742233276,0.081600040197372,0.015274975448847,-0.259059846401215,-0.002076868200675,-0.146766826510429,0.169393137097359,0.037567306309938));
res += mul(Get(s1,-dx,dy), float4x4(0.258893460035324,-0.053059499710798,-0.054869454354048,-0.047030188143253,0.211362138390541,0.108108997344971,-0.077114880084991,0.027191603556275,0.087543055415154,-0.228048667311668,0.049914278090000,-0.134164333343506,0.090708859264851,-0.106609128415585,-0.097524695098400,-0.001557096838951));
res += mul(Get(s1,0,-dy), float4x4(-0.133159309625626,0.297539651393890,-0.236222147941589,-0.071773283183575,-0.083905704319477,-0.140879213809967,0.057864882051945,0.020866554230452,0.122614853084087,0.086001105606556,-0.097566448152065,-0.055429693311453,-0.126968204975128,-0.014981332235038,-0.093919321894646,-0.007367399986833));
res += mul(Get(s1,0,0), float4x4(-0.017531594261527,0.360875546932220,0.101867221295834,-0.046372067183256,-0.053902328014374,0.048380170017481,-0.001725900801830,-0.040949203073978,-0.034921713173389,-0.132531791925430,0.107755489647388,0.258563846349716,-0.208223447203636,-0.007189994212240,-0.131494238972664,0.126127734780312));
res += mul(Get(s1,0,dy), float4x4(0.096083141863346,-0.165805250406265,-0.069373011589050,-0.122680522501469,-0.068901576101780,-0.033014450222254,0.119527466595173,0.077527523040771,-0.037887856364250,0.068675525486469,-0.263006210327148,0.043889667838812,0.007717694155872,0.006464911624789,0.084959477186203,0.088245868682861));
res += mul(Get(s1,dx,-dy), float4x4(-0.171321868896484,0.131709218025208,-0.197762161493301,0.145844221115112,-0.193422183394432,0.053587533533573,0.093966834247112,-0.016057761386037,0.283966004848480,-0.078755311667919,-0.014768312685192,-0.016045534983277,-0.104507565498352,0.148048266768456,-0.091769903898239,-0.107419602572918));
res += mul(Get(s1,dx,0), float4x4(-0.077223129570484,-0.083425089716911,0.145444750785828,0.115347363054752,-0.105420455336571,0.092714168131351,-0.069047510623932,0.013513119891286,-0.079237863421440,0.029850587248802,0.024543078616261,0.041947208344936,-0.025860806927085,-0.049223672598600,-0.149555578827858,0.054461129009724));
res += mul(Get(s1,dx,dy), float4x4(0.059082575142384,-0.231804579496384,0.132203608751297,0.070255063474178,0.152614250779152,-0.043680019676685,-0.082922816276550,-0.081657640635967,-0.006310451775789,0.091389112174511,-0.061575040221214,0.061891175806522,0.230757474899292,-0.014287891797721,0.079627007246017,-0.037398092448711));
res += mul(Get(s2,-dx,-dy), float4x4(0.002407570835203,0.079391181468964,-0.174279481172562,0.071263141930103,-0.173020824790001,-0.006529662292451,0.026794450357556,0.036929551512003,0.037067122757435,0.074330307543278,0.318974584341049,0.107155680656433,-0.053695138543844,0.143347978591919,-0.042939044535160,0.112015411257744));
res += mul(Get(s2,-dx,0), float4x4(-0.028626991435885,0.020289577543736,0.035447772592306,-0.060399342328310,-0.000950021611061,-0.095999665558338,-0.067395716905594,-0.045108735561371,0.042331177741289,0.065993264317513,-0.099896304309368,-0.031245399266481,-0.015484025701880,-0.056513506919146,-0.013073727488518,-0.009168380871415));
res += mul(Get(s2,-dx,dy), float4x4(-0.025437679141760,0.047017581760883,0.334074109792709,-0.111948259174824,0.008749281987548,0.119269512593746,0.199469655752182,0.023313447833061,-0.002353644929826,0.074473530054092,0.199961900711060,0.234403207898140,0.145267665386200,-0.127233311533928,-0.052659921348095,-0.018998734652996));
res += mul(Get(s2,0,-dy), float4x4(-0.170051634311676,0.051582135260105,-0.116967216134071,-0.049394771456718,0.124192319810390,-0.034990087151527,-0.254990160465240,0.023630768060684,-0.004140864592046,-0.109273985028267,0.016973141580820,-0.087025381624699,0.092464797198772,0.013274971395731,0.014122096821666,-0.053550250828266));
res += mul(Get(s2,0,0), float4x4(-0.111432723701000,0.065234050154686,-0.013356019742787,0.041336853057146,-0.012038169428706,0.460842967033386,-0.053089652210474,-0.134656921029091,0.005252404604107,0.073906488716602,-0.100586190819740,-0.016475658863783,-0.084841161966324,0.050122570246458,-0.111759759485722,-0.053886901587248));
res += mul(Get(s2,0,dy), float4x4(-0.056621432304382,0.075828306376934,0.063374079763889,0.105703942477703,-0.170734137296677,-0.166751265525818,-0.051081594079733,-0.050478260964155,0.087956227362156,0.157301932573318,0.001689907745458,0.005825743079185,-0.161688059568405,-0.075141154229641,-0.015517365187407,0.024197207763791));
res += mul(Get(s2,dx,-dy), float4x4(-0.074578642845154,0.168973430991173,-0.141821041703224,0.040517378598452,0.097872458398342,-0.105198077857494,-0.045261148363352,-0.011717353947461,-0.145802333950996,0.082601957023144,0.105784229934216,-0.103721931576729,0.136744827032089,-0.075140669941902,-0.130700245499611,0.207207351922989));
res += mul(Get(s2,dx,0), float4x4(-0.013284264132380,-0.044275213032961,0.034625027328730,0.103667058050632,-0.139319494366646,0.029719356447458,0.180475369095802,-0.121263802051544,0.102784268558025,0.171860396862030,0.161587595939636,-0.163956299424171,-0.012514218688011,-0.060066424310207,-0.104172669351101,0.099008232355118));
res += mul(Get(s2,dx,dy), float4x4(0.165267676115036,-0.209967166185379,-0.181242987513542,-0.034213628619909,-0.031116783618927,-0.036349929869175,-0.102874152362347,0.107385523617268,-0.084096729755402,-0.180809125304222,0.008129247464240,0.004240267910063,-0.057680696249008,0.021269438788295,0.031294707208872,0.036162007600069));
res += mul(Get(s3,-dx,-dy), float4x4(-0.065797477960587,-0.081927314400673,-0.075490847229958,0.089178301393986,-0.066616505384445,0.089404396712780,-0.006994029972702,0.032937902957201,-0.124615505337715,-0.005719519685954,-0.053180109709501,-0.102347284555435,-0.061994895339012,0.121697150170803,-0.043106723576784,-0.004079656675458));
res += mul(Get(s3,-dx,0), float4x4(0.053948085755110,0.185691893100739,-0.091688133776188,0.086395919322968,-0.085299760103226,0.020612103864551,0.067535951733589,0.152903079986572,-0.026680115610361,-0.148751273751259,-0.026196602731943,-0.049361012876034,-0.019766561686993,0.075480863451958,-0.208821102976799,0.091773651540279));
res += mul(Get(s3,-dx,dy), float4x4(-0.013287372887135,0.121068544685841,0.180523321032524,0.013381463475525,0.093762733042240,0.049120858311653,0.034104179590940,0.129593998193741,0.004727873951197,0.087523750960827,-0.037628870457411,0.020460085943341,-0.233350634574890,-0.144756868481636,0.158638134598732,-0.041265971958637));
res += mul(Get(s3,0,-dy), float4x4(0.013016665354371,-0.120529986917973,0.198489621281624,-0.156432688236237,-0.020289611071348,-0.058285243809223,-0.034620478749275,-0.047026839107275,-0.001483328174800,-0.318608969449997,-0.049899712204933,-0.047617860138416,0.048795912414789,-0.096340417861938,-0.117814242839813,-0.101748824119568));
res += mul(Get(s3,0,0), float4x4(0.043941326439381,-0.028144504874945,0.037374511361122,-0.075583435595036,0.026431072503328,-0.049799546599388,0.019256312400103,-0.053361717611551,-0.144946292042732,0.028583692386746,0.059067394584417,0.047389741986990,0.141893938183784,0.073706135153770,-0.097995936870575,0.022126918658614));
res += mul(Get(s3,0,dy), float4x4(0.149968400597572,0.015719488263130,-0.072903215885162,-0.013350867666304,-0.214492216706276,-0.110374934971333,0.124812178313732,-0.014625851996243,-0.202325358986855,-0.073446020483971,0.042629871517420,0.038352545350790,0.066506601870060,0.130307376384735,0.140570417046547,0.030664093792439));
res += mul(Get(s3,dx,-dy), float4x4(-0.024551102891564,-0.017160521820188,0.030278252437711,-0.109883584082127,-0.106747232377529,0.087544068694115,-0.046729687601328,0.048071466386318,0.029632303863764,-0.133789464831352,-0.121902182698250,-0.112589366734028,0.266206979751587,-0.062360856682062,0.249286606907845,0.042015641927719));
res += mul(Get(s3,dx,0), float4x4(-0.018781473860145,0.266355097293854,-0.038172755390406,-0.076876409351826,0.005164497531950,-0.006162676960230,0.069255582988262,-0.109189324080944,0.072012796998024,0.046775709837675,0.007831778377295,-0.106249012053013,0.171944737434387,0.043555572628975,0.011788212694228,0.024000504985452));
res += mul(Get(s3,dx,dy), float4x4(-0.133191376924515,0.010207641869783,-0.337442815303802,-0.146756440401077,-0.092147327959538,-0.124463975429535,0.139525890350342,0.070625595748425,-0.075828529894352,0.103012144565582,0.163404166698456,-0.023000763729215,0.052891414612532,0.096227116882801,0.093322940170765,-0.023569040000439));
return max(float4(0,0,0,0), res);
}
