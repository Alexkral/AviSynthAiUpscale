sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(-0.145530670881271,-0.017861627042294,-0.230764403939247,0.020295154303312) * Get(-dx,-dy);
res += float4(0.139361917972565,-0.189542010426521,0.067445605993271,0.228703260421753) * Get(-dx,0);
res += float4(-0.048626188188791,0.009080846793950,0.143441230058670,-0.061288718134165) * Get(-dx,dy);
res += float4(0.111285351216793,0.360466420650482,0.014110117219388,-0.124936260282993) * Get(0,-dy);
res += float4(-0.111026130616665,-0.036618076264858,-0.177668362855911,-0.094613276422024) * Get(0,0);
res += float4(-0.096136197447777,0.115592680871487,-0.241070076823235,0.032307982444763) * Get(0,dy);
res += float4(-0.047292388975620,-0.201779231429100,0.088992528617382,-0.152528315782547) * Get(dx,-dy);
res += float4(-0.114655055105686,0.115365065634251,0.272459954023361,-0.128235355019569) * Get(dx,0);
res += float4(-0.047414310276508,-0.105938546359539,0.080112554132938,0.060285277664661) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
