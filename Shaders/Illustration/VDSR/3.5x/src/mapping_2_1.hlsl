sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.162573069334030,-0.075881212949753,-0.200278222560883,0.016958093270659,-0.071854934096336,-0.038685884326696,-0.194816187024117,-0.041019458323717,-0.100352831184864,0.102258227765560,0.246614024043083,0.077068641781807,0.013747751712799,-0.077865041792393,0.000941355072428,-0.046672776341438));
res += mul(Get(s0,-dx,0), float4x4(-0.025820896029472,-0.140744343400002,-0.096427544951439,-0.364784777164459,-0.013397087343037,-0.059688158333302,-0.204082131385803,0.030940774828196,-0.000052972438425,0.318724185228348,-0.015920937061310,-0.090567447245121,-0.040652029216290,-0.240174815058708,-0.204960301518440,0.050513751804829));
res += mul(Get(s0,-dx,dy), float4x4(-0.111874014139175,0.073647744953632,-0.048149399459362,-0.015982968732715,-0.006588259246200,-0.115451559424400,-0.189789533615112,0.087978579103947,-0.058457050472498,0.227102041244507,-0.345324784517288,0.051097422838211,0.083625540137291,-0.188833251595497,-0.225392520427704,0.104041740298271));
res += mul(Get(s0,0,-dy), float4x4(-0.017346035689116,-0.007665899116546,-0.198098585009575,0.114916212856770,-0.114917121827602,-0.167982816696167,-0.051252000033855,-0.015759952366352,-0.171762570738792,-0.039678726345301,-0.326525956392288,0.014976512640715,-0.187683284282684,-0.111953862011433,-0.130927473306656,0.074309781193733));
res += mul(Get(s0,0,0), float4x4(-0.000062094375608,-0.040871698409319,-0.080086581408978,-0.235921874642372,-0.043459970504045,-0.187290534377098,-0.073223099112511,-0.004571897909045,-0.008866443298757,-0.011353134177625,-0.008366579189897,-0.139232277870178,-0.362953186035156,-0.192834064364433,-0.103401608765125,0.143164515495300));
res += mul(Get(s0,0,dy), float4x4(-0.118197374045849,0.173056185245514,-0.123408101499081,-0.002918263664469,-0.063786931335926,-0.183344036340714,-0.034688249230385,-0.002017576480284,-0.228849530220032,-0.102745443582535,0.464434474706650,-0.073051609098911,-0.383264005184174,-0.121996425092220,0.003814090276137,0.116502881050110));
res += mul(Get(s0,dx,-dy), float4x4(-0.040661737322807,0.071421951055527,-0.116162680089474,0.240355029702187,-0.062006663531065,-0.062623366713524,-0.041123833507299,-0.122181653976440,0.134732097387314,0.067479789257050,0.005523480009288,-0.036239188164473,0.036801043897867,-0.184845745563507,0.038558535277843,-0.154755532741547));
res += mul(Get(s0,dx,0), float4x4(-0.060752727091312,-0.113601267337799,-0.078415200114250,-0.003700452158228,-0.009539138525724,-0.073056869208813,0.023484377190471,-0.086937867105007,0.184021860361099,-0.032798551023006,-0.060151264071465,-0.172774747014046,-0.119690954685211,-0.234751492738724,-0.083382315933704,-0.041427481919527));
res += mul(Get(s0,dx,dy), float4x4(-0.194190710783005,0.177121087908745,0.118995077908039,0.120438724756241,-0.034923907369375,-0.067527927458286,0.078038521111012,-0.066245973110199,-0.259695976972580,-0.037674289196730,-0.043062027543783,-0.161861345171928,-0.261900186538696,-0.124198876321316,0.029056552797556,0.042409878224134));
res += mul(Get(s1,-dx,-dy), float4x4(-0.309938490390778,0.123998127877712,-0.086375996470451,-0.078502573072910,0.007482662796974,-0.003051170846447,-0.045079726725817,0.009566547349095,0.186124473810196,0.084975101053715,-0.270135968923569,-0.021249819546938,-0.075976468622684,-0.020840046927333,-0.070620849728584,-0.025861451402307));
res += mul(Get(s1,-dx,0), float4x4(-0.443762362003326,0.285607397556305,0.436035007238388,0.079363100230694,-0.037875689566135,-0.035962659865618,-0.064224682748318,0.041259136050940,0.062205720692873,-0.065946266055107,0.130474120378494,-0.018752248957753,-0.067514404654503,0.006323573179543,0.016409566625953,-0.023048834875226));
res += mul(Get(s1,-dx,dy), float4x4(-0.297462224960327,-0.042336285114288,0.023305056616664,-0.208930224180222,-0.040191818028688,-0.085420422255993,-0.064477309584618,-0.042578782886267,0.185955971479416,-0.072848953306675,0.265783578157425,-0.045853368937969,-0.042725287377834,0.018227383494377,-0.009807742200792,-0.001852541347034));
res += mul(Get(s1,0,-dy), float4x4(0.061474151909351,0.086948931217194,0.192532166838646,-0.156555384397507,-0.030094563961029,-0.021625699475408,-0.034507326781750,-0.044870745390654,0.048878069967031,0.150561764836311,0.169680938124657,-0.077768757939339,0.002062088809907,-0.048104092478752,-0.113206513226032,-0.027321584522724));
res += mul(Get(s1,0,0), float4x4(-0.227376207709312,0.137188926339149,0.068933255970478,-0.134433969855309,-0.067040339112282,-0.050851766020060,-0.084782876074314,-0.017465267330408,-0.012878899462521,-0.086740151047707,-0.082593820989132,0.207341849803925,0.004754018504173,-0.038105338811874,0.042685974389315,-0.007246245164424));
res += mul(Get(s1,0,dy), float4x4(0.215777143836021,-0.020450431853533,0.004440313205123,-0.313636869192123,-0.064456008374691,-0.081650190055370,-0.128727436065674,-0.018279092386365,0.228855654597282,-0.027960518375039,-0.218751117587090,0.140552073717117,0.013485638424754,-0.015415745787323,0.086638502776623,-0.032647583633661));
res += mul(Get(s1,dx,-dy), float4x4(0.082139857113361,0.044409383088350,0.210151568055153,-0.184353142976761,-0.074820958077908,-0.002345812972635,0.002189292572439,-0.097947888076305,0.187481164932251,-0.086869217455387,-0.183154299855232,-0.289268463850021,0.007312180474401,-0.005795055534691,-0.051221840083599,-0.039043404161930));
res += mul(Get(s1,dx,0), float4x4(-0.307016313076019,-0.056841071695089,-0.181274712085724,-0.087314598262310,-0.117653794586658,-0.046380273997784,-0.039384748786688,-0.122415110468864,-0.208329007029533,-0.015507872216403,-0.032482370734215,0.079100765287876,0.029092939570546,-0.016698896884918,0.037687689065933,-0.042807374149561));
res += mul(Get(s1,dx,dy), float4x4(0.323885858058929,-0.114221744239330,-0.140513971447945,-0.152532711625099,-0.113539665937424,-0.051501926034689,-0.077282011508942,-0.125425621867180,-0.151985228061676,-0.031519319862127,-0.017155312001705,0.069385334849358,0.030420564115047,-0.004569715820253,-0.010739142075181,-0.050617691129446));
res += mul(Get(s2,-dx,-dy), float4x4(0.050577461719513,-0.005990827456117,0.042084440588951,-0.002608090173453,-0.200699061155319,-0.114247947931290,0.119764536619186,-0.002418297342956,-0.171510085463524,0.075082808732986,-0.149558886885643,-0.190191566944122,0.006591132842004,-0.017500797286630,0.032600197941065,-0.074637122452259));
res += mul(Get(s2,-dx,0), float4x4(0.041813038289547,-0.020008550956845,-0.065877415239811,-0.015926729887724,-0.098419561982155,-0.117933683097363,-0.228403583168983,-0.095913350582123,-0.220264375209808,0.021831478923559,0.290551573038101,0.032567456364632,0.071447387337685,-0.034161936491728,-0.039560128003359,-0.010059069842100));
res += mul(Get(s2,-dx,dy), float4x4(0.017800822854042,-0.042858954519033,-0.173074066638947,-0.017137771472335,-0.155450865626335,0.025464989244938,0.026587694883347,0.095939770340919,-0.340414255857468,-0.220714613795280,0.162049591541290,-0.165485039353371,0.106844350695610,0.001798086450435,0.013872919604182,-0.191666319966316));
res += mul(Get(s2,0,-dy), float4x4(0.068587571382523,0.078439481556416,-0.198915660381317,-0.059258595108986,-0.072075583040714,-0.050725188106298,0.101994298398495,-0.047232802957296,-0.093066908419132,0.004989318083972,0.241573542356491,-0.099464267492294,0.023304650560021,-0.002731485292315,0.065209202468395,-0.046636831015348));
res += mul(Get(s2,0,0), float4x4(0.016463268548250,0.068860702216625,-0.157180011272430,-0.118804082274437,-0.033753272145987,0.113297097384930,0.231666713953018,-0.126861095428467,-0.159917801618576,-0.033064819872379,-0.011970754712820,0.164676561951637,0.190605252981186,-0.084783703088760,-0.095405794680119,-0.091702930629253));
res += mul(Get(s2,0,dy), float4x4(-0.061908517032862,0.042657736688852,0.024771710857749,-0.127664014697075,-0.133175745606422,0.061634778976440,-0.008696589618921,0.177530527114868,-0.249743416905403,-0.128069028258324,-0.122460596263409,-0.106865108013153,0.093381181359291,-0.050092697143555,0.023067923262715,-0.356112122535706));
res += mul(Get(s2,dx,-dy), float4x4(0.022360457107425,-0.008487598970532,0.008675565011799,-0.020943040028214,0.056932408362627,-0.092795819044113,-0.102616660296917,-0.096484027802944,0.085697345435619,-0.227287843823433,0.065189659595490,-0.043327733874321,0.135753408074379,0.257239609956741,-0.203216001391411,0.111412920057774));
res += mul(Get(s2,dx,0), float4x4(-0.024754663929343,-0.021092437207699,-0.013776484876871,-0.040671739727259,0.093570075929165,0.009063021279871,0.135720193386078,-0.243384629487991,0.047278214246035,-0.144714370369911,-0.111662000417709,0.431009799242020,-0.036530133336782,0.151027575135231,-0.044091355055571,0.077902734279633));
res += mul(Get(s2,dx,dy), float4x4(-0.058349762111902,-0.011987102217972,0.005995723884553,-0.046822607517242,0.014789732173085,0.012966254726052,0.033395588397980,-0.064935147762299,0.043792296200991,-0.099915549159050,0.007154155056924,0.237197712063789,-0.237429514527321,-0.089132614433765,-0.126031279563904,-0.206908732652664));
res += mul(Get(s3,-dx,-dy), float4x4(-0.000872184173204,-0.044161979109049,0.057441502809525,-0.074049130082130,0.073498554527760,-0.065517909824848,0.195828199386597,-0.022689841687679,-0.040862921625376,-0.084839902818203,-0.007739231456071,0.060235101729631,-0.020129604265094,-0.027291232720017,0.315515518188477,-0.005312303081155));
res += mul(Get(s3,-dx,0), float4x4(-0.030173048377037,-0.077134996652603,0.137997716665268,0.063295058906078,-0.019888291135430,-0.000831069366541,0.066495351493359,0.226045697927475,-0.155352950096130,-0.165942296385765,-0.081006325781345,-0.004164505284280,-0.024831430986524,0.064958855509758,-0.046436969190836,0.017658507451415));
res += mul(Get(s3,-dx,dy), float4x4(0.098581179976463,-0.065138779580593,-0.063563153147697,0.076233223080635,-0.068939857184887,0.006703768856823,-0.029350301250815,0.287208080291748,-0.209903642535210,0.011141272261739,-0.264871209859848,-0.185191646218300,-0.028371667489409,0.056452460587025,-0.334334284067154,0.020559165626764));
res += mul(Get(s3,0,-dy), float4x4(-0.055000737309456,-0.026076063513756,0.011121650226414,-0.111745886504650,0.080923393368721,-0.066172793507576,-0.181160166859627,-0.007974859327078,-0.226768851280212,0.006339063867927,-0.115620084106922,-0.071896538138390,0.023835707455873,-0.101088352501392,-0.020284222438931,-0.019885918125510));
res += mul(Get(s3,0,0), float4x4(-0.030712315812707,-0.045746300369501,0.028659449890256,0.229188665747643,0.012703316286206,0.010382754728198,-0.215783476829529,0.120104111731052,-0.165360465645790,0.133721232414246,-0.118624970316887,-0.078498207032681,0.047641720622778,-0.029104558750987,-0.047747127711773,-0.059119258075953));
res += mul(Get(s3,0,dy), float4x4(-0.038529824465513,-0.045285113155842,-0.020056387409568,0.070738218724728,-0.048590119928122,-0.032174728810787,-0.253752470016479,0.167217805981636,-0.113279461860657,0.128468513488770,-0.019393514841795,-0.127989232540131,-0.008499620482326,-0.007622096687555,0.099522784352303,-0.009840399026871));
res += mul(Get(s3,dx,-dy), float4x4(0.157401382923126,-0.008242716081440,-0.091626226902008,0.035076946020126,0.170172765851021,-0.102597221732140,-0.048112496733665,-0.094806574285030,-0.160728156566620,-0.142825081944466,-0.072022169828415,-0.185170590877533,-0.070871479809284,0.008914530277252,-0.130952700972557,-0.095088101923466));
res += mul(Get(s3,dx,0), float4x4(0.054978635162115,-0.040770240128040,-0.045849110931158,0.047903683036566,0.052596751600504,-0.074253983795643,-0.141100704669952,-0.109832927584648,0.024825807660818,-0.118807569146156,-0.023423135280609,-0.116249084472656,-0.045377675443888,-0.002582515357062,-0.051061499863863,-0.049201533198357));
res += mul(Get(s3,dx,dy), float4x4(0.054531551897526,-0.031362861394882,-0.044157963246107,0.012983873486519,0.019489571452141,-0.063549153506756,-0.097970597445965,-0.269830614328384,-0.028578607365489,-0.145085409283638,0.070706337690353,-0.286236673593521,-0.111960031092167,0.129265561699867,0.104114346206188,-0.086923651397228));
return max(float4(0,0,0,0), res);
}
