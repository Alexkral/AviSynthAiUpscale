sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.048787746578455,0.068868279457092,0.202699899673462,-0.080775313079357,-0.078632742166519,-0.174257144331932,-0.127548798918724,-0.101677097380161,-0.073215365409851,0.010058606043458,-0.065222866833210,0.072263881564140,0.176225587725639,0.099739730358124,-0.028710113838315,-0.142717301845551));
res += mul(Get(s0,-dx,0), float4x4(0.064006552100182,-0.071741491556168,0.210567206144333,-0.071738794445992,0.049921948462725,-0.184545010328293,0.078755073249340,-0.081703707575798,-0.001119632273912,-0.227575615048409,-0.072842016816139,0.159599259495735,-0.091254301369190,0.057290390133858,-0.278667032718658,-0.123801276087761));
res += mul(Get(s0,-dx,dy), float4x4(0.033267192542553,-0.022383669391274,0.019287820905447,-0.221264109015465,-0.159676358103752,0.061350587755442,-0.020159358158708,-0.031673759222031,-0.065079681575298,0.084714010357857,0.142775133252144,-0.257494568824768,0.059406377375126,-0.066477186977863,0.019371964037418,0.090897724032402));
res += mul(Get(s0,0,-dy), float4x4(0.055128250271082,0.146845549345016,0.079997286200523,-0.065090134739876,0.046789500862360,-0.073865957558155,-0.067603871226311,-0.065918281674385,-0.014195558615029,0.163892745971680,0.027245651930571,0.053140170872211,0.044036950916052,0.092390328645706,-0.156927034258842,-0.109762176871300));
res += mul(Get(s0,0,0), float4x4(0.230273902416229,0.219656392931938,0.247338473796844,-0.035335201770067,0.023039173334837,-0.137899681925774,0.084711782634258,-0.108616791665554,0.226171836256981,-0.108616739511490,-0.051351506263018,-0.007077019196004,-0.073395662009716,-0.148795306682587,0.248987033963203,-0.017376828938723));
res += mul(Get(s0,0,dy), float4x4(-0.071166276931763,0.057881861925125,0.065423943102360,0.021719535812736,0.065226681530476,-0.098167426884174,-0.101512372493744,0.058313861489296,-0.045395724475384,-0.090626694262028,0.162443220615387,-0.039303425699472,-0.118991233408451,-0.117484793066978,-0.114615589380264,0.054345041513443));
res += mul(Get(s0,dx,-dy), float4x4(-0.047165971249342,-0.322514295578003,-0.003735665697604,-0.077865943312645,0.014263821765780,0.148587748408318,-0.185535594820976,0.001970237586647,0.011075272224844,-0.103373438119888,0.009875255636871,-0.047302439808846,0.055297616869211,-0.076075956225395,-0.025747638195753,0.181264609098434));
res += mul(Get(s0,dx,0), float4x4(0.159073188900948,-0.071780115365982,0.035329263657331,0.108878359198570,-0.015272046439350,-0.035152323544025,-0.006463677156717,0.156182423233986,-0.185412645339966,-0.031867071986198,0.144553542137146,-0.102307140827179,-0.139662355184555,0.103737667202950,-0.117165870964527,0.012412409298122));
res += mul(Get(s0,dx,dy), float4x4(0.225753113627434,-0.093503460288048,-0.195426747202873,-0.057457629591227,-0.103333331644535,0.010556760244071,-0.099629722535610,-0.008684057742357,-0.090038932859898,0.048020530492067,-0.153555169701576,-0.093331113457680,-0.014513774774969,0.033624004572630,0.027822850272059,0.160332068800926));
res += mul(Get(s1,-dx,-dy), float4x4(0.027796853333712,-0.193490818142891,-0.065553091466427,-0.121818311512470,0.136606112122536,0.158538624644279,0.246274486184120,0.221025377511978,0.057850234210491,0.106217987835407,-0.006635077763349,-0.113693572580814,0.171946972608566,0.130789369344711,-0.231369152665138,0.160972118377686));
res += mul(Get(s1,-dx,0), float4x4(-0.025054223835468,0.038481045514345,0.148100391030312,0.021969785913825,-0.059233609586954,-0.149465575814247,-0.030067581683397,-0.138976842164993,-0.108591988682747,0.095982156693935,-0.048386760056019,0.050870951265097,-0.030839994549751,-0.093768917024136,0.075577549636364,0.116771668195724));
res += mul(Get(s1,-dx,dy), float4x4(-0.197699621319771,0.030711960047483,-0.181999310851097,-0.208729624748230,0.072399064898491,-0.112580589950085,-0.237408399581909,0.018090149387717,0.003075555898249,0.100017689168453,0.035336911678314,-0.072276644408703,0.013629029504955,0.226456254720688,-0.118977569043636,-0.071046665310860));
res += mul(Get(s1,0,-dy), float4x4(-0.038180552423000,-0.133462578058243,0.014058014377952,-0.084654077887535,-0.018190890550613,0.054146181792021,-0.046525701880455,0.028351720422506,-0.169454276561737,0.053385492414236,0.229560092091560,-0.044208589941263,-0.117292650043964,0.220281794667244,0.156076148152351,-0.051674570888281));
res += mul(Get(s1,0,0), float4x4(0.196812644600868,-0.068936318159103,0.139538660645485,0.110968865454197,-0.004423958249390,0.020814731717110,0.018603662028909,0.018070338293910,-0.039406917989254,0.068219117820263,-0.108529664576054,-0.336488813161850,0.022017631679773,0.087347738444805,0.136543646454811,-0.074939802289009));
res += mul(Get(s1,0,dy), float4x4(0.147574156522751,0.063114307820797,0.010027452372015,-0.067114144563675,0.054654017090797,-0.051684360951185,-0.067323654890060,0.086321562528610,-0.052378214895725,0.129660710692406,-0.023849861696362,0.046120878309011,-0.075997777283192,-0.023266699165106,0.021915292367339,-0.086900256574154));
res += mul(Get(s1,dx,-dy), float4x4(0.034127894788980,-0.183513343334198,-0.169674724340439,-0.083242982625961,0.030242878943682,0.044198505580425,0.139960378408432,0.029846793040633,0.011805258691311,0.011952403932810,-0.029216518625617,0.019375851377845,0.060200762003660,-0.087216272950172,0.112549267709255,0.066070787608624));
res += mul(Get(s1,dx,0), float4x4(-0.023732326924801,-0.162311628460884,0.121414586901665,0.093023948371410,0.196322992444038,0.042963575571775,0.070383556187153,0.025012450292706,0.200904339551926,-0.082982458174229,0.018588347360492,-0.204454466700554,0.303492009639740,0.112974815070629,-0.093607418239117,0.024995762854815));
res += mul(Get(s1,dx,dy), float4x4(0.075293771922588,-0.195325300097466,-0.023912899196148,0.164033219218254,0.158141136169434,0.083720423281193,0.061026807874441,0.017072480171919,-0.000650329457130,0.115690439939499,0.276549041271210,0.194869339466095,0.177051320672035,0.047854933887720,-0.027950512245297,-0.067872166633606));
res += mul(Get(s2,-dx,-dy), float4x4(-0.118100620806217,-0.056242812424898,-0.022224280983210,0.059134300798178,0.050847128033638,0.010996212251484,-0.112051472067833,0.077573165297508,0.073162525892258,-0.060057949274778,-0.157109111547470,-0.080536425113678,0.065974369645119,0.080145969986916,-0.044383965432644,0.197225600481033));
res += mul(Get(s2,-dx,0), float4x4(0.092229723930359,-0.011487747542560,-0.173052698373795,-0.110845193266869,-0.077882513403893,0.050383985042572,0.053083058446646,-0.203254759311676,-0.102492630481720,0.019796270877123,0.111756265163422,0.041357386857271,0.059302743524313,-0.026811741292477,-0.304155796766281,0.125993624329567));
res += mul(Get(s2,-dx,dy), float4x4(-0.060666836798191,0.034038208425045,-0.009069056250155,-0.140784949064255,0.148736149072647,-0.267058640718460,-0.018932851031423,0.271519809961319,-0.012897133827209,0.055808387696743,-0.018692780286074,0.062694519758224,-0.025908170267940,-0.063138119876385,0.032663598656654,0.162763610482216));
res += mul(Get(s2,0,-dy), float4x4(-0.084033027291298,0.231715559959412,0.063132606446743,-0.003053436288610,-0.073241956532001,-0.033720321953297,0.089342698454857,0.081501327455044,0.195571213960648,0.003988946788013,0.009388700127602,0.050750441849232,0.067043229937553,0.075117893517017,0.105262853205204,-0.183668121695518));
res += mul(Get(s2,0,0), float4x4(-0.177110061049461,0.340550243854523,-0.086619682610035,0.239517688751221,0.166034579277039,-0.041348855942488,0.119841307401657,0.035443559288979,0.019827857613564,0.099288716912270,-0.037991017103195,0.093353047966957,-0.198207482695580,-0.057663358747959,-0.046594895422459,-0.174139529466629));
res += mul(Get(s2,0,dy), float4x4(-0.170215830206871,0.011274206452072,0.111594453454018,-0.281872987747192,0.063154943287373,0.137148991227150,-0.042324207723141,0.003914369735867,0.198432102799416,-0.313447058200836,-0.009702143259346,0.125373691320419,-0.130275875329971,0.125524625182152,-0.163661718368530,-0.066276103258133));
res += mul(Get(s2,dx,-dy), float4x4(-0.081316642463207,0.028784764930606,-0.297444373369217,-0.064381659030914,-0.144190028309822,0.089702792465687,-0.202420219779015,-0.090353235602379,-0.186285406351089,0.034110274165869,-0.105352610349655,0.044313244521618,-0.061666805297136,-0.132014155387878,0.005637635942549,-0.137709125876427));
res += mul(Get(s2,dx,0), float4x4(0.107261247932911,-0.023165700957179,0.146285608410835,-0.066168412566185,0.018424030393362,-0.022334583103657,0.067363791167736,-0.003343828255311,0.031190780922771,-0.005206687375903,0.010961560532451,-0.100978888571262,0.010548759251833,-0.059905555099249,0.113946720957756,-0.089914590120316));
res += mul(Get(s2,dx,dy), float4x4(0.160417050123215,0.031390894204378,-0.244483917951584,0.114231526851654,0.128829091787338,0.025980593636632,0.070863842964172,-0.187692657113075,-0.057129133492708,-0.175008535385132,-0.000442970514996,-0.017390137538314,-0.026445737108588,-0.037750460207462,0.296624243259430,-0.162518933415413));
res += mul(Get(s3,-dx,-dy), float4x4(-0.017913298681378,-0.189228385686874,-0.008556486107409,0.176535725593567,0.071650817990303,0.090155772864819,0.021690418943763,-0.000688257103320,0.041052650660276,-0.041534774005413,0.078946433961391,0.138862118124962,0.017836106941104,-0.068781636655331,-0.249110087752342,0.147606015205383));
res += mul(Get(s3,-dx,0), float4x4(-0.127583116292953,-0.119451060891151,-0.065270729362965,0.019002936780453,0.025922451168299,-0.075391896069050,-0.021724281832576,0.013332003727555,0.076043017208576,-0.396535664796829,-0.104987204074860,0.065416879951954,0.104049131274223,0.190821245312691,0.038814105093479,-0.040256038308144));
res += mul(Get(s3,-dx,dy), float4x4(-0.142945170402527,0.079692162573338,-0.011319575831294,0.066347308456898,0.061762064695358,0.221983268857002,-0.071027621626854,0.016074970364571,-0.113298580050468,0.053980734199286,0.051805913448334,0.079941384494305,0.071941673755646,0.145396113395691,0.160906791687012,0.005816330667585));
res += mul(Get(s3,0,-dy), float4x4(-0.148992508649826,-0.124326646327972,0.005460322368890,0.080806560814381,-0.104011327028275,-0.070269890129566,-0.100805282592773,-0.085767820477486,0.084547877311707,0.128877401351929,0.031434696167707,0.019640335813165,0.123969875276089,0.136514008045197,0.002450052648783,0.002143373247236));
res += mul(Get(s3,0,0), float4x4(-0.284022063016891,-0.154974609613419,-0.153668344020844,0.034987673163414,0.040288075804710,0.003060429589823,0.099617704749107,0.135790899395943,0.010587598197162,-0.065891139209270,0.103789068758488,-0.077279165387154,0.129027575254440,0.126954689621925,0.059436429291964,-0.035672016441822));
res += mul(Get(s3,0,dy), float4x4(-0.067986845970154,0.058836776763201,0.096338495612144,0.004012653138489,0.101782433688641,-0.319092035293579,0.012331166304648,-0.016053885221481,-0.196290269494057,-0.189301118254662,0.094853892922401,0.074970051646233,0.241229802370071,0.188031673431396,-0.005244122818112,0.128710582852364));
res += mul(Get(s3,dx,-dy), float4x4(-0.110949411988258,0.307000368833542,-0.147809267044067,-0.156081587076187,0.157883569598198,-0.004854300990701,0.078148253262043,-0.059030648320913,0.122519597411156,-0.061583105474710,0.133609533309937,0.165207341313362,-0.007246754597872,-0.058298274874687,-0.322380274534225,-0.039124570786953));
res += mul(Get(s3,dx,0), float4x4(-0.028924083337188,-0.198108837008476,-0.005793280433863,-0.046725429594517,-0.078109145164490,0.107769265770912,0.156158283352852,-0.100095629692078,-0.119794405996799,0.258564740419388,-0.080127187073231,0.084092952311039,0.022281337529421,-0.073178783059120,-0.079507231712341,-0.051624722778797));
res += mul(Get(s3,dx,dy), float4x4(0.005773217882961,0.039983078837395,0.291831851005554,-0.068419702351093,-0.116002507507801,0.161415278911591,-0.133506849408150,-0.116556555032730,0.188995406031609,0.129786297678947,0.028386257588863,-0.086622491478920,-0.141485810279846,-0.231559649109840,0.139983937144279,-0.063993982970715));
return max(float4(0,0,0,0), res);
}
