sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.495330870151520,-0.010751985944808,-0.942071497440338,0.326117724180222,-0.113534234464169,-0.012246487662196,0.017315099015832,-0.047272570431232,-0.154463201761246,0.068216398358345,-0.313725262880325,-0.082153350114822,-0.002129827626050,0.011010347865522,0.009972948580980,-0.000845124246553));
res += mul(Get(s0,-dx,0), float4x4(-0.149531543254852,-0.004575315862894,-0.182900726795197,0.232582405209541,-0.272000044584274,-0.012916655279696,-0.186497271060944,-0.026171801611781,0.101063653826714,0.048715580254793,0.146625638008118,-0.127880662679672,0.001245824736543,-0.001596671063453,-0.015179923735559,0.006719685159624));
res += mul(Get(s0,-dx,dy), float4x4(-0.277859866619110,0.023934494704008,0.752693355083466,-0.066690504550934,-0.206298351287842,-0.005350441206247,-0.356026411056519,-0.013636779040098,0.118610985577106,-0.002319941064343,-0.005399343557656,-0.151424244046211,-0.001964231254533,-0.014049931429327,-0.004329266957939,-0.003405818948522));
res += mul(Get(s0,0,-dy), float4x4(-0.033509716391563,0.007823695428669,-0.001579584670253,0.182721406221390,-0.120537042617798,0.004222444724292,-0.247177988290787,-0.040322788059711,-0.103596314787865,0.044760152697563,-0.002566679613665,-0.045561812818050,0.015220195986331,0.001037274370901,0.005144088529050,-0.003774794749916));
res += mul(Get(s0,0,0), float4x4(0.482166379690170,-0.004795218817890,0.114272661507130,0.056151915341616,-0.202668786048889,-0.012360312044621,-0.333789169788361,-0.009575845673680,0.494002550840378,0.028053775429726,0.392592966556549,-0.108445562422276,-0.004815175663680,-0.003570510540158,0.005594333633780,0.005144279915839));
res += mul(Get(s0,0,dy), float4x4(0.160192266106606,0.023210823535919,0.233891546726227,-0.183324217796326,-0.016252193599939,-0.017525607720017,0.303731679916382,-0.027267767116427,0.292724937200546,-0.056320741772652,-0.149413183331490,-0.088655635714531,-0.005179548170418,-0.005310921464115,0.005979702342302,-0.008575925603509));
res += mul(Get(s0,dx,-dy), float4x4(-0.086531683802605,-0.024447530508041,0.601542115211487,0.108871445059776,0.037864204496145,-0.007871368899941,-0.252876430749893,-0.008632536046207,-0.008032965473831,-0.050198610872030,0.137977063655853,-0.078970022499561,-0.001613680389710,-0.000786883931141,0.000549593241885,0.022100454196334));
res += mul(Get(s0,dx,0), float4x4(0.341409415006638,-0.019319063052535,-0.165447890758514,-0.033835858106613,0.228008404374123,-0.019680719822645,-0.266664683818817,-0.036971043795347,0.226143673062325,-0.084865234792233,0.134500846266747,-0.093728311359882,-0.010346337221563,0.013783779926598,0.001956575550139,0.003431803546846));
res += mul(Get(s0,dx,dy), float4x4(-0.108860999345779,0.016165075823665,-0.431408166885376,-0.213968902826309,0.424518108367920,-0.026397615671158,0.261415600776672,-0.063807152211666,-0.423538893461227,-0.142972350120544,-0.352946639060974,-0.065836697816849,-0.006373978685588,0.003391568083316,0.002845504088327,-0.001841404242441));
res += mul(Get(s1,-dx,-dy), float4x4(-0.332731783390045,-0.037959028035402,0.040388867259026,-0.083029225468636,-0.018703844398260,0.013521861284971,-0.086166143417358,0.091727934777737,-0.062523156404495,0.036698017269373,0.074877209961414,0.027974152937531,-0.002633627736941,0.008857696317136,-0.009702747687697,-0.001820123754442));
res += mul(Get(s1,-dx,0), float4x4(-0.060111217200756,-0.011882992461324,0.023882592096925,-0.050097383558750,-0.059694163501263,-0.020216392353177,-0.038266811519861,0.022947574034333,-0.169505953788757,0.024314492940903,-0.166015684604645,0.003630458610132,-0.003838644595817,0.009242607280612,0.013571709394455,0.010288020595908));
res += mul(Get(s1,-dx,dy), float4x4(0.394981741905212,0.016309663653374,-0.464172422885895,-0.096948154270649,0.003557547228411,-0.011687424033880,-0.318265616893768,-0.024655474349856,-0.044978629797697,0.004483295138925,-0.327748328447342,0.006896278820932,0.008191620931029,0.000720062700566,0.004075729753822,-0.012444866821170));
res += mul(Get(s1,0,-dy), float4x4(-0.243675038218498,-0.032049465924501,0.047234524041414,-0.087349221110344,-0.013234413228929,0.003196478355676,-0.024600084871054,0.067458741366863,-0.037666566669941,-0.005008640699089,0.042739771306515,-0.014636865817010,-0.008110725320876,-0.006932617630810,-0.012755120173097,-0.000313102587825));
res += mul(Get(s1,0,0), float4x4(0.023634703829885,-0.014024037867785,0.433431208133698,-0.090393088757992,-0.072150692343712,-0.029973112046719,0.147926166653633,-0.011331773363054,-0.138341650366783,-0.013593961484730,0.114139221608639,-0.023862743750215,0.001140326843597,-0.003665814874694,-0.003189136972651,-0.004354834090918));
res += mul(Get(s1,0,dy), float4x4(0.045844964683056,0.013809523545206,-0.092430509626865,-0.083990551531315,-0.026557281613350,-0.022092105820775,-0.081660643219948,-0.048972077667713,-0.056001942604780,-0.032160412520170,0.076303780078888,-0.019692936912179,-0.002886368660256,-0.004358094185591,-0.007401989772916,0.011002613231540));
res += mul(Get(s1,dx,-dy), float4x4(0.182143643498421,-0.032076396048069,-0.053725369274616,-0.084093920886517,0.023861844092607,-0.008891147561371,-0.084619954228401,0.091277010738850,-0.089886486530304,-0.019917290657759,-0.229862883687019,-0.037239894270897,-0.004963153973222,0.001066887984052,-0.000910051516257,-0.003300602547824));
res += mul(Get(s1,dx,0), float4x4(0.328267931938171,-0.007076126523316,0.066635914146900,-0.091139174997807,0.004710331559181,-0.006300115957856,-0.036572020500898,-0.017262248322368,-0.211738154292107,-0.026759626343846,-0.097584426403046,-0.033991448581219,0.002629234455526,0.003677468048409,-0.005880403332412,-0.006509979721159));
res += mul(Get(s1,dx,dy), float4x4(-0.176356822252274,-0.010026176460087,-0.406657338142395,-0.068602778017521,-0.019890081137419,-0.025745555758476,-0.139569923281670,-0.053262300789356,-0.120215915143490,-0.034877177327871,0.229659348726273,0.016101043671370,0.008667025715113,-0.010417339392006,-0.000783168710768,0.016366938129067));
res += mul(Get(s2,-dx,-dy), float4x4(-0.028649926185608,0.078809969127178,0.792567729949951,-0.120591916143894,0.051336642354727,-0.112961724400520,0.229386910796165,-0.100615128874779,-0.010993819683790,0.003945366945118,-0.002556263934821,0.007926817052066,-0.000450468651252,-0.001363661605865,-0.031516626477242,-0.006218426395208));
res += mul(Get(s2,-dx,0), float4x4(-0.030253142118454,0.016247075051069,-0.174694210290909,-0.139854744076729,-0.188088536262512,-0.117010645568371,0.113297775387764,-0.080045931041241,0.004969843663275,0.005248244386166,-0.001703290850855,0.002594473771751,-0.008136837743223,0.001134272781201,-0.025586899369955,0.000313074124279));
res += mul(Get(s2,-dx,dy), float4x4(-0.430689245462418,-0.022492142394185,-0.497102707624435,-0.119856365025043,-0.137285619974136,-0.144888356328011,-0.176630795001984,-0.075395599007607,-0.003903091652319,0.001125472481363,0.009497965686023,-0.001982702640817,-0.040350377559662,-0.002665503416210,-0.038659058511257,0.003670291276649));
res += mul(Get(s2,0,-dy), float4x4(-0.167236819863319,0.045332856476307,0.709863603115082,-0.063015736639500,0.097029246389866,-0.014078449457884,-0.245511323213577,0.002392668277025,0.011017364449799,-0.001837965450250,-0.006929043214768,-0.002107969485223,-0.011381302960217,0.011114246211946,-0.020924143493176,0.004249035380781));
res += mul(Get(s2,0,0), float4x4(-0.009296221658587,0.014797262847424,-0.575040698051453,-0.111785531044006,-0.139021828770638,-0.059357192367315,-0.069371923804283,0.038521885871887,-0.003080413676798,0.008184182457626,-0.002099851379171,-0.014931600540876,-0.021058689802885,0.012238522991538,-0.030598271638155,0.028338285163045));
res += mul(Get(s2,0,dy), float4x4(-0.038375057280064,-0.030071487650275,-0.785194039344788,-0.045927409082651,-0.134480521082878,-0.112695984542370,0.315912663936615,0.022478127852082,-0.000665318744723,0.000955692434218,-0.016247753053904,-0.006747049279511,-0.012769377790391,-0.006067667156458,-0.051284823566675,-0.009608793072402));
res += mul(Get(s2,dx,-dy), float4x4(-0.185273021459579,0.028318645432591,1.258084774017334,-0.062722548842430,-0.166083097457886,-0.016422022134066,0.029252042993903,-0.095437638461590,-0.007382952142507,0.006034696940333,-0.008930310606956,-0.000757435918786,-0.013769696466625,-0.000392453803215,0.012335137464106,0.006568856537342));
res += mul(Get(s2,dx,0), float4x4(0.153562054038048,0.008142552338541,-0.205585494637489,-0.075424864888191,0.067580088973045,-0.022834880277514,0.034599587321281,-0.085493609309196,-0.003948879428208,0.006391807924956,0.001696372055449,-0.019508933648467,-0.027848904952407,0.003756426041946,-0.032500442117453,-0.001090274658054));
res += mul(Get(s2,dx,dy), float4x4(0.449060887098312,-0.033274833112955,-0.631946146488190,0.005327532533556,0.199488073587418,-0.040236003696918,-0.107060417532921,-0.058633819222450,-0.000194922438823,-0.003515896620229,-0.002892803400755,-0.011589540168643,-0.014958910644054,-0.006934682372957,-0.056404627859592,-0.003303361358121));
res += mul(Get(s3,-dx,-dy), float4x4(-0.022057307884097,-0.010230613872409,-0.073940761387348,-0.089697100222111,-0.009067319333553,0.001093438826501,-0.001545421546325,-0.006385405082256,0.320123106241226,0.038419898599386,0.238924711942673,-0.079833015799522,0.106200680136681,-0.020862812176347,-0.035317186266184,0.017692307010293));
res += mul(Get(s3,-dx,0), float4x4(-0.063445284962654,0.021193435415626,0.009215329773724,0.003105720970780,-0.010127224959433,-0.006584486458451,0.003740853630006,-0.007964421994984,-0.258637487888336,0.072583340108395,-0.365180015563965,-0.115531131625175,0.010703314095736,-0.076956808567047,-0.066467784345150,-0.014634764753282));
res += mul(Get(s3,-dx,dy), float4x4(0.193464607000351,0.093044258654118,0.034846249967813,-0.019735539332032,-0.012497813440859,0.005239416379482,-0.011047866195440,0.003813713090494,0.135418221354485,0.090929023921490,-0.719393730163574,-0.139393448829651,0.027831291779876,-0.144534587860107,-0.005298225209117,-0.051809910684824));
res += mul(Get(s3,0,-dy), float4x4(-0.106252551078796,0.006688488647342,0.030432146042585,-0.077479980885983,-0.008850374259055,-0.009663132950664,-0.000406279490562,-0.001217511482537,0.194522127509117,-0.011005034670234,0.366487145423889,-0.032249432057142,0.002446258440614,-0.031196672469378,0.090170837938786,0.000176921806997));
res += mul(Get(s3,0,0), float4x4(0.046578165143728,-0.037088330835104,0.064111933112144,0.000103346072137,-0.009251577779651,0.003655962413177,-0.000920631748158,0.013861201703548,-0.292669355869293,-0.000527770724148,0.442943662405014,-0.091652892529964,-0.036527581512928,-0.035848330706358,0.023167451843619,-0.004741272889078));
res += mul(Get(s3,0,dy), float4x4(-0.007914203219116,0.001028076047078,0.019023377448320,-0.020337576046586,0.002203579759225,-0.002988196210936,0.003350939135998,0.010688385926187,-0.053419124335051,-0.014467528089881,0.251586765050888,-0.134241655468941,0.023032190278172,-0.112107679247856,-0.096429981291294,-0.031561087816954));
res += mul(Get(s3,dx,-dy), float4x4(-0.004608040209860,0.054560877382755,0.073455743491650,-0.094193555414677,-0.003487807000056,-0.006976689212024,-0.004837404005229,-0.017428783699870,-0.084996357560158,0.069924063980579,-0.431627362966537,-0.052084203809500,0.075485706329346,-0.095840990543365,0.164198696613312,0.011755782179534));
res += mul(Get(s3,dx,0), float4x4(0.152420580387115,-0.025590842589736,0.020070845261216,-0.025862038135529,0.008524467237294,-0.000415372138377,-0.012049080803990,-0.004430307075381,-0.382677286863327,0.028172589838505,-0.010216674767435,-0.064282387495041,-0.123218521475792,-0.082187078893185,-0.029147632420063,0.006573570426553));
res += mul(Get(s3,dx,dy), float4x4(-0.125392004847527,-0.015797227621078,-0.151545107364655,-0.038466602563858,-0.008851804770529,0.012362953275442,-0.005114167463034,-0.003554094349965,-0.189929053187370,0.004726270213723,0.325969994068146,-0.041291873902082,-0.040382280945778,-0.090361490845680,0.000935286690947,-0.002034752396867));
return max(float4(0,0,0,0), res);
}
