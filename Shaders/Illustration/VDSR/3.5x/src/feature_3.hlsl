sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.285201102495193,0.052460346370935,-0.009155201725662,-0.205215707421303) * Get(-dx,-dy);
res += float4(0.026626946404576,0.023570276796818,-0.097697824239731,0.126576945185661) * Get(-dx,0);
res += float4(-0.096884638071060,-0.308092951774597,-0.091586820781231,-0.124110795557499) * Get(-dx,dy);
res += float4(-0.019948642700911,0.085328899323940,0.065739132463932,-0.003074583830312) * Get(0,-dy);
res += float4(-0.256250619888306,0.009245351888239,-0.008986501023173,0.165998876094818) * Get(0,0);
res += float4(-0.004739340860397,-0.081320993602276,-0.020161125808954,0.016575818881392) * Get(0,dy);
res += float4(-0.186320528388023,-0.167786076664925,-0.087927341461182,0.127646848559380) * Get(dx,-dy);
res += float4(-0.169930532574654,-0.174069255590439,-0.101955913007259,-0.099631331861019) * Get(dx,0);
res += float4(0.088684655725956,-0.194208011031151,0.136195987462997,-0.032335046678782) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
