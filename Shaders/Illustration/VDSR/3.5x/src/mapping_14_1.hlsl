sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.308669626712799,0.012107672169805,0.226553708314896,-0.309452652931213,-0.107805147767067,-0.122978970408440,-0.049734167754650,-0.321070075035095,0.084239661693573,0.110487155616283,0.019604085013270,0.112985074520111,0.104932755231857,-0.083298213779926,-0.061944730579853,-0.129527449607849));
res += mul(Get(s0,-dx,0), float4x4(0.265216112136841,-0.068733952939510,0.102349236607552,-0.114044852554798,-0.156522199511528,-0.053781427443027,-0.040420394390821,0.073063105344772,0.268948078155518,0.085061922669411,0.039559509605169,0.110880151391029,0.065744817256927,-0.059582315385342,-0.014206272549927,-0.037025399506092));
res += mul(Get(s0,-dx,dy), float4x4(0.139041423797607,-0.024653248488903,-0.080936990678310,-0.060905188322067,0.049805104732513,0.086165003478527,-0.040077511221170,0.015121723525226,0.083049476146698,0.101082764565945,-0.028335982933640,0.079460591077805,-0.033972896635532,-0.027697676792741,-0.108985491096973,-0.347792983055115));
res += mul(Get(s0,0,-dy), float4x4(0.099731221795082,-0.133896797895432,0.185990229249001,-0.277514606714249,-0.040589481592178,0.050906572490931,0.094200029969215,-0.104480735957623,0.117319382727146,0.051799725741148,-0.030842347070575,0.383032262325287,-0.055943246930838,-0.063754819333553,-0.058752819895744,0.050945926457644));
res += mul(Get(s0,0,0), float4x4(-0.291923433542252,-0.031616639345884,-0.078727670013905,0.244572743773460,-0.041068822145462,0.018832430243492,0.120884604752064,0.108630850911140,0.335374265909195,-0.116364903748035,-0.043939907103777,0.409526795148849,0.079592861235142,-0.100643180310726,0.028796680271626,0.114818282425404));
res += mul(Get(s0,0,dy), float4x4(-0.183711081743240,0.004197513684630,-0.152464866638184,0.250159621238708,0.043932672590017,0.125190973281860,0.135358259081841,0.130504935979843,0.274071544408798,-0.053814977407455,-0.040591578930616,0.060168366879225,0.191381305456161,0.007384130731225,0.020876532420516,-0.085937410593033));
res += mul(Get(s0,dx,-dy), float4x4(-0.052627351135015,-0.257347583770752,0.094069160521030,0.037115678191185,-0.131123706698418,-0.016991090029478,-0.052206326276064,-0.246399611234665,0.056318085640669,0.085206508636475,0.011904394254088,-0.130020990967751,0.019814182072878,0.008077384904027,-0.263221800327301,0.185656830668449));
res += mul(Get(s0,dx,0), float4x4(-0.066674388945103,-0.200148776173592,-0.260336846113205,0.032926205545664,-0.040505707263947,0.100470013916492,0.061937306076288,-0.230887517333031,0.175941362977028,-0.066689081490040,-0.002265098737553,0.402867972850800,-0.142106533050537,0.076088346540928,-0.077928021550179,0.156580090522766));
res += mul(Get(s0,dx,dy), float4x4(0.178210631012917,-0.040829196572304,-0.007951189763844,-0.137928873300552,0.082591593265533,0.106335677206516,0.136270806193352,-0.174850106239319,-0.051684506237507,0.041512105613947,-0.026725210249424,0.158026769757271,0.009264632128179,0.149708673357964,-0.105165310204029,0.209550440311432));
res += mul(Get(s1,-dx,-dy), float4x4(-0.111235201358795,-0.090916521847248,-0.195079967379570,0.133962288498878,0.002640164224431,-0.014792339876294,0.040277715772390,0.261728942394257,0.059613917022943,-0.076730340719223,-0.075455151498318,0.128031939268112,-0.039447523653507,0.000897549558431,-0.109045915305614,-0.011416041292250));
res += mul(Get(s1,-dx,0), float4x4(-0.179156690835953,-0.069572277367115,-0.164604350924492,0.261006265878677,-0.049745209515095,0.041556876152754,0.048296466469765,0.208496674895287,0.230283811688423,-0.002787482459098,-0.015156992711127,-0.290970176458359,0.315126150846481,0.104975000023842,-0.054626699537039,-0.128391414880753));
res += mul(Get(s1,-dx,dy), float4x4(0.000056320157455,-0.061201646924019,0.019494479522109,0.000449936283985,-0.146955072879791,-0.043963082134724,0.072261139750481,-0.073727205395699,0.095796048641205,0.135997071862221,0.018696336075664,-0.248905882239342,-0.025769175961614,-0.088042981922626,0.011022837832570,0.007255744654685));
res += mul(Get(s1,0,-dy), float4x4(-0.161073267459869,0.000719371601008,-0.201650008559227,0.028966318815947,-0.084447428584099,-0.174179255962372,-0.044894561171532,0.287933766841888,0.187608838081360,0.021418711170554,0.095524080097675,0.124650098383427,0.031621102243662,0.012921039946377,-0.069490648806095,0.093885228037834));
res += mul(Get(s1,0,0), float4x4(-0.030995700508356,-0.039641335606575,-0.102895013988018,0.344402492046356,-0.101065091788769,-0.007912486791611,-0.248342394828796,0.367828905582428,0.116579741239548,0.044984955340624,0.075190387666225,-0.268210589885712,0.220867738127708,0.042959362268448,-0.115476489067078,0.192094087600708));
res += mul(Get(s1,0,dy), float4x4(0.171018049120903,-0.022373234853148,0.061702858656645,-0.110198967158794,-0.153129518032074,-0.114336490631104,-0.231474190950394,0.096727654337883,-0.194872602820396,0.065745644271374,-0.010941053740680,-0.078571841120720,-0.018595589324832,-0.076642453670502,0.099664874374866,0.014215778559446));
res += mul(Get(s1,dx,-dy), float4x4(-0.061191376298666,-0.086919128894806,-0.116500355303288,0.036277703940868,-0.047935169190168,-0.176892206072807,0.039721783250570,-0.133422851562500,0.103314675390720,0.107908211648464,-0.095572926104069,0.243924111127853,0.183095738291740,0.083699591457844,0.026028357446194,0.193280309438705));
res += mul(Get(s1,dx,0), float4x4(0.059143707156181,0.035339422523975,-0.080003902316093,0.056912165135145,-0.050981041043997,-0.037288580089808,-0.103952370584011,0.128654941916466,-0.078277908265591,-0.080001130700111,-0.029000543057919,0.125397384166718,0.182492554187775,0.131844088435173,0.036545511335135,0.138785898685455));
res += mul(Get(s1,dx,dy), float4x4(0.019810430705547,0.041393302381039,0.044732458889484,-0.152671486139297,-0.102411203086376,-0.075257219374180,-0.211343884468079,-0.236613586544991,0.029573868960142,0.176573649048805,-0.052597638219595,0.411545634269714,-0.076446771621704,0.044422190636396,0.135182604193687,0.024077441543341));
res += mul(Get(s2,-dx,-dy), float4x4(0.093968480825424,-0.054756950587034,0.020489402115345,0.094353668391705,-0.057302925735712,0.086214751005173,-0.066227689385414,0.009635758586228,0.143140330910683,0.141350567340851,0.101686045527458,-0.193462014198303,0.192662358283997,0.051184963434935,-0.011155792512000,0.053422369062901));
res += mul(Get(s2,-dx,0), float4x4(0.130830720067024,0.037873145192862,-0.055778626352549,0.148293182253838,-0.031120453029871,-0.113806217908859,-0.266755908727646,0.120042309165001,0.009630137123168,0.070795342326164,0.042471852153540,0.096629500389099,-0.058106042444706,-0.081452019512653,-0.069148413836956,0.177611708641052));
res += mul(Get(s2,-dx,dy), float4x4(0.217148855328560,-0.026911413297057,-0.025783115997910,-0.223312586545944,0.022895287722349,-0.122619710862637,-0.139763489365578,0.310290813446045,-0.033532645553350,-0.067391589283943,0.037983477115631,0.039387363940477,-0.247134596109390,-0.049495052546263,-0.054928921163082,0.602910697460175));
res += mul(Get(s2,0,-dy), float4x4(-0.071959979832172,-0.159719437360764,-0.112870685756207,0.122749775648117,0.178000584244728,0.066092908382416,0.012016131542623,-0.184509977698326,0.102845281362534,0.014546017162502,0.094067104160786,-0.186311051249504,0.191673874855042,0.024252293631434,-0.004280221182853,0.009672122076154));
res += mul(Get(s2,0,0), float4x4(-0.307754904031754,-0.106064714491367,-0.195382177829742,0.513130366802216,0.168986991047859,-0.038692049682140,-0.183912143111229,-0.366225242614746,-0.078050799667835,-0.303488790988922,-0.101102873682976,-0.115157082676888,0.016059119254351,-0.102409355342388,0.055110901594162,0.043105423450470));
res += mul(Get(s2,0,dy), float4x4(0.091484792530537,-0.138677880167961,-0.178662091493607,0.193575263023376,0.047834645956755,-0.155983388423920,-0.237337276339531,0.064216479659081,0.003571294248104,-0.051966868340969,-0.001360362977721,0.107580669224262,0.020447136834264,-0.070911608636379,-0.092935629189014,0.146632701158524));
res += mul(Get(s2,dx,-dy), float4x4(-0.146095961332321,-0.270185232162476,-0.145950093865395,-0.061064112931490,-0.087166093289852,0.035131871700287,0.039712030440569,-0.067933164536953,-0.164826303720474,-0.145316064357758,0.175234019756317,-0.200108036398888,0.063927359879017,-0.046432379633188,-0.086431123316288,0.224654749035835));
res += mul(Get(s2,dx,0), float4x4(-0.148220211267471,-0.041474912315607,-0.149473428726196,0.510467350482941,-0.017837923020124,-0.056332688778639,-0.061010237783194,-0.230638176202774,-0.145036786794662,-0.198695123195648,0.010067245922983,-0.057239785790443,0.133133903145790,-0.003098941640928,-0.018004111945629,0.087738819420338));
res += mul(Get(s2,dx,dy), float4x4(-0.132453516125679,-0.052887193858624,-0.096106648445129,0.229073956608772,-0.050893113017082,-0.042509105056524,-0.149526789784431,0.229546949267387,-0.092616252601147,-0.090266749262810,-0.057544320821762,0.089471913874149,0.248087868094444,0.094538003206253,0.072998814284801,-0.102545626461506));
res += mul(Get(s3,-dx,-dy), float4x4(0.119277767837048,0.030828328803182,0.063766285777092,-0.291449993848801,-0.040372829884291,-0.046875748783350,-0.053402546793222,0.165233135223389,-0.136101782321930,-0.100497350096703,-0.050177637487650,0.161868095397949,-0.085953168570995,-0.068891510367393,0.028484551236033,0.348437666893005));
res += mul(Get(s3,-dx,0), float4x4(0.144006580114365,-0.040797293186188,0.032501991838217,-0.380248874425888,-0.052778530865908,-0.021078124642372,-0.071593098342419,0.099508792161942,-0.187149941921234,-0.123077951371670,0.038826342672110,0.185555770993233,-0.087305605411530,-0.129476249217987,-0.039723303169012,0.150917023420334));
res += mul(Get(s3,-dx,dy), float4x4(0.136346071958542,0.022397998720407,0.107613824307919,-0.102991625666618,-0.011580562219024,0.083172872662544,0.035601239651442,0.037448797374964,-0.125130057334900,-0.183819442987442,0.049128279089928,-0.001317428890616,-0.136464014649391,0.127483397722244,-0.200288489460945,-0.160652652382851));
res += mul(Get(s3,0,-dy), float4x4(0.024568090215325,0.058295834809542,0.085096009075642,-0.176719233393669,0.022755799815059,-0.074084930121899,-0.114851534366608,0.010302763432264,-0.050550308078527,0.194659069180489,0.083050921559334,0.075747132301331,0.052733432501554,-0.061274159699678,0.067024953663349,-0.143854409456253));
res += mul(Get(s3,0,0), float4x4(0.041472256183624,-0.024767559021711,0.066369652748108,-0.195135116577148,-0.025818595662713,0.015050530433655,-0.047808133065701,-0.000576473365072,-0.072495833039284,-0.152047142386436,-0.033249374479055,0.148786753416061,0.106292761862278,-0.096997417509556,0.110779315233231,-0.091380245983601));
res += mul(Get(s3,0,dy), float4x4(-0.150018304586411,-0.090267546474934,0.049568448215723,0.029985221102834,0.051910951733589,0.090036958456039,0.030621947720647,-0.110454708337784,-0.085085839033127,-0.043486192822456,-0.018831996247172,0.036413703113794,0.178685352206230,0.197824656963348,-0.099385149776936,-0.195967420935631));
res += mul(Get(s3,dx,-dy), float4x4(0.073274880647659,-0.060740821063519,0.084891073405743,0.004709421191365,0.079118572175503,-0.021528448909521,-0.056255511939526,0.105844497680664,-0.075008399784565,0.060272641479969,0.082916684448719,0.005384678021073,0.103626377880573,-0.022090215235949,0.102992199361324,-0.205415695905685));
res += mul(Get(s3,dx,0), float4x4(-0.066622219979763,-0.166963487863541,-0.072765305638313,0.102366931736469,-0.051683325320482,-0.069350846111774,-0.046405535191298,-0.016810867935419,-0.061971113085747,0.162009939551353,-0.124872311949730,0.108422465622425,0.018883040174842,-0.052405245602131,0.136810243129730,-0.340914368629456));
res += mul(Get(s3,dx,dy), float4x4(-0.186499729752541,0.093645319342613,-0.076829195022583,0.165828377008438,0.149517104029655,0.093505918979645,0.015977466478944,-0.225699648261070,-0.023293534293771,0.003684717463329,0.002073539886624,0.160411357879639,0.268272340297699,0.090985611081123,0.007522120140493,-0.356085896492004));
return max(float4(0,0,0,0), res);
}
