sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.070583648979664,0.008577606640756,0.063267067074776,-0.027088683098555,-0.007236680481583,-0.032982967793941,-0.024382378906012,0.074481740593910,0.014762082137167,0.015091915614903,0.074997961521149,0.051960460841656,-0.075183257460594,0.013684683479369,-0.140752062201500,-0.014909410849214));
res += mul(Get(s0,-dx,0), float4x4(0.129829555749893,-0.083928294479847,0.122405476868153,0.016976587474346,0.088823378086090,-0.045085880905390,0.031961426138878,-0.063273362815380,0.007235029712319,-0.075326867401600,0.012711914256215,0.046041134744883,-0.005204667337239,0.014686252921820,-0.049340415745974,-0.006050521042198));
res += mul(Get(s0,-dx,dy), float4x4(-0.045589368790388,0.105771303176880,-0.036696549504995,-0.018392277881503,-0.004677762743086,-0.084629610180855,0.078993938863277,-0.060634151101112,0.037096988409758,0.048916392028332,-0.016797397285700,-0.026093525812030,0.134304389357567,0.079734988510609,-0.034357387572527,-0.042370133101940));
res += mul(Get(s0,0,-dy), float4x4(-0.020044004544616,-0.001338878879324,0.061842065304518,-0.055252987891436,0.030821030959487,-0.066905133426189,-0.037943705916405,0.196840763092041,0.010837216861546,0.178369194269180,0.032562598586082,0.066269390285015,0.012599042616785,-0.069817706942558,-0.010721410624683,-0.039115689694881));
res += mul(Get(s0,0,0), float4x4(0.016972530633211,0.025770738720894,-0.042405620217323,0.060847043991089,-0.025652792304754,-0.136735588312149,-0.038163717836142,-0.132977366447449,0.039097815752029,0.049325525760651,-0.148587122559547,-0.050485175102949,-0.031490214169025,-0.095443271100521,0.050145074725151,-0.300243765115738));
res += mul(Get(s0,0,dy), float4x4(-0.036130245774984,-0.012481420300901,-0.004498690832406,-0.036875318735838,0.076005466282368,0.023373223841190,0.027967385947704,-0.060890849679708,0.000396776013076,-0.066099561750889,0.031931649893522,0.015130217187107,0.011379366740584,-0.021497787907720,0.104281112551689,0.034788522869349));
res += mul(Get(s0,dx,-dy), float4x4(0.005682426504791,-0.025223311036825,-0.000649109890219,0.073810808360577,0.021127857267857,-0.174924656748772,0.106218226253986,0.159910649061203,-0.046058066189289,-0.022444162517786,0.067152455449104,0.056215185672045,0.004370822571218,0.216675668954849,-0.137104645371437,-0.091416575014591));
res += mul(Get(s0,dx,0), float4x4(0.042370766401291,-0.102798022329807,-0.025760268792510,0.083976738154888,-0.054846163839102,-0.112343400716782,-0.094339743256569,-0.114507928490639,-0.015854405239224,-0.042548745870590,0.026238370686769,-0.044734969735146,0.111092552542686,-0.016349002718925,-0.032934874296188,-0.132068291306496));
res += mul(Get(s0,dx,dy), float4x4(0.023933351039886,0.008264283649623,0.053548600524664,0.003393295453861,-0.021562106907368,-0.173248708248138,-0.008649625815451,-0.075373724102974,-0.052600253373384,-0.191991224884987,0.067746713757515,-0.005458609666675,0.007876813411713,-0.041575532406569,-0.145694673061371,-0.015503040514886));
res += mul(Get(s1,-dx,-dy), float4x4(-0.132033586502075,-0.057741727679968,0.015733208507299,-0.030338291078806,-0.032074432820082,0.020690396428108,0.056443214416504,-0.035600963979959,0.063094347715378,0.033776093274355,-0.004657630342990,-0.120148643851280,-0.032116416841745,0.116945371031761,0.099181950092316,0.119980998337269));
res += mul(Get(s1,-dx,0), float4x4(-0.172784104943275,-0.188005715608597,-0.055410645902157,0.152502298355103,-0.094788052141666,-0.051128525286913,-0.035016462206841,-0.065125167369843,-0.154473856091499,0.063670933246613,-0.108788192272186,0.041551418602467,0.022138774394989,-0.082099154591560,-0.084557719528675,-0.110965266823769));
res += mul(Get(s1,-dx,dy), float4x4(-0.139461606740952,0.193970486521721,-0.259803503751755,0.074896141886711,-0.035146258771420,-0.138656377792358,-0.148553207516670,-0.022599358111620,0.023989483714104,-0.107362732291222,0.110833734273911,-0.149136081337929,-0.087570592761040,-0.099908433854580,0.042442347854376,0.017250906676054));
res += mul(Get(s1,0,-dy), float4x4(-0.163828447461128,0.007451246026903,-0.003222550731152,0.017729248851538,0.066772304475307,0.025566106662154,0.142328172922134,-0.018598414957523,-0.124957412481308,0.058278694748878,-0.093964800238609,-0.021289784461260,0.081647202372551,0.249929994344711,-0.016247417777777,0.318142712116241));
res += mul(Get(s1,0,0), float4x4(-0.150950089097023,0.096824489533901,-0.048464093357325,-0.125272542238235,-0.024147210642695,-0.146743312478065,0.011924679391086,-0.020412700250745,0.041921209543943,0.076437026262283,-0.094156928360462,-0.066908173263073,0.083801075816154,0.059599626809359,0.021518962457776,-0.094691321253777));
res += mul(Get(s1,0,dy), float4x4(-0.173155263066292,-0.194864735007286,-0.107083931565285,0.102563738822937,-0.042938139289618,-0.176392972469330,-0.111815296113491,-0.007215554825962,-0.007708573248237,-0.066412523388863,0.156315401196480,-0.040434479713440,0.078271619975567,-0.020520785823464,-0.152684569358826,-0.040944479405880));
res += mul(Get(s1,dx,-dy), float4x4(-0.079408854246140,-0.120897673070431,-0.032295756042004,-0.021761961281300,0.096163779497147,-0.154004111886024,0.016064656898379,0.115441642701626,0.005680677480996,0.058499693870544,-0.086784370243549,-0.101618178188801,0.017095433548093,0.029387475922704,-0.043015696108341,-0.233838915824890));
res += mul(Get(s1,dx,0), float4x4(-0.148924425244331,-0.010774562135339,-0.012271072715521,0.093697756528854,0.000617124955170,-0.311259686946869,-0.109058864414692,-0.182402282953262,0.106503702700138,-0.060194458812475,-0.023653501644731,-0.012500680983067,-0.046854879707098,-0.162243336439133,0.056343358010054,-0.021689724177122));
res += mul(Get(s1,dx,dy), float4x4(-0.105864852666855,-0.132278054952621,-0.177938520908356,0.151203289628029,0.110373340547085,-0.346110820770264,-0.130546256899834,0.111782960593700,-0.057572245597839,-0.068907491862774,0.011348138563335,0.029429363086820,-0.021741088479757,-0.076693758368492,-0.060086220502853,-0.018951812759042));
res += mul(Get(s2,-dx,-dy), float4x4(-0.006191697437316,0.022390713915229,0.015012314543128,-0.043075013905764,0.031015411019325,0.022462045773864,-0.054887130856514,0.094914615154266,0.024905361235142,0.012039575725794,0.147356331348419,0.130712226033211,-0.082594461739063,0.052929993718863,-0.017406053841114,0.028591614216566));
res += mul(Get(s2,-dx,0), float4x4(0.030087027698755,0.285270571708679,0.022423991933465,-0.127147912979126,0.059243734925985,0.034862685948610,-0.057769138365984,-0.168105244636536,-0.039740175008774,-0.022402316331863,0.105854138731956,-0.062873110175133,-0.045367989689112,-0.041710693389177,0.001779192127287,0.036358095705509));
res += mul(Get(s2,-dx,dy), float4x4(-0.182191595435143,0.066088803112507,-0.066213093698025,0.042719095945358,-0.121419779956341,-0.091723397374153,-0.117007680237293,-0.117588885128498,0.015055961906910,-0.180326551198959,0.093565560877323,-0.017719218507409,-0.101336665451527,-0.015848126262426,0.013638277538121,0.010085563175380));
res += mul(Get(s2,0,-dy), float4x4(0.088510416448116,-0.156600594520569,-0.061046369373798,0.001081375172362,-0.052939873188734,-0.065232329070568,-0.102230854332447,0.006512713152915,-0.029756203293800,0.331090688705444,0.016027279198170,-0.057599928230047,-0.153807118535042,0.002209291560575,-0.055426452308893,0.072544910013676));
res += mul(Get(s2,0,0), float4x4(0.079617410898209,-0.159574642777443,0.062606982886791,-0.028013043105602,-0.032453618943691,0.109908871352673,-0.010034084320068,-0.086678005754948,-0.097928673028946,0.145978182554245,-0.025345845147967,0.083742022514343,0.086320713162422,0.024520657956600,-0.148774027824402,-0.062935009598732));
res += mul(Get(s2,0,dy), float4x4(-0.057571083307266,-0.263817787170410,-0.032921489328146,-0.030080541968346,-0.089151807129383,0.128510057926178,-0.020637750625610,-0.091836586594582,-0.026284812018275,-0.182430312037468,-0.019053833559155,-0.137372791767120,0.088454648852348,0.046285223215818,-0.050762612372637,-0.020730646327138));
res += mul(Get(s2,dx,-dy), float4x4(-0.042059209197760,-0.210485368967056,-0.028844423592091,0.090523786842823,-0.014230482280254,-0.202232807874680,-0.015029405243695,-0.077514141798019,0.042042601853609,0.037301581352949,-0.104749441146851,-0.100774198770523,-0.164182126522064,0.030481280758977,0.001115517341532,0.051380347460508));
res += mul(Get(s2,dx,0), float4x4(-0.025358021259308,0.182998016476631,-0.066653005778790,0.010152911767364,0.014208750799298,-0.244293749332428,0.191570013761520,-0.039679899811745,-0.016299691051245,-0.221984863281250,-0.026385411620140,-0.047368358820677,0.011496298015118,-0.152191564440727,0.025632012635469,0.033349134027958));
res += mul(Get(s2,dx,dy), float4x4(0.084915146231651,0.014110613614321,-0.154803112149239,-0.044986300170422,-0.228635564446449,-0.039739906787872,-0.017872635275126,0.067389711737633,-0.097530499100685,-0.170248612761497,-0.101263269782066,0.029529174789786,0.040873322635889,0.066893689334393,0.055103451013565,0.134842842817307));
res += mul(Get(s3,-dx,-dy), float4x4(-0.024035390466452,-0.140685722231865,0.053780250251293,0.245785728096962,-0.019583428278565,0.082369998097420,-0.007898310199380,0.099337399005890,-0.069571226835251,-0.057787083089352,-0.021310739219189,0.110767379403114,-0.097504913806915,-0.065407775342464,-0.096905589103699,-0.288307070732117));
res += mul(Get(s3,-dx,0), float4x4(-0.018072834238410,-0.145312875509262,0.035475809127092,0.087575361132622,0.083932854235172,-0.009093656204641,-0.021049493923783,-0.036059513688087,-0.075523748993874,0.148017033934593,0.008333828300238,0.008303049020469,0.020109744742513,-0.008062748238444,-0.105970643460751,-0.040521010756493));
res += mul(Get(s3,-dx,dy), float4x4(-0.133879646658897,-0.018953997641802,-0.162096992135048,0.072153992950916,-0.059294171631336,-0.134535342454910,-0.357059657573700,-0.126231029629707,0.033838409930468,0.033676251769066,0.212097764015198,0.098969250917435,-0.118298649787903,-0.038184016942978,0.067188337445259,0.011747159995139));
res += mul(Get(s3,0,-dy), float4x4(0.024808015674353,-0.032763026654720,0.018106713891029,0.026311784982681,0.069530881941319,0.066285356879234,0.008178126066923,0.092063337564468,0.076947160065174,-0.136676520109177,-0.050137646496296,0.011958322487772,-0.036231726408005,0.105428665876389,-0.079171359539032,-0.111816860735416));
res += mul(Get(s3,0,0), float4x4(0.004869644995779,-0.080711849033833,-0.200764685869217,-0.090765185654163,0.041694272309542,-0.050973027944565,0.016150321811438,-0.163007989525795,0.111085377633572,0.034727320075035,-0.039946105331182,-0.085190922021866,-0.013365009799600,-0.072409749031067,-0.015124306082726,-0.211791336536407));
res += mul(Get(s3,0,dy), float4x4(-0.165213659405708,0.006769438739866,-0.046227786689997,-0.035208623856306,0.009266264736652,0.100809693336487,-0.167656123638153,-0.006843350827694,0.066238306462765,0.026414964348078,0.058748539537191,-0.122137770056725,0.111899740993977,-0.047195676714182,0.048198737204075,-0.028908126056194));
res += mul(Get(s3,dx,-dy), float4x4(-0.002466232981533,0.026339551433921,0.178846418857574,0.144006997346878,0.040202602744102,0.158386677503586,0.048452798277140,0.130554676055908,-0.097321055829525,-0.009821758605540,0.071366034448147,0.147659122943878,-0.072788029909134,0.239665314555168,-0.069332689046860,-0.078111253678799));
res += mul(Get(s3,dx,0), float4x4(0.037645697593689,-0.018483996391296,-0.049003042280674,0.071941733360291,0.016610275954008,0.059323623776436,0.099223427474499,-0.030415724962950,0.044722996652126,0.001716428785585,0.145439237356186,0.086214259266853,-0.094449505209923,-0.095388852059841,0.090968437492847,0.008917459286749));
res += mul(Get(s3,dx,dy), float4x4(-0.083448760211468,0.104676946997643,0.093560799956322,0.121064074337482,0.008322227746248,-0.153637498617172,0.088849715888500,0.001176893711090,-0.021894320845604,-0.025346769019961,0.131128266453743,0.001656059757806,-0.174888536334038,-0.106365568935871,-0.033128257840872,-0.069661095738411));
return max(float4(0,0,0,0), res);
}
