sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.100223861634731,-0.043679308146238,-0.040700532495975,-0.062441170215607,-0.041014708578587,-0.155409008264542,-0.017193095758557,0.598603487014771,-0.087397038936615,-0.033580575138330,-0.042811416089535,-0.015360777266324,-0.012530599720776,-0.031270280480385,0.109540708363056,-0.195288926362991));
res += mul(Get(s0,-dx,0), float4x4(0.124713368713856,-0.034135121852160,-0.047620747238398,0.010205894708633,-0.053783148527145,-0.250712424516678,-0.053494986146688,0.207159131765366,-0.081134930253029,0.093588702380657,-0.052261058241129,0.088216014206409,-0.082630440592766,-0.125817269086838,-0.045581139624119,-0.094828441739082));
res += mul(Get(s0,-dx,dy), float4x4(0.061128076165915,-0.158610120415688,-0.086093328893185,0.071421146392822,-0.138324946165085,-0.097951702773571,-0.083126373589039,-0.050240766257048,-0.044681448489428,0.030576054006815,0.016970876604319,0.199759975075722,-0.175022423267365,-0.113881543278694,-0.054125327616930,0.085828371345997));
res += mul(Get(s0,0,-dy), float4x4(-0.029822135344148,0.195800021290779,-0.019844224676490,0.078528039157391,-0.150492131710052,-0.051297768950462,-0.041839443147182,-0.127190068364143,-0.061688914895058,-0.099618479609489,-0.051308803260326,-0.033957581967115,0.050611853599548,-0.102668248116970,-0.026399726048112,-0.134163841605186));
res += mul(Get(s0,0,0), float4x4(0.019020531326532,0.347547918558121,0.001656690961681,0.087800845503807,-0.014513156376779,0.126934617757797,-0.077560104429722,0.178162679076195,-0.120229288935661,0.068955831229687,-0.082116246223450,0.029339361935854,-0.079506784677505,-0.150307431817055,-0.073911421000957,-0.058374360203743));
res += mul(Get(s0,0,dy), float4x4(0.042383998632431,0.019514210522175,-0.114824019372463,0.000340571947163,-0.020436987280846,0.202476784586906,0.034200631082058,-0.152627930045128,-0.069497652351856,0.032029628753662,0.059468470513821,0.019336968660355,-0.132594436407089,-0.061713017523289,-0.005057003814727,-0.054340168833733));
res += mul(Get(s0,dx,-dy), float4x4(0.190009057521820,0.194840490818024,-0.127997517585754,-0.103770397603512,0.151433706283569,-0.226460635662079,0.009064159356058,0.012423817068338,-0.078301772475243,-0.073574148118496,-0.020292041823268,-0.127292782068253,0.029027519747615,-0.112083025276661,0.039167582988739,-0.110048949718475));
res += mul(Get(s0,dx,0), float4x4(0.209153279662132,0.321952313184738,-0.149683177471161,0.033890224993229,0.024374127388000,-0.221722468733788,-0.038574721664190,0.185375303030014,-0.112202949821949,0.017380392178893,-0.034662149846554,0.006421349942684,-0.113360926508904,-0.067880563437939,0.033549286425114,-0.116860009729862));
res += mul(Get(s0,dx,dy), float4x4(-0.109230749309063,0.054328259080648,-0.192717120051384,-0.033037673681974,0.025113938376307,-0.030079375952482,0.012709203176200,-0.258731126785278,-0.083448454737663,0.031557459384203,0.097457282245159,0.200073882937431,-0.155711054801941,-0.064546085894108,0.021084988489747,-0.225792393088341));
res += mul(Get(s1,-dx,-dy), float4x4(0.291912078857422,-0.026749821379781,-0.035065647214651,-0.173039957880974,-0.153441011905670,0.014508419670165,-0.062450751662254,-0.107985243201256,-0.106080479919910,0.034187097102404,-0.034729693084955,-0.144217580556870,0.114216424524784,-0.060665670782328,-0.061040874570608,0.140090912580490));
res += mul(Get(s1,-dx,0), float4x4(-0.121269010007381,0.007166147232056,-0.006043365690857,0.056602604687214,-0.297983735799789,0.001169286319055,0.010523742064834,-0.086090378463268,0.093229807913303,-0.036818776279688,-0.088836789131165,-0.245786681771278,0.254516273736954,-0.099459581077099,-0.115298278629780,0.005308276973665));
res += mul(Get(s1,-dx,dy), float4x4(-0.128697529435158,0.037995703518391,-0.007583600003272,0.007460255641490,-0.057370506227016,0.056233614683151,-0.007034337613732,0.196506738662720,0.015819922089577,0.096064858138561,0.120502620935440,-0.112022660672665,0.026408024132252,-0.089027427136898,-0.101799555122852,0.335755467414856));
res += mul(Get(s1,0,-dy), float4x4(-0.027638461440802,0.060039114207029,-0.026360116899014,-0.142432183027267,0.005425148643553,0.007815443910658,0.003240347607061,-0.134990304708481,0.096960783004761,-0.000609513546806,-0.015649525448680,0.186639174818993,-0.031391106545925,-0.050313472747803,-0.075498633086681,-0.043795712292194));
res += mul(Get(s1,0,0), float4x4(-0.004637051373720,0.093586951494217,-0.066454276442528,-0.026722311973572,-0.128825575113297,0.076309591531754,0.004286801908165,-0.091463595628738,-0.031397044658661,-0.146420702338219,-0.127391755580902,-0.122387543320656,-0.104328945279121,0.052622716873884,-0.076804406940937,0.090769723057747));
res += mul(Get(s1,0,dy), float4x4(-0.038697943091393,0.099216699600220,0.035521447658539,0.003072554478422,-0.084165014326572,0.006898359861225,-0.014169173315167,-0.056442935019732,-0.110405631363392,0.246582791209221,0.180914729833603,-0.041968356817961,-0.197676122188568,0.047581844031811,-0.012321594171226,0.148058906197548));
res += mul(Get(s1,dx,-dy), float4x4(-0.007216560654342,0.191927865147591,-0.027436966076493,-0.126689285039902,0.213658213615417,-0.001740105100907,-0.010182856582105,-0.180106729269028,0.024418108165264,-0.013304501771927,0.102077417075634,0.172475159168243,0.023345367982984,0.065594524145126,-0.060349263250828,-0.114112645387650));
res += mul(Get(s1,dx,0), float4x4(0.066923893988132,0.163543373346329,-0.088013440370560,-0.148798733949661,-0.056922860443592,-0.081007100641727,0.001884025405161,0.018833803012967,-0.051696229726076,-0.067932903766632,0.089820817112923,-0.002080323873088,-0.084703072905540,0.094851009547710,-0.047659561038017,-0.022091368213296));
res += mul(Get(s1,dx,dy), float4x4(-0.040517199784517,0.131147727370262,-0.007158128544688,-0.030934298411012,-0.093208812177181,-0.089939527213573,-0.060099065303802,0.050183985382318,-0.072878293693066,0.197581425309181,0.895535349845886,0.012375907041132,-0.068242304027081,0.180329158902168,0.051006127148867,-0.274391293525696));
res += mul(Get(s2,-dx,-dy), float4x4(-0.157993733882904,-0.303071051836014,0.051787037402391,-0.009220553562045,0.310893774032593,0.063457757234573,0.033106733113527,-0.237087428569794,0.057539992034435,-0.064159102737904,-0.065251871943474,0.070726618170738,-0.070396661758423,0.107458524405956,-0.093215420842171,-0.099123634397984));
res += mul(Get(s2,-dx,0), float4x4(-0.104632429778576,-0.068066455423832,-0.041027851402760,-0.149667784571648,0.179228737950325,-0.007063754368573,-0.054841071367264,-0.134009674191475,-0.057735290378332,-0.004043962340802,-0.102929659187794,0.150958567857742,-0.111875101923943,0.085569679737091,0.034249041229486,0.032310023903847));
res += mul(Get(s2,-dx,dy), float4x4(-0.143886566162109,-0.206416666507721,0.427133530378342,-0.104577280580997,-0.002863389905542,-0.073183521628380,-0.063733428716660,0.007071506232023,-0.031563185155392,0.026883192360401,-0.061939813196659,0.110380895435810,-0.081564784049988,0.172080159187317,-0.167151495814323,-0.028981911018491));
res += mul(Get(s2,0,-dy), float4x4(-0.097641453146935,0.070436783134937,-0.155109331011772,-0.024966403841972,0.337670058012009,0.055467538535595,-0.081806637346745,-0.184597551822662,-0.028342396020889,0.026598533615470,-0.061199363321066,0.083525352180004,0.002035911893472,-0.181385695934296,0.186458259820938,-0.080893807113171));
res += mul(Get(s2,0,0), float4x4(0.061360668390989,0.083839818835258,0.144434243440628,-0.025687424466014,-0.076802618801594,-0.052914250642061,-0.060354322195053,-0.042248543351889,-0.091534376144409,-0.007545639295131,-0.034452393651009,0.162574246525764,-0.014593813568354,-0.042819730937481,0.165650635957718,-0.072118937969208));
res += mul(Get(s2,0,dy), float4x4(0.151405781507492,0.003705309238285,0.036319565027952,-0.119699954986572,-0.039172772318125,-0.066289916634560,-0.064702436327934,-0.074574582278728,-0.041619669646025,0.117638230323792,-0.013273738324642,0.006352038588375,0.371390938758850,-0.057892598211765,-0.103318907320499,-0.123559035360813));
res += mul(Get(s2,dx,-dy), float4x4(0.049612611532211,-0.012244760058820,-0.124117001891136,0.079527869820595,0.500628650188446,0.100247107446194,-0.145581185817719,-0.171223208308220,-0.006927968934178,0.016321701928973,-0.035260289907455,-0.062959313392639,-0.009280403144658,0.134846836328506,0.161760434508324,-0.116466954350471));
res += mul(Get(s2,dx,0), float4x4(0.096609994769096,-0.030914548784494,-0.116804793477058,0.046681910753250,0.093598529696465,-0.125285133719444,-0.102441966533661,-0.095955669879913,0.006910387426615,0.060941766947508,-0.016629405319691,0.013682899996638,0.128376901149750,0.183512032032013,0.119078055024147,-0.076320692896843));
res += mul(Get(s2,dx,dy), float4x4(0.020667426288128,-0.147003933787346,0.020466027781367,0.055665768682957,-0.212601050734520,-0.060704160481691,-0.114019989967346,-0.080642990767956,-0.099828846752644,0.366480022668839,0.173914045095444,-0.001865971833467,-0.025259651243687,0.011269856244326,0.185923203825951,-0.011974736116827));
res += mul(Get(s3,-dx,-dy), float4x4(-0.077579461038113,-0.034766860306263,0.093182906508446,0.062404274940491,-0.201501458883286,-0.083553493022919,0.164664655923843,0.014218649826944,-0.021190507337451,-0.065953232347965,0.176753491163254,-0.069395713508129,0.140709578990936,-0.050678465515375,-0.113568708300591,0.029656130820513));
res += mul(Get(s3,-dx,0), float4x4(0.216747328639030,-0.031339943408966,-0.051577441394329,0.378934293985367,0.040376890450716,-0.070960864424706,0.032302185893059,0.069470345973969,0.061339370906353,0.040351830422878,-0.016920097172260,0.033100839704275,-0.024895034730434,-0.055342238396406,-0.085262604057789,-0.033290773630142));
res += mul(Get(s3,-dx,dy), float4x4(0.489048033952713,-0.164674982428551,-0.179894894361496,0.382665514945984,0.043729849159718,-0.128756314516068,-0.009674749337137,0.111058667302132,-0.063310965895653,0.185381129384041,-0.097507819533348,0.078775949776173,-0.060255777090788,0.019633481279016,-0.205848291516304,-0.142043814063072));
res += mul(Get(s3,0,-dy), float4x4(0.043549388647079,0.151956751942635,0.011672009713948,-0.160524070262909,0.044156286865473,-0.124510601162910,0.090896390378475,-0.050998877733946,-0.032387860119343,-0.098172679543495,0.049377661198378,-0.024121776223183,-0.152461081743240,-0.065079361200333,-0.084196209907532,0.084349237382412));
res += mul(Get(s3,0,0), float4x4(0.169701263308525,-0.101082868874073,-0.075904861092567,-0.180910959839821,-0.186188742518425,-0.084156341850758,-0.031945813447237,-0.136638835072517,0.012304426170886,0.215104311704636,0.068677544593811,0.164616197347641,-0.164206370711327,0.063381791114807,-0.062009099870920,0.070251613855362));
res += mul(Get(s3,0,dy), float4x4(-0.033796198666096,-0.147278293967247,-0.049009889364243,-0.054138965904713,-0.055513679981232,-0.057846408337355,-0.060179095715284,-0.011921751312912,0.032788518816233,-0.023090528324246,-0.038606189191341,-0.094056896865368,-0.052556194365025,0.186938062310219,-0.126291334629059,-0.110324874520302));
res += mul(Get(s3,dx,-dy), float4x4(0.020976709201932,0.283818930387497,-0.135248780250549,-0.076841630041599,0.581713855266571,-0.122641533613205,-0.129876300692558,-0.080545231699944,-0.097288906574249,-0.071446739137173,0.061946198344231,-0.019959717988968,0.226882532238960,-0.068223245441914,-0.108865171670914,0.155187159776688));
res += mul(Get(s3,dx,0), float4x4(-0.224505007266998,0.051442321389914,-0.029107488691807,-0.020970892161131,0.165602385997772,-0.125532209873199,-0.096396170556545,-0.064028114080429,-0.003407267620787,0.026445228606462,-0.040403548628092,0.049405764788389,-0.059970818459988,0.028129227459431,-0.064705327153206,0.030828991904855));
res += mul(Get(s3,dx,dy), float4x4(-0.131032913923264,0.087790928781033,-0.043894533067942,0.027223333716393,-0.038813095539808,-0.088205389678478,-0.092216201126575,-0.014968791976571,-0.005328693427145,-0.079061813652515,0.041763324290514,-0.020534779876471,-0.134291604161263,0.125252142548561,-0.071317516267300,-0.169402599334717));
return max(float4(0,0,0,0), res);
}
