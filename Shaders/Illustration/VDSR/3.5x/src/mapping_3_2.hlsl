sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.170823961496353,-0.133232742547989,0.002135783433914,-0.018419411033392,0.069645740091801,-0.017593730241060,0.011064823716879,-0.046707011759281,0.005287233740091,-0.007232118397951,-0.175016343593597,0.060032051056623,-0.075665481388569,0.125464797019958,0.177084848284721,-0.064063794910908));
res += mul(Get(s0,-dx,0), float4x4(-0.251574277877808,0.102471075952053,-0.125651240348816,0.102910943329334,0.265674829483032,0.001839342876337,-0.017934225499630,0.074439682066441,-0.002131742658094,0.052327878773212,-0.270921826362610,0.225396886467934,-0.066293634474277,0.134817421436310,0.034619793295860,-0.056885685771704));
res += mul(Get(s0,-dx,dy), float4x4(-0.198877394199371,-0.013295182026923,-0.081220053136349,-0.112413369119167,0.011480882763863,-0.117490462958813,0.025784879922867,0.091649360954762,-0.031653277575970,-0.180261567234993,-0.115796379745007,0.137802124023438,-0.228084042668343,-0.004573156125844,0.067761063575745,0.106808826327324));
res += mul(Get(s0,0,-dy), float4x4(0.018774965777993,-0.032358746975660,-0.016950968652964,-0.088082291185856,-0.100667372345924,0.072427287697792,0.096235387027264,-0.108523525297642,-0.022659676149487,-0.328303068876266,0.116777829825878,-0.105303026735783,-0.097431719303131,0.019681062549353,-0.235864311456680,0.191047146916389));
res += mul(Get(s0,0,0), float4x4(-0.095164299011230,0.095760062336922,0.058973204344511,0.272651076316833,0.045599289238453,0.149190038442612,-0.020133957266808,-0.092433728277683,-0.023066373541951,0.112114600837231,-0.134497076272964,-0.148303285241127,-0.053373727947474,-0.059436284005642,0.005439715459943,0.140768423676491));
res += mul(Get(s0,0,dy), float4x4(0.004775527864695,-0.231336683034897,0.144868344068527,0.132714360952377,-0.030846254900098,-0.044732242822647,-0.032255914062262,0.012593929655850,0.130271792411804,0.193344265222549,-0.052215244621038,-0.061597209423780,-0.077850691974163,0.016363980248570,-0.132119193673134,0.017455859109759));
res += mul(Get(s0,dx,-dy), float4x4(0.222016021609306,-0.103118941187859,-0.012223003432155,0.114197246730328,-0.025399772450328,0.165840178728104,0.122849442064762,-0.195276871323586,-0.110757999122143,0.359634995460510,0.455510586500168,0.005793640855700,-0.101718522608280,0.047109987586737,0.144923806190491,-0.100459694862366));
res += mul(Get(s0,dx,0), float4x4(0.029702717438340,0.015579889528453,0.164433583617210,0.192025274038315,0.019483966752887,0.138978436589241,-0.041614752262831,-0.197793886065483,-0.039534222334623,-0.089956596493721,-0.039969015866518,-0.142106235027313,-0.111310906708241,-0.103759191930294,0.383445709943771,-0.102521724998951));
res += mul(Get(s0,dx,dy), float4x4(-0.218009203672409,-0.019350811839104,0.128598883748055,-0.103979483246803,0.121826045215130,0.049569122493267,-0.164120867848396,-0.012169636785984,-0.069702960550785,0.019240155816078,-0.140901699662209,-0.140040397644043,-0.094457432627678,-0.015106973238289,0.408149242401123,-0.031948279589415));
res += mul(Get(s1,-dx,-dy), float4x4(0.062357343733311,0.102375611662865,-0.233078226447105,-0.052096702158451,0.033969022333622,0.256286501884460,-0.291653513908386,0.294283002614975,-0.098490320146084,-0.068060606718063,0.147193580865860,-0.060765739530325,-0.020945299416780,-0.147852569818497,0.054148111492395,-0.051143556833267));
res += mul(Get(s1,-dx,0), float4x4(0.046988762915134,-0.090128704905510,-0.138866633176804,-0.055183902382851,0.179826200008392,0.092935957014561,0.249526113271713,0.114813357591629,-0.140461117029190,0.115771010518074,-0.018502928316593,0.122992984950542,-0.141432434320450,-0.064706861972809,-0.050063535571098,-0.181552842259407));
res += mul(Get(s1,-dx,dy), float4x4(-0.058031812310219,0.004847839009017,-0.224799886345863,-0.016774756833911,0.052840676158667,-0.100392483174801,-0.038596719503403,0.010385053232312,-0.318128228187561,0.031877249479294,-0.027445977553725,0.128486379981041,0.108385436236858,-0.043598126620054,-0.162449419498444,-0.132901176810265));
res += mul(Get(s1,0,-dy), float4x4(-0.214223250746727,0.098353430628777,0.229893997311592,-0.103959083557129,-0.070015154778957,0.137819796800613,-0.160547256469727,0.064778216183186,-0.050675015896559,-0.000863806519192,-0.089823953807354,0.247673928737640,0.034780118614435,-0.149879544973373,-0.006217371672392,0.087318383157253));
res += mul(Get(s1,0,0), float4x4(-0.080128341913223,-0.116116091609001,0.144053384661674,-0.107731208205223,0.011508444324136,-0.136251837015152,-0.059434670954943,0.332118600606918,-0.004243986681104,-0.000976860057563,-0.171401500701904,0.118988111615181,-0.126927837729454,-0.082015477120876,-0.057280953973532,-0.037057947367430));
res += mul(Get(s1,0,dy), float4x4(0.093898154795170,-0.158837407827377,-0.013467097654939,-0.149364396929741,0.107782311737537,-0.021567812189460,-0.051004514098167,-0.054040770977736,-0.131186038255692,0.011350080370903,-0.149752736091614,0.124232567846775,-0.027559457346797,0.018730321899056,-0.115715451538563,-0.069726198911667));
res += mul(Get(s1,dx,-dy), float4x4(0.240742519497871,0.062293916940689,-0.117605932056904,-0.254368513822556,0.079358644783497,-0.017428334802389,0.129249095916748,-0.316425621509552,-0.086185351014137,0.162851303815842,-0.036044120788574,0.121752180159092,0.316913574934006,-0.007146248128265,-0.000661615165882,0.087922789156437));
res += mul(Get(s1,dx,0), float4x4(-0.160743236541748,0.124143049120903,0.062132496386766,-0.077856533229351,-0.189533784985542,-0.007455938495696,-0.100616827607155,-0.339897066354752,-0.027902249246836,-0.106149569153786,-0.110686853528023,-0.111887149512768,0.265454649925232,0.058213092386723,0.047137584537268,0.023277593776584));
res += mul(Get(s1,dx,dy), float4x4(0.062910057604313,-0.110780119895935,0.367313206195831,-0.098828949034214,-0.100652225315571,0.117423132061958,-0.052690654993057,-0.080591209232807,-0.156060054898262,-0.165732935070992,-0.063088148832321,-0.058399368077517,0.281197100877762,-0.061495915055275,0.015412935055792,-0.019690915942192));
res += mul(Get(s2,-dx,-dy), float4x4(0.001452889991924,0.081136889755726,0.127591371536255,0.399475902318954,0.093095920979977,0.000823958602268,0.022330373525620,-0.065831758081913,0.032543856650591,-0.251399099826813,0.012771437875926,-0.288667023181915,-0.148782327771187,-0.311900943517685,0.088890962302685,-0.125866711139679));
res += mul(Get(s2,-dx,0), float4x4(-0.090285152196884,-0.013570670038462,-0.226801067590714,-0.009053536690772,-0.059091292321682,0.110873661935329,0.290721833705902,0.091132372617722,-0.045639701187611,0.112831793725491,0.045745257288218,-0.081595741212368,0.041700243949890,-0.082957603037357,-0.035794734954834,-0.086493238806725));
res += mul(Get(s2,-dx,dy), float4x4(-0.191410437226295,-0.165043517947197,-0.206020176410675,-0.101706176996231,-0.206494152545929,-0.232125014066696,0.026374544948339,-0.274090558290482,0.073554858565331,-0.196794971823692,-0.089717619121075,0.016088975593448,-0.187704265117645,-0.090046718716621,-0.160685330629349,-0.142388135194778));
res += mul(Get(s2,0,-dy), float4x4(0.055521134287119,0.074011117219925,-0.035859536379576,-0.010769097134471,0.038529250770807,-0.105928011238575,0.134566619992256,-0.054568648338318,-0.041788343340158,-0.072675682604313,-0.062909379601479,-0.181119233369827,-0.086514934897423,-0.041008424013853,-0.100079126656055,0.286335021257401));
res += mul(Get(s2,0,0), float4x4(-0.026131477206945,-0.060993958264589,-0.234673455357552,-0.155902191996574,-0.019742835313082,0.039746701717377,0.111286275088787,-0.088942863047123,-0.169843986630440,0.136148154735565,0.091208413243294,0.250048220157623,-0.023696588352323,-0.032833054661751,-0.123121403157711,0.200503438711166));
res += mul(Get(s2,0,dy), float4x4(-0.077127665281296,-0.079593382775784,-0.204898267984390,0.081501588225365,-0.121184147894382,-0.166630402207375,0.032491505146027,0.032855741679668,0.043135374784470,-0.181334584951401,-0.297690182924271,-0.007082035299391,-0.004831256344914,-0.017789108678699,-0.013373726978898,0.011712055653334));
res += mul(Get(s2,dx,-dy), float4x4(0.126806676387787,0.249371185898781,0.034455962479115,-0.200480028986931,0.148894593119621,-0.133401811122894,-0.008979273959994,-0.165919855237007,0.088152423501015,-0.135413035750389,0.079068653285503,0.030501669272780,0.066314443945885,0.728817999362946,0.140975594520569,-0.180776998400688));
res += mul(Get(s2,dx,0), float4x4(-0.109332412481308,0.142298400402069,0.002106793923303,-0.029067404568195,-0.047621779143810,0.081769317388535,-0.209060192108154,-0.203270003199577,-0.104514606297016,0.119049720466137,0.412086635828018,0.183991879224777,0.053719956427813,-0.159347131848335,-0.134428814053535,-0.082476913928986));
res += mul(Get(s2,dx,dy), float4x4(-0.196449458599091,0.155138343572617,-0.009589477442205,0.156907573342323,-0.143970996141434,-0.002200144110247,-0.309896707534790,-0.139201089739799,-0.030478268861771,-0.168669775128365,-0.091377332806587,-0.098893575370312,-0.106223762035370,-0.011586203239858,-0.153069466352463,-0.057400863617659));
res += mul(Get(s3,-dx,-dy), float4x4(0.276014566421509,-0.097485631704330,0.025060009211302,-0.016499960795045,0.119450010359287,0.138720721006393,0.063170343637466,0.014654182828963,-0.000143272161949,-0.206718608736992,-0.202505365014076,0.112601228058338,0.008740852586925,0.165808856487274,-0.043612826615572,-0.019011581316590));
res += mul(Get(s3,-dx,0), float4x4(0.110663048923016,0.065866537392139,-0.016613733023405,-0.311430096626282,-0.136647880077362,-0.000641217513476,-0.055458515882492,0.018762128427625,-0.082059577107430,-0.310914695262909,-0.295284599065781,0.163164749741554,0.005812041461468,-0.287567496299744,-0.106317862868309,-0.247938141226768));
res += mul(Get(s3,-dx,dy), float4x4(0.141964748501778,-0.145892709493637,0.128425672650337,-0.032595567405224,-0.045616000890732,-0.231146946549416,-0.120980918407440,-0.071153864264488,0.024824351072311,-0.033278234302998,-0.188247650861740,0.157848581671715,0.012376948259771,-0.108625680208206,-0.253232657909393,-0.155410066246986));
res += mul(Get(s3,0,-dy), float4x4(0.079767547547817,-0.189054489135742,-0.014350604265928,0.094997979700565,0.056437905877829,-0.020569462329149,0.071553386747837,-0.278811424970627,0.120430923998356,-0.167257085442543,-0.041067503392696,-0.039559409022331,-0.045327980071306,0.185176640748978,-0.092598326504230,-0.056856054812670));
res += mul(Get(s3,0,0), float4x4(0.043846376240253,-0.179288879036903,-0.184169530868530,-0.087797261774540,-0.107002854347229,0.038934417068958,-0.110493697226048,-0.031734090298414,-0.034557860344648,-0.192661032080650,-0.098018527030945,0.031321737915277,-0.087668269872665,-0.100090041756630,-0.074411176145077,-0.137848928570747));
res += mul(Get(s3,0,dy), float4x4(-0.034404166042805,0.032200723886490,0.124490134418011,-0.132377624511719,-0.022863000631332,0.173219829797745,-0.170491069555283,-0.000548365351278,-0.053109727799892,-0.063988432288170,-0.111819177865982,0.047014124691486,0.178950756788254,-0.045724358409643,-0.102886050939560,-0.061114169657230));
res += mul(Get(s3,dx,-dy), float4x4(0.142795503139496,-0.082857079803944,-0.001509108114988,0.168283075094223,0.406786590814590,-0.037260744720697,0.130260407924652,0.138334721326828,-0.222845137119293,-0.200899541378021,0.004745581187308,-0.154248252511024,0.062512107193470,0.121110029518604,-0.010285416617990,-0.085951007902622));
res += mul(Get(s3,dx,0), float4x4(0.279897570610046,-0.279819458723068,-0.045543264597654,-0.084810882806778,0.088087484240532,0.027266420423985,-0.142171502113342,0.128195837140083,0.060789935290813,-0.106850400567055,0.100894369184971,-0.221275493502617,-0.096120260655880,-0.155143290758133,-0.177502870559692,-0.088266700506210));
res += mul(Get(s3,dx,dy), float4x4(-0.140716105699539,0.019985187798738,0.129175484180450,-0.094657436013222,-0.195660471916199,-0.089600160717964,-0.167577788233757,0.026550775393844,0.536352694034576,-0.112238667905331,-0.185579210519791,-0.167737111449242,0.044096477329731,0.029221506789327,-0.023397101089358,-0.112016022205353));
return max(float4(0,0,0,0), res);
}
