sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(-0.285340040922165,0.002444101497531,-0.490135520696640,2.082562923431396) * Get(-dx,-dy);
res += float4(-0.251813709735870,-0.017219254747033,-0.305932104587555,-0.799474596977234) * Get(-dx,0);
res += float4(-0.166454881429672,0.004644191823900,0.009230019524693,-1.316362619400024) * Get(-dx,dy);
res += float4(-0.167180106043816,-0.019306985661387,-0.526387810707092,2.280477046966553) * Get(0,-dy);
res += float4(-0.153451621532440,-0.018023539334536,-0.260857373476028,-0.545762538909912) * Get(0,0);
res += float4(-0.115710198879242,-0.012071048840880,-0.236464545130730,-1.212160229682922) * Get(0,dy);
res += float4(0.206134915351868,-0.018519494682550,0.361284911632538,0.950174987316132) * Get(dx,-dy);
res += float4(0.257350683212280,-0.006060345564038,0.858315050601959,-0.676067292690277) * Get(dx,0);
res += float4(0.290792673826218,-0.013823814690113,0.805228710174561,-0.671047925949097) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
