sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.414735823869705,-0.090662032365799,-0.061573166400194,-0.041958734393120,0.261227518320084,-0.040042400360107,0.182226046919823,0.135187149047852,0.077277764678001,-0.089821308851242,-0.161379635334015,0.067114003002644,0.196445882320404,0.135305806994438,0.526382684707642,0.120988778769970));
res += mul(Get(s0,-dx,0), float4x4(-0.130467280745506,-0.041805330663919,-0.011632540263236,0.100251905620098,0.225797235965729,0.011526964604855,0.105417542159557,0.084824375808239,-0.221026927232742,0.018263492733240,0.236338526010513,0.032549772411585,0.510778188705444,0.022190481424332,-0.013281483203173,-0.153887420892715));
res += mul(Get(s0,-dx,dy), float4x4(0.021179039031267,-0.074694082140923,-0.063259154558182,-0.090497724711895,-0.068087004125118,0.068070180714130,0.114987105131149,0.111461490392685,-0.454012185335159,-0.128316447138786,0.295769333839417,-0.050221990793943,0.332742720842361,-0.190969124436378,-0.201463371515274,-0.187086224555969));
res += mul(Get(s0,0,-dy), float4x4(-0.041397914290428,-0.124926201999187,-0.198849454522133,-0.111467473208904,0.155540555715561,0.407949745655060,0.036359477788210,0.064525187015533,0.444047123193741,-0.094335630536079,-0.137605816125870,-0.090167067945004,0.202030479907990,0.045776862651110,-0.008249481208622,-0.074474006891251));
res += mul(Get(s0,0,0), float4x4(-0.261803865432739,-0.066687174141407,0.025346085429192,0.100670889019966,0.294642806053162,0.208558619022369,0.203302443027496,0.143101021647453,-0.102655470371246,0.048993214964867,-0.031824495643377,0.068448573350906,0.719485759735107,-0.174434438347816,-0.123483113944530,-0.155476465821266));
res += mul(Get(s0,0,dy), float4x4(-0.183774799108505,-0.075499400496483,-0.001997626619413,-0.062346234917641,0.407823473215103,0.044515665620565,-0.114768639206886,0.041532263159752,-0.411990463733673,0.075811162590981,-0.003133431309834,0.007107575424016,0.282163441181183,-0.099582195281982,-0.099358133971691,-0.168244466185570));
res += mul(Get(s0,dx,-dy), float4x4(0.167410671710968,-0.147773236036301,-0.066382013261318,0.058723933994770,0.158193856477737,0.007320506498218,-0.014770995825529,0.014154672622681,0.404001772403717,-0.152138933539391,-0.146347433328629,-0.110347606241703,0.336820691823959,0.130911827087402,0.287884145975113,0.096223026514053));
res += mul(Get(s0,dx,0), float4x4(-0.151518911123276,-0.395680487155914,0.038755871355534,-0.090671710669994,0.120720043778419,0.080109149217606,0.545264422893524,0.307088196277618,0.033433448523283,-0.087516978383064,0.063025571405888,0.060901574790478,0.670630216598511,-0.197824671864510,0.018560146912932,-0.228127822279930));
res += mul(Get(s0,dx,dy), float4x4(0.111391834914684,-0.202202692627907,0.046819020062685,-0.129430115222931,0.106822691857815,0.018386103212833,0.023536704480648,-0.036734040826559,-0.185361087322235,-0.018995853140950,0.201057389378548,0.068244576454163,0.275419145822525,-0.022708559408784,-0.176565334200859,-0.242729291319847));
res += mul(Get(s1,-dx,-dy), float4x4(-0.442693948745728,0.141135051846504,0.301330745220184,0.021549383178353,-0.223094567656517,0.085763961076736,-0.024187538772821,0.079307511448860,-0.317919313907623,0.555314421653748,-0.179319262504578,-0.062254317104816,-0.074050106108189,-0.093909434974194,-0.305859655141830,-0.124159991741180));
res += mul(Get(s1,-dx,0), float4x4(-0.323231250047684,0.092738769948483,0.164433136582375,0.104201205074787,-0.035681743174791,0.153319239616394,0.064915083348751,-0.018849277868867,-0.231101095676422,0.516870498657227,0.201386973261833,0.208856508135796,-0.192863956093788,0.010161880403757,-0.174385949969292,-0.156899511814117));
res += mul(Get(s1,-dx,dy), float4x4(-0.204602092504501,0.086090810596943,0.054857145994902,0.176841154694557,0.303654611110687,0.092598132789135,-0.115164339542389,0.105471633374691,-0.142020002007484,0.416799962520599,-0.119830012321472,0.144835457205772,-0.127862498164177,0.010191813111305,0.352775812149048,0.216846123337746));
res += mul(Get(s1,0,-dy), float4x4(-0.413720965385437,0.094876572489738,0.060596246272326,-0.022485170513391,-0.208561360836029,-0.117777064442635,0.234683990478516,0.030086671933532,0.243936032056808,-0.004390309564769,-0.198370307683945,-0.174914464354515,0.157634571194649,-0.179483428597450,-0.217492327094078,-0.102562040090561));
res += mul(Get(s1,0,0), float4x4(-0.239139035344124,0.071437440812588,0.088002979755402,0.014768825843930,-0.071565106511116,-0.118492625653744,0.031173266470432,-0.075533173978329,0.207121327519417,-0.127919256687164,-0.184643909335136,-0.147988170385361,-0.176641926169395,-0.081126637756824,-0.019958976656199,-0.065739542245865));
res += mul(Get(s1,0,dy), float4x4(-0.174407809972763,-0.103778697550297,-0.083357557654381,0.139449134469032,0.133890599012375,-0.081978470087051,-0.212185055017471,-0.029395600780845,0.300119936466217,0.153736054897308,-0.201095387339592,0.078858889639378,-0.068282522261143,0.210546731948853,0.225393995642662,0.104394629597664));
res += mul(Get(s1,dx,-dy), float4x4(-0.190912440419197,-0.112419307231903,0.041079621762037,-0.077018119394779,0.083028286695480,-0.137539178133011,0.153481096029282,0.044720139354467,0.751518368721008,-0.202325046062469,-0.156442478299141,-0.130502134561539,0.218675822019577,-0.054910421371460,-0.153499945998192,-0.101746968924999));
res += mul(Get(s1,dx,0), float4x4(-0.110370986163616,-0.047657389193773,0.021027442067862,-0.056409548968077,0.334404677152634,-0.279312878847122,0.075770325958729,-0.065759405493736,0.770912945270538,-0.177909135818481,-0.181199386715889,-0.109022922813892,0.053049944341183,0.006185729987919,-0.032286755740643,-0.015593203715980));
res += mul(Get(s1,dx,dy), float4x4(0.046220451593399,-0.087842136621475,-0.063652336597443,0.039214666932821,0.408259123563766,-0.072816334664822,-0.353399276733398,-0.283185839653015,0.487880170345306,0.032956216484308,-0.116933874785900,-0.091379746794701,0.179457798600197,0.065794274210930,0.070529639720917,0.153826013207436));
res += mul(Get(s2,-dx,-dy), float4x4(-0.034542478621006,-0.047464732080698,0.101855754852295,0.001679605222307,0.394338488578796,0.064691618084908,-0.204391866922379,-0.008630005642772,-0.211684033274651,0.101552747189999,-0.126652449369431,0.028033198788762,0.024840382859111,-0.235547527670860,-0.174501523375511,-0.036688238382339));
res += mul(Get(s2,-dx,0), float4x4(0.228444755077362,-0.049422647804022,-0.080256104469299,-0.059609539806843,0.215515390038490,0.061580244451761,0.204966470599174,-0.242650136351585,-0.188332587480545,0.154539212584496,-0.040481563657522,-0.039318542927504,0.239067316055298,-0.114781007170677,-0.073518387973309,-0.069214798510075));
res += mul(Get(s2,-dx,dy), float4x4(0.758907496929169,-0.125189363956451,-0.156009331345558,-0.093304499983788,0.110100083053112,0.134823530912399,0.159694820642471,-0.040401641279459,0.053811032325029,0.212385535240173,-0.023503776639700,0.083314217627048,0.645792782306671,-0.089902140200138,-0.099844031035900,-0.080533571541309));
res += mul(Get(s2,0,-dy), float4x4(-0.134363114833832,0.056700643151999,-0.001094529870898,0.194292053580284,0.251468509435654,0.233434140682220,-0.058467101305723,-0.026498513296247,-0.177945479750633,0.243273690342903,-0.261804938316345,-0.096297703683376,0.771683156490326,-0.115470543503761,-0.114611819386482,-0.041313499212265));
res += mul(Get(s2,0,0), float4x4(0.190925627946854,-0.104605235159397,0.069752797484398,0.032854177057743,0.063623912632465,0.273642003536224,0.254631191492081,-0.095762141048908,0.058277979493141,0.115410581231117,-0.143910661339760,-0.066382348537445,0.659426689147949,-0.356924474239349,-0.058921258896589,0.033073935657740));
res += mul(Get(s2,0,dy), float4x4(0.405796021223068,-0.018338490277529,0.027023898437619,0.105103507637978,0.013580021448433,0.248683527112007,0.108181260526180,-0.018020089715719,0.081465125083923,-0.062885411083698,-0.148857429623604,-0.046157401055098,0.281213283538818,0.050522655248642,-0.132417872548103,-0.027921227738261));
res += mul(Get(s2,dx,-dy), float4x4(-0.123263925313950,0.246474146842957,0.106032788753510,-0.357338428497314,0.117633819580078,0.197915211319923,-0.008053762838244,0.038702908903360,0.093326762318611,-0.092748031020164,-0.040683563798666,-0.110942192375660,0.307681083679199,0.309712529182434,-0.172943040728569,0.014889223501086));
res += mul(Get(s2,dx,0), float4x4(-0.058103654533625,0.246369913220406,-0.020681224763393,0.011770284734666,-0.233234882354736,0.268938809633255,0.194636076688766,-0.100724078714848,0.392590880393982,-0.108065210282803,-0.161105871200562,-0.192690491676331,0.084335654973984,0.184492468833923,-0.074412204325199,0.174797907471657));
res += mul(Get(s2,dx,dy), float4x4(0.187735497951508,0.240356624126434,0.024653131142259,-0.032517578452826,-0.185978382825851,0.292179048061371,-0.049203433096409,-0.030929872766137,0.650523900985718,-0.003092371392995,-0.143634110689163,-0.126680463552475,0.025415653362870,0.327036589384079,-0.073200568556786,0.268705397844315));
res += mul(Get(s3,-dx,-dy), float4x4(0.269644945859909,-0.134350284934044,-0.136241823434830,-0.063364371657372,0.314828932285309,-0.086716532707214,0.083327814936638,0.002672654110938,0.234900772571564,0.006563099566847,0.040341868996620,0.040315374732018,0.291682362556458,0.005515019409359,0.171313032507896,-0.094238206744194));
res += mul(Get(s3,-dx,0), float4x4(0.216639712452888,-0.046519424766302,-0.113734401762486,-0.087253719568253,0.309641420841217,0.047397099435329,0.004360100254416,-0.008529514074326,0.188882499933243,0.014582724310458,0.134166494011879,0.174467802047729,0.265078932046890,-0.276439368724823,-0.084009669721127,0.093659572303295));
res += mul(Get(s3,-dx,dy), float4x4(-0.146577432751656,-0.032791581004858,-0.025982165709138,0.186826974153519,-0.060522668063641,0.086763083934784,0.378199815750122,0.110116288065910,0.140313044190407,-0.139435499906540,0.059818495064974,-0.047013852745295,-0.159466862678528,0.011959442868829,-0.375589460134506,-0.046785164624453));
res += mul(Get(s3,0,-dy), float4x4(0.490845918655396,-0.070980563759804,-0.006659039296210,-0.128573536872864,0.266910761594772,-0.145454853773117,0.016971282660961,-0.018628187477589,0.259514242410660,0.107337549328804,0.175152063369751,-0.036070555448532,0.099897131323814,0.293227553367615,0.212482824921608,-0.016332397237420));
res += mul(Get(s3,0,0), float4x4(0.063122786581516,-0.131269708275795,0.050650876015425,-0.026597345247865,0.252985954284668,-0.113286137580872,0.012196510098875,-0.041277591139078,0.391880363225937,0.037533100694418,0.078533545136452,-0.278575718402863,0.156957358121872,0.087102457880974,0.036672789603472,-0.093612253665924));
res += mul(Get(s3,0,dy), float4x4(-0.130016475915909,-0.155690997838974,0.238819196820259,0.220833927392960,-0.229906588792801,0.118929885327816,-0.011446336284280,0.091256439685822,0.139972865581512,0.020945033058524,0.081638544797897,-0.185232520103455,0.450871378183365,0.048099748790264,-0.223477393388748,0.060094378888607));
res += mul(Get(s3,dx,-dy), float4x4(0.422389864921570,-0.091797977685928,-0.028828185051680,-0.096125163137913,0.636138975620270,-0.127770140767097,-0.093812279403210,-0.062369506806135,-0.182405114173889,0.380896747112274,0.219291061162949,0.157099932432175,-0.248874559998512,0.362069934606552,0.064883746206760,-0.102246604859829));
res += mul(Get(s3,dx,0), float4x4(-0.087420299649239,-0.125122055411339,-0.012893904000521,-0.025700133293867,0.529871523380280,-0.222055271267891,-0.111646093428135,-0.126896888017654,-0.026613853871822,0.237890899181366,0.076215401291847,0.050396516919136,-0.020480353385210,0.273334592580795,0.232746198773384,0.047033160924911));
res += mul(Get(s3,dx,dy), float4x4(-0.321450293064117,0.135307610034943,0.563573002815247,0.176913827657700,0.100498124957085,-0.100687474012375,-0.069350428879261,-0.065043054521084,0.144575878977776,-0.043371878564358,0.129662647843361,0.110349863767624,0.260411024093628,0.111060015857220,-0.127099812030792,0.067523658275604));
return max(float4(0,0,0,0), res);
}
