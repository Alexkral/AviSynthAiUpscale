sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.183964863419533,-0.074632696807384,-0.170499265193939,0.155841365456581,0.042544800788164,0.222225040197372,-0.110410712659359,0.055596791207790,0.036174621433020,-0.030096847563982,0.038622055202723,0.188430652022362,0.041648272424936,0.147347763180733,0.022531716153026,-0.043085321784019));
res += mul(Get(s0,-dx,0), float4x4(0.036597594618797,0.159745782613754,-0.087055750191212,0.126823425292969,0.198907732963562,0.002858964027837,-0.035462561994791,0.015854589641094,-0.041315786540508,0.109185792505741,0.021581534296274,0.038304273039103,0.095151878893375,-0.125306069850922,0.020093675702810,0.082735784351826));
res += mul(Get(s0,-dx,dy), float4x4(-0.089618518948555,0.226732164621353,0.041975513100624,0.087456583976746,-0.247719377279282,0.079167872667313,0.119722321629524,-0.001436723629013,-0.075321406126022,-0.171080380678177,0.061232294887304,0.075642570853233,-0.103700995445251,-0.211167201399803,-0.045812096446753,0.027935676276684));
res += mul(Get(s0,0,-dy), float4x4(0.063888803124428,-0.086548492312431,0.032800201326609,0.045491352677345,0.010516490787268,0.206410229206085,-0.080389983952045,0.168172642588615,-0.041053961962461,-0.009701857343316,0.177849262952805,0.045651756227016,0.018098846077919,-0.092177361249924,0.009841639548540,0.028333337977529));
res += mul(Get(s0,0,0), float4x4(-0.053364187479019,0.009756583720446,0.008784584701061,0.050421521067619,-0.017519954591990,-0.157402575016022,-0.002672219416127,0.188279151916504,-0.009259128943086,0.054471403360367,-0.083648994565010,-0.011331761255860,0.031149592250586,0.046970147639513,-0.055410809814930,-0.288970082998276));
res += mul(Get(s0,0,dy), float4x4(-0.016714133322239,0.016721399500966,0.002191561274230,0.148275569081306,-0.200056001543999,0.048173096030951,0.100770875811577,-0.084877565503120,0.210837736725807,-0.217461571097374,0.098342217504978,-0.009847168810666,0.076154850423336,0.221788570284843,-0.165315270423889,0.165515452623367));
res += mul(Get(s0,dx,-dy), float4x4(-0.021362394094467,-0.211098730564117,-0.065488569438457,0.096186682581902,-0.021445820108056,-0.084190778434277,-0.223394498229027,-0.079072423279285,0.113451167941093,-0.302378773689270,-0.066750273108482,-0.028310114517808,0.012411206960678,0.073949091136456,0.011128967627883,-0.084583006799221));
res += mul(Get(s0,dx,0), float4x4(-0.233396321535110,0.052571661770344,-0.108423106372356,-0.010600686073303,-0.115672864019871,-0.112314358353615,0.195017158985138,0.036986187100410,-0.023911029100418,-0.074359945952892,-0.155070036649704,0.045732043683529,0.007612399291247,-0.210642695426941,0.018999930471182,-0.057240553200245));
res += mul(Get(s0,dx,dy), float4x4(0.057402037084103,0.019004395231605,0.184012472629547,0.033102393150330,0.111867181956768,-0.109731800854206,0.065444782376289,-0.157908052206039,-0.084584780037403,0.086470089852810,0.103669188916683,0.108676187694073,0.044960360974073,-0.123665757477283,0.130214869976044,-0.094614133238792));
res += mul(Get(s1,-dx,-dy), float4x4(-0.265887767076492,-0.038758255541325,-0.051033318042755,0.036489617079496,0.285394906997681,0.247871562838554,0.341862618923187,0.016448345035315,-0.023593362420797,-0.024314152076840,0.121943153440952,-0.126192286610603,0.119815215468407,-0.157676324248314,0.121070042252541,0.093107983469963));
res += mul(Get(s1,-dx,0), float4x4(0.088587522506714,-0.027906682342291,0.047087032347918,-0.019193012267351,0.077757515013218,-0.183365836739540,-0.013227921910584,0.092168942093849,-0.072581306099892,-0.058235492557287,-0.098555989563465,0.004068759270012,-0.147031590342522,-0.095155477523804,0.127258226275444,-0.266240149736404));
res += mul(Get(s1,-dx,dy), float4x4(-0.014111558906734,-0.003079424612224,-0.028551144525409,-0.028264246881008,0.103716954588890,0.023053728044033,0.039885722100735,0.017816739156842,-0.210442021489143,0.134000629186630,0.034790381789207,-0.110317885875702,-0.054019700735807,0.048309393227100,-0.049051187932491,-0.097869195044041));
res += mul(Get(s1,0,-dy), float4x4(-0.347298771142960,-0.206818178296089,0.170401349663734,-0.305480182170868,-0.029689088463783,-0.054984819144011,0.039103858172894,-0.066293269395828,-0.161617368459702,0.136014685034752,0.143102705478668,-0.101859211921692,-0.074434064328671,-0.013179032132030,-0.168152019381523,0.024646749719977));
res += mul(Get(s1,0,0), float4x4(-0.008912173099816,-0.030303299427032,-0.137874603271484,-0.180018901824951,0.092064969241619,0.096058093011379,0.217273071408272,0.079330228269100,0.217017441987991,0.076145552098751,0.031538970768452,-0.188958525657654,0.108049578964710,-0.143813148140907,0.077781207859516,0.040128476917744));
res += mul(Get(s1,0,dy), float4x4(-0.068385526537895,-0.249941736459732,-0.152503788471222,-0.092968955636024,-0.095555819571018,0.128571078181267,-0.084679506719112,0.072108797729015,0.333863079547882,0.125836282968521,0.170893937349319,-0.043148819357157,0.135235488414764,0.163296923041344,0.213313832879066,-0.092027686536312));
res += mul(Get(s1,dx,-dy), float4x4(-0.011024483479559,0.027626419439912,-0.122942566871643,0.222080618143082,-0.092424109578133,-0.142117857933044,-0.123456262052059,0.017737131565809,0.031642269343138,-0.117897294461727,-0.001174931065179,0.004992520902306,0.135406225919724,-0.356134057044983,-0.192534744739532,-0.003663379931822));
res += mul(Get(s1,dx,0), float4x4(-0.098704069852829,-0.035886432975531,-0.074081756174564,-0.113611422479153,-0.005434371531010,0.010482510551810,-0.050116527825594,-0.083678826689720,-0.118313632905483,-0.091529078781605,0.029134146869183,-0.113479599356651,-0.061992701143026,-0.130056291818619,-0.308865576982498,-0.115874454379082));
res += mul(Get(s1,dx,dy), float4x4(0.052290484309196,-0.065825298428535,-0.030325822532177,0.218820944428444,0.072899855673313,0.037828106433153,0.195578351616859,0.041529629379511,0.199269101023674,0.060251764953136,-0.091406516730785,-0.101126626133919,0.367625713348389,0.047516159713268,0.053342554718256,0.240612685680389));
res += mul(Get(s2,-dx,-dy), float4x4(-0.041933521628380,-0.143527567386627,-0.263430804014206,0.257360160350800,-0.160608351230621,0.009730277583003,-0.134505733847618,-0.036221709102392,0.096456632018089,-0.006007736083120,-0.007799935061485,-0.030673515051603,0.210751414299011,0.040351454168558,-0.003452324308455,-0.019015172496438));
res += mul(Get(s2,-dx,0), float4x4(0.123007856309414,0.023716883733869,-0.074130758643150,0.212261095643044,-0.032249942421913,0.171252787113190,-0.006072070915252,0.032189995050430,0.274441093206406,0.112804919481277,-0.031675864011049,-0.004358529113233,0.039931133389473,0.110345073044300,-0.043726943433285,-0.224046126008034));
res += mul(Get(s2,-dx,dy), float4x4(-0.146093353629112,0.104117512702942,0.109311476349831,-0.222160428762436,0.128604993224144,-0.057754311710596,0.013471798039973,0.012996162287891,0.224915355443954,0.059154756367207,0.009793727658689,0.048026267439127,-0.022128473967314,-0.034017752856016,0.014104395173490,-0.157692268490791));
res += mul(Get(s2,0,-dy), float4x4(-0.071440488100052,-0.210028707981110,0.061054948717356,-0.117241956293583,0.023823710158467,0.067201577126980,0.002560237189755,0.055989950895309,0.075576856732368,-0.295571565628052,-0.023080250248313,0.206794738769531,0.038139827549458,0.226314663887024,-0.319931775331497,-0.011328598484397));
res += mul(Get(s2,0,0), float4x4(0.036926377564669,0.007935623638332,0.132849037647247,0.218652248382568,0.104186691343784,-0.031391233205795,-0.026805946603417,0.185508668422699,0.103938259184361,-0.128578186035156,-0.099761448800564,0.097997732460499,-0.123699761927128,0.046053551137447,0.119242474436760,0.108852855861187));
res += mul(Get(s2,0,dy), float4x4(-0.144889041781425,-0.109842471778393,0.138799026608467,0.050572775304317,-0.040474310517311,0.008423009887338,0.153824388980865,-0.075289472937584,0.163527518510818,0.184626892209053,0.086942903697491,0.135618105530739,0.185532227158546,-0.051323790103197,0.069718599319458,-0.057931102812290));
res += mul(Get(s2,dx,-dy), float4x4(0.097344785928726,-0.063711196184158,0.005727045238018,0.130769431591034,0.051207695156336,-0.035379525274038,0.113108702003956,-0.063139617443085,0.126319900155067,0.057288337498903,-0.000884679669980,0.064504422247410,-0.007758033461869,0.043603051453829,0.248958319425583,-0.123751223087311));
res += mul(Get(s2,dx,0), float4x4(-0.021623954176903,-0.039825141429901,0.001067348988727,0.094865433871746,0.224404513835907,-0.041066326200962,-0.065969794988632,0.007312633562833,0.116098381578922,0.006676551885903,0.057585906237364,0.004375351592898,-0.001744535053149,-0.118943020701408,0.138053119182587,-0.021516811102629));
res += mul(Get(s2,dx,dy), float4x4(-0.012721784412861,-0.185722738504410,-0.113939434289932,0.072153933346272,-0.057795476168394,-0.018504863604903,0.060920905321836,0.070683240890503,-0.127433717250824,0.125528961420059,-0.079959988594055,0.245642825961113,0.121145807206631,0.166230380535126,-0.032401140779257,0.160373806953430));
res += mul(Get(s3,-dx,-dy), float4x4(-0.126521453261375,-0.041065685451031,0.011237231083214,-0.060490492731333,-0.016509214416146,0.173034086823463,0.045371476560831,0.041461635380983,0.077647313475609,0.138060003519058,-0.031303051859140,-0.008477385155857,-0.021336868405342,-0.091057769954205,0.037006005644798,-0.073480248451233));
res += mul(Get(s3,-dx,0), float4x4(-0.121137909591198,0.209588423371315,-0.236243993043900,0.035664971917868,0.148059442639351,0.129601895809174,0.116788417100906,-0.203789845108986,0.080926284193993,0.139174982905388,0.131805911660194,-0.085349582135677,0.219374611973763,0.021949362009764,0.044366583228111,0.061532150954008));
res += mul(Get(s3,-dx,dy), float4x4(-0.002823985181749,0.017404610291123,-0.183971926569939,0.120715312659740,0.070693254470825,0.254556119441986,0.071288384497166,0.029999924823642,-0.045296147465706,-0.059281699359417,0.060552660375834,-0.118887908756733,0.086214400827885,0.025288332253695,0.106576688587666,0.115898236632347));
res += mul(Get(s3,0,-dy), float4x4(0.027366064488888,0.110960707068443,0.275655865669250,-0.160259947180748,0.143356904387474,-0.064004734158516,-0.112152539193630,-0.069664798676968,0.156515315175056,-0.077752724289894,0.171517312526703,0.190060585737228,0.176836490631104,-0.148225069046021,-0.157141357660294,0.071360610425472));
res += mul(Get(s3,0,0), float4x4(-0.075441770255566,-0.146720036864281,0.060315269976854,-0.194679275155067,-0.040051583200693,-0.115621976554394,0.081399478018284,0.114950552582741,0.178826123476028,-0.175751909613609,0.178305447101593,0.077093370258808,0.252264082431793,-0.134026169776917,-0.128005564212799,-0.050165057182312));
res += mul(Get(s3,0,dy), float4x4(-0.169495925307274,0.005662612151355,-0.020546667277813,-0.010276845656335,-0.184806302189827,-0.110691495239735,0.147296905517578,-0.090311639010906,0.042018365114927,0.018269762396812,0.065688014030457,-0.051130872219801,-0.125153511762619,-0.083729907870293,0.009947238489985,-0.071035452187061));
res += mul(Get(s3,dx,-dy), float4x4(-0.043696422129869,0.133251473307610,0.030951809138060,0.104838512837887,-0.044405102729797,-0.088790647685528,0.111366733908653,0.076229952275753,0.102504357695580,-0.152704894542694,-0.075974471867085,0.087587118148804,-0.070963621139526,0.039358675479889,-0.017118282616138,-0.198863744735718));
res += mul(Get(s3,dx,0), float4x4(0.087400138378143,-0.041690979152918,-0.094959497451782,0.170482411980629,0.052648585289717,-0.078455157577991,-0.052664995193481,0.108247675001621,0.055754736065865,-0.079366676509380,-0.121893517673016,-0.045314140617847,-0.008841601200402,-0.038626275956631,0.054905556142330,-0.120516285300255));
res += mul(Get(s3,dx,dy), float4x4(-0.245761200785637,-0.166680604219437,-0.144182905554771,-0.040097709745169,-0.231946259737015,0.039713043719530,0.146390736103058,0.156705617904663,0.169790267944336,-0.073301166296005,0.238867864012718,-0.067672908306122,-0.400750458240509,0.126849696040154,-0.099103242158890,-0.079188816249371));
return max(float4(0,0,0,0), res);
}
