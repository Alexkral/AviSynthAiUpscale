sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(-0.021630646660924,-0.092358395457268,0.276264935731888,-0.079967461526394,-0.095146059989929,-0.171084314584732,-0.084662355482578,-0.001002957113087,-0.075136430561543,-0.122853904962540,-0.001737247221172,-0.027739929035306,-0.287905007600784,-0.228591859340668,-0.353189229965210,0.082291685044765));
res += mul(Get(s0,-dx,0), float4x4(0.077818758785725,0.075214348733425,-0.045300930738449,-0.077826298773289,-0.118669956922531,-0.084728233516216,0.111881688237190,0.128559470176697,-0.016223743557930,-0.113431945443153,0.083758182823658,-0.281946241855621,-0.162776365876198,-0.155266433954239,-0.167608082294464,0.000217312946916));
res += mul(Get(s0,-dx,dy), float4x4(-0.048040747642517,-0.073826707899570,0.008372128941119,0.092544488608837,-0.028226902708411,-0.051287803798914,0.042803645133972,0.165960803627968,0.012739904224873,-0.068920560181141,-0.107817314565182,-0.468945652246475,-0.054994765669107,-0.013469015248120,-0.220073774456978,-0.049111340194941));
res += mul(Get(s0,0,-dy), float4x4(0.035324245691299,0.210886478424072,-0.028714317828417,0.019715564325452,-0.115747168660164,0.147890910506248,-0.162688747048378,-0.111588709056377,-0.098592303693295,-0.064321972429752,-0.102533653378487,-0.167652800679207,-0.153091073036194,-0.024200512096286,0.024704867973924,0.160696387290955));
res += mul(Get(s0,0,0), float4x4(0.183790281414986,0.092111103236675,-0.105914689600468,-0.060698248445988,-0.056828089058399,0.105149410665035,-0.114526107907295,-0.010546668432653,-0.084422677755356,-0.169188544154167,-0.053402572870255,-0.323648929595947,-0.057659246027470,-0.121070735156536,-0.180886760354042,-0.021196758374572));
res += mul(Get(s0,0,dy), float4x4(-0.019567033275962,0.182940348982811,0.019999152049422,0.039343640208244,0.037172805517912,0.225545853376389,-0.104375049471855,-0.024796387180686,-0.113779351115227,-0.071197792887688,0.238164395093918,-0.260247588157654,-0.037248197942972,-0.010631061159074,-0.136964350938797,0.190343692898750));
res += mul(Get(s0,dx,-dy), float4x4(0.131355211138725,-0.071382164955139,-0.213463112711906,0.165123730897903,0.022929280996323,-0.242283165454865,0.181619375944138,-0.016934692859650,-0.128282502293587,-0.181340888142586,0.015406059101224,-0.286559283733368,-0.173441857099533,-0.159423932433128,0.029848286882043,0.100489452481270));
res += mul(Get(s0,dx,0), float4x4(-0.133956208825111,-0.040869329124689,-0.199161782860756,-0.008636017329991,-0.058285601437092,-0.103167474269867,-0.015841675922275,-0.029223728924990,-0.075344152748585,-0.006063897628337,0.020393745973706,-0.198604822158813,-0.133199796080589,-0.063627950847149,-0.090960472822189,-0.039038583636284));
res += mul(Get(s0,dx,dy), float4x4(-0.099605470895767,0.063550136983395,-0.183033555746078,0.099336475133896,-0.147206336259842,-0.114878699183464,0.157892063260078,-0.145378574728966,0.066264316439629,0.298196107149124,0.129192024469376,-0.120249398052692,-0.053918730467558,-0.301856964826584,-0.235393926501274,0.093201220035553));
res += mul(Get(s1,-dx,-dy), float4x4(0.024138124659657,-0.030647590756416,0.030568281188607,0.048634048551321,0.260269910097122,0.007823902182281,-0.152179986238480,-0.195753008127213,-0.127505034208298,-0.262156605720520,0.034498445689678,0.048030331730843,0.106902465224266,0.092000141739845,-0.087963677942753,-0.145121321082115));
res += mul(Get(s1,-dx,0), float4x4(-0.122927702963352,-0.011856917291880,0.120573580265045,-0.065671041607857,0.044880360364914,-0.040751866996288,-0.120157107710838,-0.178861752152443,-0.197344467043877,-0.189212962985039,-0.064005337655544,-0.073264956474304,0.034385923296213,0.092130504548550,-0.035746682435274,-0.129184707999229));
res += mul(Get(s1,-dx,dy), float4x4(-0.008569063618779,-0.073313064873219,0.044814832508564,-0.222260713577271,0.088484689593315,0.039315629750490,-0.082565948367119,-0.238448172807693,0.067032091319561,-0.034697700291872,-0.165301784873009,-0.059079147875309,-0.085181407630444,-0.066754259169102,0.357128292322159,-0.131089136004448));
res += mul(Get(s1,0,-dy), float4x4(0.063448764383793,0.036961827427149,0.207818895578384,0.014552433043718,-0.004489568993449,0.666204929351807,-0.075772628188133,-0.118050433695316,-0.155560210347176,-0.143088042736053,0.061104454100132,-0.214102298021317,0.008295304141939,-0.080831497907639,-0.097523815929890,-0.068987213075161));
res += mul(Get(s1,0,0), float4x4(0.091156385838985,-0.166564166545868,-0.067004650831223,-0.083491757512093,0.099844627082348,0.051841605454683,-0.058141145855188,0.026971032842994,-0.188618063926697,-0.095968261361122,0.010359759442508,0.193869948387146,-0.249791592359543,0.117779076099396,-0.151502072811127,-0.091710306704044));
res += mul(Get(s1,0,dy), float4x4(0.029979201033711,-0.087802529335022,0.726233601570129,-0.113326035439968,-0.330036401748657,0.323772162199020,-0.047586817294359,-0.111472725868225,0.068162925541401,-0.044747762382030,-0.048912674188614,-0.058041233569384,-0.197150900959969,-0.041697997599840,0.221122279763222,0.002071292139590));
res += mul(Get(s1,dx,-dy), float4x4(0.010311693884432,0.011231687851250,-0.100214816629887,0.121388591825962,-0.192461594939232,-0.170625060796738,-0.248562797904015,-0.016098799183965,-0.030707703903317,-0.135039165616035,0.116383574903011,-0.377203315496445,-0.106652535498142,-0.163594573736191,0.127482742071152,0.002462806180120));
res += mul(Get(s1,dx,0), float4x4(-0.259495556354523,-0.093519121408463,-0.100433371961117,-0.021223269402981,0.040317393839359,-0.246675923466682,-0.130581170320511,-0.016521614044905,-0.080597735941410,0.122912816703320,0.084846049547195,-0.324871331453323,-0.160206660628319,-0.049574740231037,-0.014512265101075,0.007794045377523));
res += mul(Get(s1,dx,dy), float4x4(-0.021041946485639,0.021023578941822,0.126529037952423,-0.247028365731239,-0.225647002458572,0.075277715921402,0.085364967584610,-0.117842681705952,0.167061910033226,0.191358312964439,0.081602014601231,-0.327076643705368,-0.171252042055130,-0.143807813525200,0.164486005902290,0.111801587045193));
res += mul(Get(s2,-dx,-dy), float4x4(-0.035550475120544,-0.095508471131325,0.044309895485640,-0.164347052574158,-0.154531061649323,0.067210070788860,0.068514540791512,-0.081830173730850,0.023136997595429,-0.111274622380733,-0.014901299029589,0.038986124098301,0.041588153690100,0.079645648598671,0.073730461299419,0.119176656007767));
res += mul(Get(s2,-dx,0), float4x4(0.011429463513196,-0.055926244705915,0.116469711065292,-0.095046266913414,-0.140648841857910,-0.012952586635947,-0.222856670618057,-0.197430595755577,-0.057190097868443,-0.020822267979383,0.072844222187996,-0.052123397588730,0.009354890324175,0.058825254440308,0.101695112884045,-0.071735285222530));
res += mul(Get(s2,-dx,dy), float4x4(-0.038820441812277,-0.085840046405792,-0.103720255196095,-0.288181960582733,-0.026677986606956,0.015941521152854,-0.064669921994209,-0.019072327762842,-0.018823048099875,0.038437463343143,0.217086046934128,-0.021495990455151,0.180456995964050,0.045184090733528,0.040254086256027,-0.033084373921156));
res += mul(Get(s2,0,-dy), float4x4(0.067651502788067,-0.063057191669941,0.059510741382837,-0.017343420535326,-0.036740928888321,-0.077965207397938,0.032534357160330,-0.088714018464088,-0.099787056446075,0.006602308247238,-0.123368628323078,0.067371360957623,-0.041373521089554,-0.148129120469093,-0.139129146933556,0.014916702173650));
res += mul(Get(s2,0,0), float4x4(0.090131521224976,-0.003764905035496,0.002842904767022,-0.163248255848885,-0.018181921914220,-0.067162044346333,-0.153930991888046,-0.010306539013982,-0.042530726641417,-0.006156243849546,-0.047512654215097,-0.082306250929832,0.038874115794897,-0.161623060703278,-0.177789703011513,-0.113137662410736));
res += mul(Get(s2,0,dy), float4x4(0.085889816284180,-0.045011885464191,-0.042735125869513,-0.392506301403046,-0.003316115820780,0.228787526488304,-0.030799122527242,0.056667078286409,0.237786188721657,0.147868171334267,-0.003491991898045,-0.007176224142313,-0.098654873669147,-0.075908318161964,-0.036243055015802,0.025410523638129));
res += mul(Get(s2,dx,-dy), float4x4(-0.018904926255345,0.134875625371933,-0.129889830946922,0.243657633662224,-0.069506242871284,-0.103726848959923,0.013573605567217,-0.152824744582176,0.010483589023352,-0.095953814685345,-0.120775617659092,0.228075698018074,0.260049015283585,-0.048848975449800,-0.016528721898794,-0.037803754210472));
res += mul(Get(s2,dx,0), float4x4(-0.032957617193460,-0.022628432139754,0.061031550168991,-0.097666136920452,-0.113159522414207,0.152140200138092,-0.085624627768993,0.115379214286804,-0.140597149729729,-0.125073075294495,-0.029204592108727,0.009383981116116,0.029169302433729,-0.044115718454123,-0.131404876708984,-0.008939314633608));
res += mul(Get(s2,dx,dy), float4x4(0.097707055509090,0.007230212911963,0.026951251551509,-0.498616844415665,-0.087320417165756,0.178227573633194,-0.123866371810436,0.051863886415958,-0.063685923814774,-0.112343892455101,-0.110259614884853,0.002599412808195,0.102590754628181,0.011754611507058,-0.073280088603497,0.181086704134941));
res += mul(Get(s3,-dx,-dy), float4x4(-0.050460118800402,0.042244609445333,-0.141145080327988,0.211931377649307,0.130866080522537,0.252444416284561,0.184856921434402,0.097423829138279,-0.020411662757397,0.072406627237797,-0.123480677604675,0.428509205579758,0.083058111369610,0.164927139878273,-0.016808029264212,0.034817133098841));
res += mul(Get(s3,-dx,0), float4x4(0.000867355323862,0.206646680831909,-0.131271958351135,-0.087723024189472,0.191721543669701,-0.076384119689465,-0.082567751407623,-0.172659143805504,-0.049969561398029,0.103579714894295,-0.186541706323624,0.089359924197197,-0.050124458968639,0.145546153187752,0.087869770824909,-0.064905621111393));
res += mul(Get(s3,-dx,dy), float4x4(0.001200578059070,0.071529537439346,-0.146383881568909,0.063162788748741,0.093080937862396,0.020356507971883,0.011231975629926,-0.282017558813095,-0.160257905721664,0.024597100913525,-0.069036215543747,0.407604843378067,-0.140006318688393,0.000883687869646,0.043977450579405,-0.004562202375382));
res += mul(Get(s3,0,-dy), float4x4(-0.041350875049829,0.228832140564919,-0.133021682500839,-0.199365228414536,0.298654586076736,0.214274227619171,-0.050524447113276,-0.164223596453667,-0.042921472340822,0.018482059240341,0.013219005428255,0.035888835787773,-0.005277249030769,0.144133925437927,-0.076811440289021,0.148904979228973));
res += mul(Get(s3,0,0), float4x4(-0.028936721384525,0.358444571495056,-0.081682167947292,0.045111097395420,0.035364594310522,-0.143559113144875,-0.078077882528305,-0.116809546947479,-0.056816436350346,-0.029481751844287,-0.044346556067467,-0.464605778455734,-0.058218758553267,0.035290379077196,-0.040268383920193,0.042751334607601));
res += mul(Get(s3,0,dy), float4x4(-0.066936254501343,0.014899531379342,-0.133498743176460,0.122569359838963,0.229769676923752,-0.104853585362434,0.021250173449516,-0.132697805762291,-0.170612007379532,-0.363804250955582,-0.153784811496735,0.460739880800247,-0.051202896982431,-0.089654386043549,-0.123727560043335,-0.026274124160409));
res += mul(Get(s3,dx,-dy), float4x4(-0.209160864353180,-0.001672600745223,-0.437654703855515,0.129672169685364,0.175929844379425,-0.079797245562077,-0.059645734727383,-0.130269125103951,-0.123391516506672,-0.056221958249807,-0.112303122878075,0.408379375934601,0.063620023429394,0.255639165639877,0.022813573479652,0.258146911859512));
res += mul(Get(s3,dx,0), float4x4(-0.182744324207306,-0.030629971995950,-0.172463327646255,0.082842238247395,0.161777913570404,-0.114779375493526,0.016219578683376,-0.080628149211407,-0.145446553826332,-0.286734372377396,-0.003195170080289,0.303403258323669,-0.126891568303108,0.063682161271572,-0.149537816643715,-0.026547508314252));
res += mul(Get(s3,dx,dy), float4x4(-0.212609559297562,-0.304861694574356,-0.149634137749672,0.284431546926498,-0.045172274112701,-0.010182748548687,-0.076889269053936,-0.212224736809731,-0.239725887775421,-0.328525722026825,-0.189519762992859,0.087402075529099,-0.156817153096199,0.168246001005173,-0.202668145298958,0.004566911142319));
return max(float4(0,0,0,0), res);
}
