sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.008463330566883,0.475414752960205,-0.463929742574692,-0.316537648439407,-0.266695916652679,-0.098506301641464,-0.124130025506020,0.137679412961006,0.007769089657813,-0.042861700057983,0.098310887813568,-0.069978184998035,-0.159835413098335,-0.090764835476875,-0.153319224715233,0.073142908513546));
res += mul(Get(s0,-dx,0), float4x4(-0.113653488457203,-0.065152332186699,0.075602762401104,-0.178714111447334,0.106940738856792,-0.167161479592323,0.083268374204636,-0.080824367702007,-0.124217927455902,0.016280436888337,0.026616603136063,-0.097525596618652,-0.024330267682672,-0.005811686161906,-0.124581091105938,-0.046122539788485));
res += mul(Get(s0,-dx,dy), float4x4(0.019476283341646,-0.113718301057816,0.214444294571877,0.124226257205009,0.519775211811066,-0.131991088390350,-0.433911740779877,-0.078458458185196,0.087088845670223,-0.125770658254623,-0.091856576502323,-0.125367015600204,0.042258419096470,-0.031425915658474,0.036569096148014,0.027326852083206));
res += mul(Get(s0,0,-dy), float4x4(-0.094870798289776,-0.041940767318010,-0.404101222753525,-0.264563053846359,-0.162534430623055,-0.121529571712017,-0.277087628841400,-0.041809607297182,0.027047654613853,-0.063218533992767,0.011011967435479,-0.009808334521949,-0.003414222970605,-0.042814422398806,-0.151404991745949,0.075695499777794));
res += mul(Get(s0,0,0), float4x4(-0.267452359199524,-0.106651745736599,-0.383712500333786,-0.146630302071571,0.010333136655390,0.022192630916834,-0.069747619330883,-0.097237490117550,-0.173158228397369,0.002027074573562,-0.163327530026436,-0.124484099447727,-0.069606818258762,0.000916176184546,-0.123141795396805,-0.139210060238838));
res += mul(Get(s0,0,dy), float4x4(-0.124920211732388,-0.146184056997299,-0.110765069723129,0.165055483579636,0.147619694471359,-0.038377992808819,-0.471236795186996,-0.012413986027241,-0.039239238947630,0.053418751806021,-0.157549589872360,-0.160871773958206,-0.256095677614212,-0.049186602234840,-0.232214003801346,-0.063411816954613));
res += mul(Get(s0,dx,-dy), float4x4(0.352848231792450,-0.232455864548683,-0.264674454927444,-0.104647681117058,-0.072375439107418,-0.188070461153984,0.384252756834030,0.024628628045321,0.170496061444283,0.015596288256347,-0.120325639843941,0.190879970788956,0.150432035326958,-0.100803464651108,-0.218452215194702,0.185394898056984));
res += mul(Get(s0,dx,0), float4x4(0.117949150502682,-0.038496568799019,-0.219473958015442,0.017143137753010,-0.160235285758972,0.003242225851864,0.026103215292096,-0.044780485332012,0.016025457531214,0.015219830907881,0.106020234525204,0.031942602247000,0.089191019535065,-0.127542108297348,-0.144705533981323,-0.205627530813217));
res += mul(Get(s0,dx,dy), float4x4(0.035972476005554,-0.036141153424978,0.086383372545242,-0.055851787328720,-0.404633074998856,-0.061901509761810,-0.373156428337097,0.014479032717645,0.005623934324831,0.051264993846416,-0.088581077754498,-0.154392048716545,0.008838836103678,-0.209542185068130,-0.060615643858910,-0.011494307778776));
res += mul(Get(s1,-dx,-dy), float4x4(0.505058169364929,0.212444439530373,0.086913265287876,0.101208627223969,-0.000727157050278,-0.027077810838819,-0.051189616322517,0.042391732335091,-0.098324738442898,0.106237821280956,0.480734765529633,-0.131999701261520,0.340009301900864,-0.089381858706474,0.116924487054348,-0.033743388950825));
res += mul(Get(s1,-dx,0), float4x4(-0.003731071716174,0.120383404195309,0.145652040839195,0.158457636833191,-0.006912091746926,-0.018719673156738,0.043696098029613,0.017939900979400,-0.121963910758495,-0.141190573573112,0.013089060783386,-0.198767825961113,0.128659710288048,-0.043202936649323,0.242668926715851,-0.020800918340683));
res += mul(Get(s1,-dx,dy), float4x4(-0.235130071640015,0.018277823925018,0.004239820409566,0.082030363380909,0.061887301504612,0.012897845357656,-0.016145119443536,-0.017235333099961,-0.200552612543106,-0.117960453033447,-0.504405975341797,-0.085894338786602,0.042270086705685,-0.017034148797393,0.055682290345430,0.024429630488157));
res += mul(Get(s1,0,-dy), float4x4(0.120681516826153,0.230509489774704,-0.457247227430344,-0.165728881955147,0.019331110641360,0.008241478353739,0.147482857108116,0.053025517612696,0.107079803943634,-0.245845645666122,-0.050604391843081,0.115737609565258,-0.029037009924650,-0.050462037324905,0.096863515675068,-0.033404592424631));
res += mul(Get(s1,0,0), float4x4(-0.050235398113728,-0.135035291314125,-0.073399193584919,-0.093869417905807,-0.011025601066649,0.028716947883368,0.180736526846886,0.040429767221212,-0.042779952287674,-0.192610517144203,0.153170213103294,-0.016948439180851,-0.134296074509621,0.034869499504566,0.067460358142853,0.054338116198778));
res += mul(Get(s1,0,dy), float4x4(-0.066386014223099,-0.049360379576683,-0.042289141565561,-0.062434803694487,0.018443934619427,0.047625187784433,-0.069578848779202,0.010853857733309,-0.212974846363068,-0.049810506403446,0.183885648846626,0.034041732549667,0.009187704883516,0.097016170620918,-0.244086667895317,-0.127191185951233));
res += mul(Get(s1,dx,-dy), float4x4(0.007589851506054,0.166329324245453,-0.482266008853912,-0.078331336379051,-0.046280488371849,-0.033647377043962,0.012871637940407,0.038606781512499,0.298036128282547,-0.502175450325012,-0.286021053791046,0.083298608660698,-0.060930132865906,-0.061669185757637,0.062476228922606,0.117945142090321));
res += mul(Get(s1,dx,0), float4x4(-0.044492281973362,-0.330607295036316,-0.303936272859573,0.084049321711063,-0.076623640954494,-0.008908438496292,0.089868180453777,0.024850532412529,0.128639072179794,-0.375946789979935,-0.152395740151405,0.081806950271130,-0.042911276221275,-0.077073566615582,-0.246133148670197,0.289815425872803));
res += mul(Get(s1,dx,dy), float4x4(0.159147828817368,-0.101412050426006,-0.280264794826508,0.311292558908463,-0.045157879590988,0.004561202134937,-0.076906010508537,0.029621833935380,-0.029786799103022,-0.405951201915741,0.303579807281494,-0.179110810160637,0.001742559368722,-0.016531988978386,-0.532188117504120,0.205115363001823));
res += mul(Get(s2,-dx,-dy), float4x4(0.285293966531754,-0.234357222914696,0.313637286424637,-0.155177146196365,-0.294378131628036,1.042295813560486,-0.364827245473862,-0.214545413851738,0.044941656291485,0.074357546865940,0.072050690650940,-0.037396900355816,-0.195931866765022,-0.025339864194393,0.081300191581249,-0.018083382397890));
res += mul(Get(s2,-dx,0), float4x4(0.221127793192863,0.049885161221027,-0.139637365937233,-0.051207251846790,-0.338150709867477,-0.126255899667740,0.075985707342625,-0.384939491748810,-0.164456799626350,-0.106976956129074,0.120236799120903,-0.086719319224358,-0.113173514604568,-0.050505824387074,0.023416744545102,0.048341915011406));
res += mul(Get(s2,-dx,dy), float4x4(-0.087113909423351,-0.138047933578491,-0.591359734535217,-0.174468129873276,-0.238621056079865,-0.052036259323359,-0.138560175895691,-0.194221988320351,-0.119246266782284,-0.179603040218353,0.147754922509193,-0.177401348948479,-0.011373713612556,-0.108806490898132,0.010741909034550,0.138072207570076));
res += mul(Get(s2,0,-dy), float4x4(0.099162310361862,0.104868575930595,-0.099335901439190,-0.092393033206463,-0.142196774482727,0.033806920051575,-0.558665871620178,0.025140702724457,0.002966189989820,0.040141668170691,-0.014220983721316,0.055571906268597,-0.044587694108486,0.034613337367773,0.080208368599415,-0.079219721257687));
res += mul(Get(s2,0,0), float4x4(-0.002933717099950,0.244219392538071,-0.170368716120720,0.162452876567841,-0.027850426733494,-0.547065019607544,-0.347543418407440,-0.054922521114349,-0.119972474873066,-0.069457612931728,0.017044525593519,0.076386310160160,0.019496915861964,-0.042764849960804,-0.004645351786166,-0.025675324723125));
res += mul(Get(s2,0,dy), float4x4(0.157818019390106,-0.112599328160286,-0.436592072248459,0.223122611641884,0.119045786559582,-0.118340387940407,-0.484720528125763,-0.005341916345060,-0.070909135043621,-0.126465290784836,-0.079455129802227,-0.141105487942696,0.154396697878838,0.055064570158720,0.065268814563751,-0.094851262867451));
res += mul(Get(s2,dx,-dy), float4x4(-0.159664273262024,0.065031044185162,-0.019269615411758,0.059185136109591,-0.206633016467094,-0.170725688338280,0.216268718242645,0.069179974496365,-0.123925335705280,0.117474533617496,-0.025347644463181,0.156090736389160,-0.052929285913706,0.044360060244799,-0.137619078159332,0.062564998865128));
res += mul(Get(s2,dx,0), float4x4(-0.495407760143280,-0.000378089491278,-0.095621190965176,0.145169153809547,0.017959915101528,-0.219726383686066,-0.143297880887985,-0.029075630009174,-0.149859011173248,-0.030420400202274,-0.049513209611177,0.200131610035896,0.118306756019592,0.057780828326941,-0.093559093773365,0.174766570329666));
res += mul(Get(s2,dx,dy), float4x4(-0.036044832319021,-0.184810340404510,-0.581834793090820,0.023287152871490,0.044148687273264,0.078426741063595,-0.053439706563950,0.007367656566203,-0.028617192059755,-0.086537875235081,-0.169444471597672,-0.056862574070692,0.047427684068680,0.157556250691414,-0.190072029829025,-0.200388535857201));
res += mul(Get(s3,-dx,-dy), float4x4(0.030527036637068,0.004156032111496,-0.006490782834589,-0.028955871239305,-0.392128407955170,-0.148906633257866,-0.057189814746380,0.194874972105026,-0.153122708201408,-0.108162641525269,0.026749137789011,-0.164348185062408,-0.060033760964870,0.245521530508995,-0.008603906258941,-0.185217961668968));
res += mul(Get(s3,-dx,0), float4x4(-0.011199786327779,-0.014428926631808,0.018068104982376,0.009710009209812,-0.154574900865555,-0.009931458160281,-0.028075926005840,-0.045387111604214,-0.248218372464180,-0.174446672201157,0.126897469162941,-0.111087456345558,-0.184252262115479,-0.093610584735870,-0.301901221275330,-0.122039020061493));
res += mul(Get(s3,-dx,dy), float4x4(0.010215317830443,-0.006926958914846,0.007201479747891,-0.015834195539355,-0.204449445009232,-0.035141516476870,0.050152838230133,0.067685000598431,0.065397329628468,0.067834705114365,0.055491901934147,-0.005933650769293,0.053022202104330,-0.104827575385571,-0.069630630314350,0.073815077543259));
res += mul(Get(s3,0,-dy), float4x4(0.079953379929066,-0.022651612758636,-0.019021060317755,-0.040450993925333,0.172784015536308,-0.069764398038387,-0.064314156770706,0.195426076650620,0.170597061514854,-0.112754225730896,0.036847416311502,0.008259189315140,0.072682298719883,0.048754516988993,-0.023617541417480,-0.051084533333778));
res += mul(Get(s3,0,0), float4x4(-0.004039413761348,-0.022521464154124,-0.025269409641623,-0.021474700421095,0.222558915615082,0.133235335350037,-0.101454034447670,-0.371384441852570,-0.000760286522564,-0.112888723611832,0.069235570728779,-0.026296421885490,-0.074581846594810,-0.089956425130367,-0.307438641786575,-0.056090265512466));
res += mul(Get(s3,0,dy), float4x4(0.020228803157806,-0.009527629241347,-0.010022250004113,-0.009842730127275,0.149842455983162,0.032232444733381,-0.034259803593159,-0.033826936036348,0.340445160865784,0.029238050803542,0.049365803599358,-0.134748771786690,0.044745799154043,0.005824770778418,-0.148838311433792,0.142249494791031));
res += mul(Get(s3,dx,-dy), float4x4(0.045385882258415,-0.031269125640392,0.008878111839294,0.001993570942432,0.050605595111847,0.099491968750954,-0.173618748784065,0.056546591222286,-0.024865765124559,-0.001213862444274,-0.082829929888248,0.317934513092041,0.171211764216423,-0.031345237046480,-0.086343079805374,0.053976774215698));
res += mul(Get(s3,dx,0), float4x4(-0.017076591029763,-0.037179287523031,-0.014205176383257,0.009420913644135,0.017725221812725,0.040715202689171,-0.243464961647987,-0.157172009348869,-0.027347227558494,0.066305540502071,-0.013845683075488,0.324042588472366,0.094453155994415,-0.091647841036320,-0.247684091329575,0.003867252264172));
res += mul(Get(s3,dx,dy), float4x4(-0.007778801489621,-0.027186876162887,-0.000638552068267,-0.010643390007317,0.128448024392128,-0.042934991419315,-0.318310558795929,0.509631991386414,0.177129849791527,0.078053832054138,0.034735556691885,-0.156964436173439,-0.013135614804924,0.000536801060662,-0.168848663568497,0.134347841143608));
return max(float4(0,0,0,0), res);
}
