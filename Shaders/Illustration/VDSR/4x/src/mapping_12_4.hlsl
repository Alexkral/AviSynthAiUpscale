sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.022052457556129,-0.172210872173309,-0.015824070200324,-0.076935485005379,-0.193061545491219,0.207367986440659,-0.138741344213486,-0.134362176060677,-0.248597323894501,0.135893985629082,-0.234567031264305,-0.171462252736092,-0.025769677013159,-0.153893068432808,0.044009316712618,-0.008183750323951));
res += mul(Get(s0,-dx,0), float4x4(0.120818756520748,-0.108584508299828,0.015294237993658,-0.120314635336399,0.054791741073132,0.071503847837448,-0.036473564803600,-0.099651969969273,-0.132638558745384,0.277384698390961,0.028584590181708,-0.033732518553734,-0.059225250035524,0.480601757764816,0.126244232058525,-0.143298014998436));
res += mul(Get(s0,-dx,dy), float4x4(-0.016425894573331,0.198402419686317,0.004926700610667,-0.118275776505470,0.062814518809319,-0.180805519223213,0.012791337445378,0.005537818185985,0.144030377268791,0.262922018766403,0.351222962141037,0.380011707544327,-0.022347087040544,0.270158708095551,0.008748670108616,-0.369921863079071));
res += mul(Get(s0,0,-dy), float4x4(0.106129124760628,0.073441192507744,-0.107246585190296,-0.111394613981247,-0.126690655946732,0.020002420991659,-0.144445270299911,-0.089901253581047,-0.135777518153191,-0.158235609531403,0.063248708844185,0.078863047063351,0.089337594807148,-0.190876662731171,-0.055106084793806,-0.204057738184929));
res += mul(Get(s0,0,0), float4x4(0.108020357787609,0.249086230993271,-0.066878788173199,-0.030690813437104,-0.025527877733111,-0.047465588897467,-0.172046586871147,0.066997975111008,0.092228949069977,-0.074561446905136,0.042855188250542,0.068893328309059,0.124715618789196,-0.073649048805237,0.036509942263365,-0.172227606177330));
res += mul(Get(s0,0,dy), float4x4(0.067110799252987,-0.095616683363914,-0.008808518759906,0.033595044165850,-0.041179671883583,-0.021524442359805,0.036091249436140,0.139805406332016,0.202938124537468,0.391319274902344,0.065224923193455,0.197446867823601,0.048723030835390,0.103935621678829,-0.022012399509549,-0.172811284661293));
res += mul(Get(s0,dx,-dy), float4x4(-0.006506783422083,-0.173417866230011,-0.071045354008675,-0.021333090960979,0.089533291757107,0.146291285753250,-0.299777477979660,0.167578607797623,-0.147542387247086,-0.139783546328545,0.208191648125648,0.028134582564235,0.086573980748653,-0.258912116289139,0.062580071389675,-0.037114653736353));
res += mul(Get(s0,dx,0), float4x4(-0.119573466479778,-0.022420721128583,0.000057760742493,-0.036055710166693,0.041960030794144,-0.079164244234562,-0.322961747646332,0.251629352569580,0.207163810729980,-0.141254007816315,0.287532687187195,0.034984607249498,0.179894015192986,-0.076450571417809,-0.087181992828846,-0.034528024494648));
res += mul(Get(s0,dx,dy), float4x4(0.264059126377106,-0.110827371478081,-0.030290331691504,0.068022750318050,0.268613249063492,-0.072868570685387,-0.160832643508911,0.309502363204956,0.234463632106781,-0.229876399040222,0.006720969919115,0.079392917454243,0.062915816903114,0.053419794887304,-0.015127956867218,0.008598099462688));
res += mul(Get(s1,-dx,-dy), float4x4(-0.169140219688416,0.078569181263447,0.131179392337799,-0.183517083525658,0.111216582357883,0.131776452064514,-0.083516560494900,0.045623183250427,0.041143972426653,0.114366315305233,-0.097986012697220,-0.002905341098085,-0.157946035265923,-0.075600475072861,0.079980179667473,-0.113051094114780));
res += mul(Get(s1,-dx,0), float4x4(-0.199292093515396,0.176057100296021,0.055966570973396,-0.022576615214348,0.120644479990005,0.309769988059998,-0.054668460041285,0.151214495301247,0.054826598614454,-0.017227455973625,-0.045288290828466,-0.113265275955200,-0.439922869205475,-0.186330333352089,-0.000616816396359,0.235015124082565));
res += mul(Get(s1,-dx,dy), float4x4(0.035026192665100,0.010314703918993,0.065875232219696,0.159503772854805,0.159842640161514,-0.106034897267818,-0.069756738841534,-0.031564183533192,0.190615758299828,-0.031187206506729,-0.110913589596748,-0.339863270521164,-0.208325833082199,-0.114397846162319,0.047358751296997,0.116007313132286));
res += mul(Get(s1,0,-dy), float4x4(-0.094666779041290,-0.004411190282553,0.024463996291161,0.130010530352592,0.059989977627993,-0.091066561639309,0.019761623814702,-0.061053369194269,0.159353718161583,-0.064035400748253,-0.090741328895092,-0.034357786178589,-0.188095077872276,-0.231516525149345,0.170715585350990,0.019243333488703));
res += mul(Get(s1,0,0), float4x4(0.105440847575665,0.075608946382999,0.041404318064451,0.065781295299530,0.122560314834118,-0.081072784960270,-0.045785669237375,0.018468167632818,-0.124025069177151,-0.083951368927956,0.054967712610960,-0.035844471305609,-0.217091649770737,-0.224023133516312,0.213114842772484,0.282525867223740));
res += mul(Get(s1,0,dy), float4x4(0.061447668820620,0.063532367348671,-0.018813740462065,0.098081730306149,0.075755804777145,0.073505409061909,0.022862058132887,0.001832982059568,0.075532905757427,-0.114979021251202,0.130591765046120,-0.072393111884594,0.029435625299811,-0.079381629824638,-0.103018037974834,-0.215396329760551));
res += mul(Get(s1,dx,-dy), float4x4(0.173735588788986,0.258041858673096,-0.111980371177197,0.161880359053612,-0.011492621153593,-0.062405101954937,-0.109709531068802,-0.264895439147949,0.024960456416011,-0.071622148156166,-0.077477790415287,0.069071888923645,-0.046176351606846,-0.069620318710804,0.146007701754570,0.162704363465309));
res += mul(Get(s1,dx,0), float4x4(0.063687086105347,0.092163696885109,-0.062609784305096,-0.058026272803545,-0.125292941927910,-0.033162835985422,-0.004651488270611,-0.123612545430660,0.138665512204170,-0.005741795524955,-0.010847331024706,0.249046072363853,0.063663110136986,0.007702778559178,-0.071458965539932,0.210514441132545));
res += mul(Get(s1,dx,dy), float4x4(0.209126606583595,0.240475475788116,-0.083184763789177,0.027461228892207,0.121601350605488,0.027736496180296,0.151500105857849,-0.133631855249405,0.105158410966396,0.038731887936592,-0.112336121499538,0.240910038352013,0.235505029559135,-0.004673411138356,-0.030884386971593,-0.223546907305717));
res += mul(Get(s2,-dx,-dy), float4x4(-0.308346062898636,0.124874942004681,-0.091693326830864,-0.082193307578564,-0.093364603817463,-0.011216353625059,0.134032905101776,-0.016251422464848,-0.253783077001572,-0.006234891712666,-0.036831378936768,0.115230947732925,0.038009107112885,0.289037495851517,-0.046555191278458,-0.250358015298843));
res += mul(Get(s2,-dx,0), float4x4(-0.288908064365387,-0.020715147256851,0.003365528304130,-0.108641773462296,0.031497135758400,-0.097913466393948,-0.111751116812229,-0.142646417021751,-0.386055529117584,0.031687989830971,0.219448447227478,0.237514644861221,-0.104745872318745,0.141489207744598,-0.158181682229042,-0.164657577872276));
res += mul(Get(s2,-dx,dy), float4x4(-0.142484843730927,0.068387456238270,-0.035633958876133,-0.202315121889114,0.247261583805084,-0.138953283429146,-0.194605931639671,-0.377691000699997,-0.158404186367989,-0.157956808805466,0.282060146331787,0.130962431430817,0.077193751931190,0.040923159569502,0.016322722658515,-0.089693032205105));
res += mul(Get(s2,0,-dy), float4x4(0.287343353033066,0.117783628404140,-0.118812255561352,-0.086950808763504,-0.001672385726124,0.033383030444384,-0.072855524718761,0.064582265913486,-0.235033705830574,0.068651773035526,0.043323244899511,0.414285004138947,-0.225303173065186,0.088760539889336,0.265103012323380,0.021067632362247));
res += mul(Get(s2,0,0), float4x4(0.297828108072281,-0.018554739654064,-0.050439592450857,-0.088742390275002,0.002200230490416,-0.030922329053283,-0.160268887877464,0.012605164200068,-0.057370293885469,0.196572154760361,0.110983610153198,0.275619298219681,-0.032321266829967,0.024011433124542,-0.067201539874077,0.068583890795708));
res += mul(Get(s2,0,dy), float4x4(-0.033990625292063,0.173986360430717,-0.029772976413369,-0.273803681135178,0.010872596874833,-0.001878381823190,-0.130439996719360,-0.127274006605148,0.059433411806822,-0.262036085128784,-0.040097840130329,0.262969464063644,0.027553239837289,-0.051983598619699,-0.023223390802741,0.096255801618099));
res += mul(Get(s2,dx,-dy), float4x4(-0.062465492635965,-0.072425164282322,-0.156018406152725,-0.256511420011520,0.201163172721863,0.262136161327362,-0.067758806049824,0.132346466183662,0.139390736818314,0.408569335937500,-0.081865243613720,0.180824324488640,-0.139307811856270,0.046566359698772,0.471127986907959,0.232963219285011));
res += mul(Get(s2,dx,0), float4x4(0.133907482028008,0.098745301365852,0.031792409718037,-0.233249455690384,0.179623395204544,-0.072602234780788,-0.145315021276474,-0.082151308655739,0.078934714198112,0.281094878911972,-0.011254473589361,0.225340485572815,-0.032342225313187,0.196781262755394,0.239517420530319,0.195886388421059));
res += mul(Get(s2,dx,dy), float4x4(-0.122613131999969,0.140129849314690,0.371337026357651,-0.312672138214111,-0.134669840335846,0.040654469281435,-0.195820122957230,-0.139738097786903,0.187127277255058,-0.213215991854668,-0.119367517530918,-0.147880226373672,0.109745107591152,-0.042117126286030,0.119689427316189,0.295026868581772));
res += mul(Get(s3,-dx,-dy), float4x4(-0.244553759694099,-0.019792806357145,-0.078261986374855,0.019001070410013,-0.076232023537159,0.001300956588238,0.046540755778551,-0.061894364655018,0.161684229969978,-0.034090206027031,-0.215017914772034,-0.188187927007675,-0.194563493132591,-0.166609838604927,0.136012017726898,0.048939768224955));
res += mul(Get(s3,-dx,0), float4x4(-0.219448938965797,-0.020787073299289,-0.064367942512035,0.084470301866531,-0.082247287034988,-0.038257874548435,-0.055617403239012,-0.069795891642570,0.486270815134048,0.209521830081940,0.017437845468521,-0.157233864068985,-0.095235303044319,-0.020003000274301,0.217674136161804,0.170086562633514));
res += mul(Get(s3,-dx,dy), float4x4(-0.226888850331306,0.092077352106571,0.042359787970781,-0.066080644726753,-0.120757892727852,-0.132947310805321,0.025533571839333,0.155502676963806,-0.045074254274368,0.167417883872986,0.102152675390244,-0.223103418946266,-0.193282529711723,0.004881978500634,-0.005265691317618,-0.094450727105141));
res += mul(Get(s3,0,-dy), float4x4(-0.217449828982353,-0.092789605259895,0.099062532186508,0.103143490850925,-0.087017558515072,-0.143346309661865,0.089498609304428,-0.079559087753296,-0.051433358341455,0.030082400888205,-0.057068355381489,-0.085490204393864,-0.053107243031263,-0.083163350820541,0.264993637800217,0.063222080469131));
res += mul(Get(s3,0,0), float4x4(0.212946221232414,-0.051434602588415,-0.032492663711309,0.134329915046692,-0.027251547202468,-0.092490389943123,0.051449269056320,0.011841837316751,0.000768310215790,0.088242337107658,0.167550176382065,-0.031935621052980,0.071632131934166,-0.108788944780827,-0.137470200657845,0.104743137955666));
res += mul(Get(s3,0,dy), float4x4(0.008842016570270,0.110419519245625,-0.052374318242073,0.144532307982445,-0.078062437474728,-0.119601026177406,0.138396516442299,0.161751821637154,0.052516687661409,-0.015320599079132,0.127283111214638,-0.077498145401478,-0.054575156420469,-0.058644510805607,-0.013670731335878,0.051907863467932));
res += mul(Get(s3,dx,-dy), float4x4(-0.030145969241858,0.085480079054832,-0.165580838918686,0.092953555285931,-0.149856701493263,-0.149663329124451,0.148616358637810,-0.186043828725815,-0.160422518849373,0.040008191019297,0.008124370127916,-0.227968409657478,0.034783188253641,-0.087321653962135,0.085379853844643,-0.091766767203808));
res += mul(Get(s3,dx,0), float4x4(0.124915726482868,0.199555829167366,-0.284676849842072,-0.100311651825905,0.018604833632708,-0.131378129124641,-0.003639676375315,-0.011387540958822,-0.059302307665348,-0.088738344609737,0.047445777803659,-0.131746545433998,0.227003768086433,0.037278804928064,-0.155061408877373,-0.059014771133661));
res += mul(Get(s3,dx,dy), float4x4(0.178344398736954,0.408900886774063,-0.105414479970932,-0.279276847839355,0.107004128396511,-0.067783042788506,-0.091232605278492,0.271439641714096,0.065470643341541,-0.108184732496738,0.324747771024704,-0.010900791734457,0.124170936644077,-0.016415255144238,-0.019756371155381,0.084117040038109));
return max(float4(0,0,0,0), res);
}
