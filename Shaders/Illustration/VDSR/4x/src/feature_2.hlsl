sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.003689767094329,-0.118136301636696,-0.077744424343109,-0.235365316271782) * Get(-dx,-dy);
res += float4(0.235476002097130,0.035547886043787,0.025427022948861,0.008367796428502) * Get(-dx,0);
res += float4(0.080799132585526,-0.000280792650301,-0.049561690539122,0.209979891777039) * Get(-dx,dy);
res += float4(-0.080759450793266,-0.054226901382208,0.113785959780216,0.069101460278034) * Get(0,-dy);
res += float4(0.038672804832458,0.063675813376904,-0.079614385962486,0.042666442692280) * Get(0,0);
res += float4(0.097914658486843,-0.024780040606856,-0.064417131245136,0.221845045685768) * Get(0,dy);
res += float4(0.092297837138176,-0.062222193926573,0.005155542399734,-0.007218432147056) * Get(dx,-dy);
res += float4(-0.129496961832047,-0.124039344489574,-0.149825900793076,-0.200811997056007) * Get(dx,0);
res += float4(-0.199517652392387,-0.065129630267620,-0.069107174873352,0.030228896066546) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
