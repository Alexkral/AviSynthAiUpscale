sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.073047302663326,0.016275120899081,-0.174173638224602,-0.004238076508045,0.099722549319267,-0.111304350197315,-0.056955736130476,0.060964491218328,0.030140027403831,0.044262371957302,-0.072096966207027,0.071381986141205,0.091715008020401,-0.038301002234221,-0.097928658127785,0.146956294775009));
res += mul(Get(s0,-dx,0), float4x4(0.086303107440472,-0.003905852092430,-0.083900004625320,-0.160535588860512,-0.265020579099655,0.001502464525402,0.126154169440269,0.068925276398659,-0.066021099686623,0.206920742988586,-0.015317261219025,0.014110905118287,0.018905520439148,0.067805208265781,-0.055823653936386,-0.118194669485092));
res += mul(Get(s0,-dx,dy), float4x4(-0.039796121418476,-0.023029070347548,-0.076044388115406,-0.132283613085747,0.149361118674278,-0.055136110633612,0.079091161489487,0.051784157752991,-0.138480871915817,-0.213753923773766,0.069413244724274,-0.034755315631628,-0.033291473984718,0.336790293455124,0.152476802468300,-0.088964298367500));
res += mul(Get(s0,0,-dy), float4x4(0.071285292506218,0.178475558757782,0.039481844753027,0.031158905476332,-0.079273156821728,-0.081864923238754,-0.123225510120392,-0.087059088051319,-0.113521881401539,-0.117085687816143,-0.000391363195376,-0.010292638093233,0.117478765547276,0.014717176556587,-0.040597438812256,-0.135047659277916));
res += mul(Get(s0,0,0), float4x4(0.114676780998707,-0.055211149156094,-0.062647402286530,0.051525607705116,0.002884201472625,-0.113989174365997,-0.005423367023468,-0.005374342203140,-0.225375220179558,0.069410532712936,-0.229344695806503,-0.104990743100643,-0.170198768377304,-0.071408540010452,-0.108729690313339,-0.037788249552250));
res += mul(Get(s0,0,dy), float4x4(0.180136829614639,-0.241616502404213,-0.064539805054665,-0.204269915819168,0.003779232967645,-0.161735162138939,-0.052215296775103,0.051623601466417,-0.045136816799641,-0.060884971171618,0.056109394878149,0.150530695915222,-0.078755490481853,-0.112769417464733,0.153371259570122,0.131959363818169));
res += mul(Get(s0,dx,-dy), float4x4(0.196134746074677,0.030107522383332,0.106620356440544,0.016530295833945,0.132781162858009,0.007106483448297,0.030945615842938,0.216332137584686,-0.098091781139374,0.113767758011818,0.018222674727440,-0.167895421385765,0.281284660100937,-0.007243839558214,0.048925224691629,0.065257064998150));
res += mul(Get(s0,dx,0), float4x4(0.073715940117836,-0.106117457151413,0.197913244366646,0.095125421881676,-0.062682934105396,0.165555819869041,-0.057908844202757,-0.046983920037746,-0.042527697980404,0.074504926800728,0.056079678237438,-0.001090793171898,0.026981038972735,-0.156403601169586,-0.149330556392670,-0.057108622044325));
res += mul(Get(s0,dx,dy), float4x4(0.078736804425716,-0.069118104875088,-0.106780573725700,0.059097744524479,-0.010793704539537,-0.088979572057724,-0.025807270780206,-0.254835247993469,-0.068634688854218,0.013173712417483,0.037296857684851,-0.118057884275913,0.004701879806817,-0.129229351878166,-0.225040823221207,-0.159987851977348));
res += mul(Get(s1,-dx,-dy), float4x4(0.159942045807838,0.208966165781021,0.027371581643820,-0.173136249184608,0.082599699497223,0.198941141366959,-0.209654405713081,-0.008035658858716,-0.021356847137213,0.016786849126220,0.000588726892602,0.002260703127831,-0.101703338325024,-0.044440250843763,0.003467430127785,0.011809878051281));
res += mul(Get(s1,-dx,0), float4x4(-0.091390445828438,0.119292356073856,-0.149471074342728,-0.152483478188515,0.140789970755577,-0.020275287330151,-0.069851525127888,-0.056264355778694,-0.163440808653831,0.100801154971123,0.139444410800934,0.027592726051807,-0.009557937271893,0.049596857279539,0.098108857870102,-0.014610689133406));
res += mul(Get(s1,-dx,dy), float4x4(0.126095488667488,0.058530304580927,-0.091485597193241,0.036484863609076,-0.004839074797928,-0.133752942085266,0.002381889382377,-0.176271855831146,0.111187592148781,-0.141893327236176,0.052797816693783,-0.011693106964231,-0.117553606629372,0.052001044154167,-0.168110340833664,0.023236501961946));
res += mul(Get(s1,0,-dy), float4x4(-0.013084532693028,-0.173573374748230,0.103355981409550,-0.087717399001122,0.075090758502483,0.058089792728424,-0.064766600728035,0.007635909132659,0.042778901755810,0.056264337152243,-0.128468409180641,-0.004951637703925,0.009467592462897,0.009318470023572,0.239032208919525,0.228378415107727));
res += mul(Get(s1,0,0), float4x4(0.060870613902807,0.113931849598885,0.169285282492638,0.016524428501725,0.083557851612568,0.145183742046356,-0.174882069230080,-0.023178126662970,-0.029977623373270,0.160004407167435,-0.107315376400948,0.107852697372437,-0.027222918346524,-0.062704533338547,0.030966075137258,-0.137971356511116));
res += mul(Get(s1,0,dy), float4x4(0.044281028211117,-0.121868863701820,0.055438678711653,0.095108598470688,0.013716286048293,-0.026128618046641,0.054467335343361,0.207418382167816,0.008038756437600,-0.201490387320518,0.076227642595768,0.049432732164860,-0.162522345781326,-0.026009764522314,-0.046342283487320,-0.040817394852638));
res += mul(Get(s1,dx,-dy), float4x4(-0.077386371791363,-0.040061075240374,-0.036843113601208,-0.146308511495590,-0.265250325202942,-0.015059636905789,-0.084722831845284,0.048296719789505,0.086803890764713,-0.094272889196873,-0.000257957581198,0.052863374352455,-0.153518363833427,-0.026599068194628,-0.011628692038357,-0.045413061976433));
res += mul(Get(s1,dx,0), float4x4(0.030247608199716,0.060252536088228,0.002436045790091,0.108724921941757,-0.207864075899124,0.079956561326981,0.118186213076115,-0.001079417299479,0.001734672114253,-0.016969580203295,-0.038377702236176,0.057185865938663,-0.052435398101807,-0.109052963554859,-0.069118559360504,0.028808280825615));
res += mul(Get(s1,dx,dy), float4x4(0.167225435376167,0.035884078592062,0.184374585747719,0.122983247041702,-0.127679944038391,0.082891948521137,0.017486741766334,0.041345845907927,0.025643983855844,0.008174238726497,0.063522771000862,0.137959331274033,0.189759418368340,-0.119804337620735,0.001759542035870,-0.169306233525276));
res += mul(Get(s2,-dx,-dy), float4x4(-0.155608385801315,-0.037845112383366,0.024168945848942,-0.047870863229036,-0.127355590462685,0.060129102319479,-0.004930198192596,-0.121985480189323,-0.087486147880554,-0.132942438125610,0.052897553890944,-0.121178321540356,-0.110400229692459,-0.164973482489586,0.018377561122179,0.080561459064484));
res += mul(Get(s2,-dx,0), float4x4(0.114243872463703,-0.015666872262955,0.067109107971191,0.120107047259808,0.146710604429245,0.080958165228367,0.005597121547908,-0.090739086270332,0.119544841349125,0.163194999098778,0.076287768781185,0.044453069567680,-0.021968932822347,-0.042296342551708,0.042311277240515,0.224189981818199));
res += mul(Get(s2,-dx,dy), float4x4(-0.050012461841106,0.063024304807186,-0.138602048158646,0.018069010227919,-0.168054178357124,-0.133696287870407,-0.006837461143732,0.092665262520313,-0.105759970843792,-0.111507184803486,0.034287031739950,0.115349113941193,-0.045830190181732,0.114822112023830,0.044249590486288,0.011149217374623));
res += mul(Get(s2,0,-dy), float4x4(-0.184892177581787,-0.221747830510139,0.015081821009517,-0.002536102198064,-0.071203127503395,0.034216012805700,-0.118288710713387,0.094606317579746,0.107037529349327,0.051982615143061,0.024418894201517,-0.074158065021038,-0.016843937337399,0.093390978872776,-0.105394490063190,0.092364519834518));
res += mul(Get(s2,0,0), float4x4(-0.086946032941341,-0.003696797648445,-0.082087926566601,0.039957545697689,0.044904068112373,0.034536186605692,0.029427330940962,0.024225605651736,0.117143861949444,-0.124391645193100,-0.058993015438318,0.010622710920870,-0.043484047055244,-0.072227790951729,-0.040128044784069,0.022766020148993));
res += mul(Get(s2,0,dy), float4x4(0.032390139997005,-0.090815760195255,-0.155529543757439,0.024237450212240,-0.057145263999701,-0.039146482944489,0.245145574212074,-0.067175857722759,-0.042282782495022,0.027377987280488,0.030250208452344,0.195441097021103,0.012732821516693,0.038509320467710,0.021364675834775,0.023854527622461));
res += mul(Get(s2,dx,-dy), float4x4(-0.166919365525246,-0.066272683441639,-0.027235692366958,0.079598076641560,-0.028158713132143,-0.019626049324870,0.013479289598763,-0.096615217626095,-0.001516661024652,0.087735079228878,0.137095376849174,0.031070230528712,-0.080077514052391,0.008859151042998,-0.202074170112610,0.001933137304150));
res += mul(Get(s2,dx,0), float4x4(0.049231171607971,0.018518399447203,-0.069239668548107,0.006499616429210,-0.079232968389988,-0.013593771494925,0.018390748649836,0.075953476130962,0.013358365744352,-0.049202997237444,0.162666052579880,0.026976970955729,-0.013104069977999,-0.161574617028236,-0.179844349622726,0.033343143761158));
res += mul(Get(s2,dx,dy), float4x4(-0.076241329312325,-0.196111500263214,-0.164181455969810,0.099527694284916,-0.033334452658892,-0.038509514182806,-0.071339711546898,-0.162803381681442,0.115828968584538,0.145227313041687,0.105915382504463,0.078908547759056,-0.157611683011055,-0.095615446567535,-0.005756557453424,0.068513639271259));
res += mul(Get(s3,-dx,-dy), float4x4(-0.078933350741863,0.037802457809448,-0.165631756186485,-0.083481520414352,0.050418570637703,-0.017505034804344,0.018668996170163,0.021455923095345,-0.115174993872643,-0.186417296528816,0.028825681656599,0.198992162942886,0.054028261452913,-0.309014737606049,-0.097707949578762,-0.134013250470161));
res += mul(Get(s3,-dx,0), float4x4(-0.060004983097315,-0.134950146079063,-0.088988192379475,-0.035229239612818,0.126298040151596,0.013650783337653,0.087763473391533,0.108425229787827,0.017698677256703,0.108586691319942,0.034570503979921,0.044195443391800,0.025224529206753,0.072909526526928,0.148129031062126,-0.018720582127571));
res += mul(Get(s3,-dx,dy), float4x4(-0.042748998850584,-0.270570755004883,0.073441118001938,-0.092294417321682,-0.029258001595736,0.076006904244423,0.003115040948614,-0.029487950727344,0.019861675798893,-0.025521807372570,0.071116797626019,0.232354819774628,-0.012368789874017,-0.149791955947876,-0.031243976205587,0.200064063072205));
res += mul(Get(s3,0,-dy), float4x4(0.093011170625687,-0.017008936032653,-0.138874471187592,-0.053113237023354,0.135529920458794,0.019123028963804,-0.183285698294640,-0.075643852353096,0.029978804290295,-0.098693571984768,0.002490682294592,-0.210015162825584,0.052007395774126,-0.012207021005452,-0.118544235825539,0.125783205032349));
res += mul(Get(s3,0,0), float4x4(-0.002783546457067,0.094086363911629,-0.032472837716341,-0.104847662150860,0.051064074039459,0.054343394935131,-0.033493559807539,0.055532544851303,0.065363064408302,0.074921265244484,0.153226241469383,0.154049068689346,0.064939491450787,-0.095878757536411,-0.086231090128422,0.272842824459076));
res += mul(Get(s3,0,dy), float4x4(0.214544236660004,0.128411054611206,0.051598403602839,-0.080675266683102,0.001653038547374,-0.031886626034975,-0.045885045081377,-0.018041476607323,0.115960374474525,-0.051357623189688,0.005905946716666,0.062274314463139,0.076015196740627,-0.228814721107483,-0.028049830347300,-0.175271198153496));
res += mul(Get(s3,dx,-dy), float4x4(-0.000794785039034,0.297027349472046,-0.010256566107273,0.163628041744232,0.117408141493797,0.244397237896919,-0.005288768559694,0.009231681004167,-0.078358814120293,0.018247881904244,-0.106452360749245,0.369166016578674,0.278540670871735,0.133903264999390,0.143571481108665,0.011168817989528));
res += mul(Get(s3,dx,0), float4x4(-0.131859511137009,0.155014574527740,-0.012306364253163,-0.000776420929469,0.066623054444790,0.047087810933590,-0.067515969276428,0.105845272541046,0.282791733741760,0.026159428060055,0.081903815269470,0.129332751035690,0.073623724281788,0.191672831773758,0.003244695486501,0.048205513507128));
res += mul(Get(s3,dx,dy), float4x4(0.152712181210518,0.143970191478729,0.230818673968315,-0.053637664765120,-0.060337778180838,0.033810354769230,0.116197675466537,-0.158693239092827,-0.101285450160503,-0.128786265850067,0.042268175631762,-0.058272711932659,0.170990288257599,0.116761155426502,0.348587870597839,-0.086407542228699));
return max(float4(0,0,0,0), res);
}
