sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.011916991323233,0.140938073396683,0.142088532447815,-0.047698870301247,0.024140998721123,-0.077175937592983,-0.051867496222258,-0.033626593649387,0.028528353199363,-0.027673628181219,-0.042809657752514,-0.081546716392040,-0.123127043247223,0.122640475630760,0.080901883542538,0.163970127701759));
res += mul(Get(s0,-dx,0), float4x4(-0.029758548364043,0.060532405972481,-0.126570850610733,-0.078001126646996,0.149242460727692,-0.061975102871656,0.112538628280163,-0.065619558095932,0.177167713642120,-0.072519235312939,0.177476525306702,0.099053665995598,-0.136733040213585,-0.010687771253288,0.112293668091297,-0.022322878241539));
res += mul(Get(s0,-dx,dy), float4x4(-0.174424454569817,-0.129973173141479,-0.111441843211651,0.102613702416420,-0.084613159298897,0.134768784046173,0.016337860375643,-0.061432279646397,0.163860261440277,-0.006275152321905,0.097186408936977,-0.225057244300842,0.000940364203416,-0.133002772927284,0.002776254201308,-0.040228351950645));
res += mul(Get(s0,0,-dy), float4x4(0.031017014756799,0.086184896528721,-0.024857627227902,-0.024715976789594,-0.074114799499512,-0.010691788978875,-0.019756566733122,-0.111607596278191,-0.004484787583351,0.062958724796772,0.018027018755674,0.014930752106011,-0.191258445382118,0.145085811614990,-0.173072561621666,0.046328540891409));
res += mul(Get(s0,0,0), float4x4(-0.077752567827702,0.252625018358231,0.014241117052734,0.014815839007497,0.200355172157288,-0.119806289672852,0.050906058400869,0.096592873334885,0.103695549070835,0.018853625282645,-0.210055008530617,0.082310929894447,-0.047814738005400,-0.042836714535952,0.036427129060030,0.010476690717041));
res += mul(Get(s0,0,dy), float4x4(0.064422905445099,-0.109647348523140,-0.043501649051905,0.077611744403839,-0.022421309724450,0.035111956298351,0.101168833673000,-0.059454377740622,-0.001799005200155,0.042231127619743,0.041414599865675,0.003022833494470,0.289722979068756,-0.135824233293533,0.092441774904728,0.176336690783501));
res += mul(Get(s0,dx,-dy), float4x4(0.039674438536167,0.058973386883736,0.088060736656189,0.114958494901657,-0.057330600917339,-0.104779206216335,-0.059859957545996,-0.187689602375031,-0.254931300878525,-0.165322303771973,-0.158075615763664,0.059418287128210,-0.189287662506104,-0.105472885072231,-0.057084418833256,0.173340648412704));
res += mul(Get(s0,dx,0), float4x4(0.169057160615921,0.005234301555902,0.109637252986431,-0.120793603360653,0.006516046356410,-0.028515662997961,0.005866008810699,-0.099013425409794,-0.073518037796021,-0.116602987051010,-0.194255113601685,0.058842223137617,-0.068662703037262,0.064260505139828,-0.123109929263592,-0.162498787045479));
res += mul(Get(s0,dx,dy), float4x4(0.096052214503288,-0.035239648073912,0.219634741544724,-0.057341981679201,0.070834875106812,-0.119719609618187,-0.127906173467636,-0.091731302440166,-0.115616366267204,-0.123106390237808,-0.120163284242153,-0.137641400098801,0.086937360465527,0.088424839079380,-0.045355334877968,0.015735890716314));
res += mul(Get(s1,-dx,-dy), float4x4(0.251790344715118,-0.042678967118263,0.097875557839870,-0.301019906997681,-0.056674625724554,-0.014956673607230,0.033169679343700,0.152029141783714,-0.085524156689644,0.066614747047424,-0.115867860615253,-0.035632338374853,-0.256955772638321,-0.193860813975334,-0.063238002359867,0.029121858999133));
res += mul(Get(s1,-dx,0), float4x4(0.295220077037811,0.004364507738501,0.081761367619038,-0.094986230134964,-0.095541805028915,0.154181048274040,0.139754921197891,-0.015298433601856,-0.092386901378632,-0.113942638039589,-0.183077976107597,0.012403197586536,-0.214359566569328,0.010677586309612,-0.133997336030006,0.013047466985881));
res += mul(Get(s1,-dx,dy), float4x4(0.162399262189865,-0.129195749759674,0.005714578554034,0.024390483275056,-0.155236810445786,0.196854382753372,0.026671469211578,0.084451712667942,0.039765454828739,-0.042104229331017,-0.014854461885989,-0.014635542407632,0.093256562948227,-0.123564399778843,-0.244669809937477,0.086345307528973));
res += mul(Get(s1,0,-dy), float4x4(0.178889617323875,0.146260619163513,-0.168626561760902,-0.050943579524755,0.085615672171116,-0.013101146556437,0.000424536381615,0.038477621972561,0.050913419574499,-0.023605400696397,-0.017833072692156,0.051571276038885,0.468229383230209,0.118454761803150,-0.034041594713926,-0.075334198772907));
res += mul(Get(s1,0,0), float4x4(0.070807851850986,-0.019662367179990,0.066105410456657,-0.020962607115507,-0.384760499000549,0.003494661767036,-0.011390184052289,0.058526299893856,0.061508357524872,0.086544200778008,-0.072979904711246,-0.023688066750765,0.188716664910316,-0.083387196063995,-0.005930838175118,-0.084788046777248));
res += mul(Get(s1,0,dy), float4x4(0.198942601680756,0.045569479465485,-0.075401395559311,-0.024775413796306,0.230351924896240,-0.056081771850586,0.099838249385357,0.129719838500023,0.067698679864407,-0.112479254603386,0.050422865897417,0.077090151607990,0.031309612095356,-0.053377188742161,-0.029450217261910,-0.011845944449306));
res += mul(Get(s1,dx,-dy), float4x4(0.004609803203493,0.049247115850449,-0.013585717417300,0.056260392069817,0.106860190629959,0.089176639914513,-0.005696493666619,-0.085206672549248,-0.032012160867453,0.027062812820077,-0.064688041806221,0.134819313883781,0.419972240924835,-0.064521834254265,-0.019290382042527,-0.096520431339741));
res += mul(Get(s1,dx,0), float4x4(-0.098179869353771,0.009723580442369,-0.024574268609285,0.179273024201393,0.076649129390717,0.155230417847633,-0.145701080560684,0.100995577871799,-0.168202131986618,-0.059095706790686,0.027427984401584,0.047049850225449,0.303263247013092,-0.139092415571213,0.087888382375240,0.026206890121102));
res += mul(Get(s1,dx,dy), float4x4(0.063624888658524,0.026321463286877,-0.069686569273472,-0.000594241078943,0.230578050017357,-0.125990986824036,0.032367765903473,0.146949470043182,0.027349328622222,-0.067865423858166,0.046404145658016,-0.006039289757609,-0.043235924094915,-0.125110164284706,-0.046930126845837,-0.075573638081551));
res += mul(Get(s2,-dx,-dy), float4x4(-0.011100107803941,0.009120144881308,-0.103018090128899,0.052757985889912,-0.030420139431953,0.040890771895647,0.140914186835289,0.204390555620193,0.154201537370682,-0.083671793341637,0.364094495773315,-0.161379218101501,0.109022445976734,0.126739695668221,0.037476114928722,0.035350725054741));
res += mul(Get(s2,-dx,0), float4x4(-0.068552635610104,-0.056997973471880,0.146535351872444,0.005806260742247,0.232463017106056,-0.029773980379105,0.018226325511932,0.042540315538645,0.062553949654102,-0.087280564010143,-0.080885097384453,0.042963288724422,0.003460427047685,0.000531859928742,-0.019418224692345,0.134546577930450));
res += mul(Get(s2,-dx,dy), float4x4(0.039840385317802,0.010233121924102,0.009123164229095,0.027549987658858,0.061143156141043,-0.036703042685986,-0.085487768054008,-0.123472407460213,0.007193597033620,0.031125860288739,0.268569558858871,-0.108441561460495,0.075481832027435,0.075635999441147,0.000560567597859,0.043759994208813));
res += mul(Get(s2,0,-dy), float4x4(-0.022416241466999,-0.176586583256721,0.111314892768860,0.011997625231743,0.099736563861370,0.041414495557547,0.045803327113390,0.088528290390968,0.223308995366096,0.031907837837934,0.120655998587608,-0.091656215488911,0.050513610243797,-0.089760132133961,-0.093304552137852,0.011076871305704));
res += mul(Get(s2,0,0), float4x4(-0.040055811405182,-0.090564876794815,0.049134213477373,-0.020441947504878,0.209736585617065,-0.132784366607666,0.196832031011581,-0.179563283920288,-0.056288462132215,-0.085597351193428,-0.062804967164993,-0.099147565662861,-0.011369296349585,0.169211655855179,-0.010910455137491,0.090224400162697));
res += mul(Get(s2,0,dy), float4x4(-0.162918791174889,-0.067042209208012,0.131838411092758,-0.055120456963778,-0.118927411735058,-0.054059155285358,0.064686633646488,-0.130148604512215,-0.010327394120395,0.073425211012363,-0.116727009415627,-0.147694602608681,-0.228624209761620,-0.118535481393337,-0.008416050113738,-0.310343861579895));
res += mul(Get(s2,dx,-dy), float4x4(-0.008673786185682,0.009589040651917,-0.052779693156481,-0.015855135396123,0.077945031225681,-0.216498225927353,0.048021133989096,-0.071129597723484,0.126358032226563,-0.013570552691817,0.083998084068298,0.082318879663944,-0.043359536677599,0.126984164118767,0.038963802158833,-0.132222160696983));
res += mul(Get(s2,dx,0), float4x4(-0.150882840156555,0.128400519490242,0.012342466041446,0.035143904387951,-0.010852161794901,0.054189514368773,-0.091663852334023,0.007091912906617,0.302491575479507,-0.077921293675900,-0.183429583907127,0.193510264158249,0.064449973404408,-0.161279752850533,-0.055834580212831,-0.045226946473122));
res += mul(Get(s2,dx,dy), float4x4(-0.084263652563095,-0.176885843276978,0.025087656453252,-0.122772701084614,0.233088016510010,0.113589875400066,-0.067950621247292,0.068757086992264,0.305198848247528,-0.049643959850073,0.129478991031647,0.008567000739276,0.141764834523201,-0.077285297214985,-0.006878113839775,0.019290052354336));
res += mul(Get(s3,-dx,-dy), float4x4(-0.043841883540154,-0.051105216145515,0.112225890159607,-0.135865390300751,0.094071291387081,-0.099450856447220,0.017965337261558,-0.217175096273422,-0.108106940984726,-0.049081370234489,0.214725136756897,-0.073569528758526,-0.004768928512931,0.012587502598763,0.124483183026314,0.016307486221194));
res += mul(Get(s3,-dx,0), float4x4(0.203943327069283,-0.085085317492485,-0.021840021014214,0.009162400849164,0.077095210552216,0.031976614147425,-0.026324590668082,-0.048188932240009,0.152402564883232,0.125684872269630,-0.028212714940310,0.039527989923954,0.007086346391588,-0.054403383284807,0.192746445536613,-0.034031912684441));
res += mul(Get(s3,-dx,dy), float4x4(0.258544653654099,0.075681321322918,-0.259787410497665,0.017710648477077,0.301518857479095,0.061513539403677,0.092746138572693,0.088874027132988,0.190979540348053,-0.035139020532370,0.047568343579769,-0.163120090961456,0.026032181456685,-0.012353113852441,0.002810224425048,0.162720426917076));
res += mul(Get(s3,0,-dy), float4x4(-0.113705776631832,0.210577592253685,-0.175960168242455,-0.032369051128626,-0.187285512685776,0.069443613290787,-0.157595112919807,0.020093586295843,-0.182418122887611,0.109238535165787,-0.073012083768845,-0.060995556414127,0.186380669474602,0.036782898008823,-0.160033538937569,-0.130571708083153));
res += mul(Get(s3,0,0), float4x4(0.023818837478757,0.003373600309715,0.003044973593205,0.050915949046612,0.021790124475956,0.117211572825909,0.043455239385366,0.017780974507332,0.098794691264629,-0.097574815154076,-0.095486827194691,0.006633468437940,-0.085459358990192,0.204830855131149,0.098905071616173,0.069269165396690));
res += mul(Get(s3,0,dy), float4x4(0.088616155087948,0.162810355424881,0.033927939832211,0.096035808324814,0.013141565956175,0.030451059341431,0.070008516311646,0.032701861113310,0.156543284654617,-0.154549509286880,-0.085651651024818,0.129785612225533,-0.072284214198589,-0.001512504182756,-0.048788685351610,0.063461825251579));
res += mul(Get(s3,dx,-dy), float4x4(0.010974730364978,0.109647028148174,0.063843108713627,0.074042588472366,-0.072481021285057,0.056766085326672,-0.106541574001312,-0.181940734386444,-0.172396004199982,-0.017276000231504,0.056597482413054,-0.010323880240321,0.140347480773926,-0.004870573990047,-0.056291811168194,-0.131957188248634));
res += mul(Get(s3,dx,0), float4x4(-0.308654606342316,0.231142342090607,-0.067031063139439,-0.275564968585968,-0.054972495883703,-0.030665133148432,-0.201512381434441,-0.032295104116201,0.004211640451103,-0.099706642329693,0.063289284706116,-0.087208017706871,0.143855541944504,0.077477976679802,-0.270107924938202,-0.104559496045113));
res += mul(Get(s3,dx,dy), float4x4(-0.211673200130463,-0.116229973733425,-0.113859854638577,0.128372281789780,0.039043512195349,0.102331511676311,0.121865250170231,-0.016131332144141,0.055513791739941,0.248578965663910,-0.081817418336868,0.088623486459255,-0.097323074936867,0.230338811874390,-0.038605198264122,-0.065274402499199));
return max(float4(0,0,0,0), res);
}
