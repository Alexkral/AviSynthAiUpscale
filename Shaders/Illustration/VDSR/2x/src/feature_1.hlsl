sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.097917199134827,-0.233315363526344,0.154347792267799,-0.010293903760612) * Get(-dx,-dy);
res += float4(0.047260131686926,-0.001607182668522,-0.015626931563020,-0.144705012440681) * Get(-dx,0);
res += float4(-0.115610353648663,-0.130509361624718,0.079467117786407,0.121107004582882) * Get(-dx,dy);
res += float4(-0.097975365817547,0.259884208440781,-0.234724193811417,0.012085960246623) * Get(0,-dy);
res += float4(0.170387059450150,0.077580027282238,-0.055085834115744,-0.029611164703965) * Get(0,0);
res += float4(-0.056018147617579,0.119354300200939,-0.118770428001881,0.004628969356418) * Get(0,dy);
res += float4(0.056643243879080,-0.212589845061302,-0.180029258131981,-0.039844159036875) * Get(dx,-dy);
res += float4(-0.117922276258469,-0.140509307384491,0.037831399589777,-0.208882480859756) * Get(dx,0);
res += float4(0.043952271342278,-0.114678598940372,0.009082849137485,-0.059497606009245) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
