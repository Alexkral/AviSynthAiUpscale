sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.081738486886024,0.068725615739822,-0.352863729000092,0.061206292361021) * Get(-dx,-dy);
res += float4(-0.156113520264626,0.269657760858536,-0.138482183218002,-0.060616396367550) * Get(-dx,0);
res += float4(-0.025464693084359,0.088213510811329,-0.017866706475616,-0.075129017233849) * Get(-dx,dy);
res += float4(-0.017101274803281,-0.123773902654648,-0.215325742959976,0.073038443922997) * Get(0,-dy);
res += float4(-0.038104578852654,-0.108490206301212,-0.083707325160503,-0.067020937800407) * Get(0,0);
res += float4(-0.068769834935665,-0.174372836947441,0.352780431509018,-0.090580500662327) * Get(0,dy);
res += float4(-0.036421213299036,-0.251554518938065,-0.041494932025671,0.060459546744823) * Get(dx,-dy);
res += float4(0.165665581822395,-0.266154915094376,-0.113357633352280,-0.062888637185097) * Get(dx,0);
res += float4(0.038055319339037,-0.340252727270126,0.040245480835438,-0.087876476347446) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
