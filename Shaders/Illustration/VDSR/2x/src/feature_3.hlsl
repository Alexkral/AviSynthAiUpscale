sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(-0.005682197865099,0.017952976748347,-0.016700979322195,-0.110772721469402) * Get(-dx,-dy);
res += float4(-0.008911850862205,-0.054963845759630,0.077503524720669,-0.025574024766684) * Get(-dx,0);
res += float4(-0.046822730451822,-0.015381237491965,-0.106567688286304,-0.026282234117389) * Get(-dx,dy);
res += float4(-0.018922202289104,-0.072264291346073,-0.173214733600616,-0.040379323065281) * Get(0,-dy);
res += float4(0.120199978351593,0.031644638627768,0.129988223314285,0.210136994719505) * Get(0,0);
res += float4(0.080026090145111,0.022098736837506,-0.039028275758028,-0.112917959690094) * Get(0,dy);
res += float4(-0.070178575813770,-0.016694772988558,-0.038966286927462,-0.033418629318476) * Get(dx,-dy);
res += float4(0.085420779883862,0.136944308876991,0.039084251970053,-0.054971002042294) * Get(dx,0);
res += float4(-0.066879659891129,-0.016688153147697,-0.078498341143131,-0.134667456150055) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
