sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.007676658686250,0.085831470787525,0.051022302359343,-0.032336760312319,0.008567804470658,0.056039746850729,0.045507699251175,0.005932322703302,-0.081325687468052,-0.094348013401031,-0.096042603254318,-0.007468244992197,0.067369416356087,-0.045899167656898,0.112599536776543,0.024312296882272));
res += mul(Get(s0,-dx,0), float4x4(0.118438981473446,0.009124184027314,-0.003360876347870,-0.038188595324755,-0.008584603667259,-0.018473146483302,0.046099655330181,-0.111921183764935,0.079310402274132,-0.069809824228287,0.133405268192291,0.002577998908237,-0.070942670106888,-0.128931090235710,0.215840563178062,-0.205633521080017));
res += mul(Get(s0,-dx,dy), float4x4(0.089027941226959,0.151177331805229,-0.055075660347939,-0.273704707622528,0.034278631210327,0.151195898652077,-0.052594646811485,-0.144837588071823,0.069754548370838,0.081679776310921,0.057845540344715,0.070185244083405,-0.064556203782558,0.065864995121956,-0.062944829463959,0.101629801094532));
res += mul(Get(s0,0,-dy), float4x4(0.024455042555928,0.106871187686920,-0.072329886257648,-0.056719239801168,-0.295062571763992,-0.009362663142383,0.075886286795139,0.023338792845607,-0.008775628171861,-0.003546614432707,0.046428687870502,0.175908178091049,0.039929751306772,-0.075992740690708,-0.179340139031410,0.090793542563915));
res += mul(Get(s0,0,0), float4x4(0.304241359233856,-0.134790703654289,0.019312828779221,0.021911818534136,0.129247352480888,0.041320703923702,0.072134681046009,-0.004526992794126,-0.034317400306463,-0.118854328989983,-0.182639181613922,0.014841084368527,-0.108084514737129,-0.125964701175690,-0.032177992165089,0.098501242697239));
res += mul(Get(s0,0,dy), float4x4(0.052622038871050,0.230723947286606,-0.000441458279965,-0.204775184392929,0.089508838951588,-0.030241066589952,0.021839452907443,0.013277332298458,-0.188779607415199,0.008795769885182,0.123063884675503,0.087024562060833,-0.064144179224968,0.078130595386028,0.039308965206146,0.058580048382282));
res += mul(Get(s0,dx,-dy), float4x4(-0.007667734287679,0.071643039584160,-0.000216406129766,-0.088186912238598,0.073455654084682,0.005348720587790,0.019130282104015,0.146995022892952,0.080199033021927,-0.190377324819565,-0.008512417785823,-0.023808605968952,-0.021904071792960,0.011914771981537,-0.030638424679637,-0.039445888251066));
res += mul(Get(s0,dx,0), float4x4(0.058483779430389,-0.019344976171851,-0.072125501930714,0.080287314951420,0.114115923643112,-0.011235078796744,-0.055462870746851,0.068979673087597,0.029779603704810,-0.023942291736603,-0.004397093318403,-0.038516420871019,-0.044430050998926,-0.057133775204420,-0.043522894382477,-0.142122805118561));
res += mul(Get(s0,dx,dy), float4x4(0.024403400719166,0.229913651943207,0.148972988128662,-0.026049558073282,-0.010469414293766,0.180843517184258,-0.072938837110996,0.050761874765158,0.082830652594566,0.074689716100693,0.110517360270023,0.030522737652063,-0.103769853711128,0.004397395532578,-0.049945503473282,0.009394456632435));
res += mul(Get(s1,-dx,-dy), float4x4(-0.177742928266525,0.086090005934238,0.113100469112396,0.042144831269979,-0.044210582971573,-0.273107707500458,-0.024372696876526,0.041647724807262,0.077899686992168,0.118251442909241,-0.227986931800842,0.084694005548954,-0.028040675446391,0.006100053433329,-0.001462835585698,-0.036017715930939));
res += mul(Get(s1,-dx,0), float4x4(0.014318034052849,-0.092080213129520,-0.070757433772087,0.024776816368103,-0.064393043518066,-0.030951743945479,-0.063764341175556,-0.115250475704670,0.019542738795280,-0.018859416246414,0.089784279465675,-0.118197314441204,0.082420967519283,0.126018270850182,0.077132225036621,0.097085498273373));
res += mul(Get(s1,-dx,dy), float4x4(-0.001430500415154,0.124197915196419,-0.079961434006691,-0.051280476152897,-0.027150485664606,-0.107970908284187,-0.038376230746508,-0.014403237961233,-0.020652566105127,0.125948593020439,0.151666402816772,-0.031081251800060,0.081388719379902,-0.091413870453835,0.049316812306643,-0.133674994111061));
res += mul(Get(s1,0,-dy), float4x4(-0.045954786241055,0.239592224359512,0.054231911897659,0.056682057678699,-0.178801730275154,-0.002811499871314,0.018238617107272,0.065702959895134,-0.036567497998476,0.104189239442348,0.016006991267204,-0.024777047336102,-0.068006321787834,-0.046900231391191,-0.232558071613312,-0.027487637475133));
res += mul(Get(s1,0,0), float4x4(-0.000492610910442,-0.149721145629883,0.027811119332910,0.163169056177139,0.107124812901020,0.000876488164067,0.262894451618195,-0.039367735385895,-0.018098853528500,-0.040430732071400,-0.027072910219431,-0.075428530573845,0.056581292301416,0.042502854019403,-0.026255251839757,-0.010987750254571));
res += mul(Get(s1,0,dy), float4x4(0.258820712566376,-0.128600969910622,-0.099442288279533,-0.010085458867252,-0.150651440024376,0.036421008408070,-0.041440047323704,-0.122638911008835,0.069143399596214,0.179953604936600,0.029159350320697,0.099041417241096,-0.090823099017143,0.065891921520233,-0.073550820350647,0.020941521972418));
res += mul(Get(s1,dx,-dy), float4x4(0.167918130755424,0.012040659785271,0.004616929218173,-0.199216619133949,-0.012414759956300,0.022292191162705,-0.042783215641975,0.084507949650288,-0.179967671632767,0.106857158243656,-0.110538586974144,0.006805480923504,-0.029270721599460,0.072279818356037,-0.065127454698086,0.022307055070996));
res += mul(Get(s1,dx,0), float4x4(-0.073481008410454,-0.249429345130920,-0.078741282224655,0.063651740550995,0.033549699932337,0.140135899186134,0.234795629978180,-0.160331800580025,0.041433837264776,0.032487269490957,0.044795796275139,0.070353217422962,0.102797344326973,0.054286975413561,-0.038130957633257,-0.123093210160732));
res += mul(Get(s1,dx,dy), float4x4(0.108816444873810,-0.110276184976101,-0.177166998386383,0.012946272268891,-0.095820523798466,-0.148987472057343,0.073199465870857,-0.148653045296669,-0.137410283088684,-0.041657526046038,-0.126050233840942,-0.081988655030727,-0.188778474926949,-0.090925432741642,-0.072315707802773,-0.181610420346260));
res += mul(Get(s2,-dx,-dy), float4x4(0.151287809014320,0.125155523419380,-0.053867649286985,0.113049782812595,-0.072555460035801,-0.190533861517906,0.185232505202293,-0.052955288439989,-0.007073396351188,-0.107601083815098,-0.023853538557887,0.011746236123145,-0.090139217674732,-0.055453345179558,-0.108162321150303,0.057091053575277));
res += mul(Get(s2,-dx,0), float4x4(0.051513899117708,0.013773583807051,-0.074700333178043,-0.063641332089901,-0.139927417039871,-0.127271011471748,0.204754114151001,0.049379233270884,-0.030526913702488,0.063685461878777,0.047084718942642,-0.173869267106056,0.198748365044594,-0.103615142405033,-0.011294203810394,-0.105369977653027));
res += mul(Get(s2,-dx,dy), float4x4(-0.168003037571907,0.049370776861906,-0.127703934907913,-0.046253185719252,0.002262749010697,-0.103917039930820,0.004152868408710,0.072459533810616,-0.003436438273638,0.152030900120735,0.154418453574181,-0.015750551596284,-0.020670916885138,0.094137087464333,-0.047950524836779,-0.072561964392662));
res += mul(Get(s2,0,-dy), float4x4(0.156655460596085,0.082056060433388,-0.008830516599119,0.022848270833492,-0.161074087023735,0.152636364102364,0.011448368430138,-0.019405243918300,-0.029689056798816,-0.143176853656769,-0.067386373877525,0.081086114048958,-0.178865641355515,0.144871383905411,0.109924577176571,0.072358191013336));
res += mul(Get(s2,0,0), float4x4(0.019974082708359,0.150977104902267,-0.055151443928480,-0.062468312680721,-0.130907639861107,0.170353159308434,-0.163792580366135,0.062894232571125,0.011777946725488,-0.086607336997986,0.003073407802731,0.168909057974815,0.015599806793034,-0.116556845605373,0.047590862959623,0.131142869591713));
res += mul(Get(s2,0,dy), float4x4(0.073956176638603,0.167196959257126,-0.142016857862473,0.026456469669938,-0.002339703263715,0.094165265560150,-0.010978985577822,-0.099851630628109,0.105939544737339,-0.170010298490524,0.034209348261356,0.075626879930496,-0.108247093856335,-0.068701289594173,-0.114372849464417,-0.003289648797363));
res += mul(Get(s2,dx,-dy), float4x4(0.031140329316258,0.017291234806180,-0.074928417801857,0.105709835886955,0.094222314655781,-0.016650345176458,0.023565480485559,0.048469703644514,-0.004910192918032,-0.078022651374340,0.050686884671450,-0.148158863186836,-0.042514186352491,-0.066919662058353,0.053715378046036,-0.024914430454373));
res += mul(Get(s2,dx,0), float4x4(-0.034168928861618,-0.003609110601246,0.116438850760460,0.140949413180351,0.268807321786880,0.064292475581169,0.139568626880646,0.017874434590340,0.018239321187139,-0.100660085678101,0.024621777236462,0.021569943055511,0.043571565300226,-0.015354080125690,0.028224663808942,0.099724210798740));
res += mul(Get(s2,dx,dy), float4x4(0.117654994130135,-0.091070510447025,0.135441243648529,0.099537424743176,0.095814436674118,0.062016315758228,0.053188737481833,-0.101680815219879,-0.140516206622124,0.156028568744659,0.069291763007641,0.107129931449890,0.081347972154617,0.011208423413336,0.050635293126106,0.144188150763512));
res += mul(Get(s3,-dx,-dy), float4x4(0.121997281908989,-0.040657103061676,-0.035879433155060,0.058784082531929,0.155696779489517,-0.125247657299042,-0.003148386254907,0.067056313157082,0.121361106634140,-0.043710764497519,-0.078693583607674,-0.145962402224541,0.051779758185148,-0.059444900602102,-0.248078569769859,0.093865469098091));
res += mul(Get(s3,-dx,0), float4x4(-0.104794129729271,-0.034744191914797,-0.096609950065613,-0.063003554940224,0.006380768958479,0.048355028033257,-0.100719869136810,-0.070424176752567,0.146382093429565,-0.012122137472034,-0.147232532501221,0.138369292020798,-0.017560018226504,-0.015287027694285,-0.011858233250678,-0.070007592439651));
res += mul(Get(s3,-dx,dy), float4x4(0.191117942333221,0.019350018352270,0.057659562677145,-0.012839555740356,0.238850817084312,-0.033440653234720,0.077431254088879,0.224801063537598,-0.128661349415779,-0.081980355083942,0.172317340970039,0.058869112282991,0.037307094782591,-0.051540948450565,-0.063358165323734,-0.058835174888372));
res += mul(Get(s3,0,-dy), float4x4(-0.143294468522072,0.029627410694957,0.059175878763199,0.044109236449003,-0.022283710539341,0.058544263243675,-0.117750778794289,-0.078356839716434,-0.082848653197289,-0.143223598599434,0.115676291286945,-0.027140311896801,0.104625068604946,0.173045262694359,0.147398218512535,0.111219786107540));
res += mul(Get(s3,0,0), float4x4(0.200889512896538,-0.046614523977041,-0.053873870521784,0.139886528253555,-0.053983792662621,-0.027915656566620,-0.010571222752333,-0.053849015384912,-0.136206075549126,0.109315954148769,-0.108466915786266,-0.079782798886299,-0.055692348629236,0.027777135372162,-0.051575414836407,0.118796996772289));
res += mul(Get(s3,0,dy), float4x4(-0.073329381644726,0.072734698653221,-0.130770325660706,0.108851924538612,-0.242964819073677,0.118750780820847,-0.095770142972469,-0.000596189347561,0.058194868266582,-0.016527540981770,0.074687659740448,-0.003079371759668,-0.191072717308998,-0.088829204440117,0.063663810491562,-0.121734023094177));
res += mul(Get(s3,dx,-dy), float4x4(-0.028582686558366,-0.011510213837028,-0.018207712098956,-0.043521255254745,0.092022560536861,-0.063076280057430,0.021949995309114,0.212994694709778,-0.086893908679485,0.049788314849138,0.198472842574120,0.073595732450485,0.029497360810637,-0.068838402628899,-0.158701807260513,0.033729158341885));
res += mul(Get(s3,dx,0), float4x4(0.285532176494598,-0.030727144330740,0.095128118991852,0.075064256787300,0.060573421418667,-0.064758062362671,-0.080041676759720,0.109313957393169,0.011222492903471,-0.019659521058202,0.027243064716458,-0.129096031188965,0.008807476609945,0.079423181712627,-0.033004749566317,0.039809998124838));
res += mul(Get(s3,dx,dy), float4x4(0.081550605595112,-0.022911569103599,0.004491068422794,-0.084600970149040,-0.044866122305393,-0.048352874815464,-0.155409380793571,-0.065266020596027,0.011208532378078,0.025500519201159,-0.021786857396364,0.059035543352365,0.045638434588909,-0.067103743553162,-0.066565379500389,-0.057349383831024));
return max(float4(0,0,0,0), res);
}
