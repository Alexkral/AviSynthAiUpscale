sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.214996039867401,0.060675650835037,-0.028704730793834,0.204474627971649,0.072425380349159,0.019011007621884,-0.008661092258990,0.020166162401438,-0.151468753814697,-0.020574577152729,0.016265168786049,0.048838812857866,0.118831381201744,-0.027585880830884,-0.028815431520343,0.020691553130746));
res += mul(Get(s0,-dx,0), float4x4(0.023298058658838,-0.048694845288992,-0.053057402372360,0.170853406190872,0.120464988052845,-0.089752949774265,-0.279522150754929,0.098909154534340,-0.071910016238689,0.085994429886341,0.033728517591953,-0.134250998497009,-0.053269162774086,0.019460819661617,0.010485985316336,-0.025612099096179));
res += mul(Get(s0,-dx,dy), float4x4(-0.064019255340099,-0.012490365654230,0.053237859159708,0.085270404815674,-0.077415101230145,-0.032219439744949,0.074122123420238,0.026815695688128,-0.145991340279579,-0.135801166296005,-0.062209684401751,-0.108704417943954,-0.038380574434996,-0.050917301326990,-0.019654827192426,0.028255581855774));
res += mul(Get(s0,0,-dy), float4x4(0.065430320799351,0.085280798375607,-0.003214299911633,-0.091567941009998,-0.057760965079069,-0.043261963874102,0.142443463206291,0.007399445865303,-0.060066707432270,-0.042247489094734,-0.019483488053083,0.009738137945533,0.024681339040399,0.106739759445190,-0.082029245793819,0.037230983376503));
res += mul(Get(s0,0,0), float4x4(0.083312958478928,-0.024117937311530,0.140631094574928,-0.117451354861259,0.074457943439484,-0.142877966165543,0.005471088457853,0.083384998142719,-0.020349441096187,0.080921679735184,0.005327435210347,0.091684274375439,-0.021030196920037,0.134382739663124,0.037690475583076,-0.080973140895367));
res += mul(Get(s0,0,dy), float4x4(-0.116610877215862,0.028823915868998,0.326812028884888,-0.172420486807823,0.019442077726126,0.032765690237284,0.277769714593887,-0.035396713763475,0.002930861897767,0.078455686569214,-0.017893960699439,-0.006858046632260,0.051396321505308,-0.005632612388581,-0.100566275417805,0.031059021130204));
res += mul(Get(s0,dx,-dy), float4x4(0.048281755298376,0.062413919717073,-0.049074046313763,-0.164643213152885,0.034504842013121,-0.055954273790121,-0.012389351613820,-0.039339303970337,-0.031407106667757,-0.069779753684998,-0.092384681105614,-0.055795282125473,0.006350335665047,-0.035333581268787,-0.090962938964367,0.272711962461472));
res += mul(Get(s0,dx,0), float4x4(0.021291218698025,-0.025261707603931,-0.005196265876293,-0.126659259200096,-0.033121395856142,-0.177493587136269,-0.117425434291363,-0.104483194649220,-0.017150700092316,0.124870754778385,-0.089485771954060,-0.059196732938290,0.031620819121599,-0.015489057637751,0.086010694503784,0.062261667102575));
res += mul(Get(s0,dx,dy), float4x4(0.028543228283525,0.030125046148896,0.069167584180832,-0.065669767558575,-0.077706582844257,0.155294477939606,0.099892497062683,-0.143587559461594,-0.148604422807693,-0.167163625359535,-0.096793815493584,-0.054477363824844,0.061515815556049,-0.078260399401188,-0.060290772467852,0.197280287742615));
res += mul(Get(s1,-dx,-dy), float4x4(-0.022410694509745,-0.068147689104080,0.078899405896664,0.073573708534241,-0.007121711503714,0.096856541931629,0.022248843684793,-0.089876078069210,-0.089752376079559,-0.045643135905266,0.189889565110207,0.059780497103930,0.191060200333595,0.042456954717636,-0.108728706836700,0.026161666959524));
res += mul(Get(s1,-dx,0), float4x4(-0.035158049315214,-0.129598841071129,0.114924795925617,0.268802016973495,-0.030569031834602,-0.006876091472805,0.131188392639160,-0.002342385938391,-0.035251855850220,0.003342231968418,-0.050799053162336,-0.127121284604073,0.017714878544211,-0.018091615289450,-0.076894916594028,0.029368629679084));
res += mul(Get(s1,-dx,dy), float4x4(-0.067591987550259,0.076119199395180,0.022832155227661,0.193609952926636,-0.054773908108473,-0.000174170592800,-0.083588987588882,0.137444600462914,0.057510778307915,-0.035748161375523,-0.109940923750401,-0.166250571608543,0.092538513243198,0.026762377470732,-0.025614144280553,-0.088754273951054));
res += mul(Get(s1,0,-dy), float4x4(0.167613595724106,0.069442316889763,-0.015507352538407,0.013860814273357,0.087130263447762,0.006239112466574,0.061196126043797,0.021052530035377,-0.057041227817535,-0.084992110729218,0.090309806168079,0.049466855823994,0.023324795067310,-0.009352035820484,-0.047744449228048,0.004796572960913));
res += mul(Get(s1,0,0), float4x4(-0.062257796525955,0.029239000752568,-0.083384357392788,-0.016114927828312,0.030503427609801,-0.089786045253277,0.119852073490620,0.183922290802002,-0.089524798095226,-0.039427384734154,0.002351236995310,0.073654793202877,0.083260521292686,-0.062340326607227,-0.041680533438921,-0.069902829825878));
res += mul(Get(s1,0,dy), float4x4(-0.165809586644173,0.181938305497169,0.127095893025398,-0.071180835366249,-0.064512729644775,-0.055774703621864,0.018826516345143,0.013404301367700,-0.023863064125180,-0.078873850405216,-0.098107844591141,0.097899124026299,0.203843891620636,-0.019351033493876,-0.131577670574188,-0.178766638040543));
res += mul(Get(s1,dx,-dy), float4x4(0.114399209618568,-0.111460484564304,0.014812225475907,-0.032307881861925,-0.142286643385887,-0.048017594963312,-0.054270330816507,0.092029534280300,0.018694339320064,0.107602126896381,0.127342402935028,0.015696667134762,-0.053918782621622,0.111605003476143,0.000351019843947,-0.054375384002924));
res += mul(Get(s1,dx,0), float4x4(0.090318337082863,-0.162155896425247,-0.090943798422813,-0.015818296000361,-0.001915631932206,-0.168035790324211,-0.068682201206684,0.108939893543720,-0.027657074853778,0.169813945889473,-0.011373408138752,0.019280267879367,-0.052261784672737,-0.097695805132389,0.011207597330213,-0.091525264084339));
res += mul(Get(s1,dx,dy), float4x4(-0.085511587560177,-0.143384128808975,0.060708183795214,-0.005777473095804,-0.012222667224705,-0.056588832288980,-0.028605744242668,0.002630167640746,-0.018186582252383,0.112556464970112,0.045485239475965,-0.042280714958906,0.061771187931299,-0.091014042496681,-0.033918429166079,-0.231761321425438));
res += mul(Get(s2,-dx,-dy), float4x4(-0.018263382837176,-0.048434853553772,-0.033419508486986,0.031465355306864,-0.065565951168537,0.074482463300228,-0.034983213990927,-0.086982503533363,-0.022365689277649,0.056045163422823,-0.030359186232090,0.089719913899899,-0.039582807570696,-0.128331586718559,-0.073058612644672,-0.041131559759378));
res += mul(Get(s2,-dx,0), float4x4(-0.019373562186956,-0.001219335012138,-0.070502154529095,0.175913006067276,-0.001215988304466,-0.019506568089128,-0.062084015458822,0.070189818739891,0.043107628822327,0.144340291619301,-0.026372920721769,-0.078042306005955,0.026576653122902,-0.174771726131439,-0.119385704398155,0.099338345229626));
res += mul(Get(s2,-dx,dy), float4x4(0.171582743525505,-0.012590561062098,-0.170369625091553,0.086774677038193,0.199656352400780,0.043970502912998,-0.114864081144333,-0.073863655328751,-0.038218393921852,0.147949218750000,-0.071457460522652,-0.170349344611168,-0.049255605787039,0.021062940359116,-0.096185311675072,0.072467699646950));
res += mul(Get(s2,0,-dy), float4x4(0.119884267449379,0.008357492275536,0.068800054490566,-0.069455690681934,-0.023230632767081,-0.123350895941257,-0.045779526233673,0.000697816256434,-0.065780922770500,0.054262362420559,-0.053344689309597,-0.024528417736292,-0.062575839459896,-0.053943671286106,-0.141349792480469,-0.065796464681625));
res += mul(Get(s2,0,0), float4x4(-0.079829767346382,0.225761383771896,0.208502829074860,-0.044109486043453,-0.164114177227020,0.018771724775434,0.012855400331318,-0.007248023059219,-0.114574328064919,-0.032192990183830,-0.047154538333416,-0.066995039582253,-0.037188552320004,0.040338899940252,-0.055554218590260,0.311338663101196));
res += mul(Get(s2,0,dy), float4x4(0.020753346383572,0.097509793937206,-0.018553810194135,-0.018332421779633,-0.112668693065643,0.164323180913925,0.172334283590317,-0.067917920649052,-0.001362854964100,-0.064868070185184,-0.117407344281673,0.078012287616730,-0.016568150371313,0.200454384088516,-0.081015378236771,0.038137856870890));
res += mul(Get(s2,dx,-dy), float4x4(-0.005510603077710,0.004237238783389,-0.020367680117488,-0.108874492347240,-0.021713471040130,-0.119605869054794,0.078454308211803,-0.069255053997040,0.194113463163376,0.226263016462326,0.052979186177254,-0.012331463396549,-0.016135333105922,-0.108791351318359,0.000366974796634,-0.169804707169533));
res += mul(Get(s2,dx,0), float4x4(-0.075164422392845,-0.021704966202378,-0.062346741557121,-0.157423749566078,-0.056588891893625,-0.036390408873558,0.067544907331467,0.066518023610115,0.197197273373604,-0.114028692245483,-0.001593184773810,0.025462694466114,-0.149766400456429,-0.100003607571125,-0.105746671557426,0.196423158049583));
res += mul(Get(s2,dx,dy), float4x4(0.005888754501939,-0.160423606634140,-0.078449785709381,0.046571969985962,-0.030452620238066,0.136519730091095,0.038056232035160,0.081334367394447,0.079531215131283,0.016412258148193,0.050209403038025,-0.055816669017076,-0.030116098001599,-0.022430464625359,-0.026245025917888,0.081397071480751));
res += mul(Get(s3,-dx,-dy), float4x4(-0.009086590260267,-0.299847245216370,-0.091551162302494,0.148536205291748,-0.088270522654057,0.092744380235672,0.175497725605965,0.033299230039120,-0.104545794427395,0.049928728491068,-0.033459652215242,0.012428099289536,0.058564729988575,-0.017119988799095,0.106060333549976,-0.071868643164635));
res += mul(Get(s3,-dx,0), float4x4(-0.038383044302464,0.257879555225372,0.180747926235199,-0.123119980096817,-0.053771458566189,0.015091064386070,0.100457660853863,0.001641579670832,-0.092555664479733,-0.051763318479061,-0.003998130094260,0.049368679523468,-0.119257360696793,-0.086115248501301,0.244726449251175,0.307093590497971));
res += mul(Get(s3,-dx,dy), float4x4(0.035342000424862,-0.050761014223099,-0.129089459776878,-0.202198535203934,-0.161387756466866,0.043922256678343,0.071993440389633,-0.082557097077370,-0.159566476941109,0.025262759998441,0.052025601267815,0.063423044979572,-0.218694940209389,0.078665442764759,0.385595589876175,0.015836602076888));
res += mul(Get(s3,0,-dy), float4x4(0.012088471092284,-0.030906559899449,0.014527945779264,0.046220157295465,0.055522929877043,0.122862279415131,0.120651759207249,0.088586270809174,-0.053576488047838,0.054647743701935,0.043228030204773,0.047343082726002,-0.051501374691725,-0.241265207529068,-0.015299696475267,-0.123865827918053));
res += mul(Get(s3,0,0), float4x4(0.001071201055311,0.335051178932190,-0.135298505425453,-0.005465250462294,0.194161981344223,0.030997669324279,0.088387168943882,0.011649584397674,-0.137695595622063,0.078010946512222,0.113192088901997,0.074879541993141,0.054177992045879,-0.097289368510246,0.091134585440159,0.159809902310371));
res += mul(Get(s3,0,dy), float4x4(0.025550877675414,0.012096202000976,-0.042059946805239,-0.149077087640762,0.001818936550990,-0.057804867625237,0.033122837543488,0.065603896975517,-0.155948802828789,0.036717250943184,-0.049097500741482,0.155327394604683,-0.061818674206734,-0.052065804600716,0.115478076040745,-0.049615420401096));
res += mul(Get(s3,dx,-dy), float4x4(-0.023499770089984,-0.209058374166489,0.077220588922501,0.026838049292564,0.001287286984734,0.086418472230434,0.086514040827751,0.025780880823731,0.001970770303160,0.168837279081345,-0.003214107593521,0.079152725636959,0.018178589642048,-0.158754482865334,-0.040319550782442,-0.114639334380627));
res += mul(Get(s3,dx,0), float4x4(0.019435197114944,0.120808593928814,-0.064697064459324,0.101335197687149,0.332544833421707,-0.032876025885344,0.057425484061241,0.010979728773236,-0.111586466431618,0.172126203775406,0.103360831737518,0.107570841908455,-0.038670457899570,-0.090807236731052,-0.041319932788610,0.201135933399200));
res += mul(Get(s3,dx,dy), float4x4(-0.017304040491581,-0.081247322261333,0.057381246238947,0.125298619270325,0.098191104829311,-0.019905582070351,-0.014804324135184,0.020334092900157,-0.096720062196255,-0.050595294684172,-0.074853196740150,0.173471063375473,0.001385627430864,0.053089864552021,0.033877179026604,0.017373310402036));
return max(float4(0,0,0,0), res);
}
