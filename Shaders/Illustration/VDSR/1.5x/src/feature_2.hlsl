sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.042811885476112,-0.190715089440346,-0.243610724806786,0.156524136662483) * Get(-dx,-dy);
res += float4(0.075475461781025,-0.019463619217277,0.433749914169312,0.494330823421478) * Get(-dx,0);
res += float4(0.040720961987972,0.097033344209194,-0.163718670606613,0.346772551536560) * Get(-dx,dy);
res += float4(-0.028912886977196,-0.297364175319672,0.148319691419601,0.049155309796333) * Get(0,-dy);
res += float4(-0.070144034922123,-0.104072622954845,-0.533001303672791,-0.173059925436974) * Get(0,0);
res += float4(-0.082978278398514,0.189813971519470,-0.052393186837435,-0.362215459346771) * Get(0,dy);
res += float4(-0.051812075078487,-0.217043161392212,0.224556744098663,-0.126714244484901) * Get(dx,-dy);
res += float4(-0.079778417944908,-0.081370882689953,0.115054227411747,0.239621907472610) * Get(dx,0);
res += float4(-0.069627933204174,0.069091528654099,0.431683719158173,-0.035158764570951) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
