sampler s0 : register(s0);
sampler s1 : register(s1);
sampler s2 : register(s2);
sampler s3 : register(s3);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(s, x, y)   tex2D(s, tex + float2(x, y))

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += mul(Get(s0,-dx,-dy), float4x4(0.125915303826332,-0.024390308186412,0.086275823414326,-0.023667236790061,-0.091220408678055,-0.076623462140560,0.034193828701973,0.024153972044587,0.056529186666012,0.055031828582287,0.041302923113108,-0.061893671751022,0.008751177228987,0.036965403705835,0.023685952648520,-0.072905756533146));
res += mul(Get(s0,-dx,0), float4x4(-0.072457864880562,-0.069440133869648,0.047202281653881,0.186051845550537,0.057054892182350,0.042749304324389,-0.064603790640831,-0.009749755263329,-0.106533177196980,-0.025428291410208,-0.020276874303818,0.082455210387707,-0.070341676473618,0.046285491436720,0.028574032709002,-0.076292440295219));
res += mul(Get(s0,-dx,dy), float4x4(0.072416394948959,0.122181646525860,0.070644877851009,0.057754233479500,-0.037949427962303,-0.013582705520093,0.009148474782705,-0.038988117128611,0.112552180886269,-0.096244007349014,0.196128711104393,-0.062524862587452,-0.066786520183086,-0.062661498785019,-0.036526307463646,-0.079630330204964));
res += mul(Get(s0,0,-dy), float4x4(-0.145789608359337,0.061867568641901,-0.045778233557940,-0.112556472420692,-0.164002940058708,0.081962957978249,-0.018075447529554,0.023827807977796,-0.048616006970406,0.043270129710436,-0.029913702979684,0.005514734890312,-0.096300706267357,0.047355890274048,-0.071994297206402,0.111632712185383));
res += mul(Get(s0,0,0), float4x4(-0.199581816792488,0.021717531606555,-0.105742573738098,0.016021477058530,0.073889531195164,0.044472396373749,0.026150794699788,0.038687828928232,-0.010598179884255,0.056113861501217,-0.007940400391817,0.192761272192001,-0.028669314458966,0.020465735346079,-0.086282953619957,-0.028241865336895));
res += mul(Get(s0,0,dy), float4x4(-0.048382744193077,0.095390997827053,-0.145086124539375,-0.118890292942524,-0.072768710553646,-0.037820845842361,-0.039562728255987,-0.064720854163170,0.031861964613199,0.063926614820957,0.139629155397415,-0.013265104964375,0.077147960662842,0.042117550969124,-0.075919114053249,-0.058984316885471));
res += mul(Get(s0,dx,-dy), float4x4(0.045932680368423,-0.062055297195911,0.103698022663593,-0.028951907530427,-0.079530939459801,0.092193409800529,0.158186301589012,-0.156048625707626,0.088358849287033,-0.068299919366837,0.109022215008736,-0.051194634288549,-0.140013113617897,-0.160268425941467,-0.035982280969620,0.040955856442451));
res += mul(Get(s0,dx,0), float4x4(-0.000642546801828,0.002092789392918,0.059264626353979,0.051547095179558,-0.109305106103420,0.073927901685238,-0.086067870259285,-0.045418243855238,-0.066524282097816,-0.038083665072918,-0.095349706709385,0.040076807141304,0.210982829332352,-0.059713084250689,-0.077792063355446,-0.106918364763260));
res += mul(Get(s0,dx,dy), float4x4(-0.011694622226059,0.004189744591713,0.022012175992131,0.085383571684361,-0.020908689126372,0.057491362094879,0.047001916915178,-0.076920546591282,0.109691575169563,0.051730651408434,0.070882365107536,-0.115338958799839,-0.121000930666924,0.098815262317657,0.062357764691114,-0.012281308881938));
res += mul(Get(s1,-dx,-dy), float4x4(-0.009040921926498,0.063922002911568,-0.008541770279408,-0.102930419147015,0.089942254126072,-0.116089612245560,0.050552900880575,-0.081941112875938,0.005224529653788,-0.051723353564739,0.032043632119894,-0.010897300206125,0.069531105458736,-0.069791734218597,0.007038356270641,-0.063701689243317));
res += mul(Get(s1,-dx,0), float4x4(0.040959641337395,-0.114364631474018,0.004546963144094,0.044581741094589,-0.067523263394833,-0.094122529029846,0.134361848235130,0.037489917129278,-0.019177164882421,-0.019281961023808,0.027300506830215,0.064509630203247,0.075437568128109,-0.067884325981140,-0.048730816692114,0.077979318797588));
res += mul(Get(s1,-dx,dy), float4x4(0.042922761291265,-0.051640566438437,-0.090900614857674,-0.112147897481918,0.084738977253437,0.026842275634408,-0.044670868664980,-0.068572558462620,-0.039951764047146,-0.032627142965794,-0.186495751142502,-0.085018858313560,-0.046508379280567,-0.149711981415749,-0.058508932590485,0.096320077776909));
res += mul(Get(s1,0,-dy), float4x4(0.053812190890312,-0.154414042830467,0.028852595016360,-0.091415107250214,0.010649728588760,0.010971092619002,-0.048948168754578,0.006326834205538,0.012030274607241,-0.121124498546124,-0.040994886308908,0.018282635137439,0.002490105573088,0.088034436106682,-0.102482244372368,0.059627983719110));
res += mul(Get(s1,0,0), float4x4(-0.050853874534369,0.010712254792452,-0.171052142977715,-0.067483432590961,-0.018825538456440,0.068731777369976,0.140753164887428,0.051950015127659,0.041651207953691,-0.060874477028847,-0.049374308437109,0.171699628233910,0.009689296595752,-0.064330324530602,0.054885502904654,0.022339064627886));
res += mul(Get(s1,0,dy), float4x4(0.032391555607319,-0.013295507058501,-0.053123120218515,-0.026437446475029,-0.006788825616241,0.029336642473936,0.003815044416115,0.023967089131474,0.025853510946035,-0.079680025577545,-0.062906667590141,0.101565964519978,0.036691706627607,-0.162779986858368,-0.127818495035172,0.069747596979141));
res += mul(Get(s1,dx,-dy), float4x4(-0.090787179768085,-0.045959051698446,0.017746558412910,0.048642229288816,0.045487534254789,-0.009450824931264,0.071552351117134,0.016346206888556,0.042472511529922,0.019695667549968,-0.048954904079437,-0.002544181421399,-0.007845121435821,-0.025529339909554,0.034293830394745,-0.053248271346092));
res += mul(Get(s1,dx,0), float4x4(-0.084611989557743,-0.058293204754591,0.116912245750427,-0.050170369446278,0.158355578780174,-0.022267401218414,0.012830285355449,0.069872386753559,0.040548581629992,-0.008556423708797,-0.046271268278360,-0.219088628888130,0.192174538969994,0.036095950752497,-0.020808950066566,-0.007452722173184));
res += mul(Get(s1,dx,dy), float4x4(0.034511242061853,-0.056735940277576,-0.038241159170866,-0.080262541770935,-0.001061904826201,-0.089530169963837,0.044507220387459,0.056244488805532,0.018270267173648,-0.039124716073275,-0.091357477009296,0.069091498851776,0.057532772421837,-0.057884797453880,0.018472714349627,0.053600329905748));
res += mul(Get(s2,-dx,-dy), float4x4(-0.022592380642891,-0.018166420981288,-0.043004952371120,0.078165180981159,0.019308088347316,-0.079955115914345,-0.119092002511024,0.047113023698330,0.052932169288397,0.008932460099459,-0.031918045133352,0.102382212877274,-0.081539705395699,0.032079059630632,-0.028235815465450,-0.061275985091925));
res += mul(Get(s2,-dx,0), float4x4(-0.051173411309719,0.005787965841591,0.033045928925276,0.028060855343938,-0.015889262780547,-0.031783718615770,0.065670639276505,-0.085266552865505,0.045971445739269,0.027915678918362,-0.092189580202103,-0.043873224407434,0.034863557666540,0.012708857655525,-0.080872379243374,0.006451888009906));
res += mul(Get(s2,-dx,dy), float4x4(-0.167561993002892,0.004983340855688,0.059530295431614,-0.039656549692154,-0.013949215412140,-0.028134252876043,-0.047643873840570,-0.028265122324228,0.044407729059458,-0.065816543996334,-0.033042076975107,-0.011364663019776,0.025771429762244,0.034750245511532,0.025805074721575,0.034667257219553));
res += mul(Get(s2,0,-dy), float4x4(0.014713096432388,0.073104701936245,0.014567843638361,0.036005686968565,0.098508574068546,0.014823721721768,-0.011909336782992,0.088112778961658,0.186009004712105,0.042541343718767,-0.018383942544460,0.005157961975783,-0.086912617087364,0.009061596356332,0.047068767249584,-0.076030284166336));
res += mul(Get(s2,0,0), float4x4(-0.045909672975540,-0.097809836268425,0.009348467923701,0.006297754589468,0.046506468206644,0.057068206369877,-0.008907681331038,0.073473669588566,-0.044637061655521,-0.004898201208562,0.145284771919250,-0.018653668463230,-0.013480064459145,-0.033006671816111,0.056217160075903,0.074891738593578));
res += mul(Get(s2,0,dy), float4x4(-0.004235030617565,0.080799661576748,0.000511725258548,-0.052280742675066,0.034284275025129,0.059171929955482,0.038616586476564,0.074056386947632,-0.005660659167916,-0.115528240799904,-0.104686215519905,-0.019122922793031,-0.051177192479372,0.062442924827337,-0.025685377418995,0.040296394377947));
res += mul(Get(s2,dx,-dy), float4x4(-0.098978355526924,0.094568878412247,-0.007669265381992,0.010770981200039,0.092269532382488,0.065052337944508,0.093350514769554,0.066253378987312,0.019611002877355,-0.039951864629984,0.113947808742523,0.051502101123333,-0.133126646280289,0.002201384631917,0.043494161218405,-0.016886457800865));
res += mul(Get(s2,dx,0), float4x4(0.058319281786680,0.035328336060047,0.009938830509782,-0.110340654850006,-0.041159693151712,-0.003701151115820,-0.142723858356476,0.082514286041260,-0.080661699175835,0.004341501742601,0.003679852234200,-0.040267989039421,0.059273790568113,-0.006293857935816,-0.028946897014976,0.044367987662554));
res += mul(Get(s2,dx,dy), float4x4(-0.058847859501839,-0.059675861150026,-0.024107668548822,-0.048209059983492,-0.004570171702653,-0.010183286853135,0.017122725024819,-0.027336275205016,-0.031011098995805,0.028627132996917,0.047995384782553,-0.011286686174572,0.264853477478027,-0.076305240392685,0.064920499920845,-0.103309012949467));
res += mul(Get(s3,-dx,-dy), float4x4(0.013181134127080,0.046731833368540,0.016033297404647,-0.080833651125431,-0.095296226441860,0.061504229903221,-0.054759286344051,0.013990458101034,0.004312182310969,0.081900112330914,-0.057357676327229,0.114640317857265,0.004307080060244,0.034150306135416,-0.049123965203762,0.073487877845764));
res += mul(Get(s3,-dx,0), float4x4(0.026585027575493,-0.055310033261776,-0.027824340388179,0.004836578853428,-0.140649244189262,0.149387761950493,-0.102375142276287,0.062178160995245,-0.040101889520884,0.016333766281605,-0.063310727477074,0.117365285754204,-0.016719473525882,0.068811073899269,-0.050430383533239,-0.080485105514526));
res += mul(Get(s3,-dx,dy), float4x4(-0.057215139269829,0.049555376172066,-0.120602704584599,-0.022744165733457,-0.122271731495857,0.044192723929882,0.088771663606167,0.006096413824707,0.081346996128559,0.003002563957125,0.089450389146805,0.068063862621784,-0.177204340696335,-0.083859354257584,0.073694668710232,-0.005513818934560));
res += mul(Get(s3,0,-dy), float4x4(-0.064839184284210,-0.087337709963322,0.156904503703117,0.052427742630243,-0.063400045037270,-0.120865367352962,0.063331671059132,0.010286518372595,-0.022640874609351,0.114541679620743,-0.053323581814766,0.091909788548946,-0.088884189724922,0.090073816478252,0.126593962311745,0.044361926615238));
res += mul(Get(s3,0,0), float4x4(0.053016226738691,0.008491568267345,0.032396446913481,-0.016092004254460,0.075145490467548,-0.030839130282402,-0.008064737543464,0.044795412570238,-0.051302038133144,-0.081483565270901,-0.108826287090778,0.036813598126173,0.067718818783760,-0.124072812497616,0.031203113496304,0.083079822361469));
res += mul(Get(s3,0,dy), float4x4(-0.013882185332477,-0.033800322562456,-0.038373820483685,-0.057457089424133,-0.001101674162783,0.026820158585906,-0.024929314851761,0.051914781332016,0.030607189983130,-0.034244611859322,-0.099294506013393,-0.011153711937368,-0.043908789753914,0.030917247757316,0.047058306634426,-0.012856598012149));
res += mul(Get(s3,dx,-dy), float4x4(-0.012401677668095,-0.007491751108319,-0.010100929997861,0.012491367757320,0.054982118308544,-0.045386407524347,0.072476379573345,-0.104490660130978,-0.100386284291744,-0.102134004235268,-0.031858701258898,-0.014779635705054,-0.048008982092142,-0.126692444086075,-0.038686305284500,0.047154273837805));
res += mul(Get(s3,dx,0), float4x4(0.015982948243618,-0.092915266752243,-0.052622854709625,-0.027454201132059,0.130574494600296,0.133343622088432,-0.113826863467693,0.101890273392200,-0.188902005553246,0.017621615901589,0.046366084367037,-0.044399015605450,-0.004418061114848,0.050780419260263,-0.064005516469479,0.090780340135098));
res += mul(Get(s3,dx,dy), float4x4(0.000319441256579,-0.038825981318951,-0.060668755322695,-0.072703756392002,-0.045829981565475,-0.004299470689148,-0.185383364558220,-0.049298599362373,0.071530342102051,0.027742134407163,-0.166781231760979,-0.013853843323886,-0.063610114157200,0.014561214484274,-0.007583626545966,0.165299028158188));
return max(float4(0,0,0,0), res);
}
