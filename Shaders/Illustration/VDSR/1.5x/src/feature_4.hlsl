sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.051955796778202,-0.049582198262215,-0.071576610207558,-0.067402206361294) * Get(-dx,-dy);
res += float4(0.039189692586660,-0.038918782025576,-0.011872402392328,-0.049551717936993) * Get(-dx,0);
res += float4(-0.073357805609703,0.032963957637548,-0.005773953162134,-0.164122447371483) * Get(-dx,dy);
res += float4(0.099610105156898,-0.027855202555656,-0.357069939374924,-0.007272795308381) * Get(0,-dy);
res += float4(-0.297487288713455,0.020309297367930,-0.070359908044338,0.142009466886520) * Get(0,0);
res += float4(0.229553788900375,0.032863233238459,0.137469053268433,0.019038876518607) * Get(0,dy);
res += float4(0.012153405696154,-0.124744452536106,-0.159335866570473,-0.000878255814314) * Get(dx,-dy);
res += float4(0.113034613430500,-0.094683691859245,0.088200077414513,-0.063189461827278) * Get(dx,0);
res += float4(-0.101278290152550,-0.074181564152241,0.010084383189678,0.023711020126939) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
