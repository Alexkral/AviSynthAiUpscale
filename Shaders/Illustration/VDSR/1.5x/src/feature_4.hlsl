sampler s0 : register(s0);
float2 p1 :  register(c1);

#define dx   (p1[0])
#define dy   (p1[1])
#define Get(x, y)   tex2D(s0, tex + float2(x, y))[0]

float4 main(float2 tex : TEXCOORD0) : COLOR
{
float4 res = float4(0,0,0,0);
res += float4(0.122840784490108,0.144221842288971,-0.102298371493816,-0.008606385439634) * Get(-dx,-dy);
res += float4(0.168928250670433,-0.000010714717973,-0.211338058114052,-0.084342151880264) * Get(-dx,0);
res += float4(0.094635643064976,-0.156194269657135,-0.178687721490860,-0.300928145647049) * Get(-dx,dy);
res += float4(-0.099081523716450,0.107595376670361,-0.101526506245136,0.167885735630989) * Get(0,-dy);
res += float4(-0.179625436663628,-0.020048933103681,-0.023874111473560,0.102597758173943) * Get(0,0);
res += float4(-0.137679934501648,-0.199485704302788,-0.002809341298416,-0.334516346454620) * Get(0,dy);
res += float4(-0.108054891228676,0.005122277885675,-0.059085186570883,0.009153720922768) * Get(dx,-dy);
res += float4(-0.185200765728951,-0.052087306976318,0.102414995431900,0.071457631886005) * Get(dx,0);
res += float4(-0.129014551639557,-0.152960658073425,0.135929882526398,-0.256303906440735) * Get(dx,dy);
return max(float4(0,0,0,0), res);
}
